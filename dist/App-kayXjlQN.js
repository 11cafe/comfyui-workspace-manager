var Ti=Object.defineProperty;var Ni=(r,e,n)=>e in r?Ti(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var Ke=(r,e,n)=>(Ni(r,typeof e!="symbol"?e+"":e,n),n);import{g as Dr,r as D,j as b,M as Xe,a as Qe,b as et,c as tt,d as nt,e as rt,B as xe,u as jn,_ as Ct,f as Bi,h as Vi,i as Ui,k as Pr,l as $i,m as ie,n as ae,o as Wi,p as Mr,q as Rr,R as oe,s as it,t as Hi,S as Gi,I as Dn,v as Pn,w as tr,x as zt,y as Mn,z as Zi,P as Ar}from"./workspace-manager-7VfwGuMm.js";import{app as De}from"/scripts/app.js";import{api as Yi}from"/scripts/api.js";import{A as Ji,a as Ki,b as qi,B as he,c as Xi,d as Qi,H as we,T as Fr,I as Se,S as ct,e as Oe,f as ut,u as ea,V as nr,g as zr,F as pt,h as ta,i as Lr,M as gt,j as Rn,k as Dt,l as Te,m as na,D as ra,n as ia,o as aa,P as An,p as Fn,q as zn,r as Ln,s as Tn,t as oa,v as Nn,w as Ee,x as Tr,C as Ot,y as Bn,z as Vn,E as Un,G as Nr,J as sa,K as la,L as Br,N as rr,O as ca,Q as ua}from"./chunk-TK6VMDNP-BxRupdqr.js";var Vr={exports:{}},da="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ha=da,fa=ha;function Ur(){}function $r(){}$r.resetWarningCache=Ur;var pa=function(){function r(i,t,o,s,a,l){if(l!==fa){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}r.isRequired=r;function e(){return r}var n={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:$r,resetWarningCache:Ur};return n.PropTypes=n,n};Vr.exports=pa();var ma=Vr.exports;const ot=Dr(ma);let Lt;const va=new Uint8Array(16);function ga(){if(!Lt&&(Lt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Lt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lt(va)}const Ie=[];for(let r=0;r<256;++r)Ie.push((r+256).toString(16).slice(1));function ba(r,e=0){return Ie[r[e+0]]+Ie[r[e+1]]+Ie[r[e+2]]+Ie[r[e+3]]+"-"+Ie[r[e+4]]+Ie[r[e+5]]+"-"+Ie[r[e+6]]+Ie[r[e+7]]+"-"+Ie[r[e+8]]+Ie[r[e+9]]+"-"+Ie[r[e+10]]+Ie[r[e+11]]+Ie[r[e+12]]+Ie[r[e+13]]+Ie[r[e+14]]+Ie[r[e+15]]}const ya=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ir={randomUUID:ya};function Pt(r,e,n){if(ir.randomUUID&&!e&&!r)return ir.randomUUID();r=r||{};const i=r.random||(r.rng||ga)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=i[t];return e}return ba(i)}async function bt(r){try{const e=await fetch(`/workspace/get_db?table=${r}`);return e.ok?await e.json():void 0}catch(e){console.error("Error fetching workspace:",e);return}}async function je(r,e){const n=r+"/"+Date.now()+".json";xa(n,e);try{return await(await fetch("/workspace/save_db",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({table:r,json:e})})).text()}catch(i){console.error("Error saving workspace:",i)}}async function wa(r,e){try{return await(await fetch("/workspace/update_file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:r,json_str:e})})).text()}catch(n){alert("Error saving workflow .json file: "+n),console.error("Error saving workspace:",n)}}async function Wr(r,e=!0){try{return await(await fetch("/workspace/delete_file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:r,deleteEmptyFolder:e})})).text()}catch(n){console.error("Error deleting file:",n)}}async function xa(r,e){try{return await(await fetch("/workspace/save_backup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:r,json_str:e})})).text()}catch(n){console.error("Error saving workspace backup:",n)}}async function Sa(r){try{return await(await fetch("/workspace/list_backup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dir:r})})).text()}catch(e){console.error("Error saving workspace:",e)}}async function gn(r){try{return await(await fetch("/workspace/get_system_dir",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({absolute_dir:r})})).json()}catch(e){console.error("Error getting workflows dir:",e)}}async function _a(){try{return await(await fetch("/workspace/open_workflow_file_browser",{method:"POST",headers:{"Content-Type":"application/json"}})).json()}catch(r){console.error("Error open workflows folder:",r)}}const bn="CWM_WORKFLOWS_SORT_TYPE";var Pe=(r=>(r.RECENTLY_MODIFIED="newest",r.OLDEST_MODIFIED="oldest",r.AZ="name A-Z",r.ZA="name Z-A",r))(Pe||{});const ka="comfyspace_tracking",Ca="http://localhost:8188/";function $n(r){if(r.name==null)return;const e=Wn(r);e!=null&&Wr(e)}function Wn(r){let e=Oa(r.name)+".json",n=r.parentFolderID;for(;n!=null;){const i=be==null?void 0:be.get(n);if(i==null)break;e=`${i.name}/${e}`,n=i.parentFolderID??void 0}return e??null}function Hr(r){const e=Wn(r);let n=de==null?void 0:de.getSetting("myWorkflowsDir");return n==null?(console.error("myWorkflowsDir is not set"),null):(n.endsWith("/")||(n=n+"/"),n+e)}function Oa(r){return r=r.replace(/[\\/:*?"<>|]/g,"_"),r.trim()}function Mt(r,e=!1){const n=new Date(r),i=String(n.getDate()).padStart(2,"0"),t=String(n.getMonth()+1).padStart(2,"0"),o=n.getFullYear(),s=String(n.getHours()).padStart(2,"0"),a=String(n.getMinutes()).padStart(2,"0"),l=String(n.getSeconds()).padStart(2,"0");let c=`${t}-${i}-${o} ${s}:${a}`;return e?c+`:${l}`:c}function Ia(r=[],e=Pe.RECENTLY_MODIFIED){const n=[...r];if(n.length)switch(e){case Pe.AZ:n.sort((i,t)=>i.name.localeCompare(t.name));break;case Pe.ZA:n.sort((i,t)=>t.name.localeCompare(i.name));break;case Pe.RECENTLY_MODIFIED:n.sort((i,t)=>t.updateTime-i.updateTime);break;case Pe.OLDEST_MODIFIED:n.sort((i,t)=>i.updateTime-t.updateTime);break}return n}function Gt(r=!0){wt().forEach(e=>{const n=Hr(e);e.filePath!=n&&(e.filePath!=null&&Wr(e.filePath,r),jt(e))})}const Ht=(r,e=Pe.RECENTLY_MODIFIED)=>{const n=[...r];switch(e){case Pe.AZ:n.sort((i,t)=>i.name.localeCompare(t.name));break;case Pe.ZA:n.sort((i,t)=>t.name.localeCompare(i.name));break;case Pe.RECENTLY_MODIFIED:n.sort((i,t)=>t.updateTime-i.updateTime);break;case Pe.OLDEST_MODIFIED:n.sort((i,t)=>i.updateTime-t.updateTime);break}return n};function Gr(r){var i;let e=r??"Untitled Flow";const n=(i=wt())==null?void 0:i.map(t=>t.name);if(n.includes(e)){let t=2,o=!0;for(;o;)n.includes(`${e} ${t}`)?t++:(e=`${e} ${t}`,o=!1)}return e}function Ea(r){return new Promise((e,n)=>{const i=new FileReader;i.onload=t=>{const o=new Uint8Array(t.target.result),s=new DataView(o.buffer);s.getUint32(0)!==2303741511&&(console.error("Not a valid PNG file"),n());let a=8;const l={};for(;a<o.length;){const c=s.getUint32(a),p=String.fromCharCode(...o.slice(a+4,a+8));if(p==="tEXt"||p=="comf"){let h=a+8;for(;o[h]!==0;)h++;const y=String.fromCharCode(...o.slice(a+8,h)),u=o.slice(h+1,a+8+c),w=Array.from(u).map(f=>String.fromCharCode(f)).join("");l[y]=w}a+=12+c}e(l)},i.readAsArrayBuffer(r)})}const ja=r=>{var n;const e=(n=de==null?void 0:de.getSetting("shortcuts"))==null?void 0:n.save;return e?Da(r,e):!1},Da=(r,e)=>{const n=e.split("+"),i={Control:r.ctrlKey,Shift:r.shiftKey,Alt:r.altKey,Command:r.metaKey,[r.key.toUpperCase()]:!0};return n.every(t=>i[t])};function Zr(r){const e=["png","jpg","jpeg","gif","bmp","webp"],n=r.split(".").pop();return n!=null&&e.includes(n)}function Pa(r){return`/workspace/view_media?filename=${r}`}const Yr="backup",mt="workspace";let qe=null;function Jr(){return new Promise((r,e)=>{const n=indexedDB.open("WorkspaceDB",3);n.onupgradeneeded=i=>{const t=i.target.result;t.objectStoreNames.contains(mt)||t.createObjectStore(mt,{keyPath:"id"})},n.onsuccess=i=>{r(i.target.result)},n.onerror=i=>{e(i.target.error)}})}async function Ma(r){try{return qe==null&&(qe=await Jr()),new Promise((e,n)=>{if(qe==null)return n("indexDB is null");const o=qe.transaction([mt],"readwrite").objectStore(mt).put({id:Yr,value:r});o.onsuccess=()=>e(),o.onerror=()=>n(o.error)})}catch(e){console.error("Error while opening database:",e)}}async function ze(){try{const r=await Ba();await Ma(r)}catch(r){console.error("Error writing to IndexedDB:",r)}}async function Ra(){try{return qe==null&&(qe=await Jr()),new Promise((r,e)=>{if(qe==null)return e("indexDB is null");const t=qe.transaction([mt],"readonly").objectStore(mt).get(Yr);t.onsuccess=()=>{t.result?r(t.result.value):r(void 0)},t.onerror=()=>e(t.error)})}catch(r){console.error("Error while reading from database:",r)}}async function yt(){try{return await Ra()}catch(r){console.error("Error retrieving data from IndexedDB:",r)}}const st=class st{constructor(){}static async load(){return new st}async listByWorkflowID(e){const n=await this.getRecords();return Object.values(n).filter(i=>i.workflowID===e).sort((i,t)=>t.createTime-i.createTime)}async getRecords(){let e=await bt(st.TABLE_NAME),n=e!=null?JSON.parse(e):null;if(n==null){const i=await yt()??"{}";n=JSON.parse(i)[st.TABLE_NAME]}return n??{}}async get(e){return(await this.getRecords())[e]}async getLastestByWorkflowID(e){const n=await this.getRecords();return Object.values(n).filter(t=>t.workflowID===e).sort((t,o)=>o.createTime-t.createTime)[0]}async create(e){const n=await this.getLastestByWorkflowID(e.workflowID);if(n!=null&&n.json===e.json)return null;const i={id:Pt(),json:e.json,workflowID:e.workflowID,createTime:Date.now()},t=await this.getRecords();return t[i.id]=i,je(st.TABLE_NAME,JSON.stringify(t)),ze(),i}};Ke(st,"TABLE_NAME","changelogs");let Zt=st;const ft=class ft{constructor(){Ke(this,"records");this.records={}}static async load(){const e=new ft;let n=await bt(ft.TABLE_NAME),i=n!=null?JSON.parse(n):null;if(i==null){const t=await yt()??"{}";i=JSON.parse(t)[ft.TABLE_NAME]}return i!=null&&(e.records=i),e}listAll(){return Object.values(this.records)}getRecords(){return this.records}get(e){return this.records[e]}create(e){const n=this.generateUniqueName(e.name),i={id:Pt(),name:n,parentFolderID:e.parentFolderID??null,updateTime:Date.now(),createTime:Date.now(),type:"folder"};return this.records[i.id]=i,je("folders",JSON.stringify(this.records)),ze(),i}update(e){const n=this.records[e.id];if(n==null)return;const i={...n,...e};e.name!=null&&(i.updateTime=Date.now()),this.records[e.id]=i,je("folders",JSON.stringify(this.records)),ze(),Gt()}delete(e){delete this.records[e],wt().filter(i=>i.parentFolderID==e).forEach(i=>Ue(i.id,{parentFolderID:void 0})),je("folders",JSON.stringify(this.records)),ze(),Gt()}generateUniqueName(e){var t;let n=e??"New folder";const i=(t=this.listAll())==null?void 0:t.map(o=>o.name);if(i.includes(n)){let o=2,s=!0;for(;s;)i.includes(`${n} ${o}`)?o++:(n=`${n} ${o}`,s=!1)}return n}};Ke(ft,"TABLE_NAME","folders");let Yt=ft;class Aa{constructor(e){Ke(this,"tableName");this.tableName=e}async listAll(){const e=await this.getRecords();return Object.values(e)}async getRecords(){let e=await bt(this.tableName),n;try{n=e!=null?JSON.parse(e):null}catch{}if(n==null){const i=await yt()??"{}";n=JSON.parse(i)[this.tableName]}return n??{}}async get(e){return(await this.getRecords())[e]}async delete(e){const n=await this.getRecords();delete n[e],je(this.tableName,JSON.stringify(n)),ze()}}class Hn extends Aa{constructor(){super("media")}async listByWorkflowID(e){const n=await this.getRecords();return Object.values(n).filter(i=>i.workflowID===e).sort((i,t)=>t.createTime-i.createTime)}async getLastestByWorkflowID(e){const n=await this.getRecords();return Object.values(n).filter(t=>t.workflowID===e).sort((t,o)=>o.createTime-t.createTime)[0]}async create(e){var a;const n=e.localPath.split(".").pop();if(n==null)return null;const i={id:Pt(),localPath:e.localPath,workflowID:e.workflowID,createTime:Date.now(),format:n},t=((a=Ze(e.workflowID))==null?void 0:a.mediaIDs)??[],o=new Set(t).add(i.id);Ue(e.workflowID,{mediaIDs:Array.from(o),coverMediaPath:i.localPath});const s=await this.getRecords();return s[i.id]=i,je("media",JSON.stringify(s)),ze(),i}}Ke(Hn,"TABLE_NAME","media");async function Fa(){const r=await bt("tags");let e;if(r==null){const n=await yt()??"{}";e=JSON.parse(n).tags||{}}else e=JSON.parse(r??"{}")??{};return{tags:e,listAll(){return Object.values(e).sort((n,i)=>i.updateTime-n.updateTime)},upsert(n){return e[n]==null&&(e[n]={name:n,workflowIDs:[],updateTime:Date.now()}),e[n].updateTime=Date.now(),je("tags",JSON.stringify(e)),e[n]},delete(n){delete e[n],je("tags",JSON.stringify(e))}}}const lt=class lt{constructor(){Ke(this,"records");this.records={topBarStyle:{top:0,left:0},myWorkflowsDir:"",shortcuts:{save:"Shift+S"}}}listSettings(){return this.records}getSetting(e){return this.records[e]}upsert(e){this.records={...this.records,...e},je(lt.TABLE_NAME,JSON.stringify(this.records)),ze()}static async load(){const e=new lt,n=await bt(lt.TABLE_NAME);let i=n!=null?JSON.parse(n):null;if(i==null){const t=await yt()??"{}";i=JSON.parse(t)[lt.TABLE_NAME]||{}}if(!i.myWorkflowsDir){const t=await gn();i.myWorkflowsDir=`${t.dir_path}/my_workflows`}return e.records=i,e}};Ke(lt,"TABLE_NAME","userSettings");let Jt=lt;function Et(r){return r.type==="folder"}let le,pe=null,de=null,be=null,He=null,Fe=null;async function za(){const r=async()=>{const s=await bt("workflows");if(s==null){const a=await yt()??"{}";le=JSON.parse(a).workflows||{}}else le=JSON.parse(s)},e=async()=>{pe=await Fa()},n=async()=>{de=await Jt.load()},i=async()=>{be=await Yt.load()},t=async()=>{He=await Zt.load()},o=async()=>{Fe=new Hn};await Promise.all([r(),e(),n(),i(),t(),o()])}function yn(r,e){var o;if(le==null)return[];const n=Object.values(le).filter(s=>s.parentFolderID==r),i=((o=be==null?void 0:be.listAll())==null?void 0:o.filter(s=>s.parentFolderID==r))??[],t=[...n,...i];return Ht(t,e??Pe.RECENTLY_MODIFIED)}function Ue(r,e){if(le==null)return;const n=le[r];if(n==null)return;const i={...n,...e,id:r},t=JSON.stringify(n),o=JSON.stringify(i);if(t===o)return;let s=i;const a=Object.keys(e);if(a.length===1&&["tags","parentFolderID"].includes(a[0])||(s.updateTime=Date.now()),le[r]=s,ze(),je("workflows",JSON.stringify(le)),e.name!=null||e.parentFolderID!=null){$n(n),jt(i);return}e.json!=null&&jt(i)}function jt(r){const e=Wn(r);if(e==null)return;if(le!=null){const t=Hr(r);le[r.id].filePath=t??void 0,ze(),je("workflows",JSON.stringify(le))}const n=r.json,i=JSON.parse(n);i.extra[ka]={id:r.id,name:r.name},wa(e,JSON.stringify(i))}function cn({json:r,name:e,parentFolderID:n,tags:i}){if(le==null)throw new Error("workspace is not loaded");const t=Gr(e),o=Pt(),s=Date.now(),a={id:o,name:t,json:r,parentFolderID:n,updateTime:s,createTime:s,tags:i??[]};return le[o]=a,je("workflows",JSON.stringify(le)),ze(),jt(le[o]),le[o]}async function La(r){r.forEach(n=>{if(le==null)return;const i=Gr(n.name),t=Pt(),o=Date.now();le[t]={id:t,name:i,json:n.json,updateTime:o,createTime:o,tags:[]},jt(le[t])});const e=JSON.stringify(le);return ze(),await je("workflows",e)}function wt(r){if(le==null)throw new Error("workspace is not loaded");const e=Object.values(le);return Ia(e,r)}function Ze(r){if(le==null){console.error("workspace is not loaded");return}return le[r]}function Ta(r){if(le==null)return;const e=le[r];e&&$n({...e}),delete le[r],ze(),je("workflows",JSON.stringify(le))}function Na(r){r.forEach(n=>{if(le==null)return;const i=le[n];i&&$n({...i}),le&&delete le[n]});const e=JSON.stringify(le);ze(),je("workflows",e)}async function Ba(){const r=await(He==null?void 0:He.getRecords()),e=await(Fe==null?void 0:Fe.getRecords());return JSON.stringify({[Jt.TABLE_NAME]:de==null?void 0:de.records,tags:pe==null?void 0:pe.tags,workflows:le,[Yt.TABLE_NAME]:be==null?void 0:be.getRecords(),[Zt.TABLE_NAME]:r,[Hn.TABLE_NAME]:e})}var Va={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},Ua=Object.defineProperty,$a=Object.defineProperties,Wa=Object.getOwnPropertyDescriptors,Kt=Object.getOwnPropertySymbols,Kr=Object.prototype.hasOwnProperty,qr=Object.prototype.propertyIsEnumerable,ar=(r,e,n)=>e in r?Ua(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,or=(r,e)=>{for(var n in e||(e={}))Kr.call(e,n)&&ar(r,n,e[n]);if(Kt)for(var n of Kt(e))qr.call(e,n)&&ar(r,n,e[n]);return r},Ha=(r,e)=>$a(r,Wa(e)),Ga=(r,e)=>{var n={};for(var i in r)Kr.call(r,i)&&e.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&Kt)for(var i of Kt(r))e.indexOf(i)<0&&qr.call(r,i)&&(n[i]=r[i]);return n},ge=(r,e,n)=>{const i=D.forwardRef((t,o)=>{var s=t,{color:a="currentColor",size:l=24,stroke:c=2,children:p}=s,h=Ga(s,["color","size","stroke","children"]);return D.createElement("svg",or(Ha(or({ref:o},Va),{width:l,height:l,stroke:a,strokeWidth:c,className:`tabler-icon tabler-icon-${r}`}),h),[...n.map(([y,u])=>D.createElement(y,u)),...p||[]])});return i.propTypes={color:ot.string,size:ot.oneOfType([ot.string,ot.number]),stroke:ot.oneOfType([ot.string,ot.number])},i.displayName=`${e}`,i},Za=ge("arrow-back-up-double","IconArrowBackUpDouble",[["path",{d:"M13 14l-4 -4l4 -4",key:"svg-0"}],["path",{d:"M8 14l-4 -4l4 -4",key:"svg-1"}],["path",{d:"M9 10h7a4 4 0 1 1 0 8h-1",key:"svg-2"}]]),qt=ge("chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]),Ya=ge("chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]),Ja=ge("chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]),wn=ge("device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]),Xr=ge("download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),Ka=ge("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),qa=ge("file-import","IconFileImport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3",key:"svg-1"}]]),Xa=ge("folder-plus","IconFolderPlus",[["path",{d:"M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}]]),Gn=ge("folder","IconFolder",[["path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2",key:"svg-0"}]]),Qa=ge("grip-vertical","IconGripVertical",[["path",{d:"M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]),Qr=ge("history","IconHistory",[["path",{d:"M12 8l0 4l2 2",key:"svg-0"}],["path",{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5",key:"svg-1"}]]),eo=ge("list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]),to=ge("menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]),no=ge("moon","IconMoon",[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]]),ro=ge("photo","IconPhoto",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]),io=ge("pin-filled","IconPinFilled",[["path",{d:"M15.113 3.21l.094 .083l5.5 5.5a1 1 0 0 1 -1.175 1.59l-3.172 3.171l-1.424 3.797a1 1 0 0 1 -.158 .277l-.07 .08l-1.5 1.5a1 1 0 0 1 -1.32 .082l-.095 -.083l-2.793 -2.792l-3.793 3.792a1 1 0 0 1 -1.497 -1.32l.083 -.094l3.792 -3.793l-2.792 -2.793a1 1 0 0 1 -.083 -1.32l.083 -.094l1.5 -1.5a1 1 0 0 1 .258 -.187l.098 -.042l3.796 -1.425l3.171 -3.17a1 1 0 0 1 1.497 -1.26z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]),ao=ge("pin","IconPin",[["path",{d:"M15 4.5l-4 4l-4 1.5l-1.5 1.5l7 7l1.5 -1.5l1.5 -4l4 -4",key:"svg-0"}],["path",{d:"M9 15l-4.5 4.5",key:"svg-1"}],["path",{d:"M14.5 4l5.5 5.5",key:"svg-2"}]]),Zn=ge("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),oo=ge("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),so=ge("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),lo=ge("sun","IconSun",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]]),ei=ge("tag","IconTag",[["path",{d:"M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z",key:"svg-1"}]]),Yn=ge("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]),co=ge("triangle-inverted-filled","IconTriangleInvertedFilled",[["path",{d:"M20.118 3h-16.225a2.914 2.914 0 0 0 -2.503 4.371l8.116 13.549a2.917 2.917 0 0 0 4.987 .005l8.11 -13.539a2.914 2.914 0 0 0 -2.486 -4.386z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]),Rt=ge("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);const at=D.createContext({curFlowID:null,loadWorkflowID:()=>{},saveCurWorkflow:()=>{},discardUnsavedChanges:()=>{},isDirty:!1,loadNewWorkflow:()=>{},loadFilePath:()=>{},setRoute:()=>{}}),dt=D.createContext({refreshFolderStamp:0,setRefreshFolderStamp:()=>{}});function uo({onclose:r}){const[e,n]=D.useState([]),i=async()=>{const t=await Sa("workflows");if(t==null)return;const o=JSON.parse(t);n(o)};return D.useEffect(()=>{i()},[]),b.jsxs(Xe,{onClose:r,size:"xl",isOpen:!0,children:[b.jsx(Qe,{}),b.jsxs(et,{children:[b.jsx(tt,{children:"Backups"}),b.jsx(nt,{}),b.jsx(rt,{children:b.jsx(Ji,{allowToggle:!0,children:e.map(t=>{const o=parseInt(t.fileName.split(".")[0]);return b.jsxs(Ki,{children:[b.jsx("h2",{children:b.jsxs(qi,{children:[b.jsxs(he,{as:"span",flex:"1",textAlign:"left",children:["Saved on ",Mt(o)]}),b.jsx(Xi,{})]})}),b.jsx(Qi,{pb:4,children:Object.values(t.jsonStr).map(s=>b.jsx(he,{children:s.name}))})]})})})})]})]})}function ho({onclose:r}){const[e,n]=D.useState((pe==null?void 0:pe.listAll())??[]);return b.jsxs(Xe,{isOpen:!0,onClose:r,children:[b.jsx(Qe,{}),b.jsxs(et,{children:[b.jsx(tt,{children:"My Tags"}),b.jsx(nt,{}),b.jsx(rt,{children:e.map(i=>b.jsxs(we,{children:[b.jsx(Fr,{children:i.name}),b.jsx(Se,{onClick:()=>{pe==null||pe.delete(i.name),n((pe==null?void 0:pe.listAll())??[])},"aria-label":"delete-tag",colorScheme:"red",variant:"ghost",icon:b.jsx(Yn,{})})]}))})]})]})}function fo(){var l;const r=(l=de==null?void 0:de.getSetting("shortcuts"))==null?void 0:l.save,[e,n]=D.useState(r??"Control+S"),[i,t]=D.useState(!1),o=()=>t(!0),s=()=>t(!1),a=c=>{c.preventDefault();let p="";c.ctrlKey&&(p+="Control+"),c.shiftKey&&(p+="Shift+"),c.altKey&&(p+="Alt+"),p.length>0&&!["Control","Shift","Alt"].includes(c.key)&&(p+=c.key.toUpperCase(),n(p),de==null||de.upsert({shortcuts:{save:p}}))};return b.jsxs(ct,{children:[b.jsx(Oe,{children:"Keyboard Shortcut - Save current workflow"}),i&&b.jsx(Oe,{color:"gray.500",children:"Press shortcut key combinations to setup"}),b.jsx(ut,{value:e,onKeyDown:a,onFocus:o,onBlur:s,placeholder:"Press a key combination",readOnly:!0})]})}function po({onClose:r}){const[e,n]=D.useState(!1),[i,t]=D.useState(!1),[o,s]=D.useState(de==null?void 0:de.records.myWorkflowsDir),[a,l]=D.useState([]),[c,p]=D.useState([]),[h,y]=D.useState(!1),u=D.useRef(null),w=ea(),f=async E=>{const{dir_path:R="",dir_contents:P=[],error:U=""}=await gn(E??"");return U.includes("Operation not permitted")?(y(!0),v(),{isError:!0}):{dirList:P,dirPath:R}},g=async()=>{const{isError:E=!1,dirList:R=[]}=await f(o);E||(p(R),t(!0),l(o&&o.split("/").filter(P=>!!P)||[]))},v=()=>{t(!1),n(!1),l([])},x=async E=>{if(E){const{error:P=""}=await gn(E);if(P.includes("Not a directory")){w({title:"The directory address you entered is invalid, please re-enter it.",status:"warning",duration:5e3,position:"top",isClosable:!0});return}}const R=E??`/${a.join("/")}`;de==null||de.upsert({myWorkflowsDir:R}),s(de==null?void 0:de.getSetting("myWorkflowsDir")),E&&y(!1),v(),Gt(!1)},S=async()=>{const{dirPath:E,dirList:R}=await f("");l(E.split("/").filter(P=>!!P)),p(R)},O=async(E,R)=>{var k;let P="";E===-1&&R?P=`/${a.concat([R]).join("/")}`:P=`/${a.slice(0,E+1).join("/")}`;const{isError:U=!1,dirList:V=[]}=await f(P);U||(p(V),l((k=P.slice(1))==null?void 0:k.split("/")))},I=()=>{t(!0),n(!0)},j=b.jsxs(he,{textAlign:"end",mb:4,children:[b.jsx(ut,{placeholder:"Please enter the absolute path directory address",ref:u,mt:2,mb:2}),b.jsx(xe,{colorScheme:"teal",mr:3,size:"sm",onClick:()=>{var E,R;(E=u==null?void 0:u.current)!=null&&E.value&&x((R=u==null?void 0:u.current)==null?void 0:R.value)},children:"Save"})]});return b.jsxs(b.Fragment,{children:[b.jsxs(Xe,{isOpen:!0,onClose:r,size:"xl",children:[b.jsx(Qe,{}),b.jsxs(et,{children:[b.jsx(tt,{children:"Settings"}),b.jsx(nt,{}),b.jsx(rt,{children:b.jsx(we,{children:b.jsxs(nr,{divider:b.jsx(zr,{borderColor:"gray.200"}),spacing:4,align:"stretch",w:"100%",children:[b.jsxs(he,{mb:4,children:[b.jsx(Oe,{mb:2,fontWeight:500,children:"Workspace Save Directory"}),i?e?j:b.jsxs(nr,{spacing:2,alignItems:"start",children:[b.jsx(ct,{spacing:"2px",direction:"row",wrap:"wrap",children:a.map((E,R)=>b.jsxs(b.Fragment,{children:["/",b.jsx(xe,{colorScheme:"teal",variant:"link",minW:1,onClick:()=>{O(R)},children:E},`${E}-${R}`)]}))}),b.jsx(ta,{columns:2,spacing:3,maxHeight:500,width:"100%",overflowY:"auto",children:c.map((E,R)=>b.jsx(xe,{size:"sm",leftIcon:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.2rem",height:"1.2rem"},children:b.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})}),justifyContent:"start",onClick:()=>{O(-1,E)},children:E},`${E}-${R}`))}),b.jsxs(he,{w:"100%",textAlign:"end",children:[b.jsx(xe,{colorScheme:"teal",size:"sm",onClick:()=>{x()},children:"Save"}),b.jsx(xe,{size:"sm",onClick:S,mr:2,ml:2,children:"Reset"}),b.jsx(xe,{size:"sm",onClick:v,children:"Cancel"})]})]}):b.jsxs(pt,{children:[b.jsx(Fr,{overflowWrap:"anywhere",children:o}),b.jsx(Se,{"aria-label":"Enter folder address",size:"sm",ml:2,icon:b.jsx(Ka,{}),onClick:I}),b.jsx(Se,{"aria-label":"Select folder",size:"sm",ml:2,icon:b.jsx(Gn,{}),onClick:g})]})]}),b.jsx(fo,{})]})})})]})]}),b.jsxs(Xe,{isOpen:h,onClose:()=>y(!1),size:"xl",children:[b.jsx(Qe,{}),b.jsxs(et,{children:[b.jsx(tt,{children:"Kind tips"}),b.jsx(nt,{}),b.jsx(rt,{children:b.jsxs(he,{children:[navigator.userAgent.indexOf("Mac OS X")!==-1?b.jsxs(Oe,{fontWeight:500,children:["There is no permission to access the folder. You need to grant full disk access permission to the terminal that starts the ComfyUI program. For details, refer to the",b.jsx(xe,{colorScheme:"teal",variant:"link",as:"a",ml:2,target:"_block",href:`https://stackoverflow.com/questions/58479686/permissionerror-errno-1-operation-not-permitted-after-macos
                -catalina-update`,children:"Document"}),", or you can manually enter the absolute path of the folder in the input box below to save."]}):b.jsx(Oe,{fontWeight:500,children:"You do not have permission to access the folder. It is recommended that you manually enter the absolute path address of the required folder."}),j]})})]})]})]})}const Tt=16;function mo({}){const{isOpen:r,onOpen:e,onClose:n}=Lr(),[i,t]=D.useState(!1),[o,s]=D.useState(!1),{colorMode:a,toggleColorMode:l}=jn();return b.jsxs(b.Fragment,{children:[b.jsxs(gt,{isLazy:!0,children:[b.jsx(Rn,{as:Se,"aria-label":"Options",icon:b.jsx(to,{}),size:"sm",variant:"outline"}),b.jsxs(Dt,{children:[b.jsx(Te,{onClick:()=>s(!0),icon:b.jsx(so,{size:16}),fontSize:16,children:"Settings"}),b.jsx(Te,{onClick:()=>t(!0),icon:b.jsx(ei,{size:Tt}),fontSize:16,children:"Manage Tags"}),b.jsxs(Te,{onClick:l,icon:a==="light"?b.jsx(no,{size:Tt}):b.jsx(lo,{size:Tt}),fontSize:16,children:[a==="light"?"Dark":"Light"," Mode"]}),b.jsx(Te,{onClick:e,icon:b.jsx(Qr,{size:Tt}),fontSize:16,children:"Backups (Experimental)"})]})]}),i&&b.jsx(ho,{onclose:()=>t(!1)}),o&&b.jsx(po,{onClose:()=>s(!1)}),r&&b.jsx(uo,{onclose:n})]})}function sr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,i)}return n}function re(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sr(Object(n),!0).forEach(function(i){Ct(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function vo(r){if(Array.isArray(r))return r}function go(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,t,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(r)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(p){c=!0,t=p}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw t}}return a}}function xn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=r[n];return i}function ti(r,e){if(r){if(typeof r=="string")return xn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(r,e)}}function bo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ye(r,e){return vo(r)||go(r,e)||ti(r,e)||bo()}function Je(r,e){if(r==null)return{};var n=Bi(r,e),i,t;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(t=0;t<o.length;t++)i=o[t],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}var yo=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function wo(r){var e=r.defaultInputValue,n=e===void 0?"":e,i=r.defaultMenuIsOpen,t=i===void 0?!1:i,o=r.defaultValue,s=o===void 0?null:o,a=r.inputValue,l=r.menuIsOpen,c=r.onChange,p=r.onInputChange,h=r.onMenuClose,y=r.onMenuOpen,u=r.value,w=Je(r,yo),f=D.useState(a!==void 0?a:n),g=Ye(f,2),v=g[0],x=g[1],S=D.useState(l!==void 0?l:t),O=Ye(S,2),I=O[0],j=O[1],E=D.useState(u!==void 0?u:s),R=Ye(E,2),P=R[0],U=R[1],V=D.useCallback(function(Q,W){typeof c=="function"&&c(Q,W),U(Q)},[c]),k=D.useCallback(function(Q,W){var X;typeof p=="function"&&(X=p(Q,W)),x(X!==void 0?X:Q)},[p]),A=D.useCallback(function(){typeof y=="function"&&y(),j(!0)},[y]),m=D.useCallback(function(){typeof h=="function"&&h(),j(!1)},[h]),N=a!==void 0?a:v,q=l!==void 0?l:I,z=u!==void 0?u:P;return re(re({},w),{},{inputValue:N,menuIsOpen:q,onChange:V,onInputChange:k,onMenuClose:m,onMenuOpen:A,value:z})}function xo(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function lr(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Vi(i.key),i)}}function So(r,e,n){return e&&lr(r.prototype,e),n&&lr(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function _o(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ui(r,e)}function Xt(r){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xt(r)}function ko(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Co(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Oo(r,e){if(e&&(Pr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Co(r)}function Io(r){var e=ko();return function(){var i=Xt(r),t;if(e){var o=Xt(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return Oo(this,t)}}function Eo(r){if(Array.isArray(r))return xn(r)}function jo(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Do(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ni(r){return Eo(r)||jo(r)||ti(r)||Do()}function Po(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}const Mo=Math.min,Ro=Math.max,Qt=Math.round,Nt=Math.floor,en=r=>({x:r,y:r});function Ao(r){return{...r,top:r.y,left:r.x,right:r.x+r.width,bottom:r.y+r.height}}function ri(r){return ai(r)?(r.nodeName||"").toLowerCase():"#document"}function Ve(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function ii(r){var e;return(e=(ai(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function ai(r){return r instanceof Node||r instanceof Ve(r).Node}function Sn(r){return r instanceof Element||r instanceof Ve(r).Element}function Jn(r){return r instanceof HTMLElement||r instanceof Ve(r).HTMLElement}function cr(r){return typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Ve(r).ShadowRoot}function oi(r){const{overflow:e,overflowX:n,overflowY:i,display:t}=Kn(r);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(t)}function Fo(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function zo(r){return["html","body","#document"].includes(ri(r))}function Kn(r){return Ve(r).getComputedStyle(r)}function Lo(r){if(ri(r)==="html")return r;const e=r.assignedSlot||r.parentNode||cr(r)&&r.host||ii(r);return cr(e)?e.host:e}function si(r){const e=Lo(r);return zo(e)?r.ownerDocument?r.ownerDocument.body:r.body:Jn(e)&&oi(e)?e:si(e)}function tn(r,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const t=si(r),o=t===((i=r.ownerDocument)==null?void 0:i.body),s=Ve(t);return o?e.concat(s,s.visualViewport||[],oi(t)?t:[],s.frameElement&&n?tn(s.frameElement):[]):e.concat(t,tn(t,[],n))}function To(r){const e=Kn(r);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const t=Jn(r),o=t?r.offsetWidth:n,s=t?r.offsetHeight:i,a=Qt(n)!==o||Qt(i)!==s;return a&&(n=o,i=s),{width:n,height:i,$:a}}function qn(r){return Sn(r)?r:r.contextElement}function un(r){const e=qn(r);if(!Jn(e))return en(1);const n=e.getBoundingClientRect(),{width:i,height:t,$:o}=To(e);let s=(o?Qt(n.width):n.width)/i,a=(o?Qt(n.height):n.height)/t;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const No=en(0);function Bo(r){const e=Ve(r);return!Fo()||!e.visualViewport?No:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Vo(r,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ve(r)?!1:e}function ur(r,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const t=r.getBoundingClientRect(),o=qn(r);let s=en(1);e&&(i?Sn(i)&&(s=un(i)):s=un(r));const a=Vo(o,n,i)?Bo(o):en(0);let l=(t.left+a.x)/s.x,c=(t.top+a.y)/s.y,p=t.width/s.x,h=t.height/s.y;if(o){const y=Ve(o),u=i&&Sn(i)?Ve(i):i;let w=y.frameElement;for(;w&&i&&u!==y;){const f=un(w),g=w.getBoundingClientRect(),v=Kn(w),x=g.left+(w.clientLeft+parseFloat(v.paddingLeft))*f.x,S=g.top+(w.clientTop+parseFloat(v.paddingTop))*f.y;l*=f.x,c*=f.y,p*=f.x,h*=f.y,l+=x,c+=S,w=Ve(w).frameElement}}return Ao({width:p,height:h,x:l,y:c})}function Uo(r,e){let n=null,i;const t=ii(r);function o(){clearTimeout(i),n&&n.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:c,top:p,width:h,height:y}=r.getBoundingClientRect();if(a||e(),!h||!y)return;const u=Nt(p),w=Nt(t.clientWidth-(c+h)),f=Nt(t.clientHeight-(p+y)),g=Nt(c),x={rootMargin:-u+"px "+-w+"px "+-f+"px "+-g+"px",threshold:Ro(0,Mo(1,l))||1};let S=!0;function O(I){const j=I[0].intersectionRatio;if(j!==l){if(!S)return s();j?s(!1,j):i=setTimeout(()=>{s(!1,1e-7)},100)}S=!1}try{n=new IntersectionObserver(O,{...x,root:t.ownerDocument})}catch{n=new IntersectionObserver(O,x)}n.observe(r)}return s(!0),o}function $o(r,e,n,i){i===void 0&&(i={});const{ancestorScroll:t=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=qn(r),p=t||o?[...c?tn(c):[],...tn(e)]:[];p.forEach(v=>{t&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const h=c&&a?Uo(c,n):null;let y=-1,u=null;s&&(u=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&u&&(u.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{u&&u.observe(e)})),n()}),c&&!l&&u.observe(c),u.observe(e));let w,f=l?ur(r):null;l&&g();function g(){const v=ur(r);f&&(v.x!==f.x||v.y!==f.y||v.width!==f.width||v.height!==f.height)&&n(),f=v,w=requestAnimationFrame(g)}return n(),()=>{p.forEach(v=>{t&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),h&&h(),u&&u.disconnect(),u=null,l&&cancelAnimationFrame(w)}}var _n=D.useLayoutEffect,Wo=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],nn=function(){};function Ho(r,e){return e?e[0]==="-"?r+e:r+"__"+e:r}function Go(r,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),t=2;t<n;t++)i[t-2]=arguments[t];var o=[].concat(i);if(e&&r)for(var s in e)e.hasOwnProperty(s)&&e[s]&&o.push("".concat(Ho(r,s)));return o.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var dr=function(e){return ts(e)?e.filter(Boolean):Pr(e)==="object"&&e!==null?[e]:[]},li=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Je(e,Wo);return re({},n)},_e=function(e,n,i){var t=e.cx,o=e.getStyles,s=e.getClassNames,a=e.className;return{css:o(n,e),className:t(i??{},s(n,e),a)}};function sn(r){return[document.documentElement,document.body,window].indexOf(r)>-1}function Zo(r){return sn(r)?window.innerHeight:r.clientHeight}function ci(r){return sn(r)?window.pageYOffset:r.scrollTop}function rn(r,e){if(sn(r)){window.scrollTo(0,e);return}r.scrollTop=e}function Yo(r){var e=getComputedStyle(r),n=e.position==="absolute",i=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var t=r;t=t.parentElement;)if(e=getComputedStyle(t),!(n&&e.position==="static")&&i.test(e.overflow+e.overflowY+e.overflowX))return t;return document.documentElement}function Jo(r,e,n,i){return n*((r=r/i-1)*r*r+1)+e}function Bt(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:nn,t=ci(r),o=e-t,s=10,a=0;function l(){a+=s;var c=Jo(a,t,o,n);rn(r,c),a<n?window.requestAnimationFrame(l):i(r)}l()}function hr(r,e){var n=r.getBoundingClientRect(),i=e.getBoundingClientRect(),t=e.offsetHeight/3;i.bottom+t>n.bottom?rn(r,Math.min(e.offsetTop+e.clientHeight-r.offsetHeight+t,r.scrollHeight)):i.top-t<n.top&&rn(r,Math.max(e.offsetTop-t,0))}function Ko(r){var e=r.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function fr(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function qo(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var ui=!1,Xo={get passive(){return ui=!0}},Vt=typeof window<"u"?window:{};Vt.addEventListener&&Vt.removeEventListener&&(Vt.addEventListener("p",nn,Xo),Vt.removeEventListener("p",nn,!1));var Qo=ui;function es(r){return r!=null}function ts(r){return Array.isArray(r)}function Ut(r,e,n){return r?e:n}var ns=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),t=1;t<n;t++)i[t-1]=arguments[t];var o=Object.entries(e).filter(function(s){var a=Ye(s,1),l=a[0];return!i.includes(l)});return o.reduce(function(s,a){var l=Ye(a,2),c=l[0],p=l[1];return s[c]=p,s},{})},rs=["children","innerProps"],is=["children","innerProps"];function as(r){var e=r.maxHeight,n=r.menuEl,i=r.minHeight,t=r.placement,o=r.shouldScroll,s=r.isFixedPosition,a=r.controlHeight,l=Yo(n),c={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return c;var p=l.getBoundingClientRect(),h=p.height,y=n.getBoundingClientRect(),u=y.bottom,w=y.height,f=y.top,g=n.offsetParent.getBoundingClientRect(),v=g.top,x=s?window.innerHeight:Zo(l),S=ci(l),O=parseInt(getComputedStyle(n).marginBottom,10),I=parseInt(getComputedStyle(n).marginTop,10),j=v-I,E=x-f,R=j+S,P=h-S-f,U=u-x+S+O,V=S+f-I,k=160;switch(t){case"auto":case"bottom":if(E>=w)return{placement:"bottom",maxHeight:e};if(P>=w&&!s)return o&&Bt(l,U,k),{placement:"bottom",maxHeight:e};if(!s&&P>=i||s&&E>=i){o&&Bt(l,U,k);var A=s?E-O:P-O;return{placement:"bottom",maxHeight:A}}if(t==="auto"||s){var m=e,N=s?j:R;return N>=i&&(m=Math.min(N-O-a,e)),{placement:"top",maxHeight:m}}if(t==="bottom")return o&&rn(l,U),{placement:"bottom",maxHeight:e};break;case"top":if(j>=w)return{placement:"top",maxHeight:e};if(R>=w&&!s)return o&&Bt(l,V,k),{placement:"top",maxHeight:e};if(!s&&R>=i||s&&j>=i){var q=e;return(!s&&R>=i||s&&j>=i)&&(q=s?j-I:R-I),o&&Bt(l,V,k),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(t,'".'))}return c}function os(r){var e={bottom:"top",top:"bottom"};return r?e[r]:"bottom"}var di=function(e){return e==="auto"?"bottom":e},ss=function(e,n){var i,t=e.placement,o=e.theme,s=o.borderRadius,a=o.spacing,l=o.colors;return re((i={label:"menu"},Ct(i,os(t),"100%"),Ct(i,"position","absolute"),Ct(i,"width","100%"),Ct(i,"zIndex",1),i),n?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},hi=D.createContext(null),ls=function(e){var n=e.children,i=e.minMenuHeight,t=e.maxMenuHeight,o=e.menuPlacement,s=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,c=D.useContext(hi)||{},p=c.setPortalPlacement,h=D.useRef(null),y=D.useState(t),u=Ye(y,2),w=u[0],f=u[1],g=D.useState(null),v=Ye(g,2),x=v[0],S=v[1],O=l.spacing.controlHeight;return _n(function(){var I=h.current;if(I){var j=s==="fixed",E=a&&!j,R=as({maxHeight:t,menuEl:I,minHeight:i,placement:o,shouldScroll:E,isFixedPosition:j,controlHeight:O});f(R.maxHeight),S(R.placement),p==null||p(R.placement)}},[t,o,s,a,i,p,O]),n({ref:h,placerProps:re(re({},e),{},{placement:x||di(o),maxHeight:w})})},cs=function(e){var n=e.children,i=e.innerRef,t=e.innerProps;return ie("div",ae({},_e(e,"menu",{menu:!0}),{ref:i},t),n)},us=cs,ds=function(e,n){var i=e.maxHeight,t=e.theme.spacing.baseUnit;return re({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:t,paddingTop:t})},hs=function(e){var n=e.children,i=e.innerProps,t=e.innerRef,o=e.isMulti;return ie("div",ae({},_e(e,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:t},i),n)},fi=function(e,n){var i=e.theme,t=i.spacing.baseUnit,o=i.colors;return re({textAlign:"center"},n?{}:{color:o.neutral40,padding:"".concat(t*2,"px ").concat(t*3,"px")})},fs=fi,ps=fi,ms=function(e){var n=e.children,i=n===void 0?"No options":n,t=e.innerProps,o=Je(e,rs);return ie("div",ae({},_e(re(re({},o),{},{children:i,innerProps:t}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),t),i)},vs=function(e){var n=e.children,i=n===void 0?"Loading...":n,t=e.innerProps,o=Je(e,is);return ie("div",ae({},_e(re(re({},o),{},{children:i,innerProps:t}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),t),i)},gs=function(e){var n=e.rect,i=e.offset,t=e.position;return{left:n.left,position:t,top:i,width:n.width,zIndex:1}},bs=function(e){var n=e.appendTo,i=e.children,t=e.controlElement,o=e.innerProps,s=e.menuPlacement,a=e.menuPosition,l=D.useRef(null),c=D.useRef(null),p=D.useState(di(s)),h=Ye(p,2),y=h[0],u=h[1],w=D.useMemo(function(){return{setPortalPlacement:u}},[]),f=D.useState(null),g=Ye(f,2),v=g[0],x=g[1],S=D.useCallback(function(){if(t){var E=Ko(t),R=a==="fixed"?0:window.pageYOffset,P=E[y]+R;(P!==(v==null?void 0:v.offset)||E.left!==(v==null?void 0:v.rect.left)||E.width!==(v==null?void 0:v.rect.width))&&x({offset:P,rect:E})}},[t,a,y,v==null?void 0:v.offset,v==null?void 0:v.rect.left,v==null?void 0:v.rect.width]);_n(function(){S()},[S]);var O=D.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),t&&l.current&&(c.current=$o(t,l.current,S,{elementResize:"ResizeObserver"in window}))},[t,S]);_n(function(){O()},[O]);var I=D.useCallback(function(E){l.current=E,O()},[O]);if(!n&&a!=="fixed"||!v)return null;var j=ie("div",ae({ref:I},_e(re(re({},e),{},{offset:v.offset,position:a,rect:v.rect}),"menuPortal",{"menu-portal":!0}),o),i);return ie(hi.Provider,{value:w},n?Wi.createPortal(j,n):j)},ys=function(e){var n=e.isDisabled,i=e.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},ws=function(e){var n=e.children,i=e.innerProps,t=e.isDisabled,o=e.isRtl;return ie("div",ae({},_e(e,"container",{"--is-disabled":t,"--is-rtl":o}),i),n)},xs=function(e,n){var i=e.theme.spacing,t=e.isMulti,o=e.hasValue,s=e.selectProps.controlShouldRenderValue;return re({alignItems:"center",display:t&&o&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},Ss=function(e){var n=e.children,i=e.innerProps,t=e.isMulti,o=e.hasValue;return ie("div",ae({},_e(e,"valueContainer",{"value-container":!0,"value-container--is-multi":t,"value-container--has-value":o}),i),n)},_s=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},ks=function(e){var n=e.children,i=e.innerProps;return ie("div",ae({},_e(e,"indicatorsContainer",{indicators:!0}),i),n)},pr,Cs=["size"],Os=["innerProps","isRtl","size"],Is={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},pi=function(e){var n=e.size,i=Je(e,Cs);return ie("svg",ae({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Is},i))},Xn=function(e){return ie(pi,ae({size:20},e),ie("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},mi=function(e){return ie(pi,ae({size:20},e),ie("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},vi=function(e,n){var i=e.isFocused,t=e.theme,o=t.spacing.baseUnit,s=t.colors;return re({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:i?s.neutral60:s.neutral20,padding:o*2,":hover":{color:i?s.neutral80:s.neutral40}})},Es=vi,js=function(e){var n=e.children,i=e.innerProps;return ie("div",ae({},_e(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),n||ie(mi,null))},Ds=vi,Ps=function(e){var n=e.children,i=e.innerProps;return ie("div",ae({},_e(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),n||ie(Xn,null))},Ms=function(e,n){var i=e.isDisabled,t=e.theme,o=t.spacing.baseUnit,s=t.colors;return re({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:i?s.neutral10:s.neutral20,marginBottom:o*2,marginTop:o*2})},Rs=function(e){var n=e.innerProps;return ie("span",ae({},n,_e(e,"indicatorSeparator",{"indicator-separator":!0})))},As=$i(pr||(pr=Po([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Fs=function(e,n){var i=e.isFocused,t=e.size,o=e.theme,s=o.colors,a=o.spacing.baseUnit;return re({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:t,lineHeight:1,marginRight:t,textAlign:"center",verticalAlign:"middle"},n?{}:{color:i?s.neutral60:s.neutral20,padding:a*2})},dn=function(e){var n=e.delay,i=e.offset;return ie("span",{css:Mr({animation:"".concat(As," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},zs=function(e){var n=e.innerProps,i=e.isRtl,t=e.size,o=t===void 0?4:t,s=Je(e,Os);return ie("div",ae({},_e(re(re({},s),{},{innerProps:n,isRtl:i,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),ie(dn,{delay:0,offset:i}),ie(dn,{delay:160,offset:!0}),ie(dn,{delay:320,offset:!i}))},Ls=function(e,n){var i=e.isDisabled,t=e.isFocused,o=e.theme,s=o.colors,a=o.borderRadius,l=o.spacing;return re({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:i?s.neutral5:s.neutral0,borderColor:i?s.neutral10:t?s.primary:s.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:t?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:t?s.primary:s.neutral30}})},Ts=function(e){var n=e.children,i=e.isDisabled,t=e.isFocused,o=e.innerRef,s=e.innerProps,a=e.menuIsOpen;return ie("div",ae({ref:o},_e(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":t,"control--menu-is-open":a}),s,{"aria-disabled":i||void 0}),n)},Ns=Ts,Bs=["data"],Vs=function(e,n){var i=e.theme.spacing;return n?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},Us=function(e){var n=e.children,i=e.cx,t=e.getStyles,o=e.getClassNames,s=e.Heading,a=e.headingProps,l=e.innerProps,c=e.label,p=e.theme,h=e.selectProps;return ie("div",ae({},_e(e,"group",{group:!0}),l),ie(s,ae({},a,{selectProps:h,theme:p,getStyles:t,getClassNames:o,cx:i}),c),ie("div",null,n))},$s=function(e,n){var i=e.theme,t=i.colors,o=i.spacing;return re({label:"group",cursor:"default",display:"block"},n?{}:{color:t.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},Ws=function(e){var n=li(e);n.data;var i=Je(n,Bs);return ie("div",ae({},_e(e,"groupHeading",{"group-heading":!0}),i))},Hs=Us,Gs=["innerRef","isDisabled","isHidden","inputClassName"],Zs=function(e,n){var i=e.isDisabled,t=e.value,o=e.theme,s=o.spacing,a=o.colors;return re(re({visibility:i?"hidden":"visible",transform:t?"translateZ(0)":""},Ys),n?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:a.neutral80})},gi={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Ys={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":re({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},gi)},Js=function(e){return re({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},gi)},Ks=function(e){var n=e.cx,i=e.value,t=li(e),o=t.innerRef,s=t.isDisabled,a=t.isHidden,l=t.inputClassName,c=Je(t,Gs);return ie("div",ae({},_e(e,"input",{"input-container":!0}),{"data-value":i||""}),ie("input",ae({className:n({input:!0},l),ref:o,style:Js(a),disabled:s},c)))},qs=Ks,Xs=function(e,n){var i=e.theme,t=i.spacing,o=i.borderRadius,s=i.colors;return re({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:s.neutral10,borderRadius:o/2,margin:t.baseUnit/2})},Qs=function(e,n){var i=e.theme,t=i.borderRadius,o=i.colors,s=e.cropWithEllipsis;return re({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:t/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},el=function(e,n){var i=e.theme,t=i.spacing,o=i.borderRadius,s=i.colors,a=e.isFocused;return re({alignItems:"center",display:"flex"},n?{}:{borderRadius:o/2,backgroundColor:a?s.dangerLight:void 0,paddingLeft:t.baseUnit,paddingRight:t.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},bi=function(e){var n=e.children,i=e.innerProps;return ie("div",i,n)},tl=bi,nl=bi;function rl(r){var e=r.children,n=r.innerProps;return ie("div",ae({role:"button"},n),e||ie(Xn,{size:14}))}var il=function(e){var n=e.children,i=e.components,t=e.data,o=e.innerProps,s=e.isDisabled,a=e.removeProps,l=e.selectProps,c=i.Container,p=i.Label,h=i.Remove;return ie(c,{data:t,innerProps:re(re({},_e(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),o),selectProps:l},ie(p,{data:t,innerProps:re({},_e(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},n),ie(h,{data:t,innerProps:re(re({},_e(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},a),selectProps:l}))},al=il,ol=function(e,n){var i=e.isDisabled,t=e.isFocused,o=e.isSelected,s=e.theme,a=s.spacing,l=s.colors;return re({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:o?l.primary:t?l.primary25:"transparent",color:i?l.neutral20:o?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:o?l.primary:l.primary50}})},sl=function(e){var n=e.children,i=e.isDisabled,t=e.isFocused,o=e.isSelected,s=e.innerRef,a=e.innerProps;return ie("div",ae({},_e(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":t,"option--is-selected":o}),{ref:s,"aria-disabled":i},a),n)},ll=sl,cl=function(e,n){var i=e.theme,t=i.spacing,o=i.colors;return re({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:o.neutral50,marginLeft:t.baseUnit/2,marginRight:t.baseUnit/2})},ul=function(e){var n=e.children,i=e.innerProps;return ie("div",ae({},_e(e,"placeholder",{placeholder:!0}),i),n)},dl=ul,hl=function(e,n){var i=e.isDisabled,t=e.theme,o=t.spacing,s=t.colors;return re({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:i?s.neutral40:s.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},fl=function(e){var n=e.children,i=e.isDisabled,t=e.innerProps;return ie("div",ae({},_e(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),t),n)},pl=fl,ml={ClearIndicator:Ps,Control:Ns,DropdownIndicator:js,DownChevron:mi,CrossIcon:Xn,Group:Hs,GroupHeading:Ws,IndicatorsContainer:ks,IndicatorSeparator:Rs,Input:qs,LoadingIndicator:zs,Menu:us,MenuList:hs,MenuPortal:bs,LoadingMessage:vs,NoOptionsMessage:ms,MultiValue:al,MultiValueContainer:tl,MultiValueLabel:nl,MultiValueRemove:rl,Option:ll,Placeholder:dl,SelectContainer:ws,SingleValue:pl,ValueContainer:Ss},vl=function(e){return re(re({},ml),e.components)},mr=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function gl(r,e){return!!(r===e||mr(r)&&mr(e))}function bl(r,e){if(r.length!==e.length)return!1;for(var n=0;n<r.length;n++)if(!gl(r[n],e[n]))return!1;return!0}function yl(r,e){e===void 0&&(e=bl);var n=null;function i(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];if(n&&n.lastThis===this&&e(t,n.lastArgs))return n.lastResult;var s=r.apply(this,t);return n={lastResult:s,lastArgs:t,lastThis:this},s}return i.clear=function(){n=null},i}var wl={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},xl=function(e){return ie("span",ae({css:wl},e))},vr=xl,Sl={guidance:function(e){var n=e.isSearchable,i=e.isMulti,t=e.isDisabled,o=e.tabSelectsValue,s=e.context;switch(s){case"menu":return"Use Up and Down to choose options".concat(t?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(o?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,i=e.label,t=i===void 0?"":i,o=e.labels,s=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(t,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return s?"option ".concat(t," is disabled. Select another option."):"option ".concat(t,", selected.");default:return""}},onFocus:function(e){var n=e.context,i=e.focused,t=e.options,o=e.label,s=o===void 0?"":o,a=e.selectValue,l=e.isDisabled,c=e.isSelected,p=function(w,f){return w&&w.length?"".concat(w.indexOf(f)+1," of ").concat(w.length):""};if(n==="value"&&a)return"value ".concat(s," focused, ").concat(p(a,i),".");if(n==="menu"){var h=l?" disabled":"",y="".concat(c?"selected":"focused").concat(h);return"option ".concat(s," ").concat(y,", ").concat(p(t,i),".")}return""},onFilter:function(e){var n=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(n?" for search term "+n:"",".")}},_l=function(e){var n=e.ariaSelection,i=e.focusedOption,t=e.focusedValue,o=e.focusableOptions,s=e.isFocused,a=e.selectValue,l=e.selectProps,c=e.id,p=l.ariaLiveMessages,h=l.getOptionLabel,y=l.inputValue,u=l.isMulti,w=l.isOptionDisabled,f=l.isSearchable,g=l.menuIsOpen,v=l.options,x=l.screenReaderStatus,S=l.tabSelectsValue,O=l["aria-label"],I=l["aria-live"],j=D.useMemo(function(){return re(re({},Sl),p||{})},[p]),E=D.useMemo(function(){var m="";if(n&&j.onChange){var N=n.option,q=n.options,z=n.removedValue,Q=n.removedValues,W=n.value,X=function(me){return Array.isArray(me)?null:me},T=z||N||X(W),F=T?h(T):"",te=q||Q||void 0,K=te?te.map(h):[],Z=re({isDisabled:T&&w(T,a),label:F,labels:K},n);m=j.onChange(Z)}return m},[n,j,w,a,h]),R=D.useMemo(function(){var m="",N=i||t,q=!!(i&&a&&a.includes(i));if(N&&j.onFocus){var z={focused:N,label:h(N),isDisabled:w(N,a),isSelected:q,options:o,context:N===i?"menu":"value",selectValue:a};m=j.onFocus(z)}return m},[i,t,h,w,j,o,a]),P=D.useMemo(function(){var m="";if(g&&v.length&&j.onFilter){var N=x({count:o.length});m=j.onFilter({inputValue:y,resultsMessage:N})}return m},[o,y,g,j,v,x]),U=D.useMemo(function(){var m="";if(j.guidance){var N=t?"value":g?"menu":"input";m=j.guidance({"aria-label":O,context:N,isDisabled:i&&w(i,a),isMulti:u,isSearchable:f,tabSelectsValue:S})}return m},[O,i,t,u,w,f,g,j,a,S]),V="".concat(R," ").concat(P," ").concat(U),k=ie(D.Fragment,null,ie("span",{id:"aria-selection"},E),ie("span",{id:"aria-context"},V)),A=(n==null?void 0:n.action)==="initial-input-focus";return ie(D.Fragment,null,ie(vr,{id:c},A&&k),ie(vr,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text"},s&&!A&&k))},kl=_l,kn=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Cl=new RegExp("["+kn.map(function(r){return r.letters}).join("")+"]","g"),yi={};for(var hn=0;hn<kn.length;hn++)for(var fn=kn[hn],pn=0;pn<fn.letters.length;pn++)yi[fn.letters[pn]]=fn.base;var wi=function(e){return e.replace(Cl,function(n){return yi[n]})},Ol=yl(wi),gr=function(e){return e.replace(/^\s+|\s+$/g,"")},Il=function(e){return"".concat(e.label," ").concat(e.value)},El=function(e){return function(n,i){if(n.data.__isNew__)return!0;var t=re({ignoreCase:!0,ignoreAccents:!0,stringify:Il,trim:!0,matchFrom:"any"},e),o=t.ignoreCase,s=t.ignoreAccents,a=t.stringify,l=t.trim,c=t.matchFrom,p=l?gr(i):i,h=l?gr(a(n)):a(n);return o&&(p=p.toLowerCase(),h=h.toLowerCase()),s&&(p=Ol(p),h=wi(h)),c==="start"?h.substr(0,p.length)===p:h.indexOf(p)>-1}},jl=["innerRef"];function Dl(r){var e=r.innerRef,n=Je(r,jl),i=ns(n,"onExited","in","enter","exit","appear");return ie("input",ae({ref:e},i,{css:Mr({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Pl=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function Ml(r){var e=r.isEnabled,n=r.onBottomArrive,i=r.onBottomLeave,t=r.onTopArrive,o=r.onTopLeave,s=D.useRef(!1),a=D.useRef(!1),l=D.useRef(0),c=D.useRef(null),p=D.useCallback(function(g,v){if(c.current!==null){var x=c.current,S=x.scrollTop,O=x.scrollHeight,I=x.clientHeight,j=c.current,E=v>0,R=O-I-S,P=!1;R>v&&s.current&&(i&&i(g),s.current=!1),E&&a.current&&(o&&o(g),a.current=!1),E&&v>R?(n&&!s.current&&n(g),j.scrollTop=O,P=!0,s.current=!0):!E&&-v>S&&(t&&!a.current&&t(g),j.scrollTop=0,P=!0,a.current=!0),P&&Pl(g)}},[n,i,t,o]),h=D.useCallback(function(g){p(g,g.deltaY)},[p]),y=D.useCallback(function(g){l.current=g.changedTouches[0].clientY},[]),u=D.useCallback(function(g){var v=l.current-g.changedTouches[0].clientY;p(g,v)},[p]),w=D.useCallback(function(g){if(g){var v=Qo?{passive:!1}:!1;g.addEventListener("wheel",h,v),g.addEventListener("touchstart",y,v),g.addEventListener("touchmove",u,v)}},[u,y,h]),f=D.useCallback(function(g){g&&(g.removeEventListener("wheel",h,!1),g.removeEventListener("touchstart",y,!1),g.removeEventListener("touchmove",u,!1))},[u,y,h]);return D.useEffect(function(){if(e){var g=c.current;return w(g),function(){f(g)}}},[e,w,f]),function(g){c.current=g}}var br=["boxSizing","height","overflow","paddingRight","position"],yr={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function wr(r){r.preventDefault()}function xr(r){r.stopPropagation()}function Sr(){var r=this.scrollTop,e=this.scrollHeight,n=r+this.offsetHeight;r===0?this.scrollTop=1:n===e&&(this.scrollTop=r-1)}function _r(){return"ontouchstart"in window||navigator.maxTouchPoints}var kr=!!(typeof window<"u"&&window.document&&window.document.createElement),kt=0,ht={capture:!1,passive:!1};function Rl(r){var e=r.isEnabled,n=r.accountForScrollbars,i=n===void 0?!0:n,t=D.useRef({}),o=D.useRef(null),s=D.useCallback(function(l){if(kr){var c=document.body,p=c&&c.style;if(i&&br.forEach(function(w){var f=p&&p[w];t.current[w]=f}),i&&kt<1){var h=parseInt(t.current.paddingRight,10)||0,y=document.body?document.body.clientWidth:0,u=window.innerWidth-y+h||0;Object.keys(yr).forEach(function(w){var f=yr[w];p&&(p[w]=f)}),p&&(p.paddingRight="".concat(u,"px"))}c&&_r()&&(c.addEventListener("touchmove",wr,ht),l&&(l.addEventListener("touchstart",Sr,ht),l.addEventListener("touchmove",xr,ht))),kt+=1}},[i]),a=D.useCallback(function(l){if(kr){var c=document.body,p=c&&c.style;kt=Math.max(kt-1,0),i&&kt<1&&br.forEach(function(h){var y=t.current[h];p&&(p[h]=y)}),c&&_r()&&(c.removeEventListener("touchmove",wr,ht),l&&(l.removeEventListener("touchstart",Sr,ht),l.removeEventListener("touchmove",xr,ht)))}},[i]);return D.useEffect(function(){if(e){var l=o.current;return s(l),function(){a(l)}}},[e,s,a]),function(l){o.current=l}}var Al=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},Fl={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function zl(r){var e=r.children,n=r.lockEnabled,i=r.captureEnabled,t=i===void 0?!0:i,o=r.onBottomArrive,s=r.onBottomLeave,a=r.onTopArrive,l=r.onTopLeave,c=Ml({isEnabled:t,onBottomArrive:o,onBottomLeave:s,onTopArrive:a,onTopLeave:l}),p=Rl({isEnabled:n}),h=function(u){c(u),p(u)};return ie(D.Fragment,null,n&&ie("div",{onClick:Al,css:Fl}),e(h))}var Ll={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Tl=function(e){var n=e.name,i=e.onFocus;return ie("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:Ll,value:"",onChange:function(){}})},Nl=Tl,Bl=function(e){return e.label},Vl=function(e){return e.label},Ul=function(e){return e.value},$l=function(e){return!!e.isDisabled},Wl={clearIndicator:Ds,container:ys,control:Ls,dropdownIndicator:Es,group:Vs,groupHeading:$s,indicatorsContainer:_s,indicatorSeparator:Ms,input:Zs,loadingIndicator:Fs,loadingMessage:ps,menu:ss,menuList:ds,menuPortal:gs,multiValue:Xs,multiValueLabel:Qs,multiValueRemove:el,noOptionsMessage:fs,option:ol,placeholder:cl,singleValue:hl,valueContainer:xs},Hl={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Gl=4,xi=4,Zl=38,Yl=xi*2,Jl={baseUnit:xi,controlHeight:Zl,menuGutter:Yl},mn={borderRadius:Gl,colors:Hl,spacing:Jl},Kl={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:fr(),captureMenuScroll:!fr(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:El(),formatGroupLabel:Bl,getOptionLabel:Vl,getOptionValue:Ul,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:$l,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!qo(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Cr(r,e,n,i){var t=Ci(r,e,n),o=Oi(r,e,n),s=ki(r,e),a=an(r,e);return{type:"option",data:e,isDisabled:t,isSelected:o,label:s,value:a,index:i}}function Si(r,e){return r.options.map(function(n,i){if("options"in n){var t=n.options.map(function(s,a){return Cr(r,s,e,a)}).filter(function(s){return Or(r,s)});return t.length>0?{type:"group",data:n,options:t,index:i}:void 0}var o=Cr(r,n,e,i);return Or(r,o)?o:void 0}).filter(es)}function _i(r){return r.reduce(function(e,n){return n.type==="group"?e.push.apply(e,ni(n.options.map(function(i){return i.data}))):e.push(n.data),e},[])}function ql(r,e){return _i(Si(r,e))}function Or(r,e){var n=r.inputValue,i=n===void 0?"":n,t=e.data,o=e.isSelected,s=e.label,a=e.value;return(!Ei(r)||!o)&&Ii(r,{label:s,value:a,data:t},i)}function Xl(r,e){var n=r.focusedValue,i=r.selectValue,t=i.indexOf(n);if(t>-1){var o=e.indexOf(n);if(o>-1)return n;if(t<e.length)return e[t]}return null}function Ql(r,e){var n=r.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var ki=function(e,n){return e.getOptionLabel(n)},an=function(e,n){return e.getOptionValue(n)};function Ci(r,e,n){return typeof r.isOptionDisabled=="function"?r.isOptionDisabled(e,n):!1}function Oi(r,e,n){if(n.indexOf(e)>-1)return!0;if(typeof r.isOptionSelected=="function")return r.isOptionSelected(e,n);var i=an(r,e);return n.some(function(t){return an(r,t)===i})}function Ii(r,e,n){return r.filterOption?r.filterOption(e,n):!0}var Ei=function(e){var n=e.hideSelectedOptions,i=e.isMulti;return n===void 0?i:n},ec=1,ji=function(r){_o(n,r);var e=Io(n);function n(i){var t;if(xo(this,n),t=e.call(this,i),t.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.instancePrefix="",t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.controlRef=null,t.getControlRef=function(a){t.controlRef=a},t.focusedOptionRef=null,t.getFocusedOptionRef=function(a){t.focusedOptionRef=a},t.menuListRef=null,t.getMenuListRef=function(a){t.menuListRef=a},t.inputRef=null,t.getInputRef=function(a){t.inputRef=a},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(a,l){var c=t.props,p=c.onChange,h=c.name;l.name=h,t.ariaOnChange(a,l),p(a,l)},t.setValue=function(a,l,c){var p=t.props,h=p.closeMenuOnSelect,y=p.isMulti,u=p.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:u}),h&&(t.setState({inputIsHiddenAfterUpdate:!y}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(a,{action:l,option:c})},t.selectOption=function(a){var l=t.props,c=l.blurInputOnSelect,p=l.isMulti,h=l.name,y=t.state.selectValue,u=p&&t.isOptionSelected(a,y),w=t.isOptionDisabled(a,y);if(u){var f=t.getOptionValue(a);t.setValue(y.filter(function(g){return t.getOptionValue(g)!==f}),"deselect-option",a)}else if(!w)p?t.setValue([].concat(ni(y),[a]),"select-option",a):t.setValue(a,"select-option");else{t.ariaOnChange(a,{action:"select-option",option:a,name:h});return}c&&t.blurInput()},t.removeValue=function(a){var l=t.props.isMulti,c=t.state.selectValue,p=t.getOptionValue(a),h=c.filter(function(u){return t.getOptionValue(u)!==p}),y=Ut(l,h,h[0]||null);t.onChange(y,{action:"remove-value",removedValue:a}),t.focusInput()},t.clearValue=function(){var a=t.state.selectValue;t.onChange(Ut(t.props.isMulti,[],null),{action:"clear",removedValues:a})},t.popValue=function(){var a=t.props.isMulti,l=t.state.selectValue,c=l[l.length-1],p=l.slice(0,l.length-1),h=Ut(a,p,p[0]||null);t.onChange(h,{action:"pop-value",removedValue:c})},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return Go.apply(void 0,[t.props.classNamePrefix].concat(l))},t.getOptionLabel=function(a){return ki(t.props,a)},t.getOptionValue=function(a){return an(t.props,a)},t.getStyles=function(a,l){var c=t.props.unstyled,p=Wl[a](l,c);p.boxSizing="border-box";var h=t.props.styles[a];return h?h(p,l):p},t.getClassNames=function(a,l){var c,p;return(c=(p=t.props.classNames)[a])===null||c===void 0?void 0:c.call(p,l)},t.getElementId=function(a){return"".concat(t.instancePrefix,"-").concat(a)},t.getComponents=function(){return vl(t.props)},t.buildCategorizedOptions=function(){return Si(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return _i(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(a,l){t.setState({ariaSelection:re({value:a},l)})},t.onMenuMouseDown=function(a){a.button===0&&(a.stopPropagation(),a.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(a){t.blockOptionHover=!1},t.onControlMouseDown=function(a){if(!a.defaultPrevented){var l=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&t.onMenuClose():l&&t.openMenu("first"):(l&&(t.openAfterFocus=!0),t.focusInput()),a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.preventDefault()}},t.onDropdownIndicatorMouseDown=function(a){if(!(a&&a.type==="mousedown"&&a.button!==0)&&!t.props.isDisabled){var l=t.props,c=l.isMulti,p=l.menuIsOpen;t.focusInput(),p?(t.setState({inputIsHiddenAfterUpdate:!c}),t.onMenuClose()):t.openMenu("first"),a.preventDefault()}},t.onClearIndicatorMouseDown=function(a){a&&a.type==="mousedown"&&a.button!==0||(t.clearValue(),a.preventDefault(),t.openAfterFocus=!1,a.type==="touchend"?t.focusInput():setTimeout(function(){return t.focusInput()}))},t.onScroll=function(a){typeof t.props.closeMenuOnScroll=="boolean"?a.target instanceof HTMLElement&&sn(a.target)&&t.props.onMenuClose():typeof t.props.closeMenuOnScroll=="function"&&t.props.closeMenuOnScroll(a)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(a){var l=a.touches,c=l&&l.item(0);c&&(t.initialTouchX=c.clientX,t.initialTouchY=c.clientY,t.userIsDragging=!1)},t.onTouchMove=function(a){var l=a.touches,c=l&&l.item(0);if(c){var p=Math.abs(c.clientX-t.initialTouchX),h=Math.abs(c.clientY-t.initialTouchY),y=5;t.userIsDragging=p>y||h>y}},t.onTouchEnd=function(a){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(a.target)&&t.menuListRef&&!t.menuListRef.contains(a.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(a){t.userIsDragging||t.onControlMouseDown(a)},t.onClearIndicatorTouchEnd=function(a){t.userIsDragging||t.onClearIndicatorMouseDown(a)},t.onDropdownIndicatorTouchEnd=function(a){t.userIsDragging||t.onDropdownIndicatorMouseDown(a)},t.handleInputChange=function(a){var l=t.props.inputValue,c=a.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(c,{action:"input-change",prevInputValue:l}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(a){t.props.onFocus&&t.props.onFocus(a),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(a){var l=t.props.inputValue;if(t.menuListRef&&t.menuListRef.contains(document.activeElement)){t.inputRef.focus();return}t.props.onBlur&&t.props.onBlur(a),t.onInputChange("",{action:"input-blur",prevInputValue:l}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1})},t.onOptionHover=function(a){t.blockOptionHover||t.state.focusedOption===a||t.setState({focusedOption:a})},t.shouldHideSelectedOptions=function(){return Ei(t.props)},t.onValueInputFocus=function(a){a.preventDefault(),a.stopPropagation(),t.focus()},t.onKeyDown=function(a){var l=t.props,c=l.isMulti,p=l.backspaceRemovesValue,h=l.escapeClearsValue,y=l.inputValue,u=l.isClearable,w=l.isDisabled,f=l.menuIsOpen,g=l.onKeyDown,v=l.tabSelectsValue,x=l.openMenuOnFocus,S=t.state,O=S.focusedOption,I=S.focusedValue,j=S.selectValue;if(!w&&!(typeof g=="function"&&(g(a),a.defaultPrevented))){switch(t.blockOptionHover=!0,a.key){case"ArrowLeft":if(!c||y)return;t.focusValue("previous");break;case"ArrowRight":if(!c||y)return;t.focusValue("next");break;case"Delete":case"Backspace":if(y)return;if(I)t.removeValue(I);else{if(!p)return;c?t.popValue():u&&t.clearValue()}break;case"Tab":if(t.isComposing||a.shiftKey||!f||!v||!O||x&&t.isOptionSelected(O,j))return;t.selectOption(O);break;case"Enter":if(a.keyCode===229)break;if(f){if(!O||t.isComposing)return;t.selectOption(O);break}return;case"Escape":f?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:y}),t.onMenuClose()):u&&h&&t.clearValue();break;case" ":if(y)return;if(!f){t.openMenu("first");break}if(!O)return;t.selectOption(O);break;case"ArrowUp":f?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":f?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!f)return;t.focusOption("pageup");break;case"PageDown":if(!f)return;t.focusOption("pagedown");break;case"Home":if(!f)return;t.focusOption("first");break;case"End":if(!f)return;t.focusOption("last");break;default:return}a.preventDefault()}},t.instancePrefix="react-select-"+(t.props.instanceId||++ec),t.state.selectValue=dr(i.value),i.menuIsOpen&&t.state.selectValue.length){var o=t.buildFocusableOptions(),s=o.indexOf(t.state.selectValue[0]);t.state.focusedOption=o[s]}return t}return So(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&hr(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(t){var o=this.props,s=o.isDisabled,a=o.menuIsOpen,l=this.state.isFocused;(l&&!s&&t.isDisabled||l&&a&&!t.menuIsOpen)&&this.focusInput(),l&&s&&!t.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!s&&t.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(hr(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(t,o){this.props.onInputChange(t,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(t){var o=this,s=this.state,a=s.selectValue,l=s.isFocused,c=this.buildFocusableOptions(),p=t==="first"?0:c.length-1;if(!this.props.isMulti){var h=c.indexOf(a[0]);h>-1&&(p=h)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[p]},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(t){var o=this.state,s=o.selectValue,a=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=s.indexOf(a);a||(l=-1);var c=s.length-1,p=-1;if(s.length){switch(t){case"previous":l===0?p=0:l===-1?p=c:p=l-1;break;case"next":l>-1&&l<c&&(p=l+1);break}this.setState({inputIsHidden:p!==-1,focusedValue:s[p]})}}}},{key:"focusOption",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,s=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,c=a.indexOf(s);s||(c=-1),t==="up"?l=c>0?c-1:a.length-1:t==="down"?l=(c+1)%a.length:t==="pageup"?(l=c-o,l<0&&(l=0)):t==="pagedown"?(l=c+o,l>a.length-1&&(l=a.length-1)):t==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(mn):re(re({},mn),this.props.theme):mn}},{key:"getCommonProps",value:function(){var t=this.clearValue,o=this.cx,s=this.getStyles,a=this.getClassNames,l=this.getValue,c=this.selectOption,p=this.setValue,h=this.props,y=h.isMulti,u=h.isRtl,w=h.options,f=this.hasValue();return{clearValue:t,cx:o,getStyles:s,getClassNames:a,getValue:l,hasValue:f,isMulti:y,isRtl:u,options:w,selectOption:c,selectProps:h,setValue:p,theme:this.getTheme()}}},{key:"hasValue",value:function(){var t=this.state.selectValue;return t.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var t=this.props,o=t.isClearable,s=t.isMulti;return o===void 0?s:o}},{key:"isOptionDisabled",value:function(t,o){return Ci(this.props,t,o)}},{key:"isOptionSelected",value:function(t,o){return Oi(this.props,t,o)}},{key:"filterOption",value:function(t,o){return Ii(this.props,t,o)}},{key:"formatOptionLabel",value:function(t,o){if(typeof this.props.formatOptionLabel=="function"){var s=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(t,{context:o,inputValue:s,selectValue:a})}else return this.getOptionLabel(t)}},{key:"formatGroupLabel",value:function(t){return this.props.formatGroupLabel(t)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var t=this.props,o=t.isDisabled,s=t.isSearchable,a=t.inputId,l=t.inputValue,c=t.tabIndex,p=t.form,h=t.menuIsOpen,y=t.required,u=this.getComponents(),w=u.Input,f=this.state,g=f.inputIsHidden,v=f.ariaSelection,x=this.commonProps,S=a||this.getElementId("input"),O=re(re(re({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":y,role:"combobox"},h&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!s&&{"aria-readonly":!0}),this.hasValue()?(v==null?void 0:v.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return s?D.createElement(w,ae({},x,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:S,innerRef:this.getInputRef,isDisabled:o,isHidden:g,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:p,type:"text",value:l},O)):D.createElement(Dl,ae({id:S,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:nn,onFocus:this.onInputFocus,disabled:o,tabIndex:c,inputMode:"none",form:p,value:""},O))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,o=this.getComponents(),s=o.MultiValue,a=o.MultiValueContainer,l=o.MultiValueLabel,c=o.MultiValueRemove,p=o.SingleValue,h=o.Placeholder,y=this.commonProps,u=this.props,w=u.controlShouldRenderValue,f=u.isDisabled,g=u.isMulti,v=u.inputValue,x=u.placeholder,S=this.state,O=S.selectValue,I=S.focusedValue,j=S.isFocused;if(!this.hasValue()||!w)return v?null:D.createElement(h,ae({},y,{key:"placeholder",isDisabled:f,isFocused:j,innerProps:{id:this.getElementId("placeholder")}}),x);if(g)return O.map(function(R,P){var U=R===I,V="".concat(t.getOptionLabel(R),"-").concat(t.getOptionValue(R));return D.createElement(s,ae({},y,{components:{Container:a,Label:l,Remove:c},isFocused:U,isDisabled:f,key:V,index:P,removeProps:{onClick:function(){return t.removeValue(R)},onTouchEnd:function(){return t.removeValue(R)},onMouseDown:function(A){A.preventDefault()}},data:R}),t.formatOptionLabel(R,"value"))});if(v)return null;var E=O[0];return D.createElement(p,ae({},y,{data:E,isDisabled:f}),this.formatOptionLabel(E,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.getComponents(),o=t.ClearIndicator,s=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,p=this.state.isFocused;if(!this.isClearable()||!o||l||!this.hasValue()||c)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return D.createElement(o,ae({},s,{innerProps:h,isFocused:p}))}},{key:"renderLoadingIndicator",value:function(){var t=this.getComponents(),o=t.LoadingIndicator,s=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,p=this.state.isFocused;if(!o||!c)return null;var h={"aria-hidden":"true"};return D.createElement(o,ae({},s,{innerProps:h,isDisabled:l,isFocused:p}))}},{key:"renderIndicatorSeparator",value:function(){var t=this.getComponents(),o=t.DropdownIndicator,s=t.IndicatorSeparator;if(!o||!s)return null;var a=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return D.createElement(s,ae({},a,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var t=this.getComponents(),o=t.DropdownIndicator;if(!o)return null;var s=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return D.createElement(o,ae({},s,{innerProps:c,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var t=this,o=this.getComponents(),s=o.Group,a=o.GroupHeading,l=o.Menu,c=o.MenuList,p=o.MenuPortal,h=o.LoadingMessage,y=o.NoOptionsMessage,u=o.Option,w=this.commonProps,f=this.state.focusedOption,g=this.props,v=g.captureMenuScroll,x=g.inputValue,S=g.isLoading,O=g.loadingMessage,I=g.minMenuHeight,j=g.maxMenuHeight,E=g.menuIsOpen,R=g.menuPlacement,P=g.menuPosition,U=g.menuPortalTarget,V=g.menuShouldBlockScroll,k=g.menuShouldScrollIntoView,A=g.noOptionsMessage,m=g.onMenuScrollToTop,N=g.onMenuScrollToBottom;if(!E)return null;var q=function(te,K){var Z=te.type,fe=te.data,me=te.isDisabled,se=te.isSelected,ce=te.label,Ce=te.value,ye=f===fe,Re=me?void 0:function(){return t.onOptionHover(fe)},Ae=me?void 0:function(){return t.selectOption(fe)},d="".concat(t.getElementId("option"),"-").concat(K),$={id:d,onClick:Ae,onMouseMove:Re,onMouseOver:Re,tabIndex:-1};return D.createElement(u,ae({},w,{innerProps:$,data:fe,isDisabled:me,isSelected:se,key:d,label:ce,type:Z,value:Ce,isFocused:ye,innerRef:ye?t.getFocusedOptionRef:void 0}),t.formatOptionLabel(te.data,"menu"))},z;if(this.hasOptions())z=this.getCategorizedOptions().map(function(F){if(F.type==="group"){var te=F.data,K=F.options,Z=F.index,fe="".concat(t.getElementId("group"),"-").concat(Z),me="".concat(fe,"-heading");return D.createElement(s,ae({},w,{key:fe,data:te,options:K,Heading:a,headingProps:{id:me,data:F.data},label:t.formatGroupLabel(F.data)}),F.options.map(function(se){return q(se,"".concat(Z,"-").concat(se.index))}))}else if(F.type==="option")return q(F,"".concat(F.index))});else if(S){var Q=O({inputValue:x});if(Q===null)return null;z=D.createElement(h,w,Q)}else{var W=A({inputValue:x});if(W===null)return null;z=D.createElement(y,w,W)}var X={minMenuHeight:I,maxMenuHeight:j,menuPlacement:R,menuPosition:P,menuShouldScrollIntoView:k},T=D.createElement(ls,ae({},w,X),function(F){var te=F.ref,K=F.placerProps,Z=K.placement,fe=K.maxHeight;return D.createElement(l,ae({},w,X,{innerRef:te,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove,id:t.getElementId("listbox")},isLoading:S,placement:Z}),D.createElement(zl,{captureEnabled:v,onTopArrive:m,onBottomArrive:N,lockEnabled:V},function(me){return D.createElement(c,ae({},w,{innerRef:function(ce){t.getMenuListRef(ce),me(ce)},isLoading:S,maxHeight:fe,focusedOption:f}),z)}))});return U||P==="fixed"?D.createElement(p,ae({},w,{appendTo:U,controlElement:this.controlRef,menuPlacement:R,menuPosition:P}),T):T}},{key:"renderFormField",value:function(){var t=this,o=this.props,s=o.delimiter,a=o.isDisabled,l=o.isMulti,c=o.name,p=o.required,h=this.state.selectValue;if(p&&!this.hasValue()&&!a)return D.createElement(Nl,{name:c,onFocus:this.onValueInputFocus});if(!(!c||a))if(l)if(s){var y=h.map(function(f){return t.getOptionValue(f)}).join(s);return D.createElement("input",{name:c,type:"hidden",value:y})}else{var u=h.length>0?h.map(function(f,g){return D.createElement("input",{key:"i-".concat(g),name:c,type:"hidden",value:t.getOptionValue(f)})}):D.createElement("input",{name:c,type:"hidden",value:""});return D.createElement("div",null,u)}else{var w=h[0]?this.getOptionValue(h[0]):"";return D.createElement("input",{name:c,type:"hidden",value:w})}}},{key:"renderLiveRegion",value:function(){var t=this.commonProps,o=this.state,s=o.ariaSelection,a=o.focusedOption,l=o.focusedValue,c=o.isFocused,p=o.selectValue,h=this.getFocusableOptions();return D.createElement(kl,ae({},t,{id:this.getElementId("live-region"),ariaSelection:s,focusedOption:a,focusedValue:l,isFocused:c,selectValue:p,focusableOptions:h}))}},{key:"render",value:function(){var t=this.getComponents(),o=t.Control,s=t.IndicatorsContainer,a=t.SelectContainer,l=t.ValueContainer,c=this.props,p=c.className,h=c.id,y=c.isDisabled,u=c.menuIsOpen,w=this.state.isFocused,f=this.commonProps=this.getCommonProps();return D.createElement(a,ae({},f,{className:p,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:y,isFocused:w}),this.renderLiveRegion(),D.createElement(o,ae({},f,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:y,isFocused:w,menuIsOpen:u}),D.createElement(l,ae({},f,{isDisabled:y}),this.renderPlaceholderOrValue(),this.renderInput()),D.createElement(s,ae({},f,{isDisabled:y}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(t,o){var s=o.prevProps,a=o.clearFocusValueOnUpdate,l=o.inputIsHiddenAfterUpdate,c=o.ariaSelection,p=o.isFocused,h=o.prevWasFocused,y=t.options,u=t.value,w=t.menuIsOpen,f=t.inputValue,g=t.isMulti,v=dr(u),x={};if(s&&(u!==s.value||y!==s.options||w!==s.menuIsOpen||f!==s.inputValue)){var S=w?ql(t,v):[],O=a?Xl(o,v):null,I=Ql(o,S);x={selectValue:v,focusedOption:I,focusedValue:O,clearFocusValueOnUpdate:!1}}var j=l!=null&&t!==s?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},E=c,R=p&&h;return p&&!R&&(E={value:Ut(g,v,v[0]||null),options:v,action:"initial-input-focus"},R=!h),(c==null?void 0:c.action)==="initial-input-focus"&&(E=null),re(re(re({},x),j),{},{prevProps:t,ariaSelection:E,prevWasFocused:R})}}]),n}(D.Component);ji.defaultProps=Kl;var tc=D.forwardRef(function(r,e){var n=wo(r);return D.createElement(ji,ae({ref:e},n))}),nc=tc,rc=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"];function Cn(){return Cn=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Cn.apply(this,arguments)}function ic(r,e){if(r==null)return{};var n={},i=Object.keys(r),t,o;for(o=0;o<i.length;o++)t=i[o],!(e.indexOf(t)>=0)&&(n[t]=r[t]);return n}var Di=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=ic(e,rc);return Cn({},n)},ac=function(e){var n=typeof e=="string";return n&&["sm","md","lg"].includes(e)},oc=function(e){return ac(e)?e:e==="xs"?"sm":e==="xl"?"lg":"md"},$e=function(e){var n=Rr(),i=oc(n.components.Input.defaultProps.size),t=e??i,o=na(typeof t=="string"?[t]:t,{fallback:"md"})||i;return o};function vt(){return vt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},vt.apply(this,arguments)}var sc=function(e){var n=e.children,i=e.className,t=e.cx,o=e.innerProps,s=e.isDisabled,a=e.isRtl,l=e.hasValue,c=e.selectProps.chakraStyles,p=vt({position:"relative",direction:a?"rtl":void 0},s?{cursor:"not-allowed"}:{}),h=c!=null&&c.container?c.container(p,e):p;return oe.createElement(he,vt({},o,{className:t({"--is-disabled":s,"--is-rtl":a,"--has-value":l},i),sx:h}),n)},lc=function(e){var n=e.children,i=e.className,t=e.cx,o=e.isMulti,s=e.hasValue,a=e.innerProps,l=e.selectProps,c=l.chakraStyles,p=l.size,h=l.variant,y=l.focusBorderColor,u=l.errorBorderColor,w=l.controlShouldRenderValue,f=$e(p),g=it("Input",{size:f,variant:h,focusBorderColor:y,errorBorderColor:u}),v={display:o&&s&&w?"flex":"grid",alignItems:"center",flex:1,paddingY:"2px",paddingX:g.field.px,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},x=c!=null&&c.valueContainer?c.valueContainer(v,e):v;return oe.createElement(he,vt({},a,{className:t({"value-container":!0,"value-container--is-multi":o,"value-container--has-value":s},i),sx:x}),n)},cc=function(e){var n=e.children,i=e.className,t=e.cx,o=e.innerProps,s=e.selectProps.chakraStyles,a={display:"flex",alignItems:"center",alignSelf:"stretch",flexShrink:0},l=s!=null&&s.indicatorsContainer?s.indicatorsContainer(a,e):a;return oe.createElement(he,vt({},o,{className:t({indicators:!0},i),sx:l}),n)},uc=["height","h"];function Ne(){return Ne=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Ne.apply(this,arguments)}function dc(r,e){if(r==null)return{};var n={},i=Object.keys(r),t,o;for(o=0;o<i.length;o++)t=i[o],!(e.indexOf(t)>=0)&&(n[t]=r[t]);return n}var hc=function(e){var n=e.className,i=e.cx,t=e.children,o=e.innerRef,s=e.innerProps,a=e.isDisabled,l=e.isFocused,c=e.menuIsOpen,p=e.selectProps,h=p.chakraStyles,y=p.size,u=p.variant,w=p.focusBorderColor,f=p.errorBorderColor,g=p.isInvalid,v=p.isReadOnly,x=$e(y),S=it("Input",{size:x,variant:u,focusBorderColor:w,errorBorderColor:f}),O=S.field,I=O.height,j=O.h,E=dc(O,uc),R=I||j,P=Ne({},E,{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",padding:0,overflow:"hidden",height:"auto",minH:R},a?{pointerEvents:"none"}:{}),U=h!=null&&h.control?h.control(P,e):P;return oe.createElement(he,Ne({ref:o,className:i({control:!0,"control--is-disabled":a,"control--is-focused":l,"control--menu-is-open":c},n),sx:U},s,{"data-focus":l?!0:void 0,"data-focus-visible":l?!0:void 0,"data-invalid":g?!0:void 0,"data-disabled":a?!0:void 0,"data-readonly":v?!0:void 0}),t)},fc=function(e){var n=e.className,i=e.cx,t=e.selectProps,o=t.chakraStyles,s=t.useBasicStyles,a=t.variant,l=Ne({opacity:1},s||a!=="outline"?{display:"none"}:{}),c=o!=null&&o.indicatorSeparator?o.indicatorSeparator(l,e):l;return oe.createElement(ra,{className:i({"indicator-separator":!0},n),sx:c,orientation:"vertical"})},pc=function(e){return oe.createElement(Dn,Ne({role:"presentation",focusable:"false","aria-hidden":"true"},e),oe.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))},mc=function(e){var n=e.children,i=e.className,t=e.cx,o=e.innerProps,s=e.selectProps,a=s.chakraStyles,l=s.useBasicStyles,c=s.size,p=s.focusBorderColor,h=s.errorBorderColor,y=s.variant,u=$e(c),w=it("Input",{size:u,variant:y,focusBorderColor:p,errorBorderColor:h}),f={sm:"16px",md:"20px",lg:"24px"},g=f[u],v=Ne({},w.addon,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",borderRadius:0,borderWidth:0,fontSize:g},l&&{background:"transparent",padding:0,width:6,marginRight:2,marginLeft:1,cursor:"inherit"}),x=a!=null&&a.dropdownIndicator?a.dropdownIndicator(v,e):v,S={height:"1em",width:"1em"},O=a!=null&&a.downChevron?a.downChevron(S,e):S;return oe.createElement(he,Ne({},o,{className:t({indicator:!0,"dropdown-indicator":!0},i),sx:x}),n||oe.createElement(pc,{sx:O}))},vc=function(e){return oe.createElement(Dn,Ne({focusable:"false","aria-hidden":!0},e),oe.createElement("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}))},gc=function(e){var n=e.children,i=e.className,t=e.cx,o=e.innerProps,s=e.selectProps,a=s.chakraStyles,l=s.size,c=$e(l),p=Hi("CloseButton",{size:c}),h=Ne({},p,{marginX:1,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer"}),y=a!=null&&a.clearIndicator?a.clearIndicator(h,e):h,u={width:"1em",height:"1em"},w=a!=null&&a.crossIcon?a.crossIcon(u,e):u;return oe.createElement(he,Ne({role:"button",className:t({indicator:!0,"clear-indicator":!0},i),sx:y,"aria-label":"Clear selected options"},o),n||oe.createElement(vc,{sx:w}))},bc=function(e){var n=e.className,i=e.cx,t=e.innerProps,o=e.selectProps,s=o.chakraStyles,a=o.size,l=e.color,c=e.emptyColor,p=e.speed,h=e.thickness,y=e.spinnerSize,u=$e(a),w={sm:"xs",md:"sm",lg:"md"},f=w[u],g={marginRight:3},v=s!=null&&s.loadingIndicator?s.loadingIndicator(g,e):g;return oe.createElement(Gi,Ne({className:i({indicator:!0,"loading-indicator":!0},n),sx:v},t,{size:y||f,color:l,emptyColor:c,speed:p,thickness:h}))};const yc=hc;var wc=["innerRef","isDisabled","isHidden","inputClassName"];function It(){return It=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},It.apply(this,arguments)}function xc(r,e){if(r==null)return{};var n={},i=Object.keys(r),t,o;for(o=0;o<i.length;o++)t=i[o],!(e.indexOf(t)>=0)&&(n[t]=r[t]);return n}var Sc=function(e){var n=e.className,i=e.cx,t=e.value,o=e.selectProps,s=o.chakraStyles,a=o.isReadOnly,l=Di(e),c=l.innerRef,p=l.isDisabled,h=l.isHidden,y=l.inputClassName,u=xc(l,wc),w={gridArea:"1 / 2",minW:"2px",border:0,margin:0,outline:0,padding:0},f={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content",color:"inherit",marginX:"0.125rem",paddingY:"0.125rem",visibility:p?"hidden":"visible",transform:t?"translateZ(0)":"",_after:It({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre",padding:0},w)},g=s!=null&&s.inputContainer?s.inputContainer(f,e):f,v=It({background:0,opacity:h?0:1,width:"100%"},w),x=s!=null&&s.input?s.input(v,e):v;return oe.createElement(he,{className:i({"input-container":!0},n),"data-value":t||"",sx:g},oe.createElement(Pn.input,It({className:i({input:!0},y),ref:c,sx:x,disabled:p,readOnly:a?!0:void 0},u)))};const _c=Sc;var kc=["data"];function Cc(r,e){if(r==null)return{};var n={},i=Object.keys(r),t,o;for(o=0;o<i.length;o++)t=i[o],!(e.indexOf(t)>=0)&&(n[t]=r[t]);return n}function Me(){return Me=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Me.apply(this,arguments)}var Oc=function(e){var n={bottom:"top",top:"bottom"};return e?n[e]:"top"},Ic=function(e){var n,i=e.className,t=e.cx,o=e.children,s=e.innerProps,a=e.innerRef,l=e.placement,c=e.selectProps.chakraStyles,p=(n={position:"absolute"},n[Oc(l)]="100%",n.marginY="8px",n.width="100%",n.zIndex=1,n),h=c!=null&&c.menu?c.menu(p,e):p;return oe.createElement(gt,null,oe.createElement(he,Me({},s,{ref:a,className:t({menu:!0},i),sx:h}),o))};const Ec=Ic;var jc=function(e){var n,i=e.className,t=e.cx,o=e.innerRef,s=e.children,a=e.maxHeight,l=e.isMulti,c=e.innerProps,p=e.selectProps,h=p.chakraStyles,y=p.size,u=p.variant,w=p.focusBorderColor,f=p.errorBorderColor,g=it("Menu"),v=$e(y),x=it("Input",{size:v,variant:u,focusBorderColor:w,errorBorderColor:f}),S=x.field,O=Me({},g.list,{minW:"100%",maxHeight:a+"px",overflowY:"auto","--input-border-radius":S==null?void 0:S["--input-border-radius"],borderRadius:(S==null?void 0:S.borderRadius)||((n=g.list)==null?void 0:n.borderRadius),position:"relative",WebkitOverflowScrolling:"touch"}),I=h!=null&&h.menuList?h.menuList(O,e):O;return oe.createElement(he,Me({role:"listbox"},c,{className:t({"menu-list":!0,"menu-list--is-multi":l},i),sx:I,ref:o}),s)},Dc=function(e){var n=e.children,i=e.className,t=e.cx,o=e.innerProps,s=e.selectProps,a=s.chakraStyles,l=s.size,c=$e(l),p={sm:"6px",md:"8px",lg:"10px"},h={color:"chakra-subtle-text",textAlign:"center",paddingY:p[c],fontSize:c},y=a!=null&&a.loadingMessage?a.loadingMessage(h,e):h;return oe.createElement(he,Me({},o,{className:t({"menu-notice":!0,"menu-notice--loading":!0},i),sx:y}),n)},Pc=function(e){var n=e.children,i=e.className,t=e.cx,o=e.innerProps,s=e.selectProps,a=s.chakraStyles,l=s.size,c=$e(l),p={sm:"6px",md:"8px",lg:"10px"},h={color:"chakra-subtle-text",textAlign:"center",paddingY:p[c],fontSize:c},y=a!=null&&a.noOptionsMessage?a.noOptionsMessage(h,e):h;return oe.createElement(he,Me({},o,{className:t({"menu-notice":!0,"menu-notice--no-options":!0},i),sx:y}),n)},Mc=function(e){var n=e.children,i=e.className,t=e.cx,o=e.theme,s=e.getStyles,a=e.Heading,l=e.headingProps,c=e.label,p=e.selectProps,h=e.innerProps,y=e.getClassNames,u=p.chakraStyles,w={},f=u!=null&&u.group?u.group(w,e):w;return oe.createElement(he,Me({},h,{className:t({group:!0},i),sx:f}),oe.createElement(a,Me({},l,{selectProps:p,cx:t,theme:o,getStyles:s,getClassNames:y}),c),oe.createElement(he,null,n))},Rc=function(e){var n=e.cx,i=e.className,t=e.selectProps,o=t.chakraStyles,s=t.size,a=t.hasStickyGroupHeaders,l=Di(e);l.data;var c=Cc(l,kc),p=it("Menu"),h=$e(s),y={sm:"xs",md:"sm",lg:"md"},u={sm:"0.4rem 0.8rem",md:"0.5rem 1rem",lg:"0.6rem 1.2rem"},w=Me({},p.groupTitle,{fontSize:y[h],padding:u[h],margin:0,borderBottomWidth:a?"1px":0,position:a?"sticky":"static",top:-2,bg:p.list.bg,zIndex:1}),f=o!=null&&o.groupHeading?o.groupHeading(w,e):w;return oe.createElement(he,Me({},c,{className:n({"group-heading":!0},i),sx:f}))},Ac=function(e){return oe.createElement("svg",Me({viewBox:"0 0 14 14",width:"1em",height:"1em"},e),oe.createElement("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"}))},Fc=function(e){var n=e.className,i=e.cx,t=e.innerRef,o=e.innerProps,s=e.children,a=e.isFocused,l=e.isDisabled,c=e.isSelected,p=e.selectProps,h=p.chakraStyles,y=p.size,u=p.isMulti,w=p.hideSelectedOptions,f=p.selectedOptionStyle,g=p.selectedOptionColorScheme,v=it("Menu").item,x=$e(y),S={sm:"0.6rem",md:"0.8rem",lg:"1rem"},O={sm:"0.3rem",md:"0.4rem",lg:"0.5rem"},I=tr(g+".500",g+".300"),j=tr("white","black"),E=f==="check"&&(!u||w===!1),R=f==="color",P=Me({},v,{cursor:"pointer",display:"flex",alignItems:"center",width:"100%",textAlign:"start",fontSize:x,paddingX:S[x],paddingY:O[x]},R&&{_selected:{bg:I,color:j,_active:{bg:I}}}),U=h!=null&&h.option?h.option(P,e):P;return oe.createElement(he,Me({role:"option"},o,{className:i({option:!0,"option--is-disabled":l,"option--is-focused":a,"option--is-selected":c},n),sx:U,ref:t,"data-focus":a?!0:void 0,"aria-disabled":l?!0:void 0,"aria-selected":c}),E&&oe.createElement(ia,{fontSize:"0.8em",marginEnd:"0.75rem",opacity:c?1:0},oe.createElement(Ac,null)),s)};function Be(){return Be=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Be.apply(this,arguments)}var zc=function(e){return typeof e=="object"&&e!==null&&"colorScheme"in e&&typeof e.colorScheme=="string"},Lc=function(e){return typeof e=="object"&&e!==null&&"variant"in e&&typeof e.variant=="string"},Pi=function(e){return typeof e=="object"&&e!==null&&"isFixed"in e&&typeof e.isFixed=="boolean"},Tc=function(e){var n=e.children,i=e.className,t=e.components,o=e.cx,s=e.data,a=e.innerProps,l=e.isDisabled,c=e.isFocused,p=e.removeProps,h=e.selectProps,y=e.cropWithEllipsis,u=t.Container,w=t.Label,f=t.Remove,g=h.chakraStyles,v=h.colorScheme,x=h.tagVariant,S=h.size,O=$e(S),I="",j="",E=!1;zc(s)&&(I=s.colorScheme),Lc(s)&&(j=s.variant),Pi(s)&&(E=s.isFixed);var R=it("Tag",{size:O,colorScheme:I||v,variant:j||x||(E?"solid":"subtle")}),P=Be({},R.container,{display:"flex",alignItems:"center",minWidth:0,margin:"0.125rem"}),U=g!=null&&g.multiValue?g.multiValue(P,e):P,V=Be({},R.label,{overflow:"hidden",textOverflow:y||y===void 0?"ellipsis":void 0,whiteSpace:"nowrap"}),k=g!=null&&g.multiValueLabel?g.multiValueLabel(V,e):V,A=Be({},R.closeButton,{display:"flex",alignItems:"center",justifyContent:"center"}),m=g!=null&&g.multiValueRemove?g.multiValueRemove(A,e):A;return oe.createElement(u,{data:s,innerProps:Be({className:o({"multi-value":!0,"multi-value--is-disabled":l},i)},a),sx:U,selectProps:h},oe.createElement(w,{data:s,innerProps:{className:o({"multi-value__label":!0},i)},sx:k,selectProps:h},n),oe.createElement(f,{data:s,innerProps:Be({className:o({"multi-value__remove":!0},i),"aria-label":"Remove "+(n||"option")},p),sx:m,selectProps:h,isFocused:c}))},Nc=function(e){var n=e.children,i=e.innerProps,t=e.sx;return oe.createElement(Pn.span,Be({},i,{sx:t}),n)},Bc=function(e){var n=e.children,i=e.innerProps,t=e.sx;return oe.createElement(Pn.span,Be({},i,{sx:t}),n)},Vc=function(e){return oe.createElement(Dn,Be({verticalAlign:"inherit",viewBox:"0 0 512 512"},e),oe.createElement("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}))},Uc=function(e){var n=e.children,i=e.innerProps,t=e.isFocused,o=e.data,s=e.sx;return Pi(o)&&o.isFixed?null:oe.createElement(he,Be({},i,{role:"button",sx:s,"data-focus":t?!0:void 0,"data-focus-visible":t?!0:void 0}),n||oe.createElement(Vc,null))};const $c=Tc;function On(){return On=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},On.apply(this,arguments)}var Wc=function(e){var n=e.children,i=e.className,t=e.cx,o=e.innerProps,s=e.selectProps.chakraStyles,a={gridArea:"1 / 1 / 2 / 3",color:"chakra-placeholder-color",mx:"0.125rem",userSelect:"none"},l=s!=null&&s.placeholder?s.placeholder(a,e):a;return oe.createElement(he,On({},o,{className:t({placeholder:!0},i),sx:l}),n)};const Hc=Wc;function In(){return In=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},In.apply(this,arguments)}var Gc=function(e){var n=e.children,i=e.className,t=e.cx,o=e.isDisabled,s=e.innerProps,a=e.selectProps.chakraStyles,l={gridArea:"1 / 1 / 2 / 3",mx:"0.125rem",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},c=a!=null&&a.singleValue?a.singleValue(l,e):l;return oe.createElement(he,In({className:t({"single-value":!0,"single-value--is-disabled":o},i),sx:c},s),n)};const Zc=Gc;var Yc={ClearIndicator:gc,Control:yc,DropdownIndicator:mc,Group:Mc,GroupHeading:Rc,IndicatorSeparator:fc,IndicatorsContainer:cc,Input:_c,LoadingIndicator:bc,LoadingMessage:Dc,Menu:Ec,MenuList:jc,MultiValue:$c,MultiValueContainer:Nc,MultiValueLabel:Bc,MultiValueRemove:Uc,NoOptionsMessage:Pc,Option:Fc,Placeholder:Hc,SelectContainer:sc,SingleValue:Zc,ValueContainer:lc};const Jc=Yc;var Kc=["components","theme","size","colorScheme","isDisabled","isInvalid","isReadOnly","required","isRequired","inputId","tagVariant","selectedOptionStyle","selectedOptionColorScheme","selectedOptionColor","variant","focusBorderColor","errorBorderColor","chakraStyles","onFocus","onBlur","menuIsOpen"];function on(){return on=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},on.apply(this,arguments)}function qc(r,e){if(r==null)return{};var n={},i=Object.keys(r),t,o;for(o=0;o<i.length;o++)t=i[o],!(e.indexOf(t)>=0)&&(n[t]=r[t]);return n}var Xc=function(e){var n,i=e.components,t=i===void 0?{}:i;e.theme;var o=e.size,s=e.colorScheme,a=s===void 0?"gray":s,l=e.isDisabled,c=e.isInvalid,p=e.isReadOnly,h=e.required,y=e.isRequired,u=e.inputId,w=e.tagVariant,f=e.selectedOptionStyle,g=f===void 0?"color":f,v=e.selectedOptionColorScheme,x=e.selectedOptionColor,S=e.variant,O=e.focusBorderColor,I=e.errorBorderColor,j=e.chakraStyles,E=j===void 0?{}:j,R=e.onFocus,P=e.onBlur,U=e.menuIsOpen,V=qc(e,Kc),k=Rr(),A=k.components.Input.defaultProps.variant,m=aa({id:u,isDisabled:l,isInvalid:c,isRequired:y,isReadOnly:p,onFocus:R,onBlur:P}),N=U??(m.readOnly?!1:void 0),q=g,z=["color","check"];z.includes(g)||(q="color");var Q=v||x||"blue";typeof Q!="string"&&(Q="blue");var W=on({components:on({},Jc,t),colorScheme:a,size:o,tagVariant:w,selectedOptionStyle:q,selectedOptionColorScheme:Q,variant:S??A,chakraStyles:E,focusBorderColor:O,errorBorderColor:I,onFocus:m.onFocus,onBlur:m.onBlur,isDisabled:m.disabled,isInvalid:!!m["aria-invalid"],inputId:m.id,isReadOnly:m.readOnly,required:h??m.required,menuIsOpen:N},V,{"aria-invalid":(n=V["aria-invalid"])!=null?n:m["aria-invalid"]});return W};const Qc=Xc;function En(){return En=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},En.apply(this,arguments)}var eu=D.forwardRef(function(r,e){var n=Qc(r);return oe.createElement(nc,En({ref:e},n))});const tu=eu;function nu({workflow:r}){var h;const{onRefreshFilesList:e}=D.useContext(dt),[n,i]=D.useState([]),[t,o]=D.useState(""),s=((h=r.tags)==null?void 0:h.map(y=>({value:y,label:y})))??[],[a,l]=D.useState(s);if(D.useEffect(()=>{pe&&i(pe.listAll()??[])},[]),D.useEffect(()=>{var y;l(((y=r.tags)==null?void 0:y.map(u=>({value:u,label:u})))??[])},[r.tags]),pe==null)return alert("Error: TagsTable is not loaded"),null;const c=n.map(y=>({value:y.name,label:y.name})),p=37*5;return b.jsxs(An,{isLazy:!0,children:[b.jsx(Fn,{children:b.jsx(Se,{"aria-label":"Delete confirm",size:"sm",variant:"ghost",icon:b.jsx(ei,{color:"#718096"})})}),b.jsxs(zn,{children:[b.jsx(Ln,{}),b.jsx(Tn,{}),b.jsx(oa,{children:b.jsx("b",{children:r.name})}),b.jsxs(Nn,{children:[b.jsx(tu,{isMulti:!0,name:"tags",options:c,menuIsOpen:!0,value:a,onChange:y=>{l(y),Ue(r.id,{tags:y.map(u=>u.value)}),e&&e()},chakraStyles:{dropdownIndicator:(y,u)=>({...y,p:0,w:"30px"}),menuList:(y,u)=>({...y,shadow:"none",pt:0})},placeholder:"Select tags",closeMenuOnSelect:!1,maxMenuHeight:p}),b.jsxs(we,{gap:4,mt:Math.min(p,Math.max(n.length,3)*37),children:[b.jsx(ut,{placeholder:"New tag name",size:"sm",mt:6,mb:6,variant:"flushed",value:t,onChange:y=>{o(y.target.value)}}),b.jsx(xe,{iconSpacing:1,leftIcon:b.jsx(Zn,{size:16}),colorScheme:"teal",variant:"solid",size:"xs",px:5,isDisabled:t.length===0,onClick:()=>{pe==null||pe.upsert(t),i((pe==null?void 0:pe.listAll())??[]),o("")},children:"New Tag"})]})]})]})]})}function ru({menuPosition:r,workflowID:e,onClose:n}){const{onDuplicateWorkflow:i}=D.useContext(at);return b.jsx(b.Fragment,{children:b.jsx(he,{position:"absolute",top:r.y,left:r.x,children:b.jsx(gt,{isOpen:!0,onClose:n,children:b.jsx(Dt,{children:b.jsx(Te,{onClick:()=>i&&i(e),children:"Duplicate"})})})})})}function Mi(r){const{promptMessage:e="Are you sure you want to delete this?",variant:n="ghost",onDelete:i,isDisabled:t=!1,tooltipText:o}=r;return b.jsx(An,{isLazy:!0,placement:"auto",children:({onClose:s})=>b.jsxs(b.Fragment,{children:[b.jsx(Fn,{children:b.jsx(he,{children:b.jsx(Ee,{hasArrow:!0,label:o,placement:"bottom",children:b.jsx(Se,{"aria-label":"Delete confirm",size:"sm",icon:b.jsx(Yn,{color:"#F56565"}),isDisabled:t,variant:n})})})}),b.jsxs(zn,{children:[b.jsx(Ln,{}),b.jsx(Tn,{onClick:s}),b.jsxs(Nn,{children:[b.jsx(Oe,{mb:4,pr:4,fontWeight:600,children:e}),b.jsx(xe,{colorScheme:"red",size:"sm",onClick:()=>{i(),s()},children:"Yes, delete"})]})]})]})})}function Ri({workflow:r}){const{colorMode:e}=jn(),[n,i]=D.useState(!1),[t,o]=D.useState({x:0,y:0}),[s,a]=D.useState(!1),{setDraggingFile:l,isMultiSelecting:c,onMultiSelectFlow:p,onDeleteFlow:h,multiSelectedFlowsID:y,onRefreshFilesList:u,draggingFile:w}=D.useContext(dt),f=y&&y.length>0&&y.includes(r.id),{curFlowID:g,loadWorkflowID:v}=D.useContext(at),x=g===r.id,S=E=>{E.preventDefault(),o({x:E.clientX,y:E.clientY}),a(!0)},O=()=>{a(!1)},I=e==="light"?"gray.200":"#4A5568",j=b.jsxs(he,{flexShrink:1,flexGrow:1,onDragOver:E=>{E.preventDefault(),i(!0)},onDragLeave:()=>{i(!1)},onDrop:()=>{w&&!Et(w)&&(Ue(w.id,{parentFolderID:r.parentFolderID}),u&&u()),i(!1)},backgroundColor:x?"teal.200":s?I:void 0,color:x&&!c?"#333":void 0,draggable:!c,onDragStart:E=>{l&&l(r)},borderRadius:6,px:1,py:1,onClick:()=>{!c&&v(r.id)},_hover:{bg:I},children:[b.jsxs(we,{children:[r.coverMediaPath!=null&&(Zr(r.coverMediaPath)?b.jsx(Tr,{borderRadius:3,boxSize:"60px",objectFit:"cover",src:`/workspace/view_media?filename=${r.coverMediaPath}`,alt:r.name??"workflow cover image"}):b.jsx("video",{width:60,height:60,src:`/workspace/view_media?filename=${r.coverMediaPath}`,muted:!0,children:b.jsx("track",{kind:"captions"})})),b.jsxs(ct,{textAlign:"left",gap:0,children:[b.jsx(Oe,{fontWeight:"500",children:r.name??"untitled"}),b.jsxs(Oe,{color:"GrayText",ml:2,fontSize:"sm",children:["Updated: ",Mt(r.updateTime)]})]})]}),n&&b.jsx(he,{width:"100%",mt:2,height:"2px",backgroundColor:"#4299E1"})]});return b.jsxs(we,{w:"100%",mb:1,justify:"space-between",onContextMenu:S,children:[c?b.jsx(Ot,{isChecked:f,spacing:4,onChange:E=>{p&&p(r.id,E.target.checked)},children:j}):b.jsxs(b.Fragment,{children:[j,b.jsxs(pt,{width:"60px",children:[b.jsx(nu,{workflow:r}),b.jsx(Mi,{promptMessage:"Are you sure you want to delete this workflow?",onDelete:()=>{h&&h(r.id)}})]})]}),s&&b.jsx(ru,{menuPosition:t,onClose:O,workflowID:r.id})]})}function iu(){const r=D.useRef(null),{onRefreshFilesList:e}=D.useContext(dt),n=async i=>{var s;const t=i.target.files;if(!t)return;const o=[];for(const a of t)if(a.type==="image/png"){const l=await Ea(a),c=l==null?void 0:l.workflow;c&&o.push({json:c,name:a.name.replace(".png","")})}else(a.type==="application/json"||(s=a.name)!=null&&s.endsWith(".json"))&&await new Promise((l,c)=>{const p=new FileReader;p.onload=h=>{var y;try{const u=(y=h.target)==null?void 0:y.result;typeof u=="string"?(o.push({json:u,name:a.name.replace(".json","")}),l("")):c(new Error("File content is not a string"))}catch(u){c(u)}},p.onerror=c,p.readAsText(a)});o.length&&(await La(o),e&&e())};return b.jsxs(xe,{leftIcon:b.jsx(qa,{size:18}),variant:"outline",iconSpacing:1,size:"sm",colorScheme:"teal",onClick:()=>{var i;(i=r.current)==null||i.click()},children:["Import",b.jsx("input",{style:{display:"none"},ref:r,type:"file",accept:".json,image/png",multiple:!0,onChange:n})]})}function $t(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ai={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,e){(function(n){r.exports=n()})(function(){return function n(i,t,o){function s(c,p){if(!t[c]){if(!i[c]){var h=typeof $t=="function"&&$t;if(!p&&h)return h(c,!0);if(a)return a(c,!0);var y=new Error("Cannot find module '"+c+"'");throw y.code="MODULE_NOT_FOUND",y}var u=t[c]={exports:{}};i[c][0].call(u.exports,function(w){var f=i[c][1][w];return s(f||w)},u,u.exports,n,i,t,o)}return t[c].exports}for(var a=typeof $t=="function"&&$t,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(n,i,t){var o=n("./utils"),s=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(l){for(var c,p,h,y,u,w,f,g=[],v=0,x=l.length,S=x,O=o.getTypeOf(l)!=="string";v<l.length;)S=x-v,h=O?(c=l[v++],p=v<x?l[v++]:0,v<x?l[v++]:0):(c=l.charCodeAt(v++),p=v<x?l.charCodeAt(v++):0,v<x?l.charCodeAt(v++):0),y=c>>2,u=(3&c)<<4|p>>4,w=1<S?(15&p)<<2|h>>6:64,f=2<S?63&h:64,g.push(a.charAt(y)+a.charAt(u)+a.charAt(w)+a.charAt(f));return g.join("")},t.decode=function(l){var c,p,h,y,u,w,f=0,g=0,v="data:";if(l.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var x,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&S--,l.charAt(l.length-2)===a.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=s.uint8array?new Uint8Array(0|S):new Array(0|S);f<l.length;)c=a.indexOf(l.charAt(f++))<<2|(y=a.indexOf(l.charAt(f++)))>>4,p=(15&y)<<4|(u=a.indexOf(l.charAt(f++)))>>2,h=(3&u)<<6|(w=a.indexOf(l.charAt(f++))),x[g++]=c,u!==64&&(x[g++]=p),w!==64&&(x[g++]=h);return x}},{"./support":30,"./utils":32}],2:[function(n,i,t){var o=n("./external"),s=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(p,h,y,u,w){this.compressedSize=p,this.uncompressedSize=h,this.crc32=y,this.compression=u,this.compressedContent=w}c.prototype={getContentWorker:function(){var p=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return p.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(p,h,y){return p.pipe(new a).pipe(new l("uncompressedSize")).pipe(h.compressWorker(y)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},i.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,t){var o=n("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},t.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,t){var o=n("./utils"),s=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var p=0;p<8;p++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();i.exports=function(a,l){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?function(c,p,h,y){var u=s,w=y+h;c^=-1;for(var f=y;f<w;f++)c=c>>>8^u[255&(c^p[f])];return-1^c}(0|l,a,a.length,0):function(c,p,h,y){var u=s,w=y+h;c^=-1;for(var f=y;f<w;f++)c=c>>>8^u[255&(c^p.charCodeAt(f))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,i,t){t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(n,i,t){var o=null;o=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:o}},{lie:37}],7:[function(n,i,t){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=o?"uint8array":"array";function p(h,y){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=y,this.meta={}}t.magic="\b\0",a.inherits(p,l),p.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,h.data),!1)},p.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(y){h.push({data:y,meta:h.meta})}},t.compressWorker=function(h){return new p("Deflate",h)},t.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,t){function o(u,w){var f,g="";for(f=0;f<w;f++)g+=String.fromCharCode(255&u),u>>>=8;return g}function s(u,w,f,g,v,x){var S,O,I=u.file,j=u.compression,E=x!==c.utf8encode,R=a.transformTo("string",x(I.name)),P=a.transformTo("string",c.utf8encode(I.name)),U=I.comment,V=a.transformTo("string",x(U)),k=a.transformTo("string",c.utf8encode(U)),A=P.length!==I.name.length,m=k.length!==U.length,N="",q="",z="",Q=I.dir,W=I.date,X={crc32:0,compressedSize:0,uncompressedSize:0};w&&!f||(X.crc32=u.crc32,X.compressedSize=u.compressedSize,X.uncompressedSize=u.uncompressedSize);var T=0;w&&(T|=8),E||!A&&!m||(T|=2048);var F=0,te=0;Q&&(F|=16),v==="UNIX"?(te=798,F|=function(Z,fe){var me=Z;return Z||(me=fe?16893:33204),(65535&me)<<16}(I.unixPermissions,Q)):(te=20,F|=function(Z){return 63&(Z||0)}(I.dosPermissions)),S=W.getUTCHours(),S<<=6,S|=W.getUTCMinutes(),S<<=5,S|=W.getUTCSeconds()/2,O=W.getUTCFullYear()-1980,O<<=4,O|=W.getUTCMonth()+1,O<<=5,O|=W.getUTCDate(),A&&(q=o(1,1)+o(p(R),4)+P,N+="up"+o(q.length,2)+q),m&&(z=o(1,1)+o(p(V),4)+k,N+="uc"+o(z.length,2)+z);var K="";return K+=`
\0`,K+=o(T,2),K+=j.magic,K+=o(S,2),K+=o(O,2),K+=o(X.crc32,4),K+=o(X.compressedSize,4),K+=o(X.uncompressedSize,4),K+=o(R.length,2),K+=o(N.length,2),{fileRecord:h.LOCAL_FILE_HEADER+K+R+N,dirRecord:h.CENTRAL_FILE_HEADER+o(te,2)+K+o(V.length,2)+"\0\0\0\0"+o(F,4)+o(g,4)+R+N+V}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),p=n("../crc32"),h=n("../signature");function y(u,w,f,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=f,this.encodeFileName=g,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(y,l),y.prototype.push=function(u){var w=u.meta.percent||0,f=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,l.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:f?(w+100*(f-g-1))/f:100}}))},y.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var w=this.streamFiles&&!u.file.dir;if(w){var f=s(u,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(u){this.accumulate=!1;var w=this.streamFiles&&!u.file.dir,f=s(u,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),w)this.push({data:function(g){return h.DATA_DESCRIPTOR+o(g.crc32,4)+o(g.compressedSize,4)+o(g.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var u=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var f=this.bytesWritten-u,g=function(v,x,S,O,I){var j=a.transformTo("string",I(O));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(v,2)+o(v,2)+o(x,4)+o(S,4)+o(j.length,2)+j}(this.dirRecords.length,f,u,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(u){this._sources.push(u);var w=this;return u.on("data",function(f){w.processChunk(f)}),u.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),u.on("error",function(f){w.error(f)}),this},y.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(u){var w=this._sources;if(!l.prototype.error.call(this,u))return!1;for(var f=0;f<w.length;f++)try{w[f].error(u)}catch{}return!0},y.prototype.lock=function(){l.prototype.lock.call(this);for(var u=this._sources,w=0;w<u.length;w++)u[w].lock()},i.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,t){var o=n("../compressions"),s=n("./ZipFileWorker");t.generateWorker=function(a,l,c){var p=new s(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{a.forEach(function(y,u){h++;var w=function(x,S){var O=x||S,I=o[O];if(!I)throw new Error(O+" is not a valid compression method !");return I}(u.options.compression,l.compression),f=u.options.compressionOptions||l.compressionOptions||{},g=u.dir,v=u.date;u._compressWorker(w,f).withStreamInfo("file",{name:y,dir:g,date:v,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(p)}),p.entriesCount=h}catch(y){p.error(y)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,t){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(s,a){return new o().loadAsync(s,a)},o.external=n("./external"),i.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,t){var o=n("./utils"),s=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),p=n("./nodejsUtils");function h(y){return new s.Promise(function(u,w){var f=y.decompressed.getContentWorker().pipe(new c);f.on("error",function(g){w(g)}).on("end",function(){f.streamInfo.crc32!==y.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}i.exports=function(y,u){var w=this;return u=o.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),p.isNode&&p.isStream(y)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",y,!0,u.optimizedBinaryString,u.base64).then(function(f){var g=new l(u);return g.load(f),g}).then(function(f){var g=[s.Promise.resolve(f)],v=f.files;if(u.checkCRC32)for(var x=0;x<v.length;x++)g.push(h(v[x]));return s.Promise.all(g)}).then(function(f){for(var g=f.shift(),v=g.files,x=0;x<v.length;x++){var S=v[x],O=S.fileNameStr,I=o.resolve(S.fileNameStr);w.file(I,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:u.createFolders}),S.dir||(w.file(I).unsafeOriginalName=O)}return g.zipComment.length&&(w.comment=g.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,t){var o=n("../utils"),s=n("../stream/GenericWorker");function a(l,c){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}o.inherits(a,s),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(p){c.push({data:p,meta:{percent:0}})}).on("error",function(p){c.isPaused?this.generatedError=p:c.error(p)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,t){var o=n("readable-stream").Readable;function s(a,l,c){o.call(this,l),this._helper=a;var p=this;a.on("data",function(h,y){p.push(h)||p._helper.pause(),c&&c(y)}).on("error",function(h){p.emit("error",h)}).on("end",function(){p.push(null)})}n("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},i.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,i,t){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,i,t){function o(I,j,E){var R,P=a.getTypeOf(j),U=a.extend(E||{},p);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(I=v(I)),U.createFolders&&(R=g(I))&&x.call(this,R,!0);var V=P==="string"&&U.binary===!1&&U.base64===!1;E&&E.binary!==void 0||(U.binary=!V),(j instanceof h&&j.uncompressedSize===0||U.dir||!j||j.length===0)&&(U.base64=!1,U.binary=!0,j="",U.compression="STORE",P="string");var k=null;k=j instanceof h||j instanceof l?j:w.isNode&&w.isStream(j)?new f(I,j):a.prepareContent(I,j,U.binary,U.optimizedBinaryString,U.base64);var A=new y(I,k,U);this.files[I]=A}var s=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),p=n("./defaults"),h=n("./compressedObject"),y=n("./zipObject"),u=n("./generate"),w=n("./nodejsUtils"),f=n("./nodejs/NodejsStreamInputAdapter"),g=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var j=I.lastIndexOf("/");return 0<j?I.substring(0,j):""},v=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},x=function(I,j){return j=j!==void 0?j:p.createFolders,I=v(I),this.files[I]||o.call(this,I,null,{dir:!0,createFolders:j}),this.files[I]};function S(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var j,E,R;for(j in this.files)R=this.files[j],(E=j.slice(this.root.length,j.length))&&j.slice(0,this.root.length)===this.root&&I(E,R)},filter:function(I){var j=[];return this.forEach(function(E,R){I(E,R)&&j.push(R)}),j},file:function(I,j,E){if(arguments.length!==1)return I=this.root+I,o.call(this,I,j,E),this;if(S(I)){var R=I;return this.filter(function(U,V){return!V.dir&&R.test(U)})}var P=this.files[this.root+I];return P&&!P.dir?P:null},folder:function(I){if(!I)return this;if(S(I))return this.filter(function(P,U){return U.dir&&I.test(P)});var j=this.root+I,E=x.call(this,j),R=this.clone();return R.root=E.name,R},remove:function(I){I=this.root+I;var j=this.files[I];if(j||(I.slice(-1)!=="/"&&(I+="/"),j=this.files[I]),j&&!j.dir)delete this.files[I];else for(var E=this.filter(function(P,U){return U.name.slice(0,I.length)===I}),R=0;R<E.length;R++)delete this.files[E[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var j,E={};try{if((E=a.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");a.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var R=E.comment||this.comment||"";j=u.generateWorker(this,E,R)}catch(P){(j=new l("error")).error(P)}return new c(j,E.type||"string",E.mimeType)},generateAsync:function(I,j){return this.generateInternalStream(I).accumulate(j)},generateNodeStream:function(I,j){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(j)}};i.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,t){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,t){var o=n("./DataReader");function s(a){o.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),p=a.charCodeAt(2),h=a.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===l&&this.data[y+1]===c&&this.data[y+2]===p&&this.data[y+3]===h)return y-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),p=a.charCodeAt(2),h=a.charCodeAt(3),y=this.readData(4);return l===y[0]&&c===y[1]&&p===y[2]&&h===y[3]},s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},i.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,i,t){var o=n("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},i.exports=s},{"../utils":32}],19:[function(n,i,t){var o=n("./Uint8ArrayReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},i.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,t){var o=n("./DataReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},i.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,i,t){var o=n("./ArrayReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},i.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,t){var o=n("../utils"),s=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),p=n("./Uint8ArrayReader");i.exports=function(h){var y=o.getTypeOf(h);return o.checkSupport(y),y!=="string"||s.uint8array?y==="nodebuffer"?new c(h):s.uint8array?new p(o.transformTo("uint8array",h)):new a(o.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,t){t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,t){var o=n("./GenericWorker"),s=n("../utils");function a(l){o.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(a,o),a.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},i.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,t){var o=n("./GenericWorker"),s=n("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,o),a.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},i.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,t){var o=n("../utils"),s=n("./GenericWorker");function a(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}o.inherits(a,s),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}s.prototype.processChunk.call(this,l)},i.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,t){var o=n("../utils"),s=n("./GenericWorker");function a(l){s.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(p){c.dataIsReady=!0,c.data=p,c.max=p&&p.length||0,c.type=o.getTypeOf(p),c.isPaused||c._tickAndRepeat()},function(p){c.error(p)})}o.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,t){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(l){a.processChunk(l)}),s.on("end",function(){a.end()}),s.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},i.exports=o},{}],29:[function(n,i,t){var o=n("../utils"),s=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),p=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(w,f){return new p.Promise(function(g,v){var x=[],S=w._internalType,O=w._outputType,I=w._mimeType;w.on("data",function(j,E){x.push(j),f&&f(E)}).on("error",function(j){x=[],v(j)}).on("end",function(){try{var j=function(E,R,P){switch(E){case"blob":return o.newBlob(o.transformTo("arraybuffer",R),P);case"base64":return l.encode(R);default:return o.transformTo(E,R)}}(O,function(E,R){var P,U=0,V=null,k=0;for(P=0;P<R.length;P++)k+=R[P].length;switch(E){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(V=new Uint8Array(k),P=0;P<R.length;P++)V.set(R[P],U),U+=R[P].length;return V;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+E+"'")}}(S,x),I);g(j)}catch(E){v(E)}x=[]}).resume()})}function u(w,f,g){var v=f;switch(f){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=f,this._mimeType=g,o.checkSupport(v),this._worker=w.pipe(new s(v)),w.lock()}catch(x){this._worker=new a("error"),this._worker.error(x)}}u.prototype={accumulate:function(w){return y(this,w)},on:function(w,f){var g=this;return w==="data"?this._worker.on(w,function(v){f.call(g,v.data,v.meta)}):this._worker.on(w,function(){o.delay(f,arguments,g)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},w)}},i.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,t){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",t.nodebuffer=typeof Buffer<"u",t.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")t.blob=!1;else{var o=new ArrayBuffer(0);try{t.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),t.blob=s.getBlob("application/zip").size===0}catch{t.blob=!1}}}try{t.nodestream=!!n("readable-stream").Readable}catch{t.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,t){for(var o=n("./utils"),s=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),p=0;p<256;p++)c[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;c[254]=c[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function y(){l.call(this,"utf-8 encode")}t.utf8encode=function(u){return s.nodebuffer?a.newBufferFrom(u,"utf-8"):function(w){var f,g,v,x,S,O=w.length,I=0;for(x=0;x<O;x++)(64512&(g=w.charCodeAt(x)))==55296&&x+1<O&&(64512&(v=w.charCodeAt(x+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),x++),I+=g<128?1:g<2048?2:g<65536?3:4;for(f=s.uint8array?new Uint8Array(I):new Array(I),x=S=0;S<I;x++)(64512&(g=w.charCodeAt(x)))==55296&&x+1<O&&(64512&(v=w.charCodeAt(x+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),x++),g<128?f[S++]=g:(g<2048?f[S++]=192|g>>>6:(g<65536?f[S++]=224|g>>>12:(f[S++]=240|g>>>18,f[S++]=128|g>>>12&63),f[S++]=128|g>>>6&63),f[S++]=128|63&g);return f}(u)},t.utf8decode=function(u){return s.nodebuffer?o.transformTo("nodebuffer",u).toString("utf-8"):function(w){var f,g,v,x,S=w.length,O=new Array(2*S);for(f=g=0;f<S;)if((v=w[f++])<128)O[g++]=v;else if(4<(x=c[v]))O[g++]=65533,f+=x-1;else{for(v&=x===2?31:x===3?15:7;1<x&&f<S;)v=v<<6|63&w[f++],x--;1<x?O[g++]=65533:v<65536?O[g++]=v:(v-=65536,O[g++]=55296|v>>10&1023,O[g++]=56320|1023&v)}return O.length!==g&&(O.subarray?O=O.subarray(0,g):O.length=g),o.applyFromCharCode(O)}(u=o.transformTo(s.uint8array?"uint8array":"array",u))},o.inherits(h,l),h.prototype.processChunk=function(u){var w=o.transformTo(s.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var f=w;(w=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),w.set(f,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var g=function(x,S){var O;for((S=S||x.length)>x.length&&(S=x.length),O=S-1;0<=O&&(192&x[O])==128;)O--;return O<0||O===0?S:O+c[x[O]]>S?O:S}(w),v=w;g!==w.length&&(s.uint8array?(v=w.subarray(0,g),this.leftOver=w.subarray(g,w.length)):(v=w.slice(0,g),this.leftOver=w.slice(g,w.length))),this.push({data:t.utf8decode(v),meta:u.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=h,o.inherits(y,l),y.prototype.processChunk=function(u){this.push({data:t.utf8encode(u.data),meta:u.meta})},t.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,t){var o=n("./support"),s=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(f){return f}function p(f,g){for(var v=0;v<f.length;++v)g[v]=255&f.charCodeAt(v);return g}n("setimmediate"),t.newBlob=function(f,g){t.checkSupport("blob");try{return new Blob([f],{type:g})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(f),v.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(f,g,v){var x=[],S=0,O=f.length;if(O<=v)return String.fromCharCode.apply(null,f);for(;S<O;)g==="array"||g==="nodebuffer"?x.push(String.fromCharCode.apply(null,f.slice(S,Math.min(S+v,O)))):x.push(String.fromCharCode.apply(null,f.subarray(S,Math.min(S+v,O)))),S+=v;return x.join("")},stringifyByChar:function(f){for(var g="",v=0;v<f.length;v++)g+=String.fromCharCode(f[v]);return g},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function y(f){var g=65536,v=t.getTypeOf(f),x=!0;if(v==="uint8array"?x=h.applyCanBeUsed.uint8array:v==="nodebuffer"&&(x=h.applyCanBeUsed.nodebuffer),x)for(;1<g;)try{return h.stringifyByChunk(f,v,g)}catch{g=Math.floor(g/2)}return h.stringifyByChar(f)}function u(f,g){for(var v=0;v<f.length;v++)g[v]=f[v];return g}t.applyFromCharCode=y;var w={};w.string={string:c,array:function(f){return p(f,new Array(f.length))},arraybuffer:function(f){return w.string.uint8array(f).buffer},uint8array:function(f){return p(f,new Uint8Array(f.length))},nodebuffer:function(f){return p(f,a.allocBuffer(f.length))}},w.array={string:y,array:c,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(f)}},w.arraybuffer={string:function(f){return y(new Uint8Array(f))},array:function(f){return u(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:c,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(new Uint8Array(f))}},w.uint8array={string:y,array:function(f){return u(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:c,nodebuffer:function(f){return a.newBufferFrom(f)}},w.nodebuffer={string:y,array:function(f){return u(f,new Array(f.length))},arraybuffer:function(f){return w.nodebuffer.uint8array(f).buffer},uint8array:function(f){return u(f,new Uint8Array(f.length))},nodebuffer:c},t.transformTo=function(f,g){if(g=g||"",!f)return g;t.checkSupport(f);var v=t.getTypeOf(g);return w[v][f](g)},t.resolve=function(f){for(var g=f.split("/"),v=[],x=0;x<g.length;x++){var S=g[x];S==="."||S===""&&x!==0&&x!==g.length-1||(S===".."?v.pop():v.push(S))}return v.join("/")},t.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(f)?"nodebuffer":o.uint8array&&f instanceof Uint8Array?"uint8array":o.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(f){if(!o[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(f){var g,v,x="";for(v=0;v<(f||"").length;v++)x+="\\x"+((g=f.charCodeAt(v))<16?"0":"")+g.toString(16).toUpperCase();return x},t.delay=function(f,g,v){setImmediate(function(){f.apply(v||null,g||[])})},t.inherits=function(f,g){function v(){}v.prototype=g.prototype,f.prototype=new v},t.extend=function(){var f,g,v={};for(f=0;f<arguments.length;f++)for(g in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],g)&&v[g]===void 0&&(v[g]=arguments[f][g]);return v},t.prepareContent=function(f,g,v,x,S){return l.Promise.resolve(g).then(function(O){return o.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new l.Promise(function(I,j){var E=new FileReader;E.onload=function(R){I(R.target.result)},E.onerror=function(R){j(R.target.error)},E.readAsArrayBuffer(O)}):O}).then(function(O){var I=t.getTypeOf(O);return I?(I==="arraybuffer"?O=t.transformTo("uint8array",O):I==="string"&&(S?O=s.decode(O):v&&x!==!0&&(O=function(j){return p(j,o.uint8array?new Uint8Array(j.length):new Array(j.length))}(O))),O):l.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,t){var o=n("./reader/readerFor"),s=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function p(h){this.files=[],this.loadOptions=h}p.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(y)+", expected "+s.pretty(h)+")")}},isSignature:function(h,y){var u=this.reader.index;this.reader.setIndex(h);var w=this.reader.readString(4)===y;return this.reader.setIndex(u),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),y=c.uint8array?"uint8array":"array",u=s.transformTo(y,h);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,y,u,w=this.zip64EndOfCentralSize-44;0<w;)h=this.reader.readInt(2),y=this.reader.readInt(4),u=this.reader.readData(y),this.zip64ExtensibleData[h]={id:h,length:y,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,y;for(h=0;h<this.files.length;h++)y=this.files[h],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var y=h;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var w=y-u;if(0<w)this.isSignature(y,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(h){this.reader=o(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,t){var o=n("./reader/readerFor"),s=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),p=n("./compressions"),h=n("./support");function y(u,w){this.options=u,this.loadOptions=w}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var w,f;if(u.skip(22),this.fileNameLength=u.readInt(2),f=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(g){for(var v in p)if(Object.prototype.hasOwnProperty.call(p,v)&&p[v].magic===g)return p[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var w=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(w),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var w,f,g,v=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<v;)w=u.readInt(2),f=u.readInt(2),g=u.readData(f),this.extraFields[w]={id:w,length:f,value:g};u.setIndex(v)},handleUTF8:function(){var u=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var f=s.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var v=s.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var w=o(u.value);return w.readInt(1)!==1||l(this.fileName)!==w.readInt(4)?null:c.utf8decode(w.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var w=o(u.value);return w.readInt(1)!==1||l(this.fileComment)!==w.readInt(4)?null:c.utf8decode(w.readData(u.length-5))}return null}},i.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,t){function o(w,f,g){this.name=w,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=f,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var s=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),p=n("./stream/GenericWorker");o.prototype={internalStream:function(w){var f=null,g="string";try{if(!w)throw new Error("No output type specified.");var v=(g=w.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),f=this._decompressWorker();var x=!this._dataBinary;x&&!v&&(f=f.pipe(new l.Utf8EncodeWorker)),!x&&v&&(f=f.pipe(new l.Utf8DecodeWorker))}catch(S){(f=new p("error")).error(S)}return new s(f,g,"")},async:function(w,f){return this.internalStream(w).accumulate(f)},nodeStream:function(w,f){return this.internalStream(w||"nodebuffer").toNodejsStream(f)},_compressWorker:function(w,f){if(this._data instanceof c&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(g,w,f)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof p?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<h.length;u++)o.prototype[h[u]]=y;i.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,t){(function(o){var s,a,l=o.MutationObserver||o.WebKitMutationObserver;if(l){var c=0,p=new l(w),h=o.document.createTextNode("");p.observe(h,{characterData:!0}),s=function(){h.data=c=++c%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var f=o.document.createElement("script");f.onreadystatechange=function(){w(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},o.document.documentElement.appendChild(f)}:function(){setTimeout(w,0)};else{var y=new o.MessageChannel;y.port1.onmessage=w,s=function(){y.port2.postMessage(0)}}var u=[];function w(){var f,g;a=!0;for(var v=u.length;v;){for(g=u,u=[],f=-1;++f<v;)g[f]();v=u.length}a=!1}i.exports=function(f){u.push(f)!==1||a||s()}}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,t){var o=n("immediate");function s(){}var a={},l=["REJECTED"],c=["FULFILLED"],p=["PENDING"];function h(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,v!==s&&f(this,v)}function y(v,x,S){this.promise=v,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function u(v,x,S){o(function(){var O;try{O=x(S)}catch(I){return a.reject(v,I)}O===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,O)})}function w(v){var x=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof x=="function")return function(){x.apply(v,arguments)}}function f(v,x){var S=!1;function O(E){S||(S=!0,a.reject(v,E))}function I(E){S||(S=!0,a.resolve(v,E))}var j=g(function(){x(I,O)});j.status==="error"&&O(j.value)}function g(v,x){var S={};try{S.value=v(x),S.status="success"}catch(O){S.status="error",S.value=O}return S}(i.exports=h).prototype.finally=function(v){if(typeof v!="function")return this;var x=this.constructor;return this.then(function(S){return x.resolve(v()).then(function(){return S})},function(S){return x.resolve(v()).then(function(){throw S})})},h.prototype.catch=function(v){return this.then(null,v)},h.prototype.then=function(v,x){if(typeof v!="function"&&this.state===c||typeof x!="function"&&this.state===l)return this;var S=new this.constructor(s);return this.state!==p?u(S,this.state===c?v:x,this.outcome):this.queue.push(new y(S,v,x)),S},y.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},y.prototype.otherCallFulfilled=function(v){u(this.promise,this.onFulfilled,v)},y.prototype.callRejected=function(v){a.reject(this.promise,v)},y.prototype.otherCallRejected=function(v){u(this.promise,this.onRejected,v)},a.resolve=function(v,x){var S=g(w,x);if(S.status==="error")return a.reject(v,S.value);var O=S.value;if(O)f(v,O);else{v.state=c,v.outcome=x;for(var I=-1,j=v.queue.length;++I<j;)v.queue[I].callFulfilled(x)}return v},a.reject=function(v,x){v.state=l,v.outcome=x;for(var S=-1,O=v.queue.length;++S<O;)v.queue[S].callRejected(x);return v},h.resolve=function(v){return v instanceof this?v:a.resolve(new this(s),v)},h.reject=function(v){var x=new this(s);return a.reject(x,v)},h.all=function(v){var x=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=v.length,O=!1;if(!S)return this.resolve([]);for(var I=new Array(S),j=0,E=-1,R=new this(s);++E<S;)P(v[E],E);return R;function P(U,V){x.resolve(U).then(function(k){I[V]=k,++j!==S||O||(O=!0,a.resolve(R,I))},function(k){O||(O=!0,a.reject(R,k))})}},h.race=function(v){var x=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=v.length,O=!1;if(!S)return this.resolve([]);for(var I=-1,j=new this(s);++I<S;)E=v[I],x.resolve(E).then(function(R){O||(O=!0,a.resolve(j,R))},function(R){O||(O=!0,a.reject(j,R))});var E;return j}},{immediate:36}],38:[function(n,i,t){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,t){var o=n("./zlib/deflate"),s=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),p=Object.prototype.toString,h=0,y=-1,u=0,w=8;function f(v){if(!(this instanceof f))return new f(v);this.options=s.assign({level:y,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},v||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var S=o.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(S!==h)throw new Error(l[S]);if(x.header&&o.deflateSetHeader(this.strm,x.header),x.dictionary){var O;if(O=typeof x.dictionary=="string"?a.string2buf(x.dictionary):p.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(S=o.deflateSetDictionary(this.strm,O))!==h)throw new Error(l[S]);this._dict_set=!0}}function g(v,x){var S=new f(x);if(S.push(v,!0),S.err)throw S.msg||l[S.err];return S.result}f.prototype.push=function(v,x){var S,O,I=this.strm,j=this.options.chunkSize;if(this.ended)return!1;O=x===~~x?x:x===!0?4:0,typeof v=="string"?I.input=a.string2buf(v):p.call(v)==="[object ArrayBuffer]"?I.input=new Uint8Array(v):I.input=v,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new s.Buf8(j),I.next_out=0,I.avail_out=j),(S=o.deflate(I,O))!==1&&S!==h)return this.onEnd(S),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(I.output,I.next_out))):this.onData(s.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&S!==1);return O===4?(S=o.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===h):O!==2||(this.onEnd(h),!(I.avail_out=0))},f.prototype.onData=function(v){this.chunks.push(v)},f.prototype.onEnd=function(v){v===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},t.Deflate=f,t.deflate=g,t.deflateRaw=function(v,x){return(x=x||{}).raw=!0,g(v,x)},t.gzip=function(v,x){return(x=x||{}).gzip=!0,g(v,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,t){var o=n("./zlib/inflate"),s=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),p=n("./zlib/zstream"),h=n("./zlib/gzheader"),y=Object.prototype.toString;function u(f){if(!(this instanceof u))return new u(f);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},f||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||f&&f.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var v=o.inflateInit2(this.strm,g.windowBits);if(v!==l.Z_OK)throw new Error(c[v]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function w(f,g){var v=new u(g);if(v.push(f,!0),v.err)throw v.msg||c[v.err];return v.result}u.prototype.push=function(f,g){var v,x,S,O,I,j,E=this.strm,R=this.options.chunkSize,P=this.options.dictionary,U=!1;if(this.ended)return!1;x=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof f=="string"?E.input=a.binstring2buf(f):y.call(f)==="[object ArrayBuffer]"?E.input=new Uint8Array(f):E.input=f,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new s.Buf8(R),E.next_out=0,E.avail_out=R),(v=o.inflate(E,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&P&&(j=typeof P=="string"?a.string2buf(P):y.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,v=o.inflateSetDictionary(this.strm,j)),v===l.Z_BUF_ERROR&&U===!0&&(v=l.Z_OK,U=!1),v!==l.Z_STREAM_END&&v!==l.Z_OK)return this.onEnd(v),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&v!==l.Z_STREAM_END&&(E.avail_in!==0||x!==l.Z_FINISH&&x!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=a.utf8border(E.output,E.next_out),O=E.next_out-S,I=a.buf2string(E.output,S),E.next_out=O,E.avail_out=R-O,O&&s.arraySet(E.output,E.output,S,O,0),this.onData(I)):this.onData(s.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(U=!0)}while((0<E.avail_in||E.avail_out===0)&&v!==l.Z_STREAM_END);return v===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(v=o.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===l.Z_OK):x!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(E.avail_out=0))},u.prototype.onData=function(f){this.chunks.push(f)},u.prototype.onEnd=function(f){f===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},t.Inflate=u,t.inflate=w,t.inflateRaw=function(f,g){return(g=g||{}).raw=!0,w(f,g)},t.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,t){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";t.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var p=c.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var h in p)p.hasOwnProperty(h)&&(l[h]=p[h])}}return l},t.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var s={arraySet:function(l,c,p,h,y){if(c.subarray&&l.subarray)l.set(c.subarray(p,p+h),y);else for(var u=0;u<h;u++)l[y+u]=c[p+u]},flattenChunks:function(l){var c,p,h,y,u,w;for(c=h=0,p=l.length;c<p;c++)h+=l[c].length;for(w=new Uint8Array(h),c=y=0,p=l.length;c<p;c++)u=l[c],w.set(u,y),y+=u.length;return w}},a={arraySet:function(l,c,p,h,y){for(var u=0;u<h;u++)l[y+u]=c[p+u]},flattenChunks:function(l){return[].concat.apply([],l)}};t.setTyped=function(l){l?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,s)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(o)},{}],42:[function(n,i,t){var o=n("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new o.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function p(h,y){if(y<65537&&(h.subarray&&a||!h.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(h,y));for(var u="",w=0;w<y;w++)u+=String.fromCharCode(h[w]);return u}l[254]=l[254]=1,t.string2buf=function(h){var y,u,w,f,g,v=h.length,x=0;for(f=0;f<v;f++)(64512&(u=h.charCodeAt(f)))==55296&&f+1<v&&(64512&(w=h.charCodeAt(f+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),f++),x+=u<128?1:u<2048?2:u<65536?3:4;for(y=new o.Buf8(x),f=g=0;g<x;f++)(64512&(u=h.charCodeAt(f)))==55296&&f+1<v&&(64512&(w=h.charCodeAt(f+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),f++),u<128?y[g++]=u:(u<2048?y[g++]=192|u>>>6:(u<65536?y[g++]=224|u>>>12:(y[g++]=240|u>>>18,y[g++]=128|u>>>12&63),y[g++]=128|u>>>6&63),y[g++]=128|63&u);return y},t.buf2binstring=function(h){return p(h,h.length)},t.binstring2buf=function(h){for(var y=new o.Buf8(h.length),u=0,w=y.length;u<w;u++)y[u]=h.charCodeAt(u);return y},t.buf2string=function(h,y){var u,w,f,g,v=y||h.length,x=new Array(2*v);for(u=w=0;u<v;)if((f=h[u++])<128)x[w++]=f;else if(4<(g=l[f]))x[w++]=65533,u+=g-1;else{for(f&=g===2?31:g===3?15:7;1<g&&u<v;)f=f<<6|63&h[u++],g--;1<g?x[w++]=65533:f<65536?x[w++]=f:(f-=65536,x[w++]=55296|f>>10&1023,x[w++]=56320|1023&f)}return p(x,w)},t.utf8border=function(h,y){var u;for((y=y||h.length)>h.length&&(y=h.length),u=y-1;0<=u&&(192&h[u])==128;)u--;return u<0||u===0?y:u+l[h[u]]>y?u:y}},{"./common":41}],43:[function(n,i,t){i.exports=function(o,s,a,l){for(var c=65535&o|0,p=o>>>16&65535|0,h=0;a!==0;){for(a-=h=2e3<a?2e3:a;p=p+(c=c+s[l++]|0)|0,--h;);c%=65521,p%=65521}return c|p<<16|0}},{}],44:[function(n,i,t){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,t){var o=function(){for(var s,a=[],l=0;l<256;l++){s=l;for(var c=0;c<8;c++)s=1&s?3988292384^s>>>1:s>>>1;a[l]=s}return a}();i.exports=function(s,a,l,c){var p=o,h=c+l;s^=-1;for(var y=c;y<h;y++)s=s>>>8^p[255&(s^a[y])];return-1^s}},{}],46:[function(n,i,t){var o,s=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),p=n("./messages"),h=0,y=4,u=0,w=-2,f=-1,g=4,v=2,x=8,S=9,O=286,I=30,j=19,E=2*O+1,R=15,P=3,U=258,V=U+P+1,k=42,A=113,m=1,N=2,q=3,z=4;function Q(d,$){return d.msg=p[$],$}function W(d){return(d<<1)-(4<d?9:0)}function X(d){for(var $=d.length;0<=--$;)d[$]=0}function T(d){var $=d.state,B=$.pending;B>d.avail_out&&(B=d.avail_out),B!==0&&(s.arraySet(d.output,$.pending_buf,$.pending_out,B,d.next_out),d.next_out+=B,$.pending_out+=B,d.total_out+=B,d.avail_out-=B,$.pending-=B,$.pending===0&&($.pending_out=0))}function F(d,$){a._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,$),d.block_start=d.strstart,T(d.strm)}function te(d,$){d.pending_buf[d.pending++]=$}function K(d,$){d.pending_buf[d.pending++]=$>>>8&255,d.pending_buf[d.pending++]=255&$}function Z(d,$){var B,C,_=d.max_chain_length,M=d.strstart,H=d.prev_length,G=d.nice_match,L=d.strstart>d.w_size-V?d.strstart-(d.w_size-V):0,Y=d.window,ee=d.w_mask,J=d.prev,ne=d.strstart+U,ve=Y[M+H-1],ue=Y[M+H];d.prev_length>=d.good_match&&(_>>=2),G>d.lookahead&&(G=d.lookahead);do if(Y[(B=$)+H]===ue&&Y[B+H-1]===ve&&Y[B]===Y[M]&&Y[++B]===Y[M+1]){M+=2,B++;do;while(Y[++M]===Y[++B]&&Y[++M]===Y[++B]&&Y[++M]===Y[++B]&&Y[++M]===Y[++B]&&Y[++M]===Y[++B]&&Y[++M]===Y[++B]&&Y[++M]===Y[++B]&&Y[++M]===Y[++B]&&M<ne);if(C=U-(ne-M),M=ne-U,H<C){if(d.match_start=$,G<=(H=C))break;ve=Y[M+H-1],ue=Y[M+H]}}while(($=J[$&ee])>L&&--_!=0);return H<=d.lookahead?H:d.lookahead}function fe(d){var $,B,C,_,M,H,G,L,Y,ee,J=d.w_size;do{if(_=d.window_size-d.lookahead-d.strstart,d.strstart>=J+(J-V)){for(s.arraySet(d.window,d.window,J,J,0),d.match_start-=J,d.strstart-=J,d.block_start-=J,$=B=d.hash_size;C=d.head[--$],d.head[$]=J<=C?C-J:0,--B;);for($=B=J;C=d.prev[--$],d.prev[$]=J<=C?C-J:0,--B;);_+=J}if(d.strm.avail_in===0)break;if(H=d.strm,G=d.window,L=d.strstart+d.lookahead,Y=_,ee=void 0,ee=H.avail_in,Y<ee&&(ee=Y),B=ee===0?0:(H.avail_in-=ee,s.arraySet(G,H.input,H.next_in,ee,L),H.state.wrap===1?H.adler=l(H.adler,G,ee,L):H.state.wrap===2&&(H.adler=c(H.adler,G,ee,L)),H.next_in+=ee,H.total_in+=ee,ee),d.lookahead+=B,d.lookahead+d.insert>=P)for(M=d.strstart-d.insert,d.ins_h=d.window[M],d.ins_h=(d.ins_h<<d.hash_shift^d.window[M+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[M+P-1])&d.hash_mask,d.prev[M&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=M,M++,d.insert--,!(d.lookahead+d.insert<P)););}while(d.lookahead<V&&d.strm.avail_in!==0)}function me(d,$){for(var B,C;;){if(d.lookahead<V){if(fe(d),d.lookahead<V&&$===h)return m;if(d.lookahead===0)break}if(B=0,d.lookahead>=P&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+P-1])&d.hash_mask,B=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),B!==0&&d.strstart-B<=d.w_size-V&&(d.match_length=Z(d,B)),d.match_length>=P)if(C=a._tr_tally(d,d.strstart-d.match_start,d.match_length-P),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=P){for(d.match_length--;d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+P-1])&d.hash_mask,B=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart,--d.match_length!=0;);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else C=a._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(C&&(F(d,!1),d.strm.avail_out===0))return m}return d.insert=d.strstart<P-1?d.strstart:P-1,$===y?(F(d,!0),d.strm.avail_out===0?q:z):d.last_lit&&(F(d,!1),d.strm.avail_out===0)?m:N}function se(d,$){for(var B,C,_;;){if(d.lookahead<V){if(fe(d),d.lookahead<V&&$===h)return m;if(d.lookahead===0)break}if(B=0,d.lookahead>=P&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+P-1])&d.hash_mask,B=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=P-1,B!==0&&d.prev_length<d.max_lazy_match&&d.strstart-B<=d.w_size-V&&(d.match_length=Z(d,B),d.match_length<=5&&(d.strategy===1||d.match_length===P&&4096<d.strstart-d.match_start)&&(d.match_length=P-1)),d.prev_length>=P&&d.match_length<=d.prev_length){for(_=d.strstart+d.lookahead-P,C=a._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-P),d.lookahead-=d.prev_length-1,d.prev_length-=2;++d.strstart<=_&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+P-1])&d.hash_mask,B=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),--d.prev_length!=0;);if(d.match_available=0,d.match_length=P-1,d.strstart++,C&&(F(d,!1),d.strm.avail_out===0))return m}else if(d.match_available){if((C=a._tr_tally(d,0,d.window[d.strstart-1]))&&F(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return m}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(C=a._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<P-1?d.strstart:P-1,$===y?(F(d,!0),d.strm.avail_out===0?q:z):d.last_lit&&(F(d,!1),d.strm.avail_out===0)?m:N}function ce(d,$,B,C,_){this.good_length=d,this.max_lazy=$,this.nice_length=B,this.max_chain=C,this.func=_}function Ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*E),this.dyn_dtree=new s.Buf16(2*(2*I+1)),this.bl_tree=new s.Buf16(2*(2*j+1)),X(this.dyn_ltree),X(this.dyn_dtree),X(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(R+1),this.heap=new s.Buf16(2*O+1),X(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*O+1),X(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ye(d){var $;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=v,($=d.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?k:A,d.adler=$.wrap===2?0:1,$.last_flush=h,a._tr_init($),u):Q(d,w)}function Re(d){var $=ye(d);return $===u&&function(B){B.window_size=2*B.w_size,X(B.head),B.max_lazy_match=o[B.level].max_lazy,B.good_match=o[B.level].good_length,B.nice_match=o[B.level].nice_length,B.max_chain_length=o[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=P-1,B.match_available=0,B.ins_h=0}(d.state),$}function Ae(d,$,B,C,_,M){if(!d)return w;var H=1;if($===f&&($=6),C<0?(H=0,C=-C):15<C&&(H=2,C-=16),_<1||S<_||B!==x||C<8||15<C||$<0||9<$||M<0||g<M)return Q(d,w);C===8&&(C=9);var G=new Ce;return(d.state=G).strm=d,G.wrap=H,G.gzhead=null,G.w_bits=C,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=_+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+P-1)/P),G.window=new s.Buf8(2*G.w_size),G.head=new s.Buf16(G.hash_size),G.prev=new s.Buf16(G.w_size),G.lit_bufsize=1<<_+6,G.pending_buf_size=4*G.lit_bufsize,G.pending_buf=new s.Buf8(G.pending_buf_size),G.d_buf=1*G.lit_bufsize,G.l_buf=3*G.lit_bufsize,G.level=$,G.strategy=M,G.method=B,Re(d)}o=[new ce(0,0,0,0,function(d,$){var B=65535;for(B>d.pending_buf_size-5&&(B=d.pending_buf_size-5);;){if(d.lookahead<=1){if(fe(d),d.lookahead===0&&$===h)return m;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var C=d.block_start+B;if((d.strstart===0||d.strstart>=C)&&(d.lookahead=d.strstart-C,d.strstart=C,F(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-V&&(F(d,!1),d.strm.avail_out===0))return m}return d.insert=0,$===y?(F(d,!0),d.strm.avail_out===0?q:z):(d.strstart>d.block_start&&(F(d,!1),d.strm.avail_out),m)}),new ce(4,4,8,4,me),new ce(4,5,16,8,me),new ce(4,6,32,32,me),new ce(4,4,16,16,se),new ce(8,16,32,32,se),new ce(8,16,128,128,se),new ce(8,32,128,256,se),new ce(32,128,258,1024,se),new ce(32,258,258,4096,se)],t.deflateInit=function(d,$){return Ae(d,$,x,15,8,0)},t.deflateInit2=Ae,t.deflateReset=Re,t.deflateResetKeep=ye,t.deflateSetHeader=function(d,$){return d&&d.state?d.state.wrap!==2?w:(d.state.gzhead=$,u):w},t.deflate=function(d,$){var B,C,_,M;if(!d||!d.state||5<$||$<0)return d?Q(d,w):w;if(C=d.state,!d.output||!d.input&&d.avail_in!==0||C.status===666&&$!==y)return Q(d,d.avail_out===0?-5:w);if(C.strm=d,B=C.last_flush,C.last_flush=$,C.status===k)if(C.wrap===2)d.adler=0,te(C,31),te(C,139),te(C,8),C.gzhead?(te(C,(C.gzhead.text?1:0)+(C.gzhead.hcrc?2:0)+(C.gzhead.extra?4:0)+(C.gzhead.name?8:0)+(C.gzhead.comment?16:0)),te(C,255&C.gzhead.time),te(C,C.gzhead.time>>8&255),te(C,C.gzhead.time>>16&255),te(C,C.gzhead.time>>24&255),te(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),te(C,255&C.gzhead.os),C.gzhead.extra&&C.gzhead.extra.length&&(te(C,255&C.gzhead.extra.length),te(C,C.gzhead.extra.length>>8&255)),C.gzhead.hcrc&&(d.adler=c(d.adler,C.pending_buf,C.pending,0)),C.gzindex=0,C.status=69):(te(C,0),te(C,0),te(C,0),te(C,0),te(C,0),te(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),te(C,3),C.status=A);else{var H=x+(C.w_bits-8<<4)<<8;H|=(2<=C.strategy||C.level<2?0:C.level<6?1:C.level===6?2:3)<<6,C.strstart!==0&&(H|=32),H+=31-H%31,C.status=A,K(C,H),C.strstart!==0&&(K(C,d.adler>>>16),K(C,65535&d.adler)),d.adler=1}if(C.status===69)if(C.gzhead.extra){for(_=C.pending;C.gzindex<(65535&C.gzhead.extra.length)&&(C.pending!==C.pending_buf_size||(C.gzhead.hcrc&&C.pending>_&&(d.adler=c(d.adler,C.pending_buf,C.pending-_,_)),T(d),_=C.pending,C.pending!==C.pending_buf_size));)te(C,255&C.gzhead.extra[C.gzindex]),C.gzindex++;C.gzhead.hcrc&&C.pending>_&&(d.adler=c(d.adler,C.pending_buf,C.pending-_,_)),C.gzindex===C.gzhead.extra.length&&(C.gzindex=0,C.status=73)}else C.status=73;if(C.status===73)if(C.gzhead.name){_=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>_&&(d.adler=c(d.adler,C.pending_buf,C.pending-_,_)),T(d),_=C.pending,C.pending===C.pending_buf_size)){M=1;break}M=C.gzindex<C.gzhead.name.length?255&C.gzhead.name.charCodeAt(C.gzindex++):0,te(C,M)}while(M!==0);C.gzhead.hcrc&&C.pending>_&&(d.adler=c(d.adler,C.pending_buf,C.pending-_,_)),M===0&&(C.gzindex=0,C.status=91)}else C.status=91;if(C.status===91)if(C.gzhead.comment){_=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>_&&(d.adler=c(d.adler,C.pending_buf,C.pending-_,_)),T(d),_=C.pending,C.pending===C.pending_buf_size)){M=1;break}M=C.gzindex<C.gzhead.comment.length?255&C.gzhead.comment.charCodeAt(C.gzindex++):0,te(C,M)}while(M!==0);C.gzhead.hcrc&&C.pending>_&&(d.adler=c(d.adler,C.pending_buf,C.pending-_,_)),M===0&&(C.status=103)}else C.status=103;if(C.status===103&&(C.gzhead.hcrc?(C.pending+2>C.pending_buf_size&&T(d),C.pending+2<=C.pending_buf_size&&(te(C,255&d.adler),te(C,d.adler>>8&255),d.adler=0,C.status=A)):C.status=A),C.pending!==0){if(T(d),d.avail_out===0)return C.last_flush=-1,u}else if(d.avail_in===0&&W($)<=W(B)&&$!==y)return Q(d,-5);if(C.status===666&&d.avail_in!==0)return Q(d,-5);if(d.avail_in!==0||C.lookahead!==0||$!==h&&C.status!==666){var G=C.strategy===2?function(L,Y){for(var ee;;){if(L.lookahead===0&&(fe(L),L.lookahead===0)){if(Y===h)return m;break}if(L.match_length=0,ee=a._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++,ee&&(F(L,!1),L.strm.avail_out===0))return m}return L.insert=0,Y===y?(F(L,!0),L.strm.avail_out===0?q:z):L.last_lit&&(F(L,!1),L.strm.avail_out===0)?m:N}(C,$):C.strategy===3?function(L,Y){for(var ee,J,ne,ve,ue=L.window;;){if(L.lookahead<=U){if(fe(L),L.lookahead<=U&&Y===h)return m;if(L.lookahead===0)break}if(L.match_length=0,L.lookahead>=P&&0<L.strstart&&(J=ue[ne=L.strstart-1])===ue[++ne]&&J===ue[++ne]&&J===ue[++ne]){ve=L.strstart+U;do;while(J===ue[++ne]&&J===ue[++ne]&&J===ue[++ne]&&J===ue[++ne]&&J===ue[++ne]&&J===ue[++ne]&&J===ue[++ne]&&J===ue[++ne]&&ne<ve);L.match_length=U-(ve-ne),L.match_length>L.lookahead&&(L.match_length=L.lookahead)}if(L.match_length>=P?(ee=a._tr_tally(L,1,L.match_length-P),L.lookahead-=L.match_length,L.strstart+=L.match_length,L.match_length=0):(ee=a._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++),ee&&(F(L,!1),L.strm.avail_out===0))return m}return L.insert=0,Y===y?(F(L,!0),L.strm.avail_out===0?q:z):L.last_lit&&(F(L,!1),L.strm.avail_out===0)?m:N}(C,$):o[C.level].func(C,$);if(G!==q&&G!==z||(C.status=666),G===m||G===q)return d.avail_out===0&&(C.last_flush=-1),u;if(G===N&&($===1?a._tr_align(C):$!==5&&(a._tr_stored_block(C,0,0,!1),$===3&&(X(C.head),C.lookahead===0&&(C.strstart=0,C.block_start=0,C.insert=0))),T(d),d.avail_out===0))return C.last_flush=-1,u}return $!==y?u:C.wrap<=0?1:(C.wrap===2?(te(C,255&d.adler),te(C,d.adler>>8&255),te(C,d.adler>>16&255),te(C,d.adler>>24&255),te(C,255&d.total_in),te(C,d.total_in>>8&255),te(C,d.total_in>>16&255),te(C,d.total_in>>24&255)):(K(C,d.adler>>>16),K(C,65535&d.adler)),T(d),0<C.wrap&&(C.wrap=-C.wrap),C.pending!==0?u:1)},t.deflateEnd=function(d){var $;return d&&d.state?($=d.state.status)!==k&&$!==69&&$!==73&&$!==91&&$!==103&&$!==A&&$!==666?Q(d,w):(d.state=null,$===A?Q(d,-3):u):w},t.deflateSetDictionary=function(d,$){var B,C,_,M,H,G,L,Y,ee=$.length;if(!d||!d.state||(M=(B=d.state).wrap)===2||M===1&&B.status!==k||B.lookahead)return w;for(M===1&&(d.adler=l(d.adler,$,ee,0)),B.wrap=0,ee>=B.w_size&&(M===0&&(X(B.head),B.strstart=0,B.block_start=0,B.insert=0),Y=new s.Buf8(B.w_size),s.arraySet(Y,$,ee-B.w_size,B.w_size,0),$=Y,ee=B.w_size),H=d.avail_in,G=d.next_in,L=d.input,d.avail_in=ee,d.next_in=0,d.input=$,fe(B);B.lookahead>=P;){for(C=B.strstart,_=B.lookahead-(P-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[C+P-1])&B.hash_mask,B.prev[C&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=C,C++,--_;);B.strstart=C,B.lookahead=P-1,fe(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=P-1,B.match_available=0,d.next_in=G,d.input=L,d.avail_in=H,B.wrap=M,u},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,t){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,t){i.exports=function(o,s){var a,l,c,p,h,y,u,w,f,g,v,x,S,O,I,j,E,R,P,U,V,k,A,m,N;a=o.state,l=o.next_in,m=o.input,c=l+(o.avail_in-5),p=o.next_out,N=o.output,h=p-(s-o.avail_out),y=p+(o.avail_out-257),u=a.dmax,w=a.wsize,f=a.whave,g=a.wnext,v=a.window,x=a.hold,S=a.bits,O=a.lencode,I=a.distcode,j=(1<<a.lenbits)-1,E=(1<<a.distbits)-1;e:do{S<15&&(x+=m[l++]<<S,S+=8,x+=m[l++]<<S,S+=8),R=O[x&j];t:for(;;){if(x>>>=P=R>>>24,S-=P,(P=R>>>16&255)===0)N[p++]=65535&R;else{if(!(16&P)){if(!(64&P)){R=O[(65535&R)+(x&(1<<P)-1)];continue t}if(32&P){a.mode=12;break e}o.msg="invalid literal/length code",a.mode=30;break e}U=65535&R,(P&=15)&&(S<P&&(x+=m[l++]<<S,S+=8),U+=x&(1<<P)-1,x>>>=P,S-=P),S<15&&(x+=m[l++]<<S,S+=8,x+=m[l++]<<S,S+=8),R=I[x&E];n:for(;;){if(x>>>=P=R>>>24,S-=P,!(16&(P=R>>>16&255))){if(!(64&P)){R=I[(65535&R)+(x&(1<<P)-1)];continue n}o.msg="invalid distance code",a.mode=30;break e}if(V=65535&R,S<(P&=15)&&(x+=m[l++]<<S,(S+=8)<P&&(x+=m[l++]<<S,S+=8)),u<(V+=x&(1<<P)-1)){o.msg="invalid distance too far back",a.mode=30;break e}if(x>>>=P,S-=P,(P=p-h)<V){if(f<(P=V-P)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break e}if(A=v,(k=0)===g){if(k+=w-P,P<U){for(U-=P;N[p++]=v[k++],--P;);k=p-V,A=N}}else if(g<P){if(k+=w+g-P,(P-=g)<U){for(U-=P;N[p++]=v[k++],--P;);if(k=0,g<U){for(U-=P=g;N[p++]=v[k++],--P;);k=p-V,A=N}}}else if(k+=g-P,P<U){for(U-=P;N[p++]=v[k++],--P;);k=p-V,A=N}for(;2<U;)N[p++]=A[k++],N[p++]=A[k++],N[p++]=A[k++],U-=3;U&&(N[p++]=A[k++],1<U&&(N[p++]=A[k++]))}else{for(k=p-V;N[p++]=N[k++],N[p++]=N[k++],N[p++]=N[k++],2<(U-=3););U&&(N[p++]=N[k++],1<U&&(N[p++]=N[k++]))}break}}break}}while(l<c&&p<y);l-=U=S>>3,x&=(1<<(S-=U<<3))-1,o.next_in=l,o.next_out=p,o.avail_in=l<c?c-l+5:5-(l-c),o.avail_out=p<y?y-p+257:257-(p-y),a.hold=x,a.bits=S}},{}],49:[function(n,i,t){var o=n("../utils/common"),s=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),p=1,h=2,y=0,u=-2,w=1,f=852,g=592;function v(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(k){var A;return k&&k.state?(A=k.state,k.total_in=k.total_out=A.total=0,k.msg="",A.wrap&&(k.adler=1&A.wrap),A.mode=w,A.last=0,A.havedict=0,A.dmax=32768,A.head=null,A.hold=0,A.bits=0,A.lencode=A.lendyn=new o.Buf32(f),A.distcode=A.distdyn=new o.Buf32(g),A.sane=1,A.back=-1,y):u}function O(k){var A;return k&&k.state?((A=k.state).wsize=0,A.whave=0,A.wnext=0,S(k)):u}function I(k,A){var m,N;return k&&k.state?(N=k.state,A<0?(m=0,A=-A):(m=1+(A>>4),A<48&&(A&=15)),A&&(A<8||15<A)?u:(N.window!==null&&N.wbits!==A&&(N.window=null),N.wrap=m,N.wbits=A,O(k))):u}function j(k,A){var m,N;return k?(N=new x,(k.state=N).window=null,(m=I(k,A))!==y&&(k.state=null),m):u}var E,R,P=!0;function U(k){if(P){var A;for(E=new o.Buf32(512),R=new o.Buf32(32),A=0;A<144;)k.lens[A++]=8;for(;A<256;)k.lens[A++]=9;for(;A<280;)k.lens[A++]=7;for(;A<288;)k.lens[A++]=8;for(c(p,k.lens,0,288,E,0,k.work,{bits:9}),A=0;A<32;)k.lens[A++]=5;c(h,k.lens,0,32,R,0,k.work,{bits:5}),P=!1}k.lencode=E,k.lenbits=9,k.distcode=R,k.distbits=5}function V(k,A,m,N){var q,z=k.state;return z.window===null&&(z.wsize=1<<z.wbits,z.wnext=0,z.whave=0,z.window=new o.Buf8(z.wsize)),N>=z.wsize?(o.arraySet(z.window,A,m-z.wsize,z.wsize,0),z.wnext=0,z.whave=z.wsize):(N<(q=z.wsize-z.wnext)&&(q=N),o.arraySet(z.window,A,m-N,q,z.wnext),(N-=q)?(o.arraySet(z.window,A,m-N,N,0),z.wnext=N,z.whave=z.wsize):(z.wnext+=q,z.wnext===z.wsize&&(z.wnext=0),z.whave<z.wsize&&(z.whave+=q))),0}t.inflateReset=O,t.inflateReset2=I,t.inflateResetKeep=S,t.inflateInit=function(k){return j(k,15)},t.inflateInit2=j,t.inflate=function(k,A){var m,N,q,z,Q,W,X,T,F,te,K,Z,fe,me,se,ce,Ce,ye,Re,Ae,d,$,B,C,_=0,M=new o.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return u;(m=k.state).mode===12&&(m.mode=13),Q=k.next_out,q=k.output,X=k.avail_out,z=k.next_in,N=k.input,W=k.avail_in,T=m.hold,F=m.bits,te=W,K=X,$=y;e:for(;;)switch(m.mode){case w:if(m.wrap===0){m.mode=13;break}for(;F<16;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}if(2&m.wrap&&T===35615){M[m.check=0]=255&T,M[1]=T>>>8&255,m.check=a(m.check,M,2,0),F=T=0,m.mode=2;break}if(m.flags=0,m.head&&(m.head.done=!1),!(1&m.wrap)||(((255&T)<<8)+(T>>8))%31){k.msg="incorrect header check",m.mode=30;break}if((15&T)!=8){k.msg="unknown compression method",m.mode=30;break}if(F-=4,d=8+(15&(T>>>=4)),m.wbits===0)m.wbits=d;else if(d>m.wbits){k.msg="invalid window size",m.mode=30;break}m.dmax=1<<d,k.adler=m.check=1,m.mode=512&T?10:12,F=T=0;break;case 2:for(;F<16;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}if(m.flags=T,(255&m.flags)!=8){k.msg="unknown compression method",m.mode=30;break}if(57344&m.flags){k.msg="unknown header flags set",m.mode=30;break}m.head&&(m.head.text=T>>8&1),512&m.flags&&(M[0]=255&T,M[1]=T>>>8&255,m.check=a(m.check,M,2,0)),F=T=0,m.mode=3;case 3:for(;F<32;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}m.head&&(m.head.time=T),512&m.flags&&(M[0]=255&T,M[1]=T>>>8&255,M[2]=T>>>16&255,M[3]=T>>>24&255,m.check=a(m.check,M,4,0)),F=T=0,m.mode=4;case 4:for(;F<16;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}m.head&&(m.head.xflags=255&T,m.head.os=T>>8),512&m.flags&&(M[0]=255&T,M[1]=T>>>8&255,m.check=a(m.check,M,2,0)),F=T=0,m.mode=5;case 5:if(1024&m.flags){for(;F<16;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}m.length=T,m.head&&(m.head.extra_len=T),512&m.flags&&(M[0]=255&T,M[1]=T>>>8&255,m.check=a(m.check,M,2,0)),F=T=0}else m.head&&(m.head.extra=null);m.mode=6;case 6:if(1024&m.flags&&(W<(Z=m.length)&&(Z=W),Z&&(m.head&&(d=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),o.arraySet(m.head.extra,N,z,Z,d)),512&m.flags&&(m.check=a(m.check,N,Z,z)),W-=Z,z+=Z,m.length-=Z),m.length))break e;m.length=0,m.mode=7;case 7:if(2048&m.flags){if(W===0)break e;for(Z=0;d=N[z+Z++],m.head&&d&&m.length<65536&&(m.head.name+=String.fromCharCode(d)),d&&Z<W;);if(512&m.flags&&(m.check=a(m.check,N,Z,z)),W-=Z,z+=Z,d)break e}else m.head&&(m.head.name=null);m.length=0,m.mode=8;case 8:if(4096&m.flags){if(W===0)break e;for(Z=0;d=N[z+Z++],m.head&&d&&m.length<65536&&(m.head.comment+=String.fromCharCode(d)),d&&Z<W;);if(512&m.flags&&(m.check=a(m.check,N,Z,z)),W-=Z,z+=Z,d)break e}else m.head&&(m.head.comment=null);m.mode=9;case 9:if(512&m.flags){for(;F<16;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}if(T!==(65535&m.check)){k.msg="header crc mismatch",m.mode=30;break}F=T=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),k.adler=m.check=0,m.mode=12;break;case 10:for(;F<32;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}k.adler=m.check=v(T),F=T=0,m.mode=11;case 11:if(m.havedict===0)return k.next_out=Q,k.avail_out=X,k.next_in=z,k.avail_in=W,m.hold=T,m.bits=F,2;k.adler=m.check=1,m.mode=12;case 12:if(A===5||A===6)break e;case 13:if(m.last){T>>>=7&F,F-=7&F,m.mode=27;break}for(;F<3;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}switch(m.last=1&T,F-=1,3&(T>>>=1)){case 0:m.mode=14;break;case 1:if(U(m),m.mode=20,A!==6)break;T>>>=2,F-=2;break e;case 2:m.mode=17;break;case 3:k.msg="invalid block type",m.mode=30}T>>>=2,F-=2;break;case 14:for(T>>>=7&F,F-=7&F;F<32;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}if((65535&T)!=(T>>>16^65535)){k.msg="invalid stored block lengths",m.mode=30;break}if(m.length=65535&T,F=T=0,m.mode=15,A===6)break e;case 15:m.mode=16;case 16:if(Z=m.length){if(W<Z&&(Z=W),X<Z&&(Z=X),Z===0)break e;o.arraySet(q,N,z,Z,Q),W-=Z,z+=Z,X-=Z,Q+=Z,m.length-=Z;break}m.mode=12;break;case 17:for(;F<14;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}if(m.nlen=257+(31&T),T>>>=5,F-=5,m.ndist=1+(31&T),T>>>=5,F-=5,m.ncode=4+(15&T),T>>>=4,F-=4,286<m.nlen||30<m.ndist){k.msg="too many length or distance symbols",m.mode=30;break}m.have=0,m.mode=18;case 18:for(;m.have<m.ncode;){for(;F<3;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}m.lens[H[m.have++]]=7&T,T>>>=3,F-=3}for(;m.have<19;)m.lens[H[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,B={bits:m.lenbits},$=c(0,m.lens,0,19,m.lencode,0,m.work,B),m.lenbits=B.bits,$){k.msg="invalid code lengths set",m.mode=30;break}m.have=0,m.mode=19;case 19:for(;m.have<m.nlen+m.ndist;){for(;ce=(_=m.lencode[T&(1<<m.lenbits)-1])>>>16&255,Ce=65535&_,!((se=_>>>24)<=F);){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}if(Ce<16)T>>>=se,F-=se,m.lens[m.have++]=Ce;else{if(Ce===16){for(C=se+2;F<C;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}if(T>>>=se,F-=se,m.have===0){k.msg="invalid bit length repeat",m.mode=30;break}d=m.lens[m.have-1],Z=3+(3&T),T>>>=2,F-=2}else if(Ce===17){for(C=se+3;F<C;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}F-=se,d=0,Z=3+(7&(T>>>=se)),T>>>=3,F-=3}else{for(C=se+7;F<C;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}F-=se,d=0,Z=11+(127&(T>>>=se)),T>>>=7,F-=7}if(m.have+Z>m.nlen+m.ndist){k.msg="invalid bit length repeat",m.mode=30;break}for(;Z--;)m.lens[m.have++]=d}}if(m.mode===30)break;if(m.lens[256]===0){k.msg="invalid code -- missing end-of-block",m.mode=30;break}if(m.lenbits=9,B={bits:m.lenbits},$=c(p,m.lens,0,m.nlen,m.lencode,0,m.work,B),m.lenbits=B.bits,$){k.msg="invalid literal/lengths set",m.mode=30;break}if(m.distbits=6,m.distcode=m.distdyn,B={bits:m.distbits},$=c(h,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,B),m.distbits=B.bits,$){k.msg="invalid distances set",m.mode=30;break}if(m.mode=20,A===6)break e;case 20:m.mode=21;case 21:if(6<=W&&258<=X){k.next_out=Q,k.avail_out=X,k.next_in=z,k.avail_in=W,m.hold=T,m.bits=F,l(k,K),Q=k.next_out,q=k.output,X=k.avail_out,z=k.next_in,N=k.input,W=k.avail_in,T=m.hold,F=m.bits,m.mode===12&&(m.back=-1);break}for(m.back=0;ce=(_=m.lencode[T&(1<<m.lenbits)-1])>>>16&255,Ce=65535&_,!((se=_>>>24)<=F);){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}if(ce&&!(240&ce)){for(ye=se,Re=ce,Ae=Ce;ce=(_=m.lencode[Ae+((T&(1<<ye+Re)-1)>>ye)])>>>16&255,Ce=65535&_,!(ye+(se=_>>>24)<=F);){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}T>>>=ye,F-=ye,m.back+=ye}if(T>>>=se,F-=se,m.back+=se,m.length=Ce,ce===0){m.mode=26;break}if(32&ce){m.back=-1,m.mode=12;break}if(64&ce){k.msg="invalid literal/length code",m.mode=30;break}m.extra=15&ce,m.mode=22;case 22:if(m.extra){for(C=m.extra;F<C;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}m.length+=T&(1<<m.extra)-1,T>>>=m.extra,F-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=23;case 23:for(;ce=(_=m.distcode[T&(1<<m.distbits)-1])>>>16&255,Ce=65535&_,!((se=_>>>24)<=F);){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}if(!(240&ce)){for(ye=se,Re=ce,Ae=Ce;ce=(_=m.distcode[Ae+((T&(1<<ye+Re)-1)>>ye)])>>>16&255,Ce=65535&_,!(ye+(se=_>>>24)<=F);){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}T>>>=ye,F-=ye,m.back+=ye}if(T>>>=se,F-=se,m.back+=se,64&ce){k.msg="invalid distance code",m.mode=30;break}m.offset=Ce,m.extra=15&ce,m.mode=24;case 24:if(m.extra){for(C=m.extra;F<C;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}m.offset+=T&(1<<m.extra)-1,T>>>=m.extra,F-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){k.msg="invalid distance too far back",m.mode=30;break}m.mode=25;case 25:if(X===0)break e;if(Z=K-X,m.offset>Z){if((Z=m.offset-Z)>m.whave&&m.sane){k.msg="invalid distance too far back",m.mode=30;break}fe=Z>m.wnext?(Z-=m.wnext,m.wsize-Z):m.wnext-Z,Z>m.length&&(Z=m.length),me=m.window}else me=q,fe=Q-m.offset,Z=m.length;for(X<Z&&(Z=X),X-=Z,m.length-=Z;q[Q++]=me[fe++],--Z;);m.length===0&&(m.mode=21);break;case 26:if(X===0)break e;q[Q++]=m.length,X--,m.mode=21;break;case 27:if(m.wrap){for(;F<32;){if(W===0)break e;W--,T|=N[z++]<<F,F+=8}if(K-=X,k.total_out+=K,m.total+=K,K&&(k.adler=m.check=m.flags?a(m.check,q,K,Q-K):s(m.check,q,K,Q-K)),K=X,(m.flags?T:v(T))!==m.check){k.msg="incorrect data check",m.mode=30;break}F=T=0}m.mode=28;case 28:if(m.wrap&&m.flags){for(;F<32;){if(W===0)break e;W--,T+=N[z++]<<F,F+=8}if(T!==(4294967295&m.total)){k.msg="incorrect length check",m.mode=30;break}F=T=0}m.mode=29;case 29:$=1;break e;case 30:$=-3;break e;case 31:return-4;case 32:default:return u}return k.next_out=Q,k.avail_out=X,k.next_in=z,k.avail_in=W,m.hold=T,m.bits=F,(m.wsize||K!==k.avail_out&&m.mode<30&&(m.mode<27||A!==4))&&V(k,k.output,k.next_out,K-k.avail_out)?(m.mode=31,-4):(te-=k.avail_in,K-=k.avail_out,k.total_in+=te,k.total_out+=K,m.total+=K,m.wrap&&K&&(k.adler=m.check=m.flags?a(m.check,q,K,k.next_out-K):s(m.check,q,K,k.next_out-K)),k.data_type=m.bits+(m.last?64:0)+(m.mode===12?128:0)+(m.mode===20||m.mode===15?256:0),(te==0&&K===0||A===4)&&$===y&&($=-5),$)},t.inflateEnd=function(k){if(!k||!k.state)return u;var A=k.state;return A.window&&(A.window=null),k.state=null,y},t.inflateGetHeader=function(k,A){var m;return k&&k.state&&2&(m=k.state).wrap?((m.head=A).done=!1,y):u},t.inflateSetDictionary=function(k,A){var m,N=A.length;return k&&k.state?(m=k.state).wrap!==0&&m.mode!==11?u:m.mode===11&&s(1,A,N,0)!==m.check?-3:V(k,A,N,N)?(m.mode=31,-4):(m.havedict=1,y):u},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,t){var o=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(p,h,y,u,w,f,g,v){var x,S,O,I,j,E,R,P,U,V=v.bits,k=0,A=0,m=0,N=0,q=0,z=0,Q=0,W=0,X=0,T=0,F=null,te=0,K=new o.Buf16(16),Z=new o.Buf16(16),fe=null,me=0;for(k=0;k<=15;k++)K[k]=0;for(A=0;A<u;A++)K[h[y+A]]++;for(q=V,N=15;1<=N&&K[N]===0;N--);if(N<q&&(q=N),N===0)return w[f++]=20971520,w[f++]=20971520,v.bits=1,0;for(m=1;m<N&&K[m]===0;m++);for(q<m&&(q=m),k=W=1;k<=15;k++)if(W<<=1,(W-=K[k])<0)return-1;if(0<W&&(p===0||N!==1))return-1;for(Z[1]=0,k=1;k<15;k++)Z[k+1]=Z[k]+K[k];for(A=0;A<u;A++)h[y+A]!==0&&(g[Z[h[y+A]]++]=A);if(E=p===0?(F=fe=g,19):p===1?(F=s,te-=257,fe=a,me-=257,256):(F=l,fe=c,-1),k=m,j=f,Q=A=T=0,O=-1,I=(X=1<<(z=q))-1,p===1&&852<X||p===2&&592<X)return 1;for(;;){for(R=k-Q,U=g[A]<E?(P=0,g[A]):g[A]>E?(P=fe[me+g[A]],F[te+g[A]]):(P=96,0),x=1<<k-Q,m=S=1<<z;w[j+(T>>Q)+(S-=x)]=R<<24|P<<16|U|0,S!==0;);for(x=1<<k-1;T&x;)x>>=1;if(x!==0?(T&=x-1,T+=x):T=0,A++,--K[k]==0){if(k===N)break;k=h[y+g[A]]}if(q<k&&(T&I)!==O){for(Q===0&&(Q=q),j+=m,W=1<<(z=k-Q);z+Q<N&&!((W-=K[z+Q])<=0);)z++,W<<=1;if(X+=1<<z,p===1&&852<X||p===2&&592<X)return 1;w[O=T&I]=q<<24|z<<16|j-f|0}}return T!==0&&(w[j+T]=k-Q<<24|64<<16|0),v.bits=q,0}},{"../utils/common":41}],51:[function(n,i,t){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,t){var o=n("../utils/common"),s=0,a=1;function l(_){for(var M=_.length;0<=--M;)_[M]=0}var c=0,p=29,h=256,y=h+1+p,u=30,w=19,f=2*y+1,g=15,v=16,x=7,S=256,O=16,I=17,j=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(y+2));l(V);var k=new Array(2*u);l(k);var A=new Array(512);l(A);var m=new Array(256);l(m);var N=new Array(p);l(N);var q,z,Q,W=new Array(u);function X(_,M,H,G,L){this.static_tree=_,this.extra_bits=M,this.extra_base=H,this.elems=G,this.max_length=L,this.has_stree=_&&_.length}function T(_,M){this.dyn_tree=_,this.max_code=0,this.stat_desc=M}function F(_){return _<256?A[_]:A[256+(_>>>7)]}function te(_,M){_.pending_buf[_.pending++]=255&M,_.pending_buf[_.pending++]=M>>>8&255}function K(_,M,H){_.bi_valid>v-H?(_.bi_buf|=M<<_.bi_valid&65535,te(_,_.bi_buf),_.bi_buf=M>>v-_.bi_valid,_.bi_valid+=H-v):(_.bi_buf|=M<<_.bi_valid&65535,_.bi_valid+=H)}function Z(_,M,H){K(_,H[2*M],H[2*M+1])}function fe(_,M){for(var H=0;H|=1&_,_>>>=1,H<<=1,0<--M;);return H>>>1}function me(_,M,H){var G,L,Y=new Array(g+1),ee=0;for(G=1;G<=g;G++)Y[G]=ee=ee+H[G-1]<<1;for(L=0;L<=M;L++){var J=_[2*L+1];J!==0&&(_[2*L]=fe(Y[J]++,J))}}function se(_){var M;for(M=0;M<y;M++)_.dyn_ltree[2*M]=0;for(M=0;M<u;M++)_.dyn_dtree[2*M]=0;for(M=0;M<w;M++)_.bl_tree[2*M]=0;_.dyn_ltree[2*S]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function ce(_){8<_.bi_valid?te(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function Ce(_,M,H,G){var L=2*M,Y=2*H;return _[L]<_[Y]||_[L]===_[Y]&&G[M]<=G[H]}function ye(_,M,H){for(var G=_.heap[H],L=H<<1;L<=_.heap_len&&(L<_.heap_len&&Ce(M,_.heap[L+1],_.heap[L],_.depth)&&L++,!Ce(M,G,_.heap[L],_.depth));)_.heap[H]=_.heap[L],H=L,L<<=1;_.heap[H]=G}function Re(_,M,H){var G,L,Y,ee,J=0;if(_.last_lit!==0)for(;G=_.pending_buf[_.d_buf+2*J]<<8|_.pending_buf[_.d_buf+2*J+1],L=_.pending_buf[_.l_buf+J],J++,G===0?Z(_,L,M):(Z(_,(Y=m[L])+h+1,M),(ee=E[Y])!==0&&K(_,L-=N[Y],ee),Z(_,Y=F(--G),H),(ee=R[Y])!==0&&K(_,G-=W[Y],ee)),J<_.last_lit;);Z(_,S,M)}function Ae(_,M){var H,G,L,Y=M.dyn_tree,ee=M.stat_desc.static_tree,J=M.stat_desc.has_stree,ne=M.stat_desc.elems,ve=-1;for(_.heap_len=0,_.heap_max=f,H=0;H<ne;H++)Y[2*H]!==0?(_.heap[++_.heap_len]=ve=H,_.depth[H]=0):Y[2*H+1]=0;for(;_.heap_len<2;)Y[2*(L=_.heap[++_.heap_len]=ve<2?++ve:0)]=1,_.depth[L]=0,_.opt_len--,J&&(_.static_len-=ee[2*L+1]);for(M.max_code=ve,H=_.heap_len>>1;1<=H;H--)ye(_,Y,H);for(L=ne;H=_.heap[1],_.heap[1]=_.heap[_.heap_len--],ye(_,Y,1),G=_.heap[1],_.heap[--_.heap_max]=H,_.heap[--_.heap_max]=G,Y[2*L]=Y[2*H]+Y[2*G],_.depth[L]=(_.depth[H]>=_.depth[G]?_.depth[H]:_.depth[G])+1,Y[2*H+1]=Y[2*G+1]=L,_.heap[1]=L++,ye(_,Y,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(ue,Le){var xt,We,St,ke,At,ln,Ge=Le.dyn_tree,Qn=Le.max_code,Fi=Le.stat_desc.static_tree,zi=Le.stat_desc.has_stree,Li=Le.stat_desc.extra_bits,er=Le.stat_desc.extra_base,_t=Le.stat_desc.max_length,Ft=0;for(ke=0;ke<=g;ke++)ue.bl_count[ke]=0;for(Ge[2*ue.heap[ue.heap_max]+1]=0,xt=ue.heap_max+1;xt<f;xt++)_t<(ke=Ge[2*Ge[2*(We=ue.heap[xt])+1]+1]+1)&&(ke=_t,Ft++),Ge[2*We+1]=ke,Qn<We||(ue.bl_count[ke]++,At=0,er<=We&&(At=Li[We-er]),ln=Ge[2*We],ue.opt_len+=ln*(ke+At),zi&&(ue.static_len+=ln*(Fi[2*We+1]+At)));if(Ft!==0){do{for(ke=_t-1;ue.bl_count[ke]===0;)ke--;ue.bl_count[ke]--,ue.bl_count[ke+1]+=2,ue.bl_count[_t]--,Ft-=2}while(0<Ft);for(ke=_t;ke!==0;ke--)for(We=ue.bl_count[ke];We!==0;)Qn<(St=ue.heap[--xt])||(Ge[2*St+1]!==ke&&(ue.opt_len+=(ke-Ge[2*St+1])*Ge[2*St],Ge[2*St+1]=ke),We--)}}(_,M),me(Y,ve,_.bl_count)}function d(_,M,H){var G,L,Y=-1,ee=M[1],J=0,ne=7,ve=4;for(ee===0&&(ne=138,ve=3),M[2*(H+1)+1]=65535,G=0;G<=H;G++)L=ee,ee=M[2*(G+1)+1],++J<ne&&L===ee||(J<ve?_.bl_tree[2*L]+=J:L!==0?(L!==Y&&_.bl_tree[2*L]++,_.bl_tree[2*O]++):J<=10?_.bl_tree[2*I]++:_.bl_tree[2*j]++,Y=L,ve=(J=0)===ee?(ne=138,3):L===ee?(ne=6,3):(ne=7,4))}function $(_,M,H){var G,L,Y=-1,ee=M[1],J=0,ne=7,ve=4;for(ee===0&&(ne=138,ve=3),G=0;G<=H;G++)if(L=ee,ee=M[2*(G+1)+1],!(++J<ne&&L===ee)){if(J<ve)for(;Z(_,L,_.bl_tree),--J!=0;);else L!==0?(L!==Y&&(Z(_,L,_.bl_tree),J--),Z(_,O,_.bl_tree),K(_,J-3,2)):J<=10?(Z(_,I,_.bl_tree),K(_,J-3,3)):(Z(_,j,_.bl_tree),K(_,J-11,7));Y=L,ve=(J=0)===ee?(ne=138,3):L===ee?(ne=6,3):(ne=7,4)}}l(W);var B=!1;function C(_,M,H,G){K(_,(c<<1)+(G?1:0),3),function(L,Y,ee,J){ce(L),J&&(te(L,ee),te(L,~ee)),o.arraySet(L.pending_buf,L.window,Y,ee,L.pending),L.pending+=ee}(_,M,H,!0)}t._tr_init=function(_){B||(function(){var M,H,G,L,Y,ee=new Array(g+1);for(L=G=0;L<p-1;L++)for(N[L]=G,M=0;M<1<<E[L];M++)m[G++]=L;for(m[G-1]=L,L=Y=0;L<16;L++)for(W[L]=Y,M=0;M<1<<R[L];M++)A[Y++]=L;for(Y>>=7;L<u;L++)for(W[L]=Y<<7,M=0;M<1<<R[L]-7;M++)A[256+Y++]=L;for(H=0;H<=g;H++)ee[H]=0;for(M=0;M<=143;)V[2*M+1]=8,M++,ee[8]++;for(;M<=255;)V[2*M+1]=9,M++,ee[9]++;for(;M<=279;)V[2*M+1]=7,M++,ee[7]++;for(;M<=287;)V[2*M+1]=8,M++,ee[8]++;for(me(V,y+1,ee),M=0;M<u;M++)k[2*M+1]=5,k[2*M]=fe(M,5);q=new X(V,E,h+1,y,g),z=new X(k,R,0,u,g),Q=new X(new Array(0),P,0,w,x)}(),B=!0),_.l_desc=new T(_.dyn_ltree,q),_.d_desc=new T(_.dyn_dtree,z),_.bl_desc=new T(_.bl_tree,Q),_.bi_buf=0,_.bi_valid=0,se(_)},t._tr_stored_block=C,t._tr_flush_block=function(_,M,H,G){var L,Y,ee=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(J){var ne,ve=4093624447;for(ne=0;ne<=31;ne++,ve>>>=1)if(1&ve&&J.dyn_ltree[2*ne]!==0)return s;if(J.dyn_ltree[18]!==0||J.dyn_ltree[20]!==0||J.dyn_ltree[26]!==0)return a;for(ne=32;ne<h;ne++)if(J.dyn_ltree[2*ne]!==0)return a;return s}(_)),Ae(_,_.l_desc),Ae(_,_.d_desc),ee=function(J){var ne;for(d(J,J.dyn_ltree,J.l_desc.max_code),d(J,J.dyn_dtree,J.d_desc.max_code),Ae(J,J.bl_desc),ne=w-1;3<=ne&&J.bl_tree[2*U[ne]+1]===0;ne--);return J.opt_len+=3*(ne+1)+5+5+4,ne}(_),L=_.opt_len+3+7>>>3,(Y=_.static_len+3+7>>>3)<=L&&(L=Y)):L=Y=H+5,H+4<=L&&M!==-1?C(_,M,H,G):_.strategy===4||Y===L?(K(_,2+(G?1:0),3),Re(_,V,k)):(K(_,4+(G?1:0),3),function(J,ne,ve,ue){var Le;for(K(J,ne-257,5),K(J,ve-1,5),K(J,ue-4,4),Le=0;Le<ue;Le++)K(J,J.bl_tree[2*U[Le]+1],3);$(J,J.dyn_ltree,ne-1),$(J,J.dyn_dtree,ve-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,ee+1),Re(_,_.dyn_ltree,_.dyn_dtree)),se(_),G&&ce(_)},t._tr_tally=function(_,M,H){return _.pending_buf[_.d_buf+2*_.last_lit]=M>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&M,_.pending_buf[_.l_buf+_.last_lit]=255&H,_.last_lit++,M===0?_.dyn_ltree[2*H]++:(_.matches++,M--,_.dyn_ltree[2*(m[H]+h+1)]++,_.dyn_dtree[2*F(M)]++),_.last_lit===_.lit_bufsize-1},t._tr_align=function(_){K(_,2,3),Z(_,S,V),function(M){M.bi_valid===16?(te(M,M.bi_buf),M.bi_buf=0,M.bi_valid=0):8<=M.bi_valid&&(M.pending_buf[M.pending++]=255&M.bi_buf,M.bi_buf>>=8,M.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(n,i,t){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,t){(function(o){(function(s,a){if(!s.setImmediate){var l,c,p,h,y=1,u={},w=!1,f=s.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(s);g=g&&g.setTimeout?g:s,l={}.toString.call(s.process)==="[object process]"?function(O){process.nextTick(function(){x(O)})}:function(){if(s.postMessage&&!s.importScripts){var O=!0,I=s.onmessage;return s.onmessage=function(){O=!1},s.postMessage("","*"),s.onmessage=I,O}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",S,!1):s.attachEvent("onmessage",S),function(O){s.postMessage(h+O,"*")}):s.MessageChannel?((p=new MessageChannel).port1.onmessage=function(O){x(O.data)},function(O){p.port2.postMessage(O)}):f&&"onreadystatechange"in f.createElement("script")?(c=f.documentElement,function(O){var I=f.createElement("script");I.onreadystatechange=function(){x(O),I.onreadystatechange=null,c.removeChild(I),I=null},c.appendChild(I)}):function(O){setTimeout(x,0,O)},g.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var I=new Array(arguments.length-1),j=0;j<I.length;j++)I[j]=arguments[j+1];var E={callback:O,args:I};return u[y]=E,l(y),y++},g.clearImmediate=v}function v(O){delete u[O]}function x(O){if(w)setTimeout(x,0,O);else{var I=u[O];if(I){w=!0;try{(function(j){var E=j.callback,R=j.args;switch(R.length){case 0:E();break;case 1:E(R[0]);break;case 2:E(R[0],R[1]);break;case 3:E(R[0],R[1],R[2]);break;default:E.apply(a,R)}})(I)}finally{v(O),w=!1}}}}function S(O){O.source===s&&typeof O.data=="string"&&O.data.indexOf(h)===0&&x(+O.data.slice(h.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ai);var au=Ai.exports;const ou=Dr(au);function su(r){const{multipleState:e,changeMultipleState:n,selectedKeys:i,isSelectedAll:t,batchOperationCallback:o}=r,s=()=>{const l=wt().filter(y=>i.includes(y.id)),c=`ComfyUI workflow ${Mt(Date.now())}`,p=new ou,h=p.folder(c);l.forEach(y=>{h&&h.file(`${y.name}.json`,y.json)}),p.generateAsync({type:"blob"}).then(function(y){const u=document.createElement("a");u.href=window.URL.createObjectURL(y),u.download=`${c}.zip`,document.body.appendChild(u),u.click(),document.body.removeChild(u)})},a=i.length===0;return b.jsx(we,{spacing:2,wrap:"wrap",mb:0,children:e?b.jsxs(b.Fragment,{children:[b.jsx(Ot,{isChecked:t,onChange:l=>{o("selectAll",l.target.checked)}}),b.jsx(Ee,{hasArrow:!0,label:"Download Zip",placement:"bottom",children:b.jsx(Se,{isDisabled:a,"aria-label":"Batch export",size:"sm",icon:b.jsx(Xr,{size:21}),onClick:s})}),b.jsx(Ee,{hasArrow:!0,label:"Batch deletion",children:b.jsx(Mi,{isDisabled:a,variant:"solid",promptMessage:`Are you sure you want to delete these ${i.length} checked workflows?`,tooltipText:"Delete selected",onDelete:()=>{Na(i),o("batchDelete")}})}),i.length>0&&b.jsx(Oe,{fontWeight:600,children:`Selected ${i.length}`}),b.jsx(Ee,{hasArrow:!0,label:"Exit multi-select",children:b.jsx(Se,{"aria-label":"Close multi-select operation",size:"sm",icon:b.jsx(Rt,{}),onClick:()=>{n(!1)}})})]}):b.jsx(Ee,{hasArrow:!0,label:"Select multiple",placement:"bottom-start",children:b.jsx(Se,{"aria-label":"Start multi-select operation",size:"sm",variant:"outline",icon:b.jsx(eo,{size:21}),onClick:()=>{n(!0)}})})})}function lu(r,e){var O,I;const n=JSON.parse(r),i=n.nodes,t=n.links,o=LiteGraph.LLink;let s={},a=app.graph.last_node_id;for(let j=0;j<i.length;j++)a++,s[i[j].id]=a;let l={},c=app.graph.last_link_id;for(let j=0;j<n.links.length;j++)c++,l[n.links[j][0]]=c;if(t&&t.constructor===Array){for(var p=[],h=0;h<t.length;++h){const j=t[h];let E=[...j];E[0]=l[j[0]],E[1]=s[j[1]],E[3]=s[j[3]];var y=new o;y.configure(E),p[y.id]=y,app.graph.links[y.id]=y}app.graph.last_link_id=c}for(var u=!1,w=!1,h=0;h<n.nodes.length;++h)u?(u[0]>n.nodes[h].pos[0]&&(u[0]=n.nodes[h].pos[0],w[0]=h),u[1]>n.nodes[h].pos[1]&&(u[1]=n.nodes[h].pos[1],w[1]=h)):(u=[n.nodes[h].pos[0],n.nodes[h].pos[1]],w=[h,h]);for(var f=[],g={},h=0;h<i.length;++h){var v=i[h],x={...v};x.id=s[v.id],(O=x.inputs)==null||O.forEach(R=>{R.link=l[R.link]}),(I=x.outputs)==null||I.forEach(R=>{var P;R.links=(P=R.links)==null?void 0:P.map(U=>l[U])});let E=e?[e[0]-11,e[1]-11]:app.canvas.graph_mouse;x.pos[0]+=E[0]-u[0],x.pos[1]+=E[1]-u[1];var S=LiteGraph.createNode(x.type);S||(LiteGraph.debug&&console.log("Node not found or has errors: "+x.type),S=new LGraphNode,S.last_serialization=x,S.has_errors=!0),S.id=x.id,app.graph.add(S,!0),f.push(S),g[S.id]=x}f.forEach(j=>{j.configure(g[j.id])})}function cu({folder:r,onclose:e}){const[n,i]=D.useState(r.name),[t,o]=D.useState(""),{onRefreshFilesList:s}=D.useContext(dt),a=c=>{i(c.target.value),t&&o("")},l=()=>{var h;const c=n.trim();if(i(c),c===r.name)return e();(((h=be==null?void 0:be.listAll())==null?void 0:h.map(y=>y.name))??[]).includes(c)?o("The name is duplicated, please modify it and submit again."):(be==null||be.update({id:r.id,name:c}),s&&s(),e())};return b.jsxs(Xe,{isOpen:!0,onClose:e,children:[b.jsx(Qe,{}),b.jsxs(et,{children:[b.jsx(tt,{children:"Edit folder name"}),b.jsx(nt,{}),b.jsx(rt,{children:b.jsxs(Bn,{isInvalid:!!t,children:[b.jsx(Vn,{children:"Folder name"}),b.jsx(ut,{value:n,onChange:a,autoFocus:!0,onKeyUp:c=>{c.code==="Enter"&&!t&&l()}}),t&&b.jsx(Un,{children:t})]})}),b.jsxs(Mn,{children:[b.jsx(xe,{colorScheme:"teal",mr:3,onClick:l,isDisabled:!n||!!t,children:"Save"}),b.jsx(xe,{onClick:e,children:"Cancel"})]})]})]})}function uu({menuPosition:r,isopen:e,folder:n,onClose:i}){const[t,o]=D.useState(!1),[s,a]=D.useState(!1),{onRefreshFilesList:l}=D.useContext(dt);return b.jsxs(b.Fragment,{children:[b.jsx(he,{position:"absolute",top:r.y,left:r.x,children:b.jsx(gt,{isOpen:e,onClose:i,isLazy:!0,children:b.jsxs(Dt,{children:[b.jsx(Te,{onClick:c=>{console.log("onclick rename"),c.preventDefault(),o(!0)},children:"Rename"}),b.jsx(Te,{onClick:()=>a(!0),children:"Delete"})]})})}),t&&b.jsx(cu,{folder:n,onclose:()=>o(!1)}),s&&b.jsxs(An,{returnFocusOnClose:!1,isOpen:!0,onClose:()=>a(!1),closeOnBlur:!1,children:[b.jsx(Fn,{children:b.jsx("div",{})}),b.jsxs(zn,{children:[b.jsx(Ln,{}),b.jsx(Tn,{}),b.jsxs(Nn,{textAlign:"left",children:[b.jsxs(Oe,{mb:2,children:["Are you sure you want to delete this folder,",b.jsxs("b",{children:[" ",n.name]}),"?"]}),b.jsx(Oe,{color:"GrayText",mb:5,children:"This will NOT delete any files in the folder. The files will be moved to the root folder."}),b.jsx(xe,{colorScheme:"red",size:"sm",onClick:()=>{a(!1),i(),be==null||be.delete(n.id),l&&l()},children:"Yes, delete"})]})]})]})]})}const du=D.memo(function r({folder:e}){const[n,i]=D.useState(!1),[t,o]=D.useState(e.isCollapse??!1),[s,a]=D.useState(()=>yn(e.id)),[l,c]=D.useState({x:0,y:0}),[p,h]=D.useState(!1),{colorMode:y}=jn(),{draggingFile:u,refreshFolderStamp:w,onRefreshFilesList:f}=D.useContext(dt),g=y==="light"?{backgroundColor:"#E2E8F0"}:{backgroundColor:"#4A5568"};D.useEffect(()=>{a(yn(e.id,window.localStorage.getItem(bn)))},[e.id,w]);const v=x=>{x.preventDefault(),c({x:x.clientX,y:x.clientY}),h(!0)};return D.useEffect(()=>{e.isCollapse!==t&&(be==null||be.update({id:e.id,isCollapse:t}))},[t]),b.jsxs(ct,{children:[b.jsxs(we,{w:"100%",as:"button",py:1,onClick:()=>{o(!t)},onContextMenu:v,onDragOver:x=>{x.preventDefault(),i(!0)},onDragLeave:()=>{i(!1)},onDrop:()=>{u&&!Et(u)&&(Ue(u.id,{parentFolderID:e.id}),f&&f()),i(!1)},_hover:g,style:n||p?g:void 0,children:[b.jsxs(we,{gap:1,children:[t?b.jsx(Ya,{size:20}):b.jsx(qt,{size:20}),b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.2rem",height:"1.2rem"},children:b.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})})]}),b.jsx(Oe,{children:e.name}),b.jsx(uu,{isopen:p,menuPosition:l,onClose:()=>h(!1),folder:e})]}),!t&&b.jsx(ct,{ml:4,gap:0,children:s.map(x=>Et(x)?b.jsx(r,{folder:x}):b.jsx(Ri,{workflow:x}))})]})}),hu=(r,e)=>{const[n,i]=D.useState(r);return D.useEffect(()=>{const t=setTimeout(()=>{i(r)},e);return()=>{clearTimeout(t)}},[r,e]),n},fu={position:"absolute",marginLeft:"10px",width:"20px",height:"20px",top:"50%",color:"#A0AEC0",transform:"translateY(-50%)"};function pu(r){const{searchValue:e,onUpdateSearchValue:n}=r,i=e!=="";return b.jsxs(he,{style:{position:"relative"},mb:2,children:[b.jsx(oo,{style:fu}),i&&b.jsx(Se,{size:"xs",position:"absolute",right:"5px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",background:"none",zIndex:"100",icon:b.jsx(Rt,{width:15,height:15}),onClick:()=>n(""),"aria-label":"clear input button"}),b.jsx(ut,{placeholder:"Search",size:"sm",paddingLeft:"35px",paddingBlock:"5px",value:e,onChange:({target:t})=>n(t.value)})]})}const Ir=6;function mu({onClose:r,onClickNewFlow:e}){const[n,i]=D.useState([]),t=D.useRef([]),o=D.useRef([]),[s,a]=D.useState(),[l,c]=D.useState(!1),[p,h]=D.useState(!1),[y,u]=D.useState([]),[w,f]=D.useState(0),[g,v]=D.useState(""),x=hu(g,400),S=D.useRef(null),[O,I]=D.useState(null),j=D.useRef(window.localStorage.getItem(bn)??Pe.RECENTLY_MODIFIED),E=()=>{const z=yn();t.current=z,o.current=wt(),P(),f(Date.now())},R=!!s||!!x,P=()=>{if(R){const z=o.current.filter(Q=>{var T;let W=!0,X=!0;return s&&(W=!!((T=Q.tags)!=null&&T.includes(s))),x&&(X=!!Q.name.toLocaleLowerCase().includes(x.toLocaleLowerCase())),W&&X});i(Ht(z,j.current))}else i(Ht(t.current,j.current))},U=z=>{i(Ht(n,z)),j.current=z,window.localStorage.setItem(bn,z),!R&&f(Date.now())};D.useEffect(()=>{P()},[x,s]);const V=D.useCallback(z=>{Ta(z),E()},[s,x]);D.useEffect(()=>{E();const z=Q=>{le&&S.current&&lu(le[S.current].json,[Q.canvasX,Q.canvasY])};return De.canvasEl.addEventListener("drop",z),De.canvasEl.addEventListener("click",r),()=>{De.canvasEl.removeEventListener("drop",z),De.canvasEl.removeEventListener("click",r)}},[]);const k=D.useCallback((z,Q)=>{u(W=>{const X=[...W];return Q?X.push(z):X.splice(X.indexOf(z),1),X})},[]),A=(z,Q)=>{switch(z){case"batchDelete":E(),h(!1),u([]);return;case"selectAll":u(Q?o.current.map(W=>W.id):[]);return}},m=z=>{I(z),Et(z)||(S.current=z.id)},N=z=>{v(z)},q=440;return b.jsx(dt.Provider,{value:{onRefreshFilesList:E,draggingFile:O??void 0,setDraggingFile:m,isMultiSelecting:p,onMultiSelectFlow:k,multiSelectedFlowsID:y,onDeleteFlow:V,refreshFolderStamp:w,setRefreshFolderStamp:f},children:b.jsx(he,{style:{width:q},children:b.jsxs(Nr,{width:q,height:"100vh",pl:4,pr:5,pt:4,gap:4,position:"absolute",top:0,left:0,shadow:"xl",zIndex:1e3,children:[b.jsxs(pt,{alignItems:"center",justifyContent:"space-between",children:[b.jsxs(we,{gap:4,children:[b.jsx(we,{gap:2,children:b.jsx(Oe,{fontSize:19,fontWeight:600,children:"☕️Workspace"})}),b.jsx(iu,{}),b.jsx(Ee,{label:"Open workspace save directory",children:b.jsx(Se,{"aria-label":"Open workspace save directory",size:"sm",icon:b.jsx(Gn,{}),variant:"outline",colorScheme:"teal",onClick:()=>_a()})}),b.jsx(Ee,{label:"New workflow",children:b.jsx(Se,{"aria-label":"New workflow",size:"sm",icon:b.jsx(Zn,{}),variant:"outline",colorScheme:"teal",onClick:e})})]}),b.jsx(we,{alignItems:"center",children:b.jsx(mo,{})})]}),b.jsxs(pt,{direction:"column",h:"calc(100% - 64px)",children:[b.jsxs(we,{spacing:2,wrap:"wrap",mb:0,children:[s!=null&&b.jsx(Se,{"aria-label":"Close",size:"sm",icon:b.jsx(Rt,{}),onClick:()=>{a(void 0)}}),pe==null?void 0:pe.listAll().slice(0,l?void 0:Ir).map(z=>b.jsx(xe,{variant:"solid",width:"auto",flexShrink:0,size:"sm",borderRadius:15,py:4,onClick:()=>{a(z.name)},isActive:s===z.name,children:z.name})),((pe==null?void 0:pe.listAll().length)??0)>Ir&&b.jsx(Se,{"aria-label":"Show-all-tags",size:"sm",icon:l?b.jsx(Ja,{}):b.jsx(qt,{}),onClick:()=>c(!l)})]}),b.jsxs(we,{mb:2,mt:2,p:0,justifyContent:"space-between",children:[b.jsxs(we,{children:[o.current.length>0?b.jsx(su,{multipleState:p,changeMultipleState:z=>{h(z),!z&&u([])},selectedKeys:y,isSelectedAll:y.length===o.current.length,batchOperationCallback:A}):b.jsx(he,{}),!p&&b.jsx(Ee,{hasArrow:!0,label:"New folder",placement:"bottom-start",children:b.jsx(Se,{size:"sm",variant:"outline",icon:b.jsx(Xa,{size:21}),onClick:()=>{be==null||be.create({name:"New Folder"}),E()},"aria-label":"new folder button"})})]}),b.jsxs(gt,{closeOnSelect:!0,children:[b.jsx(Rn,{as:xe,variant:"ghost",size:"xs",pr:0,rightIcon:b.jsx(qt,{size:"16"}),children:b.jsxs(we,{children:[b.jsx(Oe,{children:"Sort by:"}),b.jsx(Oe,{display:"inline-block",children:j.current})]})}),b.jsx(Dt,{children:b.jsx(sa,{value:j.current,type:"radio",onChange:z=>U(z),children:Object.values(Pe).map((z,Q)=>b.jsx(la,{value:z,children:z},Q))})})]})]}),b.jsx(pu,{searchValue:g,onUpdateSearchValue:N}),b.jsx(pt,{overflowY:"auto",overflowX:"hidden",direction:"column",children:n.map(z=>Et(z)?b.jsx(du,{folder:z},z.id):b.jsx(Ri,{workflow:z},z.id))})]})]})})})}const Er={last_node_id:9,last_link_id:9,nodes:[{id:7,type:"CLIPTextEncode",pos:[413,389],size:{0:425.27801513671875,1:180.6060791015625},flags:{},order:3,mode:0,inputs:[{name:"clip",type:"CLIP",link:5}],outputs:[{name:"CONDITIONING",type:"CONDITIONING",links:[6],slot_index:0}],properties:{},widgets_values:["text, watermark"]},{id:6,type:"CLIPTextEncode",pos:[415,186],size:{0:422.84503173828125,1:164.31304931640625},flags:{},order:2,mode:0,inputs:[{name:"clip",type:"CLIP",link:3}],outputs:[{name:"CONDITIONING",type:"CONDITIONING",links:[4],slot_index:0}],properties:{},widgets_values:["beautiful scenery nature glass bottle landscape, , purple galaxy bottle,"]},{id:5,type:"EmptyLatentImage",pos:[473,609],size:{0:315,1:106},flags:{},order:1,mode:0,outputs:[{name:"LATENT",type:"LATENT",links:[2],slot_index:0}],properties:{},widgets_values:[512,512,1]},{id:3,type:"KSampler",pos:[863,186],size:{0:315,1:262},flags:{},order:4,mode:0,inputs:[{name:"model",type:"MODEL",link:1},{name:"positive",type:"CONDITIONING",link:4},{name:"negative",type:"CONDITIONING",link:6},{name:"latent_image",type:"LATENT",link:2}],outputs:[{name:"LATENT",type:"LATENT",links:[7],slot_index:0}],properties:{},widgets_values:[0x8e7ff42ed37e,!0,20,8,"euler","normal",1]},{id:8,type:"VAEDecode",pos:[1209,188],size:{0:210,1:46},flags:{},order:5,mode:0,inputs:[{name:"samples",type:"LATENT",link:7},{name:"vae",type:"VAE",link:8}],outputs:[{name:"IMAGE",type:"IMAGE",links:[9],slot_index:0}],properties:{}},{id:9,type:"SaveImage",pos:[1451,189],size:{0:210,1:26},flags:{},order:6,mode:0,inputs:[{name:"images",type:"IMAGE",link:9}],properties:{}},{id:4,type:"CheckpointLoaderSimple",pos:[26,474],size:{0:315,1:98},flags:{},order:0,mode:0,outputs:[{name:"MODEL",type:"MODEL",links:[1],slot_index:0},{name:"CLIP",type:"CLIP",links:[3,5],slot_index:1},{name:"VAE",type:"VAE",links:[8],slot_index:2}],properties:{},widgets_values:["v1-5-pruned-emaonly.ckpt"]}],links:[[1,4,0,3,0,"MODEL"],[2,5,0,3,3,"LATENT"],[3,4,1,6,0,"CLIP"],[4,6,0,3,1,"CONDITIONING"],[5,4,1,7,0,"CLIP"],[6,7,0,3,2,"CONDITIONING"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[9,8,0,9,0,"IMAGE"]],groups:[],config:{},extra:{},version:.4},Wt=200;function vu({onclose:r}){const{curFlowID:e,loadNewWorkflow:n,loadFilePath:i}=D.useContext(at),t=e!=null?Ze(e):null,[o,s]=D.useState([]),[a,l]=D.useState(!1),[c,p]=D.useState(t==null?void 0:t.coverMediaPath),[h,y]=D.useState([]),{showDialog:u}=Zi(),w=async()=>{if(e==null)return;const x=await(Fe==null?void 0:Fe.listByWorkflowID(e));y(x??[])};if(D.useEffect(()=>{w()},[]),e==null)return null;const f=()=>{w()},g=x=>{if(a){o.includes(x.id)?s(o.filter(S=>S!==x.id)):s([...o,x.id]);return}window.open(`/workspace/view_media?filename=${x.localPath}`)},v=h.length>0&&o.length===h.length;return b.jsxs(Xe,{isOpen:!0,onClose:r,blockScrollOnMount:!0,children:[b.jsx(Qe,{}),b.jsxs(et,{width:"90%",maxWidth:"90vw",height:"90vh",children:[b.jsxs(tt,{children:[b.jsx(we,{gap:2,mb:2,children:b.jsxs(Br,{size:"md",mr:2,children:["Gallery - ",t==null?void 0:t.name]})}),a&&b.jsxs(we,{gap:3,children:[b.jsx(Ot,{isChecked:v,onChange:()=>{s(v?[]:h.map(x=>x.id))},children:"All"}),b.jsxs(Oe,{fontSize:16,children:[o.length," Selected"]}),b.jsx(Se,{size:"sm",icon:b.jsx(Rt,{size:19}),onClick:()=>l(!1),"aria-label":"cancel"})]})]}),b.jsx(nt,{}),b.jsx(rt,{overflowY:"auto",children:b.jsx(we,{wrap:"wrap",children:h.map(x=>{if(x.localPath==null)return null;const S=Zr(x.localPath)?b.jsxs(rr,{isExternal:!0,onClick:()=>g(x),position:"relative",children:[a&&b.jsx(Ot,{isChecked:o.includes(x.id),position:"absolute",top:2,left:2}),b.jsx(Tr,{borderRadius:3,boxSize:Wt+"px",objectFit:"cover",src:`/workspace/view_media?filename=${x.localPath}`,alt:"workflow image renamed or moved from output folder"})]}):b.jsxs(rr,{isExternal:!0,onClick:()=>g(x),children:[a&&b.jsx(Ot,{isChecked:o.includes(x.id)}),b.jsx("video",{width:Wt,height:Wt,src:`/workspace/view_media?filename=${x.localPath}`,loop:!0,autoPlay:!0,muted:!0,children:b.jsx("track",{kind:"captions"})})]}),O=c!=null&&c===x.localPath;return b.jsxs(ct,{width:Wt,justifyContent:"space-between",mb:2,children:[b.jsx(Ee,{label:Mt(x.createTime,!0),children:S}),b.jsx(Ee,{label:x.localPath,children:b.jsx(Oe,{color:"GrayText",noOfLines:1,children:x.localPath})}),b.jsxs(we,{justifyContent:"space-between",hidden:a,children:[b.jsx(Ee,{label:"Set as cover",children:b.jsx(Se,{size:"sm",variant:"ghost",icon:O?b.jsx(io,{size:19}):b.jsx(ao,{size:19}),"aria-label":"set as cover",isActive:O,onClick:()=>{Ue(e,{coverMediaPath:x.localPath}),p(x.localPath)}})}),b.jsx(xe,{flexGrow:1,onClick:()=>u("How do you want to load this workflow?",[{label:"Load in new workflow",onClick:()=>{i(x.localPath)},colorScheme:"teal"},{label:"Overwrite current workflow",onClick:()=>i(x.localPath,!0),colorScheme:"red"}]),size:"sm",children:"Load"}),b.jsx(Ee,{label:"Remove image from gallery",children:b.jsx(Se,{size:"sm",variant:"ghost",icon:b.jsx(Yn,{size:19}),"aria-label":"remove image from gallery",colorScheme:"red",onClick:()=>{confirm("Are you sure to remove this image from gallery? (won't delete image on your disk)")&&(Fe==null||Fe.delete(x.id),O&&(Ue(e,{coverMediaPath:void 0}),p(void 0)),f())}})})]})]})})})})]})]})}const vn={x:0,y:0};function gu({children:r,onDragEnd:e}){const n=D.useRef(vn),i=D.useRef(!1),[t,o]=D.useState(vn),s=p=>{var h,y,u;if([(h=p.target)==null?void 0:h.id,(u=(y=p.target)==null?void 0:y.parentNode)==null?void 0:u.id].includes("dragPanelIcon")){n.current={x:p.clientX,y:p.clientY},i.current=!0,window.addEventListener("mousemove",a),window.addEventListener("mouseup",l);const w=document.getElementsByTagName("body")[0];w.style.userSelect="none"}},a=D.useCallback(p=>{const h={x:p.clientX-n.current.x,y:p.clientY-n.current.y};o(h)},[]),l=D.useCallback(()=>{o(h=>(e(h),vn)),i.current=!1;const p=document.getElementsByTagName("body")[0];p.style.userSelect="auto",window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",l)},[e,a]),c={transform:`translate(${t.x}px, ${t.y}px)`,zIndex:i.current?1e3:1};return b.jsx("div",{style:c,onMouseDown:s,children:r})}function bu({backgroundColor:r}){const e=r===void 0?"rgba(0,0,0,0.5)":r??void 0;return b.jsx("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:e}})}function yu({onClose:r}){const{curFlowID:e,isDirty:n}=D.useContext(at),[i,t]=D.useState(null),o=e!=null?Ze(e):null,[s,a]=D.useState([]);return e==null||o==null?(alert("No current workflow found!"),null):(D.useEffect(()=>{(async()=>{var y;const c=await(He==null?void 0:He.listByWorkflowID(e));a(c??[]);const p=c==null?void 0:c.filter(u=>u.json===o.lastSavedJson),h=(y=p==null?void 0:p[0])==null?void 0:y.id;h&&t(h)})()},[]),b.jsxs(Nr,{width:400,height:"100vh",pl:4,pr:5,pt:4,gap:0,position:"fixed",top:0,left:0,zIndex:1e3,children:[b.jsx(ca,{pb:1,mb:0,children:b.jsxs(pt,{justifyContent:"space-between",alignItems:"center",children:[b.jsx(Br,{size:"md",children:"Version History"}),b.jsx(Se,{size:"sm",icon:b.jsx(Rt,{}),onClick:r,variant:"ghost","aria-label":"close version history"})]})}),b.jsxs(ua,{overflowY:"auto",gap:0,children:[b.jsx(Oe,{mb:4,children:"All the saved changes of this workflow"}),b.jsx(ct,{divider:b.jsx(zr,{}),spacing:2,children:s==null?void 0:s.map(l=>b.jsxs(xe,{size:"sm",variant:"ghost",onClick:()=>{if(n){alert("You have unsaved changes, please save or discard your changes to proceed switching version, in case losing your changes.");return}De.loadGraphData(JSON.parse(l.json)),Ue(e,{lastSavedJson:l.json}),r()},isActive:l.id===i,children:["Saved at ",Mt(l.createTime,!0)]}))})]})]}))}function wu({onClick:r}){var O;const{curFlowID:e,onDuplicateWorkflow:n,discardUnsavedChanges:i,saveCurWorkflow:t}=D.useContext(at),[o,s]=D.useState(!1),[a,l]=D.useState(!1),[c,p]=D.useState(""),[h,y]=D.useState(""),[u,w]=D.useState();D.useEffect(()=>{const I=e?Ze(e):void 0;p((I==null?void 0:I.name)??""),w(I)},[e]);const f=I=>{p(I.target.value),h&&y("")},g=()=>{if(!e){alert("Flow ID is required");return}n==null||n(e,c),v()},v=()=>{s(!1)},x=D.useCallback(()=>{if(!le||!e){alert("You don't have any workspaces");return}const I=le[e];if(!I){alert("Workspace does not exist");return}const j=new Blob([I.json],{type:"application/json"}),E=URL.createObjectURL(j),R=document.createElement("a");R.href=E,R.download=`${I.name}.json`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(E)},[e]),S=(O=de==null?void 0:de.getSetting("shortcuts"))==null?void 0:O.save;return b.jsxs(b.Fragment,{children:[b.jsx(gt,{isLazy:!0,children:({isOpen:I})=>b.jsxs(b.Fragment,{children:[b.jsx(Rn,{onClick:r,children:b.jsx(Se,{icon:b.jsx(qt,{size:20}),"aria-label":"menu",size:"xs",backgroundColor:"#323232",color:"white"})}),b.jsxs(Ar,{children:[b.jsxs(Dt,{minWidth:150,zIndex:1e3,children:[b.jsx(Te,{onClick:t,icon:b.jsx(wn,{size:20}),iconSpacing:1,command:S,children:"Save"}),b.jsx(Ee,{label:"This will revert current workflow to your last saved version. You will lose all changes made since your last save.",children:b.jsx(Te,{onClick:i,icon:b.jsx(Za,{size:20}),iconSpacing:1,isDisabled:(u==null?void 0:u.lastSavedJson)==null,children:"Discard unsaved changes"})}),b.jsx(Te,{onClick:x,icon:b.jsx(Xr,{size:20}),iconSpacing:1,children:"Download"}),b.jsx(Te,{onClick:()=>s(!0),icon:b.jsx(wn,{size:20}),iconSpacing:1,children:"Save As"}),b.jsx(Te,{onClick:()=>l(!0),icon:b.jsx(Qr,{size:20}),iconSpacing:1,children:"Versions History"})]}),I&&b.jsx(bu,{backgroundColor:null})]})]})}),a&&b.jsx(yu,{onClose:()=>l(!1)}),o&&b.jsxs(Xe,{isOpen:!0,onClose:v,children:[b.jsx(Qe,{}),b.jsxs(et,{children:[b.jsx(tt,{children:"Save As"}),b.jsx(nt,{}),b.jsx(rt,{children:b.jsxs(Bn,{isInvalid:!!h,children:[b.jsx(Vn,{children:"Workflow name"}),b.jsx(ut,{value:c,onChange:f,autoFocus:!0,onKeyUp:I=>{I.code==="Enter"&&!h&&g()}}),h&&b.jsx(Un,{children:h})]})}),b.jsxs(Mn,{children:[b.jsx(xe,{colorScheme:"teal",mr:3,onClick:g,isDisabled:!c||!!h,children:"Save"}),b.jsx(xe,{onClick:v,children:"Cancel"})]})]})]})]})}function xu({displayName:r,updateFlowName:e,isDirty:n}){const{isOpen:i,onOpen:t,onClose:o}=Lr(),{curFlowID:s}=D.useContext(at),[a,l]=D.useState(r),[c,p]=D.useState(""),h=()=>{l(r),t()},y=f=>{l(f.target.value),c&&p("")},u=()=>{var f;if(s){const g=a.trim();if(l(g),r===g)return w();((f=wt())==null?void 0:f.map(x=>x.name)).includes(g)?p("The name is duplicated, please modify it and submit again."):(Ue(s,{name:g}),e(g),w())}},w=()=>{p(""),o()};return s==null?null:b.jsxs(we,{children:[b.jsx(Ee,{label:r,placement:"bottom",children:b.jsxs(Oe,{color:"white",onClick:h,maxW:240,fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:[n&&"* ",r]})}),b.jsxs(Xe,{isOpen:i,onClose:w,children:[b.jsx(Qe,{}),b.jsxs(et,{children:[b.jsx(tt,{children:"Edit workflow name"}),b.jsx(nt,{}),b.jsx(rt,{children:b.jsxs(Bn,{isInvalid:!!c,children:[b.jsx(Vn,{children:"Workflow name"}),b.jsx(ut,{value:a,onChange:y,autoFocus:!0,onKeyUp:f=>{f.code==="Enter"&&!c&&u()}}),c&&b.jsx(Un,{children:c})]})}),b.jsxs(Mn,{children:[b.jsx(xe,{colorScheme:"teal",mr:3,onClick:u,isDisabled:!a||!!c,children:"Save"}),b.jsx(xe,{onClick:w,children:"Cancel"})]})]})]})]})}function Su({updatePanelPosition:r,positionStyle:e,curFlowName:n,setCurFlowName:i}){const[t,o]=D.useState(!1),{isDirty:s,loadNewWorkflow:a,saveCurWorkflow:l,setRoute:c,curFlowID:p}=D.useContext(at);return b.jsx(gu,{onDragEnd:h=>{r({top:h.y,left:h.x},!0)},children:b.jsxs(we,{style:{padding:2,position:"fixed",...e},justifyContent:"space-between",alignItems:"center",gap:2,draggable:!1,id:"workspaceManagerPanel",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[b.jsx(xe,{size:"sm","aria-label":"workspace folder",onClick:()=>c("recentFlows"),px:2,children:b.jsxs(we,{gap:1,children:[b.jsx(Gn,{size:21}),b.jsx(co,{size:8})]})}),b.jsx(xe,{size:"sm",variant:"outline",colorScheme:"teal","aria-label":"new workflow",onClick:()=>a(),px:2,children:b.jsxs(we,{gap:1,children:[b.jsx(Zn,{size:16,color:"white"}),b.jsx(Oe,{color:"white",fontSize:"sm",children:"New"})]})}),b.jsx(xu,{isDirty:s,displayName:n??"",updateFlowName:h=>{i(h),requestAnimationFrame(()=>{r()})}}),p&&b.jsxs(we,{gap:"1px",children:[b.jsx(Ee,{label:"Open gallery",children:b.jsx(Se,{onClick:()=>c("gallery"),icon:b.jsx(ro,{size:20,color:"white"}),size:"sm","aria-label":"open gallery",variant:"ghost"})}),b.jsx(wu,{onClick:()=>o(!1)})]}),p&&s&&b.jsx(Ee,{label:"Save workflow",children:b.jsx(Se,{onClick:l,icon:b.jsx(wn,{size:22,color:"white"}),size:"xs","aria-label":"save workspace",variant:"ghost"})}),t&&b.jsx(Qa,{id:"dragPanelIcon",cursor:"move",size:15,color:"#FFF"})]})})}var _u={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ku=_u.VITE_AWS_COGNITO_DOMAIN;function Cu(){if(window.location.href.includes(Ca+"#")){const r=window.location.href.split("#")[1];let n=new URLSearchParams(r).get("access_token");window.opener.postMessage({comfyspace_authToken:n},"http://127.0.0.1:8188/"),window.close()}}function jr(r){const{comfyspace_authToken:e}=r.data;e&&fetch(`${ku}/oauth2/userInfo`,{method:"GET",headers:{Authorization:`Bearer ${e}`}}).then(n=>n.json()).then(n=>{console.log("User Info:",n)}).catch(n=>{console.error("Error fetching user info:",n)})}function Pu(){const r=D.useRef({}),[e,n]=D.useState(null),[i,t]=D.useState("root"),[o,s]=D.useState(!0),[a,l]=D.useState(null),c=D.useRef(null),[p,h]=D.useState(),[y,u]=D.useState(!1),w=D.useRef(null),f=D.useCallback(()=>{if(c.current){const V=JSON.stringify(De.graph.serialize());Ue(c.current,{lastSavedJson:V}),He==null||He.create({workflowID:c.current,json:V})}},[]),g=()=>{if(confirm("Are you sure you want to discard unsaved changes? This will revert current workflow to your last saved version. You will lose all changes made since your last save.")&&c.current){const k=Ze(c.current);k&&k.lastSavedJson&&De.loadGraphData(JSON.parse(k.lastSavedJson))}},v=V=>{c.current=V,l(V),Ze(V)&&localStorage.setItem("curFlowID",V)},x=async()=>{const V={name:"WorkspaceManager",async setup(m){localStorage.removeItem("workspace"),localStorage.removeItem("comfyspace")},async addCustomNodeDefs(m){r.current=m},async afterConfigureGraph(){localStorage.setItem("workflow",JSON.stringify(De.graph.serialize()))}};De.registerExtension(V);try{await za(),E(de==null?void 0:de.getSetting("topBarStyle"),!1)}catch(m){console.error("error loading db",m)}s(!1);const k=localStorage.getItem("curFlowID"),A=k!=null?Ze(k):null;A&&(A&&localStorage.setItem("workflow",A.json),v(A.id??null),n(A.name??null)),Gt()};D.useEffect(()=>{x(),setInterval(()=>{if(c.current!=null){const V=JSON.stringify(De.graph.serialize());V!=null&&Ue(c.current,{json:V});const k=c.current?Ze(c.current):void 0;k==null||V===(k==null?void 0:k.lastSavedJson)?u(!1):u(!0)}},1e3),Cu()},[]);const S=V=>{if(De.graph==null){console.error("app.graph is null cannot load workflow");return}v(V);const k=Ze(V);if(k==null){alert("Error: Workflow not found! id: "+V);return}De.ui.dialog.close(),De.loadGraphData(JSON.parse(k.json)),n(k.name),t("root")},O=V=>{const k=(V==null?void 0:V.json)??JSON.stringify(Er),A=cn({json:k,name:V==null?void 0:V.name});S(A.id),t("root")},I=async(V,k=!1)=>{const A=V.split("/").pop()??V;k?f():O({name:A});const m=await fetch(Pa(V)),N=await m.blob(),q=new File([N],A,{type:m.headers.get("Content-Type")||""});await De.handleFile(q),t("root")},j=(V,k)=>{if(le==null)return;const A=le[V];if(A==null)return;const m=cn({json:A.json,name:k||A.name,parentFolderID:A.parentFolderID,tags:A.tags});S(m.id)},E=D.useCallback((V,k=!1)=>{const{top:A=0,left:m=0}=p||{};let{top:N=0,left:q=0}=V??{};N+=A,q+=m;const z=document.documentElement.clientWidth,Q=document.documentElement.clientHeight,W=document.getElementById("workspaceManagerPanel"),X=(W==null?void 0:W.offsetWidth)||392;N+36>Q&&(N=Q-36),q+X>=z&&(q=z-X),h({top:Math.max(0,N),left:Math.max(0,q)}),k&&(de==null||de.upsert({topBarStyle:{top:N,left:q}}))},[p]),R=V=>{ja(V)&&f()},P=D.useCallback(V=>{if(c.current==null)return;let k=V.filename;V.subfolder!=null&&V.subfolder!==""&&(k=V.subfolder+"/"+k),Fe==null||Fe.create({workflowID:c.current,localPath:k})},[]),U=D.useCallback(()=>{t("root")},[]);return D.useEffect(()=>{window.addEventListener("keydown",R),window.addEventListener("message",jr);const V=document.getElementById("comfy-file-input"),k=()=>{if(V&&V.files&&V.files.length>0){const A=cn({name:V.files[0].name,json:JSON.stringify(Er)});v(A.id),n(A.name??"Unknown name")}};return V==null||V.addEventListener("change",k),Yi.addEventListener("executed",A=>{var m,N,q,z,Q,W;(q=(N=(m=A.detail)==null?void 0:m.output)==null?void 0:N.images)==null||q.forEach(X=>{X.type==="output"&&P(X)}),(W=(Q=(z=A.detail)==null?void 0:z.output)==null?void 0:Q.gifs)==null||W.forEach(X=>{X.type==="output"&&P(X)})}),()=>{window.removeEventListener("message",jr),window.removeEventListener("keydown",R),window.removeEventListener("change",k)}},[]),o||!p?null:b.jsx(at.Provider,{value:{curFlowID:a,onDuplicateWorkflow:j,loadWorkflowID:S,discardUnsavedChanges:g,saveCurWorkflow:f,isDirty:y,loadNewWorkflow:O,loadFilePath:I,setRoute:t},children:b.jsx("div",{ref:w,className:"workspace_manager",children:b.jsx(Ar,{containerRef:w,children:b.jsxs(he,{style:{width:"100vh",position:"absolute",top:0,left:0,lineHeight:"24px"},zIndex:1e3,draggable:!1,children:[b.jsx(Su,{curFlowName:e,setCurFlowName:n,updatePanelPosition:E,positionStyle:p}),i==="recentFlows"&&b.jsx(mu,{onClose:U,onClickNewFlow:()=>{O(),t("root")}}),i==="gallery"&&b.jsx(vu,{onclose:()=>t("root")})]})})})})}export{Pu as default};
