import{f as Q,E as qe,j as e,Z as Je,h as ie,g as we,r,M as re,N as le,O as ce,Q as de,R as ue,S as he,W as ve,i as W,$ as ke,T as Qe}from"./input.js";import{m as Le,u as Ae,a as et,b as tt,c as st,S as nt,M as at,d as A,H as z,T as We,I as P,t as je,e as Ne,f as Y,E as me,g as B,h as L,i as R,j as pe,k as C,R as H,l as ot,n as Me,B as _,F as Z,o as Fe,p as it,q as rt,r as ee,s as te,v as N,w as lt,D as Pe,x as T,y as Re,z as ct,A as Se,C as dt,G as _e,J as ut,K as G,L as ht,N as pt,O as gt,P as mt,Q as Be,U as ft,V as xt,W as jt,X as U,Y as ye,Z as Ce,_ as yt,$ as wt,a0 as $e,a1 as vt,a2 as kt,a3 as St,a4 as J,a5 as oe,a6 as Ct,a7 as bt,a8 as It,a9 as fe,aa as Mt}from"./App-eQybp91e.js";import{G as Ft,C as q}from"./chunk-JARCRF6W-OjDz07lE.js";import{V as Ke}from"./chunk-NTCQBYKE-a6jE7X_b.js";import{N as Dt,a as Et,I as Tt,M as Ot,u as zt,S as Lt}from"./MediaPreview-gKBl9R3H.js";import{I as At}from"./IconCopy-D2k-9fMf.js";import"./chunk-7D6N5TE5-lFR77IBa.js";import"./IconSearch-3Gq-3maw.js";var Ge=Q(function(t,l){const{columns:o,spacingX:n,spacingY:a,spacing:u,minChildWidth:p,...i}=t,h=qe(),d=p?Nt(p,h):Pt(o);return e.jsx(Ft,{ref:l,gap:u,columnGap:n,rowGap:a,templateColumns:d,...i})});Ge.displayName="SimpleGrid";function Wt(s){return typeof s=="number"?`${s}px`:s}function Nt(s,t){return Le(s,l=>{const o=Je("sizes",l,Wt(l))(t);return l===null?null:`repeat(auto-fit, minmax(${o}, 1fr))`})}function Pt(s){return Le(s,t=>t===null?null:`repeat(${t}, minmax(0, 1fr))`)}var He=Q((s,t)=>{const{title:l,children:o,className:n,...a}=s,u=ie("chakra-menu__group__title",n),p=Ae();return e.jsxs("div",{ref:t,className:"chakra-menu__group",role:"group",children:[l&&e.jsx(we.p,{className:u,...a,__css:p.groupTitle,children:l}),o]})});He.displayName="MenuGroup";var Ve=s=>{const{className:t,title:l,...o}=s,n=et(o);return e.jsx(He,{title:l,className:ie("chakra-menu__option-group",t),...n})};Ve.displayName="MenuOptionGroup";var Rt=Q((s,t)=>{const l=Ae();return e.jsx(we.button,{ref:t,...s,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...l.button}})}),se=Q((s,t)=>{const{children:l,as:o,...n}=s,a=tt(n,t),u=o||Rt;return e.jsx(u,{...a,className:ie("chakra-menu__menu-button",s.className),children:e.jsx(we.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:s.children})})});se.displayName="MenuButton";var _t=s=>e.jsx("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",...s,children:e.jsx("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})}),be=Q((s,t)=>{const{icon:l,iconSpacing:o="0.75rem",...n}=s,a=st(n,t);return e.jsxs(nt,{...a,className:ie("chakra-menu__menuitem-option",n.className),children:[l!==null&&e.jsx(at,{fontSize:"0.8em",marginEnd:o,opacity:s.isChecked?1:0,children:l||e.jsx(_t,{})}),e.jsx("span",{style:{flex:1},children:a.children})]})});be.id="MenuItemOption";be.displayName="MenuItemOption";var Bt=A("chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]),$t=A("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),Kt=A("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),De=A("file-import","IconFileImport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3",key:"svg-1"}]]),Gt=A("file","IconFile",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}]]),Ue=A("folder-plus","IconFolderPlus",[["path",{d:"M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}]]),Ht=A("list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]),Vt=A("lock-open","IconLockOpen",[["path",{d:"M5 11m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 16m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-5a4 4 0 0 1 8 0",key:"svg-2"}]]),Ut=A("menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]),Zt=A("moon","IconMoon",[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]]),Yt=A("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),Xt=A("sun","IconSun",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]]),qt=A("tag","IconTag",[["path",{d:"M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z",key:"svg-1"}]]),Jt=A("upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);function Qt({onclose:s}){const[t,l]=r.useState([]),o=async()=>{var a;const n=await((a=je)==null?void 0:a.listAll());l(n??[])};return r.useEffect(()=>{o()},[]),e.jsxs(re,{isOpen:!0,onClose:s,children:[e.jsx(le,{}),e.jsxs(ce,{children:[e.jsx(de,{children:"My Tags"}),e.jsx(ue,{}),e.jsx(he,{children:t.map(n=>e.jsxs(z,{children:[e.jsx(We,{children:n.name}),e.jsx(P,{onClick:async()=>{var a;await((a=je)==null?void 0:a.delete(n.name)),o()},"aria-label":"delete-tag",colorScheme:"red",variant:"ghost",icon:e.jsx(Ne,{})})]}))})]})]})}function es(){const s=Y(),t=r.useRef([{title:"Save current workflow",key:me.SAVE},{title:"Save as current workflow",key:me.SAVE_AS},{title:"Open spotlight search",key:me.openSpotlightSearch}]),[l,o]=r.useState({save:"",saveAs:"",openSpotlightSearch:""}),[n,a]=r.useState(),u=async(i,h)=>{var g;i.preventDefault();let d="";if(i.ctrlKey&&(d+="Control+"),i.metaKey&&(d+="Command+"),i.shiftKey&&(d+="Shift+"),i.altKey&&(d+="Alt+"),d.length>0&&!["Control","Shift","Alt","Meta"].includes(i.key)){d+=i.key.toUpperCase();const m={...l};delete m[h],Object.values(m).includes(d)?s({title:"Shortcut key conflict",description:`The shortcut key ã€Œ${d}ã€ is already used, please
          modify it.`,status:"info",duration:3e3,position:"top",isClosable:!1}):(await((g=C)==null?void 0:g.upsert({shortcuts:{...l,[h]:d}})),p())}},p=()=>{var i;(i=C)==null||i.getSetting("shortcuts").then(h=>{var g;const d=h??((g=C)==null?void 0:g.defaultSettings.shortcuts);o({...l,...d})})};return r.useEffect(()=>{p()},[]),e.jsxs(B,{children:[e.jsx(L,{children:"Keyboard Shortcut"}),t.current.map(i=>e.jsxs(z,{children:[e.jsx(L,{fontSize:"sm",w:170,children:i.title}),e.jsx(R,{label:"Press shortcut key combinations to setup",placement:"bottom",hasArrow:!0,isOpen:n===i.key,children:e.jsx(pe,{value:l[i.key],onKeyDown:h=>{u(h,i.key)},onFocus:()=>{a(i.key)},onBlur:()=>{a(void 0)},placeholder:"Press a key combination",readOnly:!0,width:"auto",flex:1})})]},i.key))]})}function ts(){const{setRefreshFolderStamp:s}=r.useContext(H),[t,l]=r.useState(!1),o=()=>{var a;(a=C)==null||a.getSetting("foldersOnTop").then(u=>{l(!!u)})},n=a=>{var p;const u=a.target.checked;(p=C)==null||p.upsert({foldersOnTop:u}).then(()=>{o(),s(Date.now())})};return r.useEffect(()=>{o()},[]),e.jsx(B,{children:e.jsx(q,{isChecked:t,onChange:n,children:"Folders always on top"})})}function ss(){const[s,t]=r.useState(!1),[l,o]=r.useState(""),{showDialog:n}=ve(),a=()=>{var p,i;(p=C)==null||p.getSetting("myWorkflowsDir").then(h=>{o(h??"undefined")}),(i=C)==null||i.getSetting("twoWaySync").then(h=>{t(h??!1)})};r.useEffect(()=>{a()},[]);const u=async p=>{var h,d;if(!p.target.checked){await((h=C)==null?void 0:h.upsert({twoWaySync:p.target.checked})),a();return}const i=await((d=C)==null?void 0:d.getSetting("myWorkflowsDir"));n(e.jsx(ot,{myWorkflowsDir:i??"undefined"}),[{label:"I have downloaded all my workflows and ready to enable",onClick:async()=>{var g;await((g=C)==null?void 0:g.upsert({twoWaySync:!0})),a()},colorScheme:"red"}])};return e.jsxs(B,{children:[e.jsx(L,{children:"Only for legacy two way sync users to get back their data. Do not disable two way sync if you have already enabled it. It may cause some unexpected issues."}),e.jsx(q,{isChecked:s,onChange:u,children:"Enable two way sync"})]})}function Ee({settingKey:s,text:t,defaultChecked:l=!1}){const[o,n]=r.useState(l),a=Y(),u=()=>{var p;(p=C)==null||p.getSetting(s).then(i=>{n(!!i)})};return r.useEffect(()=>{u()},[]),e.jsx(B,{children:e.jsx(q,{isChecked:o,onChange:async p=>{var i;await((i=C)==null?void 0:i.upsert({[s]:p.target.checked})),u(),a({title:"Setting saved. Please refresh to see the changes.",status:"success",duration:3e3,isClosable:!0})},children:t})})}function ns(){const[s,t]=r.useState(!1),[l,o]=r.useState(!1),[n,a]=r.useState([]),[u,p]=r.useState(""),[i,h]=r.useState([]),[d,g]=r.useState(!1),[m,c]=r.useState(!1),[f,v]=r.useState(!1),S=r.useRef(null),w=Y();ve();const b=f?"\\":"/";r.useEffect(()=>{var j;Me().then(k=>{p(k.path??""),v(k.os==="win32")}),(j=C)==null||j.getSetting("twoWaySync").then(k=>{g(k??!1)})},[]);const F=async j=>{const{dir_path:k="",dir_contents:E=[],error:V=""}=await Fe(j??"");return V.includes("Operation not permitted")?(c(!0),O(),{isError:!0}):{dirList:E,dirPath:k}},y=async()=>{const{isError:j=!1,dirList:k=[]}=await F(u);j||(a(k),o(!0),h(u&&u.split(b).filter(E=>!!E)||[]))},O=()=>{o(!1),t(!1),h([])},$=async(j,k=!1,E=!1)=>{var x,I;if(k){const{path:M}=await Me();M&&await it(M,j)}await((x=C)==null?void 0:x.upsert({myWorkflowsDir:j}));const V=await((I=C)==null?void 0:I.getSetting("myWorkflowsDir"))??"";p(V),E&&c(!1),O()},K=async j=>{if(j){const{error:E=""}=await Fe(j);if(E.includes("Not a directory")){w({title:"The directory address you entered is invalid, please re-enter it.",status:"warning",duration:5e3,position:"top",isClosable:!0});return}}const k=j??`${f?"":b}${i.join(b)}`;$(k,!1,!!j)},X=async()=>{const{dirPath:j,dirList:k}=await F("");h(j.split(b).filter(E=>!!E)),a(k)},ne=async(j,k)=>{var I;let E="";j===-1&&k?E=`${f?"":b}${i.concat([k]).join(b)}`:E=`${f?"":b}${i.slice(0,j+1).join(b)}`;const{isError:V=!1,dirList:x=[]}=await F(E);V||(a(x),h(f?E.split(b):(I=E.slice(1))==null?void 0:I.split(b)))},ae=e.jsxs(_,{textAlign:"end",mb:4,children:[e.jsx(pe,{placeholder:"Please enter the absolute path directory address",ref:S,mt:2,mb:2}),e.jsx(W,{colorScheme:"teal",mr:3,size:"sm",onClick:()=>{var j,k;(j=S==null?void 0:S.current)!=null&&j.value&&K((k=S==null?void 0:S.current)==null?void 0:k.value)},children:"Save"})]}),ge=()=>{o(!0),t(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(_,{mb:4,children:[e.jsx(L,{mb:2,fontWeight:500,children:"My Workflows Save Directory"}),l?s?ae:e.jsxs(Ke,{spacing:2,alignItems:"start",children:[e.jsx(B,{spacing:"2px",direction:"row",wrap:"wrap",children:i.map((j,k)=>e.jsxs("span",{children:[k>0&&b,e.jsx(W,{colorScheme:"teal",variant:"link",minW:1,onClick:()=>{ne(k)},children:j},`${j}-${k}`)]},j))}),e.jsx(Ge,{columns:2,spacing:3,maxHeight:500,width:"100%",overflowY:"auto",children:n.map((j,k)=>e.jsx(W,{size:"sm",leftIcon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.2rem",height:"1.2rem"},children:e.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})}),justifyContent:"start",onClick:()=>{ne(-1,j)},children:j},`${j}-${k}`))}),e.jsxs(_,{w:"100%",textAlign:"end",children:[e.jsx(W,{colorScheme:"teal",size:"sm",onClick:()=>{K()},children:"Save"}),e.jsx(W,{size:"sm",onClick:X,mr:2,ml:2,children:"Reset"}),e.jsx(W,{size:"sm",onClick:O,children:"Cancel"})]})]}):e.jsxs(Z,{children:[e.jsx(We,{overflowWrap:"anywhere",children:u}),e.jsx(R,{label:d?"Choose folder":"Enable two way sync to link local folder",children:e.jsx(P,{"aria-label":"Select folder",size:"sm",ml:2,isDisabled:!d,icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.4rem",height:"1.4srem"},children:e.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})}),onClick:y})}),e.jsx(R,{label:d?"Input absolute path":"Enable two way sync to link local folder",children:e.jsx(P,{isDisabled:!d,"aria-label":"Enter folder address",size:"sm",ml:2,icon:e.jsx(Kt,{size:19}),onClick:ge,variant:"ghost"})})]})]}),e.jsxs(re,{isOpen:m,onClose:()=>c(!1),size:"xl",children:[e.jsx(le,{}),e.jsxs(ce,{children:[e.jsx(de,{children:"Kind tips"}),e.jsx(ue,{}),e.jsx(he,{children:e.jsxs(_,{children:[navigator.userAgent.indexOf("Mac OS X")!==-1?e.jsxs(L,{fontWeight:500,children:["There is no permission to access the folder. You need to grant full disk access permission to the terminal that starts the ComfyUI program. For details, refer to the",e.jsx(W,{colorScheme:"teal",variant:"link",as:"a",ml:2,target:"_block",href:`https://stackoverflow.com/questions/58479686/permissionerror-errno-1-operation-not-permitted-after-macos
                -catalina-update`,children:"Document"}),", or you can manually enter the absolute path of the folder in the input box below to save."]}):e.jsx(L,{fontWeight:500,children:"You do not have permission to access the folder. It is recommended that you manually enter the absolute path address of the required folder."}),ae]})})]})]})]})}function Ze({label:s,settingKey:t}){const[l,o]=r.useState(200),n=Y(),a=i=>{if(!i.length){o(0);return}o(parseInt(i))},u=async()=>{var i;l<0&&o(0),await((i=C)==null?void 0:i.upsert({[t]:Number(l)})),n({title:"Setting saved",status:"success",duration:3e3,isClosable:!0})},p=()=>{var i;(i=C)==null||i.getSetting(t).then(h=>{o(h)})};return r.useEffect(()=>{p()},[]),e.jsxs(B,{children:[e.jsx(L,{children:s}),e.jsx(Dt,{defaultValue:200,min:0,keepWithinRange:!0,placeholder:"Enter a number",maxWidth:"300px",value:l,onChange:i=>a(i),onBlur:()=>{u()},onKeyUp:i=>{i.key==="Enter"&&u()},children:e.jsx(Et,{})})]})}function as(){const[s,t]=r.useState(!1),l=Y(),o=()=>{var n;(n=C)==null||n.getSetting("autoSave").then(a=>{t(!!a)})};return r.useEffect(()=>{o()},[]),e.jsxs(B,{children:[e.jsx(q,{isChecked:s,onChange:async n=>{var a;await((a=C)==null?void 0:a.upsert({autoSave:n.target.checked})),o(),l({title:"Setting saved",status:"success",duration:3e3,isClosable:!0})},children:"Enable auto save workflow"}),s&&e.jsx(Ze,{label:"Auto save duration (auto save workflow every X seconds)",settingKey:"autoSaveDuration"})]})}function os(){const s=r.useRef(null),t=Y(),l=()=>{var o;(o=C)==null||o.getSetting("cloudHost").then(n=>{var a;(a=s.current)==null||a.setAttribute("value",n??"")})};return r.useEffect(()=>{l()},[]),e.jsxs(B,{children:[e.jsx(L,{children:"For enterprise paid user only. Hosting site of the shared workflow."}),e.jsxs(Z,{gap:2,alignItems:"center",children:[e.jsx(pe,{ref:s,onBlur:()=>{var o,n,a;console.log("onBlur",(o=s.current)==null?void 0:o.value),(a=C)==null||a.upsert({cloudHost:(n=s.current)==null?void 0:n.value}),l(),t({title:"Setting saved. Please refresh to see the changes.",status:"success",duration:4e3})}}),e.jsx(W,{size:"sm",onClick:()=>{var o,n,a;(n=s.current)==null||n.setAttribute("value",(o=C)==null?void 0:o.defaultSettings.cloudHost),(a=s.current)==null||a.blur()},children:"Reset"})]})]})}function is({onClose:s}){return e.jsx(e.Fragment,{children:e.jsxs(re,{isOpen:!0,onClose:s,size:"xl",children:[e.jsx(le,{}),e.jsxs(ce,{children:[e.jsx(de,{children:"Settings"}),e.jsx(ue,{}),e.jsx(he,{pb:14,children:e.jsx(z,{children:e.jsxs(Ke,{divider:e.jsx(rt,{borderColor:"gray.500"}),spacing:4,align:"stretch",w:"100%",children:[e.jsx(ns,{}),e.jsx(as,{}),e.jsx(es,{}),e.jsx(ss,{}),e.jsx(ts,{}),e.jsx(Ee,{settingKey:"overwriteCurWorkflowWhenDroppingFileToCanvas",text:"Overwrite current workflow when drag and drop workflow file to canvas"}),e.jsx(Ze,{label:`Maximum number of save change history to store. This does not include
        versions that you created by "Create Version", which are always stored
        and has no limit.`,settingKey:"maximumChangelogNumber"}),e.jsx(Ee,{settingKey:"hideCoverImage",text:"Hide thumbnail image in workflow list"}),e.jsx(os,{})]})})})]})]})})}const xe=16;function rs({}){const[s,t]=r.useState(!1),[l,o]=r.useState(!1),{colorMode:n,toggleColorMode:a}=ke();return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{isLazy:!0,children:[e.jsx(se,{as:P,"aria-label":"Options",icon:e.jsx(Ut,{}),size:"sm",variant:"outline"}),e.jsxs(te,{children:[e.jsx(N,{onClick:()=>o(!0),icon:e.jsx(Yt,{size:16}),fontSize:16,children:"Settings"}),e.jsx(N,{onClick:()=>t(!0),icon:e.jsx(qt,{size:xe}),fontSize:16,children:"Manage Tags"}),e.jsxs(N,{onClick:a,icon:n==="light"?e.jsx(Zt,{size:xe}):e.jsx(Xt,{size:xe}),fontSize:16,children:[n==="light"?"Dark":"Light"," Mode"]})]})]}),s&&e.jsx(Qt,{onclose:()=>t(!1)}),l&&e.jsx(is,{onClose:()=>o(!1)})]})}function ls(s){const{multipleState:t,changeMultipleState:l,selectedKeys:o,isSelectedAll:n,batchOperationCallback:a}=s,u=async()=>{var h;const i=await((h=T)==null?void 0:h.batchQuery(o))??[];ct(i)},p=o.length===0;return e.jsx(z,{spacing:2,wrap:"wrap",mb:0,children:t?e.jsxs(e.Fragment,{children:[e.jsx(q,{isChecked:n,onChange:i=>{a("selectAll",i.target.checked)}}),e.jsx(R,{hasArrow:!0,label:"Download Zip",placement:"bottom",children:e.jsx(P,{isDisabled:p,"aria-label":"Batch export",size:"sm",icon:e.jsx(lt,{size:21}),onClick:u})}),e.jsx(R,{hasArrow:!0,label:"Batch deletion",children:e.jsx(Pe,{isDisabled:p,variant:"solid",promptMessage:`Are you sure you want to delete these ${o.length} checked workflows?`,tooltipText:"Delete selected",onDelete:async()=>{var i;await((i=T)==null?void 0:i.batchDeleteFlow(o)),a("batchDelete")}})}),o.length>0&&e.jsx(L,{fontWeight:600,children:`Selected ${o.length}`}),e.jsx(R,{hasArrow:!0,label:"Exit multi-select",children:e.jsx(P,{"aria-label":"Close multi-select operation",size:"sm",icon:e.jsx(Re,{}),onClick:()=>{l(!1)}})})]}):e.jsx(R,{hasArrow:!0,label:"Select multiple",placement:"bottom-start",children:e.jsx(P,{"aria-label":"Start multi-select operation",size:"sm",variant:"outline",icon:e.jsx(Ht,{size:21}),onClick:()=>{l(!0)}})})})}const Te=6;function cs({setSelectedTag:s,selectedTag:t}){const[l,o]=r.useState(!1),[n,a]=r.useState([]);return r.useEffect(()=>{var u;(u=je)==null||u.listAll().then(p=>{a(p)})},[]),e.jsxs(z,{spacing:2,wrap:"wrap",mb:0,children:[t!=null&&e.jsx(P,{"aria-label":"Close",size:"sm",icon:e.jsx(Re,{}),onClick:()=>{s(void 0)}}),n.slice(0,l?void 0:Te).map(u=>e.jsx(W,{variant:"solid",width:"auto",flexShrink:0,size:"sm",borderRadius:15,py:4,onClick:()=>{s(u.name)},isActive:t===u.name,children:u.name},u.name)),(n.length??0)>Te&&e.jsx(P,{"aria-label":"Show-all-tags",size:"sm",icon:l?e.jsx(Bt,{}):e.jsx(Se,{}),onClick:()=>o(!l)})]})}function Ye({parentFolderID:s,onlyImportFile:t=!1}){const{onRefreshFilesList:l}=r.useContext(H),[o,n]=r.useState("file"),a=r.useRef(null),u=d=>{var g;n(d),d==="folder"?a.current.setAttribute("webkitdirectory",""):a.current.removeAttribute("webkitdirectory"),(g=a.current)==null||g.click()},p=async d=>{var g;if(d.type==="image/png"){const m=await ut(d),c=m==null?void 0:m.workflow;if(c)return{json:c,name:d.name.replace(".png","")}}else if(d.type==="application/json"||(g=d.name)!=null&&g.endsWith(".json"))return await new Promise((m,c)=>{const f=new FileReader;f.onload=v=>{var S;try{const w=(S=v.target)==null?void 0:S.result;typeof w=="string"?m({json:w,name:d.name.replace(".json","")}):c(new Error("File content is not a string"))}catch(w){c(w)}},f.onerror=c,f.readAsText(d)});return null},i=async d=>{var m,c;const g=[d];for(;g.length>0;){const f=g.shift();if(f&&!f.isFile){const v=await((m=G)==null?void 0:m.create({name:f.name,parentFolderID:f.parentFolderID}));if(f.children&&f.children.length){const S=[];f.children.forEach(w=>{w.isFile&&w.file?S.push(w.file):(w.parentFolderID=v==null?void 0:v.id,g.push(w))}),S.length&&await((c=T)==null?void 0:c.batchCreateFlows(S,void 0,v==null?void 0:v.id))}}}l==null||l()},h=async d=>{var m;const g=d.target.files;if(g)if(o==="folder"){const c={name:g[0].webkitRelativePath.split("/")[0],isFile:!1,children:[]};for(const f of g)if(f.name!==".DS_Store"){const v=f.webkitRelativePath.split("/");let S=c.children??[];for(let w=1;w<v.length;w++){const b=v[w];let F=S.find(y=>y.name===b);if(!F){if(F={name:b,isFile:w===v.length-1,children:w===v.length-1?void 0:[]},F.isFile){const y=await p(f);y&&(F.file=y)}S.push(F)}F&&!F.isFile&&(S=F.children)}}i(c)}else{const c=[];for(const f of g){const v=await p(f);v&&c.push(v)}c.length&&(await((m=T)==null?void 0:m.batchCreateFlows(c,void 0,s)),l&&l())}};return e.jsxs(e.Fragment,{children:[t?e.jsx(N,{onClick:d=>{d.stopPropagation(),u("file")},icon:e.jsx(De,{size:19}),children:"Import workflows"}):e.jsxs(ee,{closeOnSelect:!0,children:[e.jsx(se,{as:W,leftIcon:e.jsx(De,{size:18}),variant:"outline",iconSpacing:1,size:"sm",colorScheme:"teal",children:"Import"}),e.jsx(te,{children:dt.map((d,g)=>e.jsx(N,{onClick:()=>{u(d.type)},iconSpacing:2,icon:d.type==="folder"?e.jsx(_e,{size:18}):e.jsx(Gt,{size:18}),children:d.title},g))})]}),e.jsx("input",{style:{display:"none"},ref:a,type:"file",accept:".json,image/png",multiple:!0,onChange:h,onClick:d=>{d.stopPropagation()}})]})}function ds({folder:s,onclose:t}){const[l,o]=r.useState(s.name),[n,a]=r.useState(""),{onRefreshFilesList:u}=r.useContext(H),p=h=>{o(h.target.value),n&&a("")},i=async()=>{var g,m;const h=l.trim();if(o(h),h===s.name)return t();await((g=G)==null?void 0:g.generateUniqueName(h,s.parentFolderID??""))!==h?a("The name is duplicated, please modify it and submit again."):(await((m=G)==null?void 0:m.update(s.id,{name:h})),u&&u(),t())};return e.jsxs(re,{isOpen:!0,onClose:t,children:[e.jsx(le,{}),e.jsxs(ce,{children:[e.jsx(de,{children:"Edit folder name"}),e.jsx(ue,{}),e.jsx(he,{children:e.jsxs(ht,{isInvalid:!!n,children:[e.jsx(pt,{children:"Folder name"}),e.jsx(pe,{value:l,onChange:p,autoFocus:!0,onKeyUp:h=>{h.code==="Enter"&&!n&&l&&i()}}),n&&e.jsx(gt,{children:n})]})}),e.jsxs(Qe,{children:[e.jsx(W,{colorScheme:"teal",mr:3,onClick:i,isDisabled:!l||!!n,children:"Save"}),e.jsx(W,{onClick:t,children:"Cancel"})]})]})]})}function us({menuPosition:s,isopen:t,folder:l,onClose:o}){const[n,a]=r.useState(!1),{onRefreshFilesList:u}=r.useContext(H),{showDialog:p}=ve(),i=async m=>{var c;m.stopPropagation(),await((c=G)==null?void 0:c.create({name:"New Folder",parentFolderID:l.id})),u&&u()},h=async m=>{var c;m.stopPropagation(),await((c=T)==null?void 0:c.createFlow({json:JSON.stringify(ft),parentFolderID:l.id})),u&&u()},d=async m=>{m.stopPropagation();const c=await xt(l.id);p(`Do you want to delete the ${c} files inside the folder too?`,[{label:"Delete all files",colorScheme:"red",onClick:()=>{g(jt.DELETE)}}])},g=async m=>{var c;await((c=G)==null?void 0:c.deleteFolder(l.id,m)),o(),u&&u()};return e.jsxs(e.Fragment,{children:[e.jsx(_,{position:"absolute",top:s.y,left:s.x,children:e.jsx(ee,{isOpen:t,onClose:o,isLazy:!0,lazyBehavior:"keepMounted",children:e.jsxs(te,{children:[e.jsx(N,{icon:e.jsx(mt,{size:19}),onClick:m=>{m.preventDefault(),m.stopPropagation(),a(!0)},children:"Rename"}),e.jsx(N,{icon:e.jsx(Ne,{size:19}),onClick:d,children:"Delete"}),e.jsx(N,{onClick:i,icon:e.jsx(Ue,{size:19}),children:"New folder"}),e.jsx(N,{onClick:h,icon:e.jsx(Be,{size:19}),children:"New file"}),e.jsx(Ye,{parentFolderID:l.id,onlyImportFile:!0})]})})}),n&&e.jsx(ds,{folder:l,onclose:()=>a(!1)})]})}const Oe=r.memo(function({folder:t}){const[l,o]=r.useState(!1),[n,a]=r.useState(t.isCollapse??!0),[u,p]=r.useState([]),[i,h]=r.useState({x:0,y:0}),[d,g]=r.useState(!1),{colorMode:m}=ke(),{draggingFile:c,setDraggingFile:f,refreshFolderStamp:v,onRefreshFilesList:S}=r.useContext(H),w=m==="light"?{backgroundColor:"#E2E8F0"}:{backgroundColor:"#4A5568"};r.useEffect(()=>{var y;n||(y=T)==null||y.listFolderContent(t.id,window.localStorage.getItem(ye)).then(O=>{p(O)})},[t.id,v,n]);const b=y=>{y.preventDefault(),h({x:y.clientX,y:y.clientY}),g(!0)},F=async y=>{var O,$;if(y.preventDefault(),y.stopPropagation(),!c)return o(!1);if(U(c)){if(c.id===t.id)return o(!1);await((O=G)==null?void 0:O.update(c.id,{parentFolderID:t.id}))}else U(c)||await(($=T)==null?void 0:$.updateFolder(c.id,{parentFolderID:t.id}));await(S==null?void 0:S()),o(!1)};return r.useEffect(()=>{var y;!!t.isCollapse!==n&&((y=G)==null||y.update(t.id,{isCollapse:n}))},[n]),r.useEffect(()=>{var X;const y=(X=T)==null?void 0:X.curWorkflow,O=(y==null?void 0:y.parentFolderID)+"/",$=t.id+"/";O.startsWith($)&&a(!1)},[]),e.jsxs(B,{children:[e.jsxs(z,{w:"100%",as:"button",py:1,onClick:()=>{a(!n)},onContextMenu:b,draggable:"true",onDragOver:y=>{y.preventDefault(),y.stopPropagation(),o(!0)},onDragLeave:y=>{y.preventDefault(),y.stopPropagation(),o(!1)},onDragStart:()=>f==null?void 0:f(t),onDrop:F,_hover:w,style:l||d?w:void 0,className:"droppable",children:[e.jsxs(z,{gap:1,children:[n?e.jsx(Tt,{size:20}):e.jsx(Se,{size:20}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.2rem",height:"1.2rem"},children:e.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})})]}),e.jsx(L,{children:t.name})]}),e.jsx(us,{isopen:d,menuPosition:i,onClose:()=>g(!1),folder:t}),!n&&e.jsx(B,{ml:4,gap:0,children:e.jsx(Xe,{items:u})})]})});function hs({workflow:s}){const t=r.useRef(null),l=Y(),{onDuplicateWorkflow:o}=r.useContext(Ce),[n,a]=r.useState(s.saveLock??!1),u=async()=>{var h;const i=!n;a(i),await((h=T)==null?void 0:h.updateMetaInfo(s.id,{saveLock:i})),l({title:`${i?"Locked":"Unlocked"} successfully`,status:"success",duration:2e3})},p=async i=>{const h=i.target.files;if(!h)return;const d=new FormData;Array.from(h).forEach((g,m)=>{d.append(`images[${m}]`,g,g.name)}),d.append("subfolder","workspace_manager"),await vt("/workspace/images/save",{method:"POST",body:d}),Array.from(h).forEach(async g=>{var c,f;const m=`workspace_manager/${g.name}`;(c=kt)==null||c.create({workflowID:s.id,localPath:m}),(f=T)==null||f.updateMetaInfo(s.id,{coverMediaPath:m})})};return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{isLazy:!0,closeOnSelect:!1,placement:"right",gutter:0,children:[e.jsx(se,{border:0,as:P,"aria-label":"Options",icon:e.jsx($t,{size:20}),size:"sm",variant:"outline"}),e.jsxs(te,{zIndex:101,children:[e.jsx(N,{icon:e.jsx(At,{}),onClick:()=>o&&o(s.id),children:"Duplicate"}),e.jsx(N,{icon:e.jsx(yt,{size:20}),onClick:()=>wt(s.id),children:"Open in new tab"}),e.jsx(R,{hasArrow:!0,label:n?"Unlock workflow, allow modifying":"Lock workflow, prevent modifying",placement:"bottom",children:e.jsx(N,{icon:n?e.jsx($e,{}):e.jsx(Vt,{}),onClick:u,children:n?"Unlock":"Lock"})}),e.jsx(N,{icon:e.jsx(Jt,{}),onClick:()=>{var i;(i=t.current)==null||i.click()},children:"Upload Thumbnail Image"})]})]}),e.jsx("input",{style:{display:"none"},ref:t,type:"file",accept:".json,image/png",multiple:!0,onChange:p,onClick:i=>{i.stopPropagation()}})]})}function ps({workflow:s}){const{onDeleteFlow:t}=r.useContext(H);return e.jsxs(Z,{justifyContent:"flex-end",children:[e.jsx(Pe,{promptMessage:"Are you sure you want to delete this workflow?",onDelete:()=>{t&&t(s.id)}}),e.jsx(hs,{workflow:s})]})}const ze=r.memo(function({workflow:t}){var v,S,w,b;const{colorMode:l}=ke(),{setDraggingFile:o,isMultiSelecting:n,onMultiSelectFlow:a,multiSelectedFlowsID:u}=r.useContext(H),p=u&&u.length>0&&u.includes(t.id),{curFlowID:i,loadWorkflowID:h}=r.useContext(Ce),d=i===t.id,g=l==="light"?"gray.200":"#4A5568",[m,c]=r.useState(!1),f=e.jsx(_,{flexShrink:1,flexGrow:1,backgroundColor:d?"teal.200":void 0,color:d&&!n?"#333":void 0,draggable:!n,onDragStart:()=>o==null?void 0:o(t),borderRadius:6,px:1,py:"5px",onClick:()=>{!n&&h(t.id)},_hover:{bg:g},children:e.jsxs(z,{flexGrow:1,children:[!((S=(v=C)==null?void 0:v.settings)!=null&&S.hideCoverImage)&&(((w=t.coverMediaPath)==null?void 0:w.length)||((b=t.latestImage)==null?void 0:b.length))&&e.jsx(Ot,{mediaLocalPath:t.coverMediaPath??t.latestImage??"",size:60,hideBrokenImage:!0,isPreview:!0}),e.jsx(_,{textAlign:"left",gap:0,justifyContent:"space-between",flexGrow:1,children:e.jsxs(Z,{alignItems:"center",children:[e.jsx(L,{fontWeight:"500",noOfLines:1,wordBreak:"break-all",children:t.name??"untitled"}),t.saveLock&&e.jsx($e,{size:18,style:{display:"inline-block"}})]})})]})});return e.jsx(z,{w:"100%",justify:"space-between",borderBottom:"1px solid",borderColor:l=="dark"?"gray.700":"gray.200",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:n?e.jsx(q,{isChecked:p,spacing:4,onChange:F=>{a&&a(t.id,F.target.checked)},children:f}):e.jsxs(e.Fragment,{children:[f,e.jsx(_,{width:"fit-content",children:m?e.jsx(ps,{workflow:t}):e.jsx(L,{color:"GrayText",fontSize:"sm",children:St(t.updateTime,!1,!1,"/")})})]})})});function Xe({items:s}){var m;const[t,l]=r.useState(!1),o=s.filter(U),n=s.filter(c=>!U(c)),a=(m=n[0])==null?void 0:m.parentFolderID,[u,p]=r.useState(!1),{onRefreshFilesList:i,draggingFile:h,refreshFolderStamp:d}=r.useContext(H),g=async c=>{var f,v;if(c.preventDefault(),c.stopPropagation(),!h)return p(!1);if(U(h)){if(h.id===a)return p(!1);await((f=G)==null?void 0:f.update(h.id,{parentFolderID:a}))}else await((v=T)==null?void 0:v.updateFolder(h.id,{parentFolderID:a}));await(i==null?void 0:i()),p(!1)};return r.useEffect(()=>{var c;(c=C)==null||c.getSetting("foldersOnTop").then(f=>{l(f??!1)})},[d]),e.jsxs(e.Fragment,{children:[t&&o.map(c=>e.jsx(Oe,{folder:c},c.id)),e.jsx(_,{border:u?"2px dashed #718096":"2px dashed transparent",onDragOver:c=>{c.preventDefault(),c.stopPropagation(),p(!0)},onDragLeave:c=>{c.preventDefault(),c.stopPropagation(),p(!1)},onDrop:g,className:"droppable",children:t?n.map(c=>e.jsx(ze,{workflow:c},c.id)):s.map(c=>U(c)?e.jsx(Oe,{folder:c},c.id):e.jsx(ze,{workflow:c},c.id))})]})}function ks({onClose:s,onClickNewFlow:t}){const[l,o]=r.useState([]),n=r.useRef([]),{loadWorkflowID:a,curFlowID:u}=r.useContext(Ce),[p,i]=r.useState(),[h,d]=r.useState(!1),[g,m]=r.useState([]),[c,f]=r.useState(0),[v,S]=r.useState(""),w=zt(v,400),b=r.useRef(null),[F,y]=r.useState(null),O=r.useRef(window.localStorage.getItem(ye)??J.RECENTLY_MODIFIED),$=!!p||!!w.length,K=async()=>{var I,M;const x=await((I=T)==null?void 0:I.listFolderContent())??[];o(fe(x,O.current)),f(Date.now()),n.current=await((M=T)==null?void 0:M.listAll())??[]},X=()=>{const x=n.current.filter(I=>{var Ie;let M=!0,D=!0;return p&&(M=!!((Ie=I.tags)!=null&&Ie.includes(p))),w&&(D=!!I.name.toLocaleLowerCase().includes(w.toLocaleLowerCase())),M&&D});o(fe(x,O.current))},ne=x=>{o(fe(l,x)),O.current=x,window.localStorage.setItem(ye,x),!$&&f(Date.now())};r.useEffect(()=>{$?X():K()},[w,p]);const ae=r.useCallback(async x=>{var I,M,D;await((I=T)==null?void 0:I.deleteFlow(x)),((D=(M=T)==null?void 0:M.curWorkflow)==null?void 0:D.id)===x&&await(a==null?void 0:a(null)),await K()},[p,w]);r.useEffect(()=>{const x=async I=>{var M;if(b.current){const D=await((M=T)==null?void 0:M.get(b.current));D&&D.json&&Mt(D.json,[I.canvasX,I.canvasY])}};return oe.canvasEl.addEventListener("drop",x),oe.canvasEl.addEventListener("click",s),()=>{oe.canvasEl.removeEventListener("drop",x),oe.canvasEl.removeEventListener("click",s)}},[]);const ge=r.useCallback((x,I)=>{m(M=>{const D=[...M];return I?D.push(x):D.splice(D.indexOf(x),1),D})},[]),j=(x,I)=>{var M;switch(x){case"batchDelete":u&&((M=T)==null||M.get(u).then(D=>{D||a==null||a(null)})),K(),d(!1),m([]);return;case"selectAll":m(I?n.current.map(D=>D.id):[]);return}},k=x=>{y(x),U(x)||(b.current=x.id)},E=x=>{S(x)},V=450;return e.jsx(H.Provider,{value:{onRefreshFilesList:K,draggingFile:F??void 0,setDraggingFile:k,isMultiSelecting:h,onMultiSelectFlow:ge,multiSelectedFlowsID:g,onDeleteFlow:ae,refreshFolderStamp:c,setRefreshFolderStamp:f},children:e.jsx(_,{style:{width:V},children:e.jsxs(Ct,{width:V,height:"100vh",pl:2,pr:2,pt:4,gap:4,position:"absolute",top:0,left:0,shadow:"xl",zIndex:bt,children:[e.jsxs(Z,{alignItems:"center",justifyContent:"space-between",children:[e.jsxs(z,{gap:4,children:[e.jsx(z,{gap:2,children:e.jsx(L,{fontSize:19,fontWeight:600,children:"ðŸ¦„Workspace"})}),e.jsx(Ye,{}),e.jsx(R,{label:"Open workspace save directory",children:e.jsx(P,{"aria-label":"Open workspace save directory",size:"sm",icon:e.jsx(_e,{}),variant:"outline",colorScheme:"teal",onClick:()=>It()})}),e.jsx(R,{label:"New workflow",children:e.jsx(P,{"aria-label":"New workflow",size:"sm",icon:e.jsx(Be,{}),variant:"outline",colorScheme:"teal",onClick:t})})]}),e.jsx(z,{alignItems:"center",children:e.jsx(rs,{})})]}),e.jsxs(Z,{direction:"column",h:"calc(100% - 64px)",children:[e.jsx(cs,{selectedTag:p,setSelectedTag:i}),e.jsxs(z,{mb:2,mt:2,p:0,justifyContent:"space-between",children:[e.jsxs(z,{children:[e.jsx(ls,{multipleState:h,changeMultipleState:x=>{d(x),!x&&m([])},selectedKeys:g,isSelectedAll:g.length===n.current.length,batchOperationCallback:j}),!h&&e.jsx(R,{hasArrow:!0,label:"New folder",placement:"bottom-start",children:e.jsx(P,{size:"sm",variant:"outline",icon:e.jsx(Ue,{size:21}),onClick:async()=>{var x;await((x=G)==null?void 0:x.create({name:"New Folder"})),K()},"aria-label":"new folder button"})})]}),e.jsxs(ee,{closeOnSelect:!0,children:[e.jsx(se,{as:W,variant:"ghost",size:"xs",pr:0,rightIcon:e.jsx(Se,{size:"16"}),children:e.jsxs(z,{children:[e.jsx(L,{children:"Sort by:"}),e.jsx(L,{display:"inline-block",children:O.current})]})}),e.jsx(te,{children:e.jsx(Ve,{value:O.current,type:"radio",onChange:x=>ne(x),children:[J.RECENTLY_MODIFIED,J.OLDEST_MODIFIED,J.AZ,J.ZA].map((x,I)=>e.jsx(be,{value:x,children:x},I))})})]})]}),e.jsx(Lt,{searchValue:v,onUpdateSearchValue:E}),e.jsx(Z,{overflowY:"auto",overflowX:"hidden",direction:"column",style:{overflowY:"scroll",scrollbarWidth:"none",msOverflowStyle:"none"},children:e.jsx(Xe,{items:l})})]})]})})})}export{ks as default};
