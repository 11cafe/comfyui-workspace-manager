import{f as Oe,h as er,o as sn,j as w,b as Ce,d as $e,Q as ri,r as z,z as lt,q as tr,c as ln,m as nt,k as Fe,e as Ae,A as ii,S as ai,C as oi,D as si,I as Je,M as wt,G as St,H as _t,J as Ct,K as kt,L as Ot,B as Se,T as un,U as it,V as li,W as ui,X as ci,Y as nr,Z as di,$ as ie,a0 as ae,a1 as hi,a2 as rr,R as le,a3 as fi,a4 as Pn,a5 as pt,l as pi,N as mi,O as vi}from"./input.js";import{u as gi,b as bi,a as yi,c as xi,d as wi,e as Si,S as _i,M as ir,f as Ci,g as ki,h as Oi,i as Ii,j as Pi,l as Ei,k as Vt,m as Me,H as we,I as be,t as He,n as We,T as _e,o as ut,p as Be,q as Mi,B as de,F as at,r as De,s as En,v as ji,w as ct,x as ar,y as Tt,z as Ve,A as Di,R as Ze,C as Pe,D as cn,W as or,E as st,G as Ri,J as sr,K as zi,L as Ti,N as Fi,O as dn,P as Ai,Q as Li,U as Vi,V as Xe,X as Bi,Y as Ni,Z as $i,_ as Bt,$ as hn,a0 as qt,a1 as Mn,a2 as Ui,a3 as Hi,a4 as Wi,a5 as Nt}from"./App-ddGdajIL.js";import{I as fn,C as Ft,V as jn,S as Zi,a as Gi}from"./IconTrash-6P4EIbwi.js";import{u as Yi}from"./chunk-6RSEZNRH-3Efv3ksN.js";import{I as Ki}from"./chunk-JARCRF6W-po8hqWTL.js";import{app as mt}from"/scripts/app.js";import"/scripts/api.js";function Xi(a){return"current"in a}var lr=()=>typeof window<"u";function qi(){var a;const e=navigator.userAgentData;return(a=e==null?void 0:e.platform)!=null?a:navigator.platform}var Ji=a=>lr()&&a.test(navigator.vendor),Qi=a=>lr()&&a.test(qi()),ea=()=>Qi(/mac|iphone|ipad|ipod/i),ta=()=>ea()&&Ji(/apple/i);function na(a){const{ref:e,elements:n,enabled:o}=a,t=()=>{var i,s;return(s=(i=e.current)==null?void 0:i.ownerDocument)!=null?s:document};gi(t,"pointerdown",i=>{if(!ta()||!o)return;const s=i.target,l=(n??[e]).some(u=>{const p=Xi(u)?u.current:u;return(p==null?void 0:p.contains(s))||p===s});t().activeElement!==s&&l&&(i.preventDefault(),s.focus())})}var ur=Oe(function(e,n){const{borderLeftWidth:o,borderBottomWidth:t,borderTopWidth:i,borderRightWidth:s,borderWidth:r,borderStyle:l,borderColor:u,...p}=er("Divider",e),{className:h,orientation:y="horizontal",__css:c,...b}=sn(e),f={vertical:{borderLeftWidth:o||s||r||"1px",height:"100%"},horizontal:{borderBottomWidth:t||i||r||"1px",width:"100%"}};return w.jsx(Ce.hr,{ref:n,"aria-orientation":y,...b,__css:{...p,border:"0",borderColor:u,borderStyle:l,...f[y],...c},className:$e("chakra-divider",h)})});ur.displayName="Divider";function ra(a,e={}){const{ssr:n=!0,fallback:o}=e,{getWindow:t}=ri(),i=Array.isArray(a)?a:[a];let s=Array.isArray(o)?o:[o];s=s.filter(u=>u!=null);const[r,l]=z.useState(()=>i.map((u,p)=>({media:u,matches:n?!!s[p]:t().matchMedia(u).matches})));return z.useEffect(()=>{const u=t();l(i.map(y=>({media:y,matches:u.matchMedia(y).matches})));const p=i.map(y=>u.matchMedia(y)),h=y=>{l(c=>c.slice().map(b=>b.media===y.media?{...b,matches:y.matches}:b))};return p.forEach(y=>{typeof y.addListener=="function"?y.addListener(h):y.addEventListener("change",h)}),()=>{p.forEach(y=>{typeof y.removeListener=="function"?y.removeListener(h):y.removeEventListener("change",h)})}},[t]),r.map(u=>u.matches)}function ia(a,e,n=bi){let o=Object.keys(a).indexOf(e);if(o!==-1)return a[e];let t=n.indexOf(e);for(;t>=0;){const i=n[t];if(a.hasOwnProperty(i)){o=t;break}t-=1}if(o!==-1){const i=n[o];return a[i]}}function aa(a){var e,n;const o=tr(a)?a:{fallback:a??"base"},i=lt().__breakpoints.details.map(({minMaxQuery:u,breakpoint:p})=>({breakpoint:p,query:u.replace("@media screen and ","")})),s=i.map(u=>u.breakpoint===o.fallback),l=ra(i.map(u=>u.query),{fallback:s,ssr:o.ssr}).findIndex(u=>u==!0);return(n=(e=i[l])==null?void 0:e.breakpoint)!=null?n:o.fallback}function oa(a,e){var n;const o=tr(e)?e:{fallback:e??"base"},t=aa(o),i=lt();if(!t)return;const s=Array.from(((n=i.__breakpoints)==null?void 0:n.keys)||[]),r=Array.isArray(a)?Object.fromEntries(Object.entries(yi(a,s)).map(([l,u])=>[l,u])):a;return ia(r,t,s)}var cr=Oe((a,e)=>{const{title:n,children:o,className:t,...i}=a,s=$e("chakra-menu__group__title",t),r=xi();return w.jsxs("div",{ref:e,className:"chakra-menu__group",role:"group",children:[n&&w.jsx(Ce.p,{className:s,...i,__css:r.groupTitle,children:n}),o]})});cr.displayName="MenuGroup";var dr=a=>{const{className:e,title:n,...o}=a,t=wi(o);return w.jsx(cr,{title:n,className:$e("chakra-menu__option-group",e),...t})};dr.displayName="MenuOptionGroup";var sa=a=>w.jsx("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",...a,children:w.jsx("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})}),pn=Oe((a,e)=>{const{icon:n,iconSpacing:o="0.75rem",...t}=a,i=Si(t,e);return w.jsxs(_i,{...i,className:$e("chakra-menu__menuitem-option",t.className),children:[n!==null&&w.jsx(ir,{fontSize:"0.8em",marginEnd:o,opacity:a.isChecked?1:0,children:n||w.jsx(sa,{})}),w.jsx("span",{style:{flex:1},children:i.children})]})});pn.id="MenuItemOption";pn.displayName="MenuItemOption";var[la,Ge]=ln({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[ua,dt]=ln({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `}),hr=Oe(function(e,n){const{getHeaderProps:o}=Ge(),t=dt();return w.jsx(Ce.header,{...o(e,n),className:$e("chakra-popover__header",e.className),__css:t.header})});hr.displayName="PopoverHeader";function mn(a){const e=z.Children.only(a.children),{getTriggerProps:n}=Ge();return z.cloneElement(e,n(e.props,e.ref))}mn.displayName="PopoverTrigger";var Ye={click:"click",hover:"hover"};function ca(a={}){const{closeOnBlur:e=!0,closeOnEsc:n=!0,initialFocusRef:o,id:t,returnFocusOnClose:i=!0,autoFocus:s=!0,arrowSize:r,arrowShadowColor:l,trigger:u=Ye.click,openDelay:p=200,closeDelay:h=200,isLazy:y,lazyBehavior:c="unmount",computePositionOnMount:b,...f}=a,{isOpen:g,onClose:v,onOpen:x,onToggle:_}=Ci(a),O=z.useRef(null),I=z.useRef(null),P=z.useRef(null),j=z.useRef(!1),D=z.useRef(!1);g&&(D.current=!0);const[E,N]=z.useState(!1),[X,k]=z.useState(!1),B=z.useId(),m=t??B,[R,K,$,J]=["popover-trigger","popover-content","popover-header","popover-body"].map(L=>`${L}-${m}`),{referenceRef:H,getArrowProps:te,getPopperProps:A,getArrowInnerProps:T,forceUpdate:Q}=ki({...f,enabled:g||!!b}),q=Oi({isOpen:g,ref:P});na({enabled:g,ref:I}),Ii(P,{focusRef:I,visible:g,shouldFocus:i&&u===Ye.click}),Pi(P,{focusRef:o,visible:g,shouldFocus:s&&u===Ye.click});const Z=Ei({wasSelected:D.current,enabled:y,mode:c,isSelected:q.present}),ue=z.useCallback((L={},V=null)=>{const C={...L,style:{...L.style,transformOrigin:Vt.transformOrigin.varRef,[Vt.arrowSize.var]:r?`${r}px`:void 0,[Vt.arrowShadowColor.var]:l},ref:nt(P,V),children:Z?L.children:null,id:K,tabIndex:-1,role:"dialog",onKeyDown:Fe(L.onKeyDown,S=>{n&&S.key==="Escape"&&v()}),onBlur:Fe(L.onBlur,S=>{const M=Dn(S),U=$t(P.current,M),W=$t(I.current,M);g&&e&&(!U&&!W)&&v()}),"aria-labelledby":E?$:void 0,"aria-describedby":X?J:void 0};return u===Ye.hover&&(C.role="tooltip",C.onMouseEnter=Fe(L.onMouseEnter,()=>{j.current=!0}),C.onMouseLeave=Fe(L.onMouseLeave,S=>{S.nativeEvent.relatedTarget!==null&&(j.current=!1,setTimeout(()=>v(),h))})),C},[Z,K,E,$,X,J,u,n,v,g,e,h,l,r]),he=z.useCallback((L={},V=null)=>A({...L,style:{visibility:g?"visible":"hidden",...L.style}},V),[g,A]),se=z.useCallback((L,V=null)=>({...L,ref:nt(V,O,H)}),[O,H]),oe=z.useRef(),me=z.useRef(),fe=z.useCallback(L=>{O.current==null&&H(L)},[H]),ye=z.useCallback((L={},V=null)=>{const C={...L,ref:nt(I,V,fe),id:R,"aria-haspopup":"dialog","aria-expanded":g,"aria-controls":K};return u===Ye.click&&(C.onClick=Fe(L.onClick,_)),u===Ye.hover&&(C.onFocus=Fe(L.onFocus,()=>{oe.current===void 0&&x()}),C.onBlur=Fe(L.onBlur,S=>{const M=Dn(S),U=!$t(P.current,M);g&&e&&U&&v()}),C.onKeyDown=Fe(L.onKeyDown,S=>{S.key==="Escape"&&v()}),C.onMouseEnter=Fe(L.onMouseEnter,()=>{j.current=!0,oe.current=window.setTimeout(()=>x(),p)}),C.onMouseLeave=Fe(L.onMouseLeave,()=>{j.current=!1,oe.current&&(clearTimeout(oe.current),oe.current=void 0),me.current=window.setTimeout(()=>{j.current===!1&&v()},h)})),C},[R,g,K,u,fe,_,x,e,v,p,h]);z.useEffect(()=>()=>{oe.current&&clearTimeout(oe.current),me.current&&clearTimeout(me.current)},[]);const xe=z.useCallback((L={},V=null)=>({...L,id:$,ref:nt(V,C=>{N(!!C)})}),[$]),d=z.useCallback((L={},V=null)=>({...L,id:J,ref:nt(V,C=>{k(!!C)})}),[J]);return{forceUpdate:Q,isOpen:g,onAnimationComplete:q.onComplete,onClose:v,getAnchorProps:se,getArrowProps:te,getArrowInnerProps:T,getPopoverPositionerProps:he,getPopoverProps:ue,getTriggerProps:ye,getHeaderProps:xe,getBodyProps:d}}function $t(a,e){return a===e||(a==null?void 0:a.contains(e))}function Dn(a){var e;const n=a.currentTarget.ownerDocument.activeElement;return(e=a.relatedTarget)!=null?e:n}function vn(a){const e=Ae("Popover",a),{children:n,...o}=sn(a),t=lt(),i=ca({...o,direction:t.direction});return w.jsx(la,{value:i,children:w.jsx(ua,{value:e,children:ii(n,{isOpen:i.isOpen,onClose:i.onClose,forceUpdate:i.forceUpdate})})})}vn.displayName="Popover";var Ut=(a,e)=>e?`${a}.${e}, ${e}`:void 0;function gn(a){var e;const{bg:n,bgColor:o,backgroundColor:t,shadow:i,boxShadow:s,shadowColor:r}=a,{getArrowProps:l,getArrowInnerProps:u}=Ge(),p=dt(),h=(e=n??o)!=null?e:t,y=i??s;return w.jsx(Ce.div,{...l(),className:"chakra-popover__arrow-positioner",children:w.jsx(Ce.div,{className:$e("chakra-popover__arrow",a.className),...u(a),__css:{"--popper-arrow-shadow-color":Ut("colors",r),"--popper-arrow-bg":Ut("colors",h),"--popper-arrow-shadow":Ut("shadows",y),...p.arrow}})})}gn.displayName="PopoverArrow";var bn=Oe(function(e,n){const{getBodyProps:o}=Ge(),t=dt();return w.jsx(Ce.div,{...o(e,n),className:$e("chakra-popover__body",e.className),__css:t.body})});bn.displayName="PopoverBody";var yn=Oe(function(e,n){const{onClose:o}=Ge(),t=dt();return w.jsx(ai,{size:"sm",onClick:o,className:$e("chakra-popover__close-btn",e.className),__css:t.closeButton,ref:n,...e})});yn.displayName="PopoverCloseButton";function da(a){if(a)return{enter:{...a.enter,visibility:"visible"},exit:{...a.exit,transitionEnd:{visibility:"hidden"}}}}var ha={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},fa=Ce(oi.section),fr=Oe(function(e,n){const{variants:o=ha,...t}=e,{isOpen:i}=Ge();return w.jsx(fa,{ref:n,variants:da(o),initial:!1,animate:i?"enter":"exit",...t})});fr.displayName="PopoverTransition";var xn=Oe(function(e,n){const{rootProps:o,motionProps:t,...i}=e,{getPopoverProps:s,getPopoverPositionerProps:r,onAnimationComplete:l}=Ge(),u=dt(),p={position:"relative",display:"flex",flexDirection:"column",...u.content};return w.jsx(Ce.div,{...r(o),__css:u.popper,className:"chakra-popover__popper",children:w.jsx(fr,{...t,...s(i,n),onAnimationComplete:si(l,i.onAnimationComplete),className:$e("chakra-popover__content",e.className),__css:p})})});xn.displayName="PopoverContent";var[pa,pr]=ln({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),wn=Oe((a,e)=>{const n=Ae("Tag",a),o=sn(a),t={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...n.container};return w.jsx(pa,{value:n,children:w.jsx(Ce.span,{ref:e,...o,__css:t})})});wn.displayName="Tag";var ma=Oe((a,e)=>{const n=pr();return w.jsx(Ce.span,{ref:e,noOfLines:1,...a,__css:n.label})});ma.displayName="TagLabel";var va=Oe((a,e)=>w.jsx(Je,{ref:e,verticalAlign:"top",marginEnd:"0.5rem",...a}));va.displayName="TagLeftIcon";var ga=Oe((a,e)=>w.jsx(Je,{ref:e,verticalAlign:"top",marginStart:"0.5rem",...a}));ga.displayName="TagRightIcon";var mr=a=>w.jsx(Je,{verticalAlign:"inherit",viewBox:"0 0 512 512",...a,children:w.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});mr.displayName="TagCloseIcon";var ba=Oe((a,e)=>{const{isDisabled:n,children:o,...t}=a,s={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...pr().closeButton};return w.jsx(Ce.button,{ref:e,"aria-label":"close",...t,type:"button",disabled:n,__css:s,children:o||w.jsx(mr,{})})});ba.displayName="TagCloseButton";var ya=Me("chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]),xa=Me("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),vr=Me("file-import","IconFileImport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3",key:"svg-1"}]]),gr=Me("folder-plus","IconFolderPlus",[["path",{d:"M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}]]),wa=Me("list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]),Sa=Me("menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]),_a=Me("moon","IconMoon",[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]]),Ca=Me("pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]),ka=Me("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),Oa=Me("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),Ia=Me("sun","IconSun",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]]),br=Me("tag","IconTag",[["path",{d:"M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z",key:"svg-1"}]]);function Pa({onclose:a}){const[e,n]=z.useState([]),o=async()=>{var i;const t=await((i=He)==null?void 0:i.listAll());n(t??[])};return z.useEffect(()=>{o()},[]),w.jsxs(wt,{isOpen:!0,onClose:a,children:[w.jsx(St,{}),w.jsxs(_t,{children:[w.jsx(Ct,{children:"My Tags"}),w.jsx(kt,{}),w.jsx(Ot,{children:e.map(t=>w.jsxs(we,{children:[w.jsx(wn,{children:t.name}),w.jsx(be,{onClick:()=>{var i;(i=He)==null||i.delete(t.name),o()},"aria-label":"delete-tag",colorScheme:"red",variant:"ghost",icon:w.jsx(fn,{})})]}))})]})]})}function Ea(){var l,u;const a=(u=(l=Be)==null?void 0:l.getSetting("shortcuts"))==null?void 0:u.save,[e,n]=z.useState(a??"Control+S"),[o,t]=z.useState(!1),i=()=>t(!0),s=()=>t(!1),r=p=>{var y;p.preventDefault();let h="";p.ctrlKey&&(h+="Control+"),p.shiftKey&&(h+="Shift+"),p.altKey&&(h+="Alt+"),h.length>0&&!["Control","Shift","Alt"].includes(p.key)&&(h+=p.key.toUpperCase(),n(h),(y=Be)==null||y.upsert({shortcuts:{save:h}}))};return w.jsxs(We,{children:[w.jsx(_e,{children:"Keyboard Shortcut - Save current workflow"}),o&&w.jsx(_e,{color:"gray.500",children:"Press shortcut key combinations to setup"}),w.jsx(ut,{value:e,onKeyDown:r,onFocus:i,onBlur:s,placeholder:"Press a key combination",readOnly:!0})]})}function Ma(){var o;const a=(o=Be)==null?void 0:o.getSetting("autoSave"),[e,n]=z.useState(a??!0);return w.jsx(We,{children:w.jsx(Ft,{isChecked:e,onChange:t=>{var i;n(t.target.checked),(i=Be)==null||i.upsert({autoSave:t.target.checked})},children:"Enable auto save workflow"})})}function ja(){var o;const a=(o=Be)==null?void 0:o.getSetting("twoWaySync"),[e,n]=z.useState(a??!1);return w.jsxs(We,{children:[w.jsx(_e,{color:"GrayText",children:"If true this will auto detect when you have new .json files added to your workspace saving directory in your disk and automatically import them into your workspace for you"}),w.jsx(Ft,{isChecked:e,onChange:t=>{var i;n(t.target.checked),(i=Be)==null||i.upsert({twoWaySync:t.target.checked})},children:"Enable two way sync (Experimental)"})]})}function Da({onClose:a}){var j;const[e,n]=z.useState(!1),[o,t]=z.useState(!1),[i,s]=z.useState((j=Be)==null?void 0:j.records.myWorkflowsDir),[r,l]=z.useState([]),[u,p]=z.useState([]),[h,y]=z.useState(!1),c=z.useRef(null),b=Yi(),f=async D=>{const{dir_path:E="",dir_contents:N=[],error:X=""}=await En(D??"");return X.includes("Operation not permitted")?(y(!0),v(),{isError:!0}):{dirList:N,dirPath:E}},g=async()=>{const{isError:D=!1,dirList:E=[]}=await f(i);D||(p(E),t(!0),l(i&&i.split("/").filter(N=>!!N)||[]))},v=()=>{t(!1),n(!1),l([])},x=async D=>{var N,X;if(D){const{error:k=""}=await En(D);if(k.includes("Not a directory")){b({title:"The directory address you entered is invalid, please re-enter it.",status:"warning",duration:5e3,position:"top",isClosable:!0});return}}const E=D??`/${r.join("/")}`;(N=Be)==null||N.upsert({myWorkflowsDir:E}),s((X=Be)==null?void 0:X.getSetting("myWorkflowsDir")),D&&y(!1),v(),ji()},_=async()=>{const{dirPath:D,dirList:E}=await f("");l(D.split("/").filter(N=>!!N)),p(E)},O=async(D,E)=>{var B;let N="";D===-1&&E?N=`/${r.concat([E]).join("/")}`:N=`/${r.slice(0,D+1).join("/")}`;const{isError:X=!1,dirList:k=[]}=await f(N);X||(p(k),l((B=N.slice(1))==null?void 0:B.split("/")))},I=()=>{t(!0),n(!0)},P=w.jsxs(de,{textAlign:"end",mb:4,children:[w.jsx(ut,{placeholder:"Please enter the absolute path directory address",ref:c,mt:2,mb:2}),w.jsx(Se,{colorScheme:"teal",mr:3,size:"sm",onClick:()=>{var D,E;(D=c==null?void 0:c.current)!=null&&D.value&&x((E=c==null?void 0:c.current)==null?void 0:E.value)},children:"Save"})]});return w.jsxs(w.Fragment,{children:[w.jsxs(wt,{isOpen:!0,onClose:a,size:"xl",children:[w.jsx(St,{}),w.jsxs(_t,{children:[w.jsx(Ct,{children:"Settings"}),w.jsx(kt,{}),w.jsx(Ot,{pb:14,children:w.jsx(we,{children:w.jsxs(jn,{divider:w.jsx(Mi,{borderColor:"gray.500"}),spacing:4,align:"stretch",w:"100%",children:[w.jsxs(de,{mb:4,children:[w.jsx(_e,{mb:2,fontWeight:500,children:"Workspace Save Directory"}),o?e?P:w.jsxs(jn,{spacing:2,alignItems:"start",children:[w.jsx(We,{spacing:"2px",direction:"row",wrap:"wrap",children:r.map((D,E)=>w.jsxs(w.Fragment,{children:["/",w.jsx(Se,{colorScheme:"teal",variant:"link",minW:1,onClick:()=>{O(E)},children:D},`${D}-${E}`)]}))}),w.jsx(Zi,{columns:2,spacing:3,maxHeight:500,width:"100%",overflowY:"auto",children:u.map((D,E)=>w.jsx(Se,{size:"sm",leftIcon:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.2rem",height:"1.2rem"},children:w.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})}),justifyContent:"start",onClick:()=>{O(-1,D)},children:D},`${D}-${E}`))}),w.jsxs(de,{w:"100%",textAlign:"end",children:[w.jsx(Se,{colorScheme:"teal",size:"sm",onClick:()=>{x()},children:"Save"}),w.jsx(Se,{size:"sm",onClick:_,mr:2,ml:2,children:"Reset"}),w.jsx(Se,{size:"sm",onClick:v,children:"Cancel"})]})]}):w.jsxs(at,{children:[w.jsx(wn,{overflowWrap:"anywhere",children:i}),w.jsx(De,{label:"Choose folder",children:w.jsx(be,{"aria-label":"Select folder",size:"sm",ml:2,icon:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.4rem",height:"1.4srem"},children:w.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})}),onClick:g})}),w.jsx(De,{label:"Input absolute path",children:w.jsx(be,{"aria-label":"Enter folder address",size:"sm",ml:2,icon:w.jsx(xa,{size:19}),onClick:I,variant:"ghost"})})]})]}),w.jsx(Ea,{}),w.jsx(Ma,{}),w.jsx(ja,{})]})})})]})]}),w.jsxs(wt,{isOpen:h,onClose:()=>y(!1),size:"xl",children:[w.jsx(St,{}),w.jsxs(_t,{children:[w.jsx(Ct,{children:"Kind tips"}),w.jsx(kt,{}),w.jsx(Ot,{children:w.jsxs(de,{children:[navigator.userAgent.indexOf("Mac OS X")!==-1?w.jsxs(_e,{fontWeight:500,children:["There is no permission to access the folder. You need to grant full disk access permission to the terminal that starts the ComfyUI program. For details, refer to the",w.jsx(Se,{colorScheme:"teal",variant:"link",as:"a",ml:2,target:"_block",href:`https://stackoverflow.com/questions/58479686/permissionerror-errno-1-operation-not-permitted-after-macos
                -catalina-update`,children:"Document"}),", or you can manually enter the absolute path of the folder in the input box below to save."]}):w.jsx(_e,{fontWeight:500,children:"You do not have permission to access the folder. It is recommended that you manually enter the absolute path address of the required folder."}),P]})})]})]})]})}const Ht=16;function Ra({}){const[a,e]=z.useState(!1),[n,o]=z.useState(!1),{colorMode:t,toggleColorMode:i}=un();return w.jsxs(w.Fragment,{children:[w.jsxs(ct,{isLazy:!0,children:[w.jsx(ar,{as:be,"aria-label":"Options",icon:w.jsx(Sa,{}),size:"sm",variant:"outline"}),w.jsxs(Tt,{children:[w.jsx(Ve,{onClick:()=>o(!0),icon:w.jsx(Oa,{size:16}),fontSize:16,children:"Settings"}),w.jsx(Ve,{onClick:()=>e(!0),icon:w.jsx(br,{size:Ht}),fontSize:16,children:"Manage Tags"}),w.jsxs(Ve,{onClick:i,icon:t==="light"?w.jsx(_a,{size:Ht}):w.jsx(Ia,{size:Ht}),fontSize:16,children:[t==="light"?"Dark":"Light"," Mode"]})]})]}),a&&w.jsx(Pa,{onclose:()=>e(!1)}),n&&w.jsx(Da,{onClose:()=>o(!1)})]})}function Rn(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);e&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})),n.push.apply(n,o)}return n}function re(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(o){it(a,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(n,o))})}return a}function za(a){if(Array.isArray(a))return a}function Ta(a,e){var n=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(n!=null){var o,t,i,s,r=[],l=!0,u=!1;try{if(i=(n=n.call(a)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=i.call(n)).done)&&(r.push(o.value),r.length!==e);l=!0);}catch(p){u=!0,t=p}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw t}}return r}}function Jt(a,e){(e==null||e>a.length)&&(e=a.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=a[n];return o}function yr(a,e){if(a){if(typeof a=="string")return Jt(a,e);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jt(a,e)}}function Fa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ne(a,e){return za(a)||Ta(a,e)||yr(a,e)||Fa()}function Ue(a,e){if(a==null)return{};var n=li(a,e),o,t;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(t=0;t<i.length;t++)o=i[t],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(a,o)&&(n[o]=a[o])}return n}var Aa=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function La(a){var e=a.defaultInputValue,n=e===void 0?"":e,o=a.defaultMenuIsOpen,t=o===void 0?!1:o,i=a.defaultValue,s=i===void 0?null:i,r=a.inputValue,l=a.menuIsOpen,u=a.onChange,p=a.onInputChange,h=a.onMenuClose,y=a.onMenuOpen,c=a.value,b=Ue(a,Aa),f=z.useState(r!==void 0?r:n),g=Ne(f,2),v=g[0],x=g[1],_=z.useState(l!==void 0?l:t),O=Ne(_,2),I=O[0],P=O[1],j=z.useState(c!==void 0?c:s),D=Ne(j,2),E=D[0],N=D[1],X=z.useCallback(function(J,H){typeof u=="function"&&u(J,H),N(J)},[u]),k=z.useCallback(function(J,H){var te;typeof p=="function"&&(te=p(J,H)),x(te!==void 0?te:J)},[p]),B=z.useCallback(function(){typeof y=="function"&&y(),P(!0)},[y]),m=z.useCallback(function(){typeof h=="function"&&h(),P(!1)},[h]),R=r!==void 0?r:v,K=l!==void 0?l:I,$=c!==void 0?c:E;return re(re({},b),{},{inputValue:R,menuIsOpen:K,onChange:X,onInputChange:k,onMenuClose:m,onMenuOpen:B,value:$})}function Va(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function zn(a,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,ui(o.key),o)}}function Ba(a,e,n){return e&&zn(a.prototype,e),n&&zn(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function Na(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&ci(a,e)}function It(a){return It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},It(a)}function $a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ua(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ha(a,e){if(e&&(nr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ua(a)}function Wa(a){var e=$a();return function(){var o=It(a),t;if(e){var i=It(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return Ha(this,t)}}function Za(a){if(Array.isArray(a))return Jt(a)}function Ga(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Ya(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xr(a){return Za(a)||Ga(a)||yr(a)||Ya()}function Ka(a,e){return e||(e=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(e)}}))}const Xa=Math.min,qa=Math.max,Pt=Math.round,vt=Math.floor,Et=a=>({x:a,y:a});function Ja(a){return{...a,top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height}}function wr(a){return _r(a)?(a.nodeName||"").toLowerCase():"#document"}function Re(a){var e;return(a==null||(e=a.ownerDocument)==null?void 0:e.defaultView)||window}function Sr(a){var e;return(e=(_r(a)?a.ownerDocument:a.document)||window.document)==null?void 0:e.documentElement}function _r(a){return a instanceof Node||a instanceof Re(a).Node}function Qt(a){return a instanceof Element||a instanceof Re(a).Element}function Sn(a){return a instanceof HTMLElement||a instanceof Re(a).HTMLElement}function Tn(a){return typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof Re(a).ShadowRoot}function Cr(a){const{overflow:e,overflowX:n,overflowY:o,display:t}=_n(a);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(t)}function Qa(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function eo(a){return["html","body","#document"].includes(wr(a))}function _n(a){return Re(a).getComputedStyle(a)}function to(a){if(wr(a)==="html")return a;const e=a.assignedSlot||a.parentNode||Tn(a)&&a.host||Sr(a);return Tn(e)?e.host:e}function kr(a){const e=to(a);return eo(e)?a.ownerDocument?a.ownerDocument.body:a.body:Sn(e)&&Cr(e)?e:kr(e)}function Mt(a,e,n){var o;e===void 0&&(e=[]),n===void 0&&(n=!0);const t=kr(a),i=t===((o=a.ownerDocument)==null?void 0:o.body),s=Re(t);return i?e.concat(s,s.visualViewport||[],Cr(t)?t:[],s.frameElement&&n?Mt(s.frameElement):[]):e.concat(t,Mt(t,[],n))}function no(a){const e=_n(a);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const t=Sn(a),i=t?a.offsetWidth:n,s=t?a.offsetHeight:o,r=Pt(n)!==i||Pt(o)!==s;return r&&(n=i,o=s),{width:n,height:o,$:r}}function Cn(a){return Qt(a)?a:a.contextElement}function Wt(a){const e=Cn(a);if(!Sn(e))return Et(1);const n=e.getBoundingClientRect(),{width:o,height:t,$:i}=no(e);let s=(i?Pt(n.width):n.width)/o,r=(i?Pt(n.height):n.height)/t;return(!s||!Number.isFinite(s))&&(s=1),(!r||!Number.isFinite(r))&&(r=1),{x:s,y:r}}const ro=Et(0);function io(a){const e=Re(a);return!Qa()||!e.visualViewport?ro:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ao(a,e,n){return e===void 0&&(e=!1),!n||e&&n!==Re(a)?!1:e}function Fn(a,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const t=a.getBoundingClientRect(),i=Cn(a);let s=Et(1);e&&(o?Qt(o)&&(s=Wt(o)):s=Wt(a));const r=ao(i,n,o)?io(i):Et(0);let l=(t.left+r.x)/s.x,u=(t.top+r.y)/s.y,p=t.width/s.x,h=t.height/s.y;if(i){const y=Re(i),c=o&&Qt(o)?Re(o):o;let b=y.frameElement;for(;b&&o&&c!==y;){const f=Wt(b),g=b.getBoundingClientRect(),v=_n(b),x=g.left+(b.clientLeft+parseFloat(v.paddingLeft))*f.x,_=g.top+(b.clientTop+parseFloat(v.paddingTop))*f.y;l*=f.x,u*=f.y,p*=f.x,h*=f.y,l+=x,u+=_,b=Re(b).frameElement}}return Ja({width:p,height:h,x:l,y:u})}function oo(a,e){let n=null,o;const t=Sr(a);function i(){clearTimeout(o),n&&n.disconnect(),n=null}function s(r,l){r===void 0&&(r=!1),l===void 0&&(l=1),i();const{left:u,top:p,width:h,height:y}=a.getBoundingClientRect();if(r||e(),!h||!y)return;const c=vt(p),b=vt(t.clientWidth-(u+h)),f=vt(t.clientHeight-(p+y)),g=vt(u),x={rootMargin:-c+"px "+-b+"px "+-f+"px "+-g+"px",threshold:qa(0,Xa(1,l))||1};let _=!0;function O(I){const P=I[0].intersectionRatio;if(P!==l){if(!_)return s();P?s(!1,P):o=setTimeout(()=>{s(!1,1e-7)},100)}_=!1}try{n=new IntersectionObserver(O,{...x,root:t.ownerDocument})}catch{n=new IntersectionObserver(O,x)}n.observe(a)}return s(!0),i}function so(a,e,n,o){o===void 0&&(o={});const{ancestorScroll:t=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:r=typeof IntersectionObserver=="function",animationFrame:l=!1}=o,u=Cn(a),p=t||i?[...u?Mt(u):[],...Mt(e)]:[];p.forEach(v=>{t&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const h=u&&r?oo(u,n):null;let y=-1,c=null;s&&(c=new ResizeObserver(v=>{let[x]=v;x&&x.target===u&&c&&(c.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{c&&c.observe(e)})),n()}),u&&!l&&c.observe(u),c.observe(e));let b,f=l?Fn(a):null;l&&g();function g(){const v=Fn(a);f&&(v.x!==f.x||v.y!==f.y||v.width!==f.width||v.height!==f.height)&&n(),f=v,b=requestAnimationFrame(g)}return n(),()=>{p.forEach(v=>{t&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h&&h(),c&&c.disconnect(),c=null,l&&cancelAnimationFrame(b)}}var en=z.useLayoutEffect,lo=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],jt=function(){};function uo(a,e){return e?e[0]==="-"?a+e:a+"__"+e:a}function co(a,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),t=2;t<n;t++)o[t-2]=arguments[t];var i=[].concat(o);if(e&&a)for(var s in e)e.hasOwnProperty(s)&&e[s]&&i.push("".concat(uo(a,s)));return i.filter(function(r){return r}).map(function(r){return String(r).trim()}).join(" ")}var An=function(e){return xo(e)?e.filter(Boolean):nr(e)==="object"&&e!==null?[e]:[]},Or=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Ue(e,lo);return re({},n)},ve=function(e,n,o){var t=e.cx,i=e.getStyles,s=e.getClassNames,r=e.className;return{css:i(n,e),className:t(o??{},s(n,e),r)}};function At(a){return[document.documentElement,document.body,window].indexOf(a)>-1}function ho(a){return At(a)?window.innerHeight:a.clientHeight}function Ir(a){return At(a)?window.pageYOffset:a.scrollTop}function Dt(a,e){if(At(a)){window.scrollTo(0,e);return}a.scrollTop=e}function fo(a){var e=getComputedStyle(a),n=e.position==="absolute",o=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var t=a;t=t.parentElement;)if(e=getComputedStyle(t),!(n&&e.position==="static")&&o.test(e.overflow+e.overflowY+e.overflowX))return t;return document.documentElement}function po(a,e,n,o){return n*((a=a/o-1)*a*a+1)+e}function gt(a,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:jt,t=Ir(a),i=e-t,s=10,r=0;function l(){r+=s;var u=po(r,t,i,n);Dt(a,u),r<n?window.requestAnimationFrame(l):o(a)}l()}function Ln(a,e){var n=a.getBoundingClientRect(),o=e.getBoundingClientRect(),t=e.offsetHeight/3;o.bottom+t>n.bottom?Dt(a,Math.min(e.offsetTop+e.clientHeight-a.offsetHeight+t,a.scrollHeight)):o.top-t<n.top&&Dt(a,Math.max(e.offsetTop-t,0))}function mo(a){var e=a.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function Vn(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function vo(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Pr=!1,go={get passive(){return Pr=!0}},bt=typeof window<"u"?window:{};bt.addEventListener&&bt.removeEventListener&&(bt.addEventListener("p",jt,go),bt.removeEventListener("p",jt,!1));var bo=Pr;function yo(a){return a!=null}function xo(a){return Array.isArray(a)}function yt(a,e,n){return a?e:n}var wo=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),t=1;t<n;t++)o[t-1]=arguments[t];var i=Object.entries(e).filter(function(s){var r=Ne(s,1),l=r[0];return!o.includes(l)});return i.reduce(function(s,r){var l=Ne(r,2),u=l[0],p=l[1];return s[u]=p,s},{})},So=["children","innerProps"],_o=["children","innerProps"];function Co(a){var e=a.maxHeight,n=a.menuEl,o=a.minHeight,t=a.placement,i=a.shouldScroll,s=a.isFixedPosition,r=a.controlHeight,l=fo(n),u={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return u;var p=l.getBoundingClientRect(),h=p.height,y=n.getBoundingClientRect(),c=y.bottom,b=y.height,f=y.top,g=n.offsetParent.getBoundingClientRect(),v=g.top,x=s?window.innerHeight:ho(l),_=Ir(l),O=parseInt(getComputedStyle(n).marginBottom,10),I=parseInt(getComputedStyle(n).marginTop,10),P=v-I,j=x-f,D=P+_,E=h-_-f,N=c-x+_+O,X=_+f-I,k=160;switch(t){case"auto":case"bottom":if(j>=b)return{placement:"bottom",maxHeight:e};if(E>=b&&!s)return i&&gt(l,N,k),{placement:"bottom",maxHeight:e};if(!s&&E>=o||s&&j>=o){i&&gt(l,N,k);var B=s?j-O:E-O;return{placement:"bottom",maxHeight:B}}if(t==="auto"||s){var m=e,R=s?P:D;return R>=o&&(m=Math.min(R-O-r,e)),{placement:"top",maxHeight:m}}if(t==="bottom")return i&&Dt(l,N),{placement:"bottom",maxHeight:e};break;case"top":if(P>=b)return{placement:"top",maxHeight:e};if(D>=b&&!s)return i&&gt(l,X,k),{placement:"top",maxHeight:e};if(!s&&D>=o||s&&P>=o){var K=e;return(!s&&D>=o||s&&P>=o)&&(K=s?P-I:D-I),i&&gt(l,X,k),{placement:"top",maxHeight:K}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(t,'".'))}return u}function ko(a){var e={bottom:"top",top:"bottom"};return a?e[a]:"bottom"}var Er=function(e){return e==="auto"?"bottom":e},Oo=function(e,n){var o,t=e.placement,i=e.theme,s=i.borderRadius,r=i.spacing,l=i.colors;return re((o={label:"menu"},it(o,ko(t),"100%"),it(o,"position","absolute"),it(o,"width","100%"),it(o,"zIndex",1),o),n?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:r.menuGutter,marginTop:r.menuGutter})},Mr=z.createContext(null),Io=function(e){var n=e.children,o=e.minMenuHeight,t=e.maxMenuHeight,i=e.menuPlacement,s=e.menuPosition,r=e.menuShouldScrollIntoView,l=e.theme,u=z.useContext(Mr)||{},p=u.setPortalPlacement,h=z.useRef(null),y=z.useState(t),c=Ne(y,2),b=c[0],f=c[1],g=z.useState(null),v=Ne(g,2),x=v[0],_=v[1],O=l.spacing.controlHeight;return en(function(){var I=h.current;if(I){var P=s==="fixed",j=r&&!P,D=Co({maxHeight:t,menuEl:I,minHeight:o,placement:i,shouldScroll:j,isFixedPosition:P,controlHeight:O});f(D.maxHeight),_(D.placement),p==null||p(D.placement)}},[t,i,s,r,o,p,O]),n({ref:h,placerProps:re(re({},e),{},{placement:x||Er(i),maxHeight:b})})},Po=function(e){var n=e.children,o=e.innerRef,t=e.innerProps;return ie("div",ae({},ve(e,"menu",{menu:!0}),{ref:o},t),n)},Eo=Po,Mo=function(e,n){var o=e.maxHeight,t=e.theme.spacing.baseUnit;return re({maxHeight:o,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:t,paddingTop:t})},jo=function(e){var n=e.children,o=e.innerProps,t=e.innerRef,i=e.isMulti;return ie("div",ae({},ve(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:t},o),n)},jr=function(e,n){var o=e.theme,t=o.spacing.baseUnit,i=o.colors;return re({textAlign:"center"},n?{}:{color:i.neutral40,padding:"".concat(t*2,"px ").concat(t*3,"px")})},Do=jr,Ro=jr,zo=function(e){var n=e.children,o=n===void 0?"No options":n,t=e.innerProps,i=Ue(e,So);return ie("div",ae({},ve(re(re({},i),{},{children:o,innerProps:t}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),t),o)},To=function(e){var n=e.children,o=n===void 0?"Loading...":n,t=e.innerProps,i=Ue(e,_o);return ie("div",ae({},ve(re(re({},i),{},{children:o,innerProps:t}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),t),o)},Fo=function(e){var n=e.rect,o=e.offset,t=e.position;return{left:n.left,position:t,top:o,width:n.width,zIndex:1}},Ao=function(e){var n=e.appendTo,o=e.children,t=e.controlElement,i=e.innerProps,s=e.menuPlacement,r=e.menuPosition,l=z.useRef(null),u=z.useRef(null),p=z.useState(Er(s)),h=Ne(p,2),y=h[0],c=h[1],b=z.useMemo(function(){return{setPortalPlacement:c}},[]),f=z.useState(null),g=Ne(f,2),v=g[0],x=g[1],_=z.useCallback(function(){if(t){var j=mo(t),D=r==="fixed"?0:window.pageYOffset,E=j[y]+D;(E!==(v==null?void 0:v.offset)||j.left!==(v==null?void 0:v.rect.left)||j.width!==(v==null?void 0:v.rect.width))&&x({offset:E,rect:j})}},[t,r,y,v==null?void 0:v.offset,v==null?void 0:v.rect.left,v==null?void 0:v.rect.width]);en(function(){_()},[_]);var O=z.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),t&&l.current&&(u.current=so(t,l.current,_,{elementResize:"ResizeObserver"in window}))},[t,_]);en(function(){O()},[O]);var I=z.useCallback(function(j){l.current=j,O()},[O]);if(!n&&r!=="fixed"||!v)return null;var P=ie("div",ae({ref:I},ve(re(re({},e),{},{offset:v.offset,position:r,rect:v.rect}),"menuPortal",{"menu-portal":!0}),i),o);return ie(Mr.Provider,{value:b},n?hi.createPortal(P,n):P)},Lo=function(e){var n=e.isDisabled,o=e.isRtl;return{label:"container",direction:o?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},Vo=function(e){var n=e.children,o=e.innerProps,t=e.isDisabled,i=e.isRtl;return ie("div",ae({},ve(e,"container",{"--is-disabled":t,"--is-rtl":i}),o),n)},Bo=function(e,n){var o=e.theme.spacing,t=e.isMulti,i=e.hasValue,s=e.selectProps.controlShouldRenderValue;return re({alignItems:"center",display:t&&i&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(o.baseUnit/2,"px ").concat(o.baseUnit*2,"px")})},No=function(e){var n=e.children,o=e.innerProps,t=e.isMulti,i=e.hasValue;return ie("div",ae({},ve(e,"valueContainer",{"value-container":!0,"value-container--is-multi":t,"value-container--has-value":i}),o),n)},$o=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Uo=function(e){var n=e.children,o=e.innerProps;return ie("div",ae({},ve(e,"indicatorsContainer",{indicators:!0}),o),n)},Bn,Ho=["size"],Wo=["innerProps","isRtl","size"],Zo={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Dr=function(e){var n=e.size,o=Ue(e,Ho);return ie("svg",ae({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Zo},o))},kn=function(e){return ie(Dr,ae({size:20},e),ie("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Rr=function(e){return ie(Dr,ae({size:20},e),ie("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},zr=function(e,n){var o=e.isFocused,t=e.theme,i=t.spacing.baseUnit,s=t.colors;return re({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:o?s.neutral60:s.neutral20,padding:i*2,":hover":{color:o?s.neutral80:s.neutral40}})},Go=zr,Yo=function(e){var n=e.children,o=e.innerProps;return ie("div",ae({},ve(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),o),n||ie(Rr,null))},Ko=zr,Xo=function(e){var n=e.children,o=e.innerProps;return ie("div",ae({},ve(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),o),n||ie(kn,null))},qo=function(e,n){var o=e.isDisabled,t=e.theme,i=t.spacing.baseUnit,s=t.colors;return re({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:o?s.neutral10:s.neutral20,marginBottom:i*2,marginTop:i*2})},Jo=function(e){var n=e.innerProps;return ie("span",ae({},n,ve(e,"indicatorSeparator",{"indicator-separator":!0})))},Qo=di(Bn||(Bn=Ka([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),es=function(e,n){var o=e.isFocused,t=e.size,i=e.theme,s=i.colors,r=i.spacing.baseUnit;return re({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:t,lineHeight:1,marginRight:t,textAlign:"center",verticalAlign:"middle"},n?{}:{color:o?s.neutral60:s.neutral20,padding:r*2})},Zt=function(e){var n=e.delay,o=e.offset;return ie("span",{css:rr({animation:"".concat(Qo," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:o?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ts=function(e){var n=e.innerProps,o=e.isRtl,t=e.size,i=t===void 0?4:t,s=Ue(e,Wo);return ie("div",ae({},ve(re(re({},s),{},{innerProps:n,isRtl:o,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),ie(Zt,{delay:0,offset:o}),ie(Zt,{delay:160,offset:!0}),ie(Zt,{delay:320,offset:!o}))},ns=function(e,n){var o=e.isDisabled,t=e.isFocused,i=e.theme,s=i.colors,r=i.borderRadius,l=i.spacing;return re({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:o?s.neutral5:s.neutral0,borderColor:o?s.neutral10:t?s.primary:s.neutral20,borderRadius:r,borderStyle:"solid",borderWidth:1,boxShadow:t?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:t?s.primary:s.neutral30}})},rs=function(e){var n=e.children,o=e.isDisabled,t=e.isFocused,i=e.innerRef,s=e.innerProps,r=e.menuIsOpen;return ie("div",ae({ref:i},ve(e,"control",{control:!0,"control--is-disabled":o,"control--is-focused":t,"control--menu-is-open":r}),s,{"aria-disabled":o||void 0}),n)},is=rs,as=["data"],os=function(e,n){var o=e.theme.spacing;return n?{}:{paddingBottom:o.baseUnit*2,paddingTop:o.baseUnit*2}},ss=function(e){var n=e.children,o=e.cx,t=e.getStyles,i=e.getClassNames,s=e.Heading,r=e.headingProps,l=e.innerProps,u=e.label,p=e.theme,h=e.selectProps;return ie("div",ae({},ve(e,"group",{group:!0}),l),ie(s,ae({},r,{selectProps:h,theme:p,getStyles:t,getClassNames:i,cx:o}),u),ie("div",null,n))},ls=function(e,n){var o=e.theme,t=o.colors,i=o.spacing;return re({label:"group",cursor:"default",display:"block"},n?{}:{color:t.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},us=function(e){var n=Or(e);n.data;var o=Ue(n,as);return ie("div",ae({},ve(e,"groupHeading",{"group-heading":!0}),o))},cs=ss,ds=["innerRef","isDisabled","isHidden","inputClassName"],hs=function(e,n){var o=e.isDisabled,t=e.value,i=e.theme,s=i.spacing,r=i.colors;return re(re({visibility:o?"hidden":"visible",transform:t?"translateZ(0)":""},fs),n?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:r.neutral80})},Tr={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},fs={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":re({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Tr)},ps=function(e){return re({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Tr)},ms=function(e){var n=e.cx,o=e.value,t=Or(e),i=t.innerRef,s=t.isDisabled,r=t.isHidden,l=t.inputClassName,u=Ue(t,ds);return ie("div",ae({},ve(e,"input",{"input-container":!0}),{"data-value":o||""}),ie("input",ae({className:n({input:!0},l),ref:i,style:ps(r),disabled:s},u)))},vs=ms,gs=function(e,n){var o=e.theme,t=o.spacing,i=o.borderRadius,s=o.colors;return re({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:s.neutral10,borderRadius:i/2,margin:t.baseUnit/2})},bs=function(e,n){var o=e.theme,t=o.borderRadius,i=o.colors,s=e.cropWithEllipsis;return re({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:t/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},ys=function(e,n){var o=e.theme,t=o.spacing,i=o.borderRadius,s=o.colors,r=e.isFocused;return re({alignItems:"center",display:"flex"},n?{}:{borderRadius:i/2,backgroundColor:r?s.dangerLight:void 0,paddingLeft:t.baseUnit,paddingRight:t.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},Fr=function(e){var n=e.children,o=e.innerProps;return ie("div",o,n)},xs=Fr,ws=Fr;function Ss(a){var e=a.children,n=a.innerProps;return ie("div",ae({role:"button"},n),e||ie(kn,{size:14}))}var _s=function(e){var n=e.children,o=e.components,t=e.data,i=e.innerProps,s=e.isDisabled,r=e.removeProps,l=e.selectProps,u=o.Container,p=o.Label,h=o.Remove;return ie(u,{data:t,innerProps:re(re({},ve(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),i),selectProps:l},ie(p,{data:t,innerProps:re({},ve(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},n),ie(h,{data:t,innerProps:re(re({},ve(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},r),selectProps:l}))},Cs=_s,ks=function(e,n){var o=e.isDisabled,t=e.isFocused,i=e.isSelected,s=e.theme,r=s.spacing,l=s.colors;return re({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:i?l.primary:t?l.primary25:"transparent",color:o?l.neutral20:i?l.neutral0:"inherit",padding:"".concat(r.baseUnit*2,"px ").concat(r.baseUnit*3,"px"),":active":{backgroundColor:o?void 0:i?l.primary:l.primary50}})},Os=function(e){var n=e.children,o=e.isDisabled,t=e.isFocused,i=e.isSelected,s=e.innerRef,r=e.innerProps;return ie("div",ae({},ve(e,"option",{option:!0,"option--is-disabled":o,"option--is-focused":t,"option--is-selected":i}),{ref:s,"aria-disabled":o},r),n)},Is=Os,Ps=function(e,n){var o=e.theme,t=o.spacing,i=o.colors;return re({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:i.neutral50,marginLeft:t.baseUnit/2,marginRight:t.baseUnit/2})},Es=function(e){var n=e.children,o=e.innerProps;return ie("div",ae({},ve(e,"placeholder",{placeholder:!0}),o),n)},Ms=Es,js=function(e,n){var o=e.isDisabled,t=e.theme,i=t.spacing,s=t.colors;return re({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:o?s.neutral40:s.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Ds=function(e){var n=e.children,o=e.isDisabled,t=e.innerProps;return ie("div",ae({},ve(e,"singleValue",{"single-value":!0,"single-value--is-disabled":o}),t),n)},Rs=Ds,zs={ClearIndicator:Xo,Control:is,DropdownIndicator:Yo,DownChevron:Rr,CrossIcon:kn,Group:cs,GroupHeading:us,IndicatorsContainer:Uo,IndicatorSeparator:Jo,Input:vs,LoadingIndicator:ts,Menu:Eo,MenuList:jo,MenuPortal:Ao,LoadingMessage:To,NoOptionsMessage:zo,MultiValue:Cs,MultiValueContainer:xs,MultiValueLabel:ws,MultiValueRemove:Ss,Option:Is,Placeholder:Ms,SelectContainer:Vo,SingleValue:Rs,ValueContainer:No},Ts=function(e){return re(re({},zs),e.components)},Nn=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Fs(a,e){return!!(a===e||Nn(a)&&Nn(e))}function As(a,e){if(a.length!==e.length)return!1;for(var n=0;n<a.length;n++)if(!Fs(a[n],e[n]))return!1;return!0}function Ls(a,e){e===void 0&&(e=As);var n=null;function o(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(n&&n.lastThis===this&&e(t,n.lastArgs))return n.lastResult;var s=a.apply(this,t);return n={lastResult:s,lastArgs:t,lastThis:this},s}return o.clear=function(){n=null},o}var Vs={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Bs=function(e){return ie("span",ae({css:Vs},e))},$n=Bs,Ns={guidance:function(e){var n=e.isSearchable,o=e.isMulti,t=e.isDisabled,i=e.tabSelectsValue,s=e.context;switch(s){case"menu":return"Use Up and Down to choose options".concat(t?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(o?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,o=e.label,t=o===void 0?"":o,i=e.labels,s=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(t,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return s?"option ".concat(t," is disabled. Select another option."):"option ".concat(t,", selected.");default:return""}},onFocus:function(e){var n=e.context,o=e.focused,t=e.options,i=e.label,s=i===void 0?"":i,r=e.selectValue,l=e.isDisabled,u=e.isSelected,p=function(b,f){return b&&b.length?"".concat(b.indexOf(f)+1," of ").concat(b.length):""};if(n==="value"&&r)return"value ".concat(s," focused, ").concat(p(r,o),".");if(n==="menu"){var h=l?" disabled":"",y="".concat(u?"selected":"focused").concat(h);return"option ".concat(s," ").concat(y,", ").concat(p(t,o),".")}return""},onFilter:function(e){var n=e.inputValue,o=e.resultsMessage;return"".concat(o).concat(n?" for search term "+n:"",".")}},$s=function(e){var n=e.ariaSelection,o=e.focusedOption,t=e.focusedValue,i=e.focusableOptions,s=e.isFocused,r=e.selectValue,l=e.selectProps,u=e.id,p=l.ariaLiveMessages,h=l.getOptionLabel,y=l.inputValue,c=l.isMulti,b=l.isOptionDisabled,f=l.isSearchable,g=l.menuIsOpen,v=l.options,x=l.screenReaderStatus,_=l.tabSelectsValue,O=l["aria-label"],I=l["aria-live"],P=z.useMemo(function(){return re(re({},Ns),p||{})},[p]),j=z.useMemo(function(){var m="";if(n&&P.onChange){var R=n.option,K=n.options,$=n.removedValue,J=n.removedValues,H=n.value,te=function(he){return Array.isArray(he)?null:he},A=$||R||te(H),T=A?h(A):"",Q=K||J||void 0,q=Q?Q.map(h):[],Z=re({isDisabled:A&&b(A,r),label:T,labels:q},n);m=P.onChange(Z)}return m},[n,P,b,r,h]),D=z.useMemo(function(){var m="",R=o||t,K=!!(o&&r&&r.includes(o));if(R&&P.onFocus){var $={focused:R,label:h(R),isDisabled:b(R,r),isSelected:K,options:i,context:R===o?"menu":"value",selectValue:r};m=P.onFocus($)}return m},[o,t,h,b,P,i,r]),E=z.useMemo(function(){var m="";if(g&&v.length&&P.onFilter){var R=x({count:i.length});m=P.onFilter({inputValue:y,resultsMessage:R})}return m},[i,y,g,P,v,x]),N=z.useMemo(function(){var m="";if(P.guidance){var R=t?"value":g?"menu":"input";m=P.guidance({"aria-label":O,context:R,isDisabled:o&&b(o,r),isMulti:c,isSearchable:f,tabSelectsValue:_})}return m},[O,o,t,c,b,f,g,P,r,_]),X="".concat(D," ").concat(E," ").concat(N),k=ie(z.Fragment,null,ie("span",{id:"aria-selection"},j),ie("span",{id:"aria-context"},X)),B=(n==null?void 0:n.action)==="initial-input-focus";return ie(z.Fragment,null,ie($n,{id:u},B&&k),ie($n,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text"},s&&!B&&k))},Us=$s,tn=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Hs=new RegExp("["+tn.map(function(a){return a.letters}).join("")+"]","g"),Ar={};for(var Gt=0;Gt<tn.length;Gt++)for(var Yt=tn[Gt],Kt=0;Kt<Yt.letters.length;Kt++)Ar[Yt.letters[Kt]]=Yt.base;var Lr=function(e){return e.replace(Hs,function(n){return Ar[n]})},Ws=Ls(Lr),Un=function(e){return e.replace(/^\s+|\s+$/g,"")},Zs=function(e){return"".concat(e.label," ").concat(e.value)},Gs=function(e){return function(n,o){if(n.data.__isNew__)return!0;var t=re({ignoreCase:!0,ignoreAccents:!0,stringify:Zs,trim:!0,matchFrom:"any"},e),i=t.ignoreCase,s=t.ignoreAccents,r=t.stringify,l=t.trim,u=t.matchFrom,p=l?Un(o):o,h=l?Un(r(n)):r(n);return i&&(p=p.toLowerCase(),h=h.toLowerCase()),s&&(p=Ws(p),h=Lr(h)),u==="start"?h.substr(0,p.length)===p:h.indexOf(p)>-1}},Ys=["innerRef"];function Ks(a){var e=a.innerRef,n=Ue(a,Ys),o=wo(n,"onExited","in","enter","exit","appear");return ie("input",ae({ref:e},o,{css:rr({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Xs=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function qs(a){var e=a.isEnabled,n=a.onBottomArrive,o=a.onBottomLeave,t=a.onTopArrive,i=a.onTopLeave,s=z.useRef(!1),r=z.useRef(!1),l=z.useRef(0),u=z.useRef(null),p=z.useCallback(function(g,v){if(u.current!==null){var x=u.current,_=x.scrollTop,O=x.scrollHeight,I=x.clientHeight,P=u.current,j=v>0,D=O-I-_,E=!1;D>v&&s.current&&(o&&o(g),s.current=!1),j&&r.current&&(i&&i(g),r.current=!1),j&&v>D?(n&&!s.current&&n(g),P.scrollTop=O,E=!0,s.current=!0):!j&&-v>_&&(t&&!r.current&&t(g),P.scrollTop=0,E=!0,r.current=!0),E&&Xs(g)}},[n,o,t,i]),h=z.useCallback(function(g){p(g,g.deltaY)},[p]),y=z.useCallback(function(g){l.current=g.changedTouches[0].clientY},[]),c=z.useCallback(function(g){var v=l.current-g.changedTouches[0].clientY;p(g,v)},[p]),b=z.useCallback(function(g){if(g){var v=bo?{passive:!1}:!1;g.addEventListener("wheel",h,v),g.addEventListener("touchstart",y,v),g.addEventListener("touchmove",c,v)}},[c,y,h]),f=z.useCallback(function(g){g&&(g.removeEventListener("wheel",h,!1),g.removeEventListener("touchstart",y,!1),g.removeEventListener("touchmove",c,!1))},[c,y,h]);return z.useEffect(function(){if(e){var g=u.current;return b(g),function(){f(g)}}},[e,b,f]),function(g){u.current=g}}var Hn=["boxSizing","height","overflow","paddingRight","position"],Wn={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Zn(a){a.preventDefault()}function Gn(a){a.stopPropagation()}function Yn(){var a=this.scrollTop,e=this.scrollHeight,n=a+this.offsetHeight;a===0?this.scrollTop=1:n===e&&(this.scrollTop=a-1)}function Kn(){return"ontouchstart"in window||navigator.maxTouchPoints}var Xn=!!(typeof window<"u"&&window.document&&window.document.createElement),rt=0,Ke={capture:!1,passive:!1};function Js(a){var e=a.isEnabled,n=a.accountForScrollbars,o=n===void 0?!0:n,t=z.useRef({}),i=z.useRef(null),s=z.useCallback(function(l){if(Xn){var u=document.body,p=u&&u.style;if(o&&Hn.forEach(function(b){var f=p&&p[b];t.current[b]=f}),o&&rt<1){var h=parseInt(t.current.paddingRight,10)||0,y=document.body?document.body.clientWidth:0,c=window.innerWidth-y+h||0;Object.keys(Wn).forEach(function(b){var f=Wn[b];p&&(p[b]=f)}),p&&(p.paddingRight="".concat(c,"px"))}u&&Kn()&&(u.addEventListener("touchmove",Zn,Ke),l&&(l.addEventListener("touchstart",Yn,Ke),l.addEventListener("touchmove",Gn,Ke))),rt+=1}},[o]),r=z.useCallback(function(l){if(Xn){var u=document.body,p=u&&u.style;rt=Math.max(rt-1,0),o&&rt<1&&Hn.forEach(function(h){var y=t.current[h];p&&(p[h]=y)}),u&&Kn()&&(u.removeEventListener("touchmove",Zn,Ke),l&&(l.removeEventListener("touchstart",Yn,Ke),l.removeEventListener("touchmove",Gn,Ke)))}},[o]);return z.useEffect(function(){if(e){var l=i.current;return s(l),function(){r(l)}}},[e,s,r]),function(l){i.current=l}}var Qs=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},el={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function tl(a){var e=a.children,n=a.lockEnabled,o=a.captureEnabled,t=o===void 0?!0:o,i=a.onBottomArrive,s=a.onBottomLeave,r=a.onTopArrive,l=a.onTopLeave,u=qs({isEnabled:t,onBottomArrive:i,onBottomLeave:s,onTopArrive:r,onTopLeave:l}),p=Js({isEnabled:n}),h=function(c){u(c),p(c)};return ie(z.Fragment,null,n&&ie("div",{onClick:Qs,css:el}),e(h))}var nl={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},rl=function(e){var n=e.name,o=e.onFocus;return ie("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:o,css:nl,value:"",onChange:function(){}})},il=rl,al=function(e){return e.label},ol=function(e){return e.label},sl=function(e){return e.value},ll=function(e){return!!e.isDisabled},ul={clearIndicator:Ko,container:Lo,control:ns,dropdownIndicator:Go,group:os,groupHeading:ls,indicatorsContainer:$o,indicatorSeparator:qo,input:hs,loadingIndicator:es,loadingMessage:Ro,menu:Oo,menuList:Mo,menuPortal:Fo,multiValue:gs,multiValueLabel:bs,multiValueRemove:ys,noOptionsMessage:Do,option:ks,placeholder:Ps,singleValue:js,valueContainer:Bo},cl={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},dl=4,Vr=4,hl=38,fl=Vr*2,pl={baseUnit:Vr,controlHeight:hl,menuGutter:fl},Xt={borderRadius:dl,colors:cl,spacing:pl},ml={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Vn(),captureMenuScroll:!Vn(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Gs(),formatGroupLabel:al,getOptionLabel:ol,getOptionValue:sl,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:ll,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!vo(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function qn(a,e,n,o){var t=Ur(a,e,n),i=Hr(a,e,n),s=$r(a,e),r=Rt(a,e);return{type:"option",data:e,isDisabled:t,isSelected:i,label:s,value:r,index:o}}function Br(a,e){return a.options.map(function(n,o){if("options"in n){var t=n.options.map(function(s,r){return qn(a,s,e,r)}).filter(function(s){return Jn(a,s)});return t.length>0?{type:"group",data:n,options:t,index:o}:void 0}var i=qn(a,n,e,o);return Jn(a,i)?i:void 0}).filter(yo)}function Nr(a){return a.reduce(function(e,n){return n.type==="group"?e.push.apply(e,xr(n.options.map(function(o){return o.data}))):e.push(n.data),e},[])}function vl(a,e){return Nr(Br(a,e))}function Jn(a,e){var n=a.inputValue,o=n===void 0?"":n,t=e.data,i=e.isSelected,s=e.label,r=e.value;return(!Zr(a)||!i)&&Wr(a,{label:s,value:r,data:t},o)}function gl(a,e){var n=a.focusedValue,o=a.selectValue,t=o.indexOf(n);if(t>-1){var i=e.indexOf(n);if(i>-1)return n;if(t<e.length)return e[t]}return null}function bl(a,e){var n=a.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var $r=function(e,n){return e.getOptionLabel(n)},Rt=function(e,n){return e.getOptionValue(n)};function Ur(a,e,n){return typeof a.isOptionDisabled=="function"?a.isOptionDisabled(e,n):!1}function Hr(a,e,n){if(n.indexOf(e)>-1)return!0;if(typeof a.isOptionSelected=="function")return a.isOptionSelected(e,n);var o=Rt(a,e);return n.some(function(t){return Rt(a,t)===o})}function Wr(a,e,n){return a.filterOption?a.filterOption(e,n):!0}var Zr=function(e){var n=e.hideSelectedOptions,o=e.isMulti;return n===void 0?o:n},yl=1,Gr=function(a){Na(n,a);var e=Wa(n);function n(o){var t;if(Va(this,n),t=e.call(this,o),t.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.instancePrefix="",t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.controlRef=null,t.getControlRef=function(r){t.controlRef=r},t.focusedOptionRef=null,t.getFocusedOptionRef=function(r){t.focusedOptionRef=r},t.menuListRef=null,t.getMenuListRef=function(r){t.menuListRef=r},t.inputRef=null,t.getInputRef=function(r){t.inputRef=r},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(r,l){var u=t.props,p=u.onChange,h=u.name;l.name=h,t.ariaOnChange(r,l),p(r,l)},t.setValue=function(r,l,u){var p=t.props,h=p.closeMenuOnSelect,y=p.isMulti,c=p.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:c}),h&&(t.setState({inputIsHiddenAfterUpdate:!y}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(r,{action:l,option:u})},t.selectOption=function(r){var l=t.props,u=l.blurInputOnSelect,p=l.isMulti,h=l.name,y=t.state.selectValue,c=p&&t.isOptionSelected(r,y),b=t.isOptionDisabled(r,y);if(c){var f=t.getOptionValue(r);t.setValue(y.filter(function(g){return t.getOptionValue(g)!==f}),"deselect-option",r)}else if(!b)p?t.setValue([].concat(xr(y),[r]),"select-option",r):t.setValue(r,"select-option");else{t.ariaOnChange(r,{action:"select-option",option:r,name:h});return}u&&t.blurInput()},t.removeValue=function(r){var l=t.props.isMulti,u=t.state.selectValue,p=t.getOptionValue(r),h=u.filter(function(c){return t.getOptionValue(c)!==p}),y=yt(l,h,h[0]||null);t.onChange(y,{action:"remove-value",removedValue:r}),t.focusInput()},t.clearValue=function(){var r=t.state.selectValue;t.onChange(yt(t.props.isMulti,[],null),{action:"clear",removedValues:r})},t.popValue=function(){var r=t.props.isMulti,l=t.state.selectValue,u=l[l.length-1],p=l.slice(0,l.length-1),h=yt(r,p,p[0]||null);t.onChange(h,{action:"pop-value",removedValue:u})},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return co.apply(void 0,[t.props.classNamePrefix].concat(l))},t.getOptionLabel=function(r){return $r(t.props,r)},t.getOptionValue=function(r){return Rt(t.props,r)},t.getStyles=function(r,l){var u=t.props.unstyled,p=ul[r](l,u);p.boxSizing="border-box";var h=t.props.styles[r];return h?h(p,l):p},t.getClassNames=function(r,l){var u,p;return(u=(p=t.props.classNames)[r])===null||u===void 0?void 0:u.call(p,l)},t.getElementId=function(r){return"".concat(t.instancePrefix,"-").concat(r)},t.getComponents=function(){return Ts(t.props)},t.buildCategorizedOptions=function(){return Br(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return Nr(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(r,l){t.setState({ariaSelection:re({value:r},l)})},t.onMenuMouseDown=function(r){r.button===0&&(r.stopPropagation(),r.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(r){t.blockOptionHover=!1},t.onControlMouseDown=function(r){if(!r.defaultPrevented){var l=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?r.target.tagName!=="INPUT"&&r.target.tagName!=="TEXTAREA"&&t.onMenuClose():l&&t.openMenu("first"):(l&&(t.openAfterFocus=!0),t.focusInput()),r.target.tagName!=="INPUT"&&r.target.tagName!=="TEXTAREA"&&r.preventDefault()}},t.onDropdownIndicatorMouseDown=function(r){if(!(r&&r.type==="mousedown"&&r.button!==0)&&!t.props.isDisabled){var l=t.props,u=l.isMulti,p=l.menuIsOpen;t.focusInput(),p?(t.setState({inputIsHiddenAfterUpdate:!u}),t.onMenuClose()):t.openMenu("first"),r.preventDefault()}},t.onClearIndicatorMouseDown=function(r){r&&r.type==="mousedown"&&r.button!==0||(t.clearValue(),r.preventDefault(),t.openAfterFocus=!1,r.type==="touchend"?t.focusInput():setTimeout(function(){return t.focusInput()}))},t.onScroll=function(r){typeof t.props.closeMenuOnScroll=="boolean"?r.target instanceof HTMLElement&&At(r.target)&&t.props.onMenuClose():typeof t.props.closeMenuOnScroll=="function"&&t.props.closeMenuOnScroll(r)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(r){var l=r.touches,u=l&&l.item(0);u&&(t.initialTouchX=u.clientX,t.initialTouchY=u.clientY,t.userIsDragging=!1)},t.onTouchMove=function(r){var l=r.touches,u=l&&l.item(0);if(u){var p=Math.abs(u.clientX-t.initialTouchX),h=Math.abs(u.clientY-t.initialTouchY),y=5;t.userIsDragging=p>y||h>y}},t.onTouchEnd=function(r){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(r.target)&&t.menuListRef&&!t.menuListRef.contains(r.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(r){t.userIsDragging||t.onControlMouseDown(r)},t.onClearIndicatorTouchEnd=function(r){t.userIsDragging||t.onClearIndicatorMouseDown(r)},t.onDropdownIndicatorTouchEnd=function(r){t.userIsDragging||t.onDropdownIndicatorMouseDown(r)},t.handleInputChange=function(r){var l=t.props.inputValue,u=r.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(u,{action:"input-change",prevInputValue:l}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(r){t.props.onFocus&&t.props.onFocus(r),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(r){var l=t.props.inputValue;if(t.menuListRef&&t.menuListRef.contains(document.activeElement)){t.inputRef.focus();return}t.props.onBlur&&t.props.onBlur(r),t.onInputChange("",{action:"input-blur",prevInputValue:l}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1})},t.onOptionHover=function(r){t.blockOptionHover||t.state.focusedOption===r||t.setState({focusedOption:r})},t.shouldHideSelectedOptions=function(){return Zr(t.props)},t.onValueInputFocus=function(r){r.preventDefault(),r.stopPropagation(),t.focus()},t.onKeyDown=function(r){var l=t.props,u=l.isMulti,p=l.backspaceRemovesValue,h=l.escapeClearsValue,y=l.inputValue,c=l.isClearable,b=l.isDisabled,f=l.menuIsOpen,g=l.onKeyDown,v=l.tabSelectsValue,x=l.openMenuOnFocus,_=t.state,O=_.focusedOption,I=_.focusedValue,P=_.selectValue;if(!b&&!(typeof g=="function"&&(g(r),r.defaultPrevented))){switch(t.blockOptionHover=!0,r.key){case"ArrowLeft":if(!u||y)return;t.focusValue("previous");break;case"ArrowRight":if(!u||y)return;t.focusValue("next");break;case"Delete":case"Backspace":if(y)return;if(I)t.removeValue(I);else{if(!p)return;u?t.popValue():c&&t.clearValue()}break;case"Tab":if(t.isComposing||r.shiftKey||!f||!v||!O||x&&t.isOptionSelected(O,P))return;t.selectOption(O);break;case"Enter":if(r.keyCode===229)break;if(f){if(!O||t.isComposing)return;t.selectOption(O);break}return;case"Escape":f?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:y}),t.onMenuClose()):c&&h&&t.clearValue();break;case" ":if(y)return;if(!f){t.openMenu("first");break}if(!O)return;t.selectOption(O);break;case"ArrowUp":f?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":f?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!f)return;t.focusOption("pageup");break;case"PageDown":if(!f)return;t.focusOption("pagedown");break;case"Home":if(!f)return;t.focusOption("first");break;case"End":if(!f)return;t.focusOption("last");break;default:return}r.preventDefault()}},t.instancePrefix="react-select-"+(t.props.instanceId||++yl),t.state.selectValue=An(o.value),o.menuIsOpen&&t.state.selectValue.length){var i=t.buildFocusableOptions(),s=i.indexOf(t.state.selectValue[0]);t.state.focusedOption=i[s]}return t}return Ba(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Ln(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(t){var i=this.props,s=i.isDisabled,r=i.menuIsOpen,l=this.state.isFocused;(l&&!s&&t.isDisabled||l&&r&&!t.menuIsOpen)&&this.focusInput(),l&&s&&!t.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!s&&t.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Ln(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(t,i){this.props.onInputChange(t,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(t){var i=this,s=this.state,r=s.selectValue,l=s.isFocused,u=this.buildFocusableOptions(),p=t==="first"?0:u.length-1;if(!this.props.isMulti){var h=u.indexOf(r[0]);h>-1&&(p=h)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[p]},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(t){var i=this.state,s=i.selectValue,r=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=s.indexOf(r);r||(l=-1);var u=s.length-1,p=-1;if(s.length){switch(t){case"previous":l===0?p=0:l===-1?p=u:p=l-1;break;case"next":l>-1&&l<u&&(p=l+1);break}this.setState({inputIsHidden:p!==-1,focusedValue:s[p]})}}}},{key:"focusOption",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,s=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var l=0,u=r.indexOf(s);s||(u=-1),t==="up"?l=u>0?u-1:r.length-1:t==="down"?l=(u+1)%r.length:t==="pageup"?(l=u-i,l<0&&(l=0)):t==="pagedown"?(l=u+i,l>r.length-1&&(l=r.length-1)):t==="last"&&(l=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[l],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Xt):re(re({},Xt),this.props.theme):Xt}},{key:"getCommonProps",value:function(){var t=this.clearValue,i=this.cx,s=this.getStyles,r=this.getClassNames,l=this.getValue,u=this.selectOption,p=this.setValue,h=this.props,y=h.isMulti,c=h.isRtl,b=h.options,f=this.hasValue();return{clearValue:t,cx:i,getStyles:s,getClassNames:r,getValue:l,hasValue:f,isMulti:y,isRtl:c,options:b,selectOption:u,selectProps:h,setValue:p,theme:this.getTheme()}}},{key:"hasValue",value:function(){var t=this.state.selectValue;return t.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var t=this.props,i=t.isClearable,s=t.isMulti;return i===void 0?s:i}},{key:"isOptionDisabled",value:function(t,i){return Ur(this.props,t,i)}},{key:"isOptionSelected",value:function(t,i){return Hr(this.props,t,i)}},{key:"filterOption",value:function(t,i){return Wr(this.props,t,i)}},{key:"formatOptionLabel",value:function(t,i){if(typeof this.props.formatOptionLabel=="function"){var s=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(t,{context:i,inputValue:s,selectValue:r})}else return this.getOptionLabel(t)}},{key:"formatGroupLabel",value:function(t){return this.props.formatGroupLabel(t)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var t=this.props,i=t.isDisabled,s=t.isSearchable,r=t.inputId,l=t.inputValue,u=t.tabIndex,p=t.form,h=t.menuIsOpen,y=t.required,c=this.getComponents(),b=c.Input,f=this.state,g=f.inputIsHidden,v=f.ariaSelection,x=this.commonProps,_=r||this.getElementId("input"),O=re(re(re({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":y,role:"combobox"},h&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!s&&{"aria-readonly":!0}),this.hasValue()?(v==null?void 0:v.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return s?z.createElement(b,ae({},x,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:_,innerRef:this.getInputRef,isDisabled:i,isHidden:g,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:p,type:"text",value:l},O)):z.createElement(Ks,ae({id:_,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:jt,onFocus:this.onInputFocus,disabled:i,tabIndex:u,inputMode:"none",form:p,value:""},O))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,i=this.getComponents(),s=i.MultiValue,r=i.MultiValueContainer,l=i.MultiValueLabel,u=i.MultiValueRemove,p=i.SingleValue,h=i.Placeholder,y=this.commonProps,c=this.props,b=c.controlShouldRenderValue,f=c.isDisabled,g=c.isMulti,v=c.inputValue,x=c.placeholder,_=this.state,O=_.selectValue,I=_.focusedValue,P=_.isFocused;if(!this.hasValue()||!b)return v?null:z.createElement(h,ae({},y,{key:"placeholder",isDisabled:f,isFocused:P,innerProps:{id:this.getElementId("placeholder")}}),x);if(g)return O.map(function(D,E){var N=D===I,X="".concat(t.getOptionLabel(D),"-").concat(t.getOptionValue(D));return z.createElement(s,ae({},y,{components:{Container:r,Label:l,Remove:u},isFocused:N,isDisabled:f,key:X,index:E,removeProps:{onClick:function(){return t.removeValue(D)},onTouchEnd:function(){return t.removeValue(D)},onMouseDown:function(B){B.preventDefault()}},data:D}),t.formatOptionLabel(D,"value"))});if(v)return null;var j=O[0];return z.createElement(p,ae({},y,{data:j,isDisabled:f}),this.formatOptionLabel(j,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.getComponents(),i=t.ClearIndicator,s=this.commonProps,r=this.props,l=r.isDisabled,u=r.isLoading,p=this.state.isFocused;if(!this.isClearable()||!i||l||!this.hasValue()||u)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return z.createElement(i,ae({},s,{innerProps:h,isFocused:p}))}},{key:"renderLoadingIndicator",value:function(){var t=this.getComponents(),i=t.LoadingIndicator,s=this.commonProps,r=this.props,l=r.isDisabled,u=r.isLoading,p=this.state.isFocused;if(!i||!u)return null;var h={"aria-hidden":"true"};return z.createElement(i,ae({},s,{innerProps:h,isDisabled:l,isFocused:p}))}},{key:"renderIndicatorSeparator",value:function(){var t=this.getComponents(),i=t.DropdownIndicator,s=t.IndicatorSeparator;if(!i||!s)return null;var r=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused;return z.createElement(s,ae({},r,{isDisabled:l,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var t=this.getComponents(),i=t.DropdownIndicator;if(!i)return null;var s=this.commonProps,r=this.props.isDisabled,l=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return z.createElement(i,ae({},s,{innerProps:u,isDisabled:r,isFocused:l}))}},{key:"renderMenu",value:function(){var t=this,i=this.getComponents(),s=i.Group,r=i.GroupHeading,l=i.Menu,u=i.MenuList,p=i.MenuPortal,h=i.LoadingMessage,y=i.NoOptionsMessage,c=i.Option,b=this.commonProps,f=this.state.focusedOption,g=this.props,v=g.captureMenuScroll,x=g.inputValue,_=g.isLoading,O=g.loadingMessage,I=g.minMenuHeight,P=g.maxMenuHeight,j=g.menuIsOpen,D=g.menuPlacement,E=g.menuPosition,N=g.menuPortalTarget,X=g.menuShouldBlockScroll,k=g.menuShouldScrollIntoView,B=g.noOptionsMessage,m=g.onMenuScrollToTop,R=g.onMenuScrollToBottom;if(!j)return null;var K=function(Q,q){var Z=Q.type,ue=Q.data,he=Q.isDisabled,se=Q.isSelected,oe=Q.label,me=Q.value,fe=f===ue,ye=he?void 0:function(){return t.onOptionHover(ue)},xe=he?void 0:function(){return t.selectOption(ue)},d="".concat(t.getElementId("option"),"-").concat(q),L={id:d,onClick:xe,onMouseMove:ye,onMouseOver:ye,tabIndex:-1};return z.createElement(c,ae({},b,{innerProps:L,data:ue,isDisabled:he,isSelected:se,key:d,label:oe,type:Z,value:me,isFocused:fe,innerRef:fe?t.getFocusedOptionRef:void 0}),t.formatOptionLabel(Q.data,"menu"))},$;if(this.hasOptions())$=this.getCategorizedOptions().map(function(T){if(T.type==="group"){var Q=T.data,q=T.options,Z=T.index,ue="".concat(t.getElementId("group"),"-").concat(Z),he="".concat(ue,"-heading");return z.createElement(s,ae({},b,{key:ue,data:Q,options:q,Heading:r,headingProps:{id:he,data:T.data},label:t.formatGroupLabel(T.data)}),T.options.map(function(se){return K(se,"".concat(Z,"-").concat(se.index))}))}else if(T.type==="option")return K(T,"".concat(T.index))});else if(_){var J=O({inputValue:x});if(J===null)return null;$=z.createElement(h,b,J)}else{var H=B({inputValue:x});if(H===null)return null;$=z.createElement(y,b,H)}var te={minMenuHeight:I,maxMenuHeight:P,menuPlacement:D,menuPosition:E,menuShouldScrollIntoView:k},A=z.createElement(Io,ae({},b,te),function(T){var Q=T.ref,q=T.placerProps,Z=q.placement,ue=q.maxHeight;return z.createElement(l,ae({},b,te,{innerRef:Q,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove,id:t.getElementId("listbox")},isLoading:_,placement:Z}),z.createElement(tl,{captureEnabled:v,onTopArrive:m,onBottomArrive:R,lockEnabled:X},function(he){return z.createElement(u,ae({},b,{innerRef:function(oe){t.getMenuListRef(oe),he(oe)},isLoading:_,maxHeight:ue,focusedOption:f}),$)}))});return N||E==="fixed"?z.createElement(p,ae({},b,{appendTo:N,controlElement:this.controlRef,menuPlacement:D,menuPosition:E}),A):A}},{key:"renderFormField",value:function(){var t=this,i=this.props,s=i.delimiter,r=i.isDisabled,l=i.isMulti,u=i.name,p=i.required,h=this.state.selectValue;if(p&&!this.hasValue()&&!r)return z.createElement(il,{name:u,onFocus:this.onValueInputFocus});if(!(!u||r))if(l)if(s){var y=h.map(function(f){return t.getOptionValue(f)}).join(s);return z.createElement("input",{name:u,type:"hidden",value:y})}else{var c=h.length>0?h.map(function(f,g){return z.createElement("input",{key:"i-".concat(g),name:u,type:"hidden",value:t.getOptionValue(f)})}):z.createElement("input",{name:u,type:"hidden",value:""});return z.createElement("div",null,c)}else{var b=h[0]?this.getOptionValue(h[0]):"";return z.createElement("input",{name:u,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var t=this.commonProps,i=this.state,s=i.ariaSelection,r=i.focusedOption,l=i.focusedValue,u=i.isFocused,p=i.selectValue,h=this.getFocusableOptions();return z.createElement(Us,ae({},t,{id:this.getElementId("live-region"),ariaSelection:s,focusedOption:r,focusedValue:l,isFocused:u,selectValue:p,focusableOptions:h}))}},{key:"render",value:function(){var t=this.getComponents(),i=t.Control,s=t.IndicatorsContainer,r=t.SelectContainer,l=t.ValueContainer,u=this.props,p=u.className,h=u.id,y=u.isDisabled,c=u.menuIsOpen,b=this.state.isFocused,f=this.commonProps=this.getCommonProps();return z.createElement(r,ae({},f,{className:p,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:y,isFocused:b}),this.renderLiveRegion(),z.createElement(i,ae({},f,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:y,isFocused:b,menuIsOpen:c}),z.createElement(l,ae({},f,{isDisabled:y}),this.renderPlaceholderOrValue(),this.renderInput()),z.createElement(s,ae({},f,{isDisabled:y}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(t,i){var s=i.prevProps,r=i.clearFocusValueOnUpdate,l=i.inputIsHiddenAfterUpdate,u=i.ariaSelection,p=i.isFocused,h=i.prevWasFocused,y=t.options,c=t.value,b=t.menuIsOpen,f=t.inputValue,g=t.isMulti,v=An(c),x={};if(s&&(c!==s.value||y!==s.options||b!==s.menuIsOpen||f!==s.inputValue)){var _=b?vl(t,v):[],O=r?gl(i,v):null,I=bl(i,_);x={selectValue:v,focusedOption:I,focusedValue:O,clearFocusValueOnUpdate:!1}}var P=l!=null&&t!==s?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},j=u,D=p&&h;return p&&!D&&(j={value:yt(g,v,v[0]||null),options:v,action:"initial-input-focus"},D=!h),(u==null?void 0:u.action)==="initial-input-focus"&&(j=null),re(re(re({},x),P),{},{prevProps:t,ariaSelection:j,prevWasFocused:D})}}]),n}(z.Component);Gr.defaultProps=ml;var xl=z.forwardRef(function(a,e){var n=La(a);return z.createElement(Gr,ae({ref:e},n))}),wl=xl,Sl=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"];function nn(){return nn=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},nn.apply(this,arguments)}function _l(a,e){if(a==null)return{};var n={},o=Object.keys(a),t,i;for(i=0;i<o.length;i++)t=o[i],!(e.indexOf(t)>=0)&&(n[t]=a[t]);return n}var Yr=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=_l(e,Sl);return nn({},n)},Cl=function(e){var n=typeof e=="string";return n&&["sm","md","lg"].includes(e)},kl=function(e){return Cl(e)?e:e==="xs"?"sm":e==="xl"?"lg":"md"},ze=function(e){var n=lt(),o=kl(n.components.Input.defaultProps.size),t=e??o,i=oa(typeof t=="string"?[t]:t,{fallback:"md"})||o;return i};function qe(){return qe=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},qe.apply(this,arguments)}var Ol=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,s=e.isDisabled,r=e.isRtl,l=e.hasValue,u=e.selectProps.chakraStyles,p=qe({position:"relative",direction:r?"rtl":void 0},s?{cursor:"not-allowed"}:{}),h=u!=null&&u.container?u.container(p,e):p;return le.createElement(de,qe({},i,{className:t({"--is-disabled":s,"--is-rtl":r,"--has-value":l},o),sx:h}),n)},Il=function(e){var n=e.children,o=e.className,t=e.cx,i=e.isMulti,s=e.hasValue,r=e.innerProps,l=e.selectProps,u=l.chakraStyles,p=l.size,h=l.variant,y=l.focusBorderColor,c=l.errorBorderColor,b=l.controlShouldRenderValue,f=ze(p),g=Ae("Input",{size:f,variant:h,focusBorderColor:y,errorBorderColor:c}),v={display:i&&s&&b?"flex":"grid",alignItems:"center",flex:1,paddingY:"2px",paddingX:g.field.px,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},x=u!=null&&u.valueContainer?u.valueContainer(v,e):v;return le.createElement(de,qe({},r,{className:t({"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s},o),sx:x}),n)},Pl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,s=e.selectProps.chakraStyles,r={display:"flex",alignItems:"center",alignSelf:"stretch",flexShrink:0},l=s!=null&&s.indicatorsContainer?s.indicatorsContainer(r,e):r;return le.createElement(de,qe({},i,{className:t({indicators:!0},o),sx:l}),n)},El=["height","h"];function Ee(){return Ee=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},Ee.apply(this,arguments)}function Ml(a,e){if(a==null)return{};var n={},o=Object.keys(a),t,i;for(i=0;i<o.length;i++)t=o[i],!(e.indexOf(t)>=0)&&(n[t]=a[t]);return n}var jl=function(e){var n=e.className,o=e.cx,t=e.children,i=e.innerRef,s=e.innerProps,r=e.isDisabled,l=e.isFocused,u=e.menuIsOpen,p=e.selectProps,h=p.chakraStyles,y=p.size,c=p.variant,b=p.focusBorderColor,f=p.errorBorderColor,g=p.isInvalid,v=p.isReadOnly,x=ze(y),_=Ae("Input",{size:x,variant:c,focusBorderColor:b,errorBorderColor:f}),O=_.field,I=O.height,P=O.h,j=Ml(O,El),D=I||P,E=Ee({},j,{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",padding:0,overflow:"hidden",height:"auto",minH:D},r?{pointerEvents:"none"}:{}),N=h!=null&&h.control?h.control(E,e):E;return le.createElement(de,Ee({ref:i,className:o({control:!0,"control--is-disabled":r,"control--is-focused":l,"control--menu-is-open":u},n),sx:N},s,{"data-focus":l?!0:void 0,"data-focus-visible":l?!0:void 0,"data-invalid":g?!0:void 0,"data-disabled":r?!0:void 0,"data-readonly":v?!0:void 0}),t)},Dl=function(e){var n=e.className,o=e.cx,t=e.selectProps,i=t.chakraStyles,s=t.useBasicStyles,r=t.variant,l=Ee({opacity:1},s||r!=="outline"?{display:"none"}:{}),u=i!=null&&i.indicatorSeparator?i.indicatorSeparator(l,e):l;return le.createElement(ur,{className:o({"indicator-separator":!0},n),sx:u,orientation:"vertical"})},Rl=function(e){return le.createElement(Je,Ee({role:"presentation",focusable:"false","aria-hidden":"true"},e),le.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))},zl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,s=e.selectProps,r=s.chakraStyles,l=s.useBasicStyles,u=s.size,p=s.focusBorderColor,h=s.errorBorderColor,y=s.variant,c=ze(u),b=Ae("Input",{size:c,variant:y,focusBorderColor:p,errorBorderColor:h}),f={sm:"16px",md:"20px",lg:"24px"},g=f[c],v=Ee({},b.addon,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",borderRadius:0,borderWidth:0,fontSize:g},l&&{background:"transparent",padding:0,width:6,marginRight:2,marginLeft:1,cursor:"inherit"}),x=r!=null&&r.dropdownIndicator?r.dropdownIndicator(v,e):v,_={height:"1em",width:"1em"},O=r!=null&&r.downChevron?r.downChevron(_,e):_;return le.createElement(de,Ee({},i,{className:t({indicator:!0,"dropdown-indicator":!0},o),sx:x}),n||le.createElement(Rl,{sx:O}))},Tl=function(e){return le.createElement(Je,Ee({focusable:"false","aria-hidden":!0},e),le.createElement("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}))},Fl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,s=e.selectProps,r=s.chakraStyles,l=s.size,u=ze(l),p=er("CloseButton",{size:u}),h=Ee({},p,{marginX:1,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer"}),y=r!=null&&r.clearIndicator?r.clearIndicator(h,e):h,c={width:"1em",height:"1em"},b=r!=null&&r.crossIcon?r.crossIcon(c,e):c;return le.createElement(de,Ee({role:"button",className:t({indicator:!0,"clear-indicator":!0},o),sx:y,"aria-label":"Clear selected options"},i),n||le.createElement(Tl,{sx:b}))},Al=function(e){var n=e.className,o=e.cx,t=e.innerProps,i=e.selectProps,s=i.chakraStyles,r=i.size,l=e.color,u=e.emptyColor,p=e.speed,h=e.thickness,y=e.spinnerSize,c=ze(r),b={sm:"xs",md:"sm",lg:"md"},f=b[c],g={marginRight:3},v=s!=null&&s.loadingIndicator?s.loadingIndicator(g,e):g;return le.createElement(fi,Ee({className:o({indicator:!0,"loading-indicator":!0},n),sx:v},t,{size:y||f,color:l,emptyColor:u,speed:p,thickness:h}))};const Ll=jl;var Vl=["innerRef","isDisabled","isHidden","inputClassName"];function ot(){return ot=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},ot.apply(this,arguments)}function Bl(a,e){if(a==null)return{};var n={},o=Object.keys(a),t,i;for(i=0;i<o.length;i++)t=o[i],!(e.indexOf(t)>=0)&&(n[t]=a[t]);return n}var Nl=function(e){var n=e.className,o=e.cx,t=e.value,i=e.selectProps,s=i.chakraStyles,r=i.isReadOnly,l=Yr(e),u=l.innerRef,p=l.isDisabled,h=l.isHidden,y=l.inputClassName,c=Bl(l,Vl),b={gridArea:"1 / 2",minW:"2px",border:0,margin:0,outline:0,padding:0},f={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content",color:"inherit",marginX:"0.125rem",paddingY:"0.125rem",visibility:p?"hidden":"visible",transform:t?"translateZ(0)":"",_after:ot({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre",padding:0},b)},g=s!=null&&s.inputContainer?s.inputContainer(f,e):f,v=ot({background:0,opacity:h?0:1,width:"100%"},b),x=s!=null&&s.input?s.input(v,e):v;return le.createElement(de,{className:o({"input-container":!0},n),"data-value":t||"",sx:g},le.createElement(Ce.input,ot({className:o({input:!0},y),ref:u,sx:x,disabled:p,readOnly:r?!0:void 0},c)))};const $l=Nl;var Ul=["data"];function Hl(a,e){if(a==null)return{};var n={},o=Object.keys(a),t,i;for(i=0;i<o.length;i++)t=o[i],!(e.indexOf(t)>=0)&&(n[t]=a[t]);return n}function ke(){return ke=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},ke.apply(this,arguments)}var Wl=function(e){var n={bottom:"top",top:"bottom"};return e?n[e]:"top"},Zl=function(e){var n,o=e.className,t=e.cx,i=e.children,s=e.innerProps,r=e.innerRef,l=e.placement,u=e.selectProps.chakraStyles,p=(n={position:"absolute"},n[Wl(l)]="100%",n.marginY="8px",n.width="100%",n.zIndex=1,n),h=u!=null&&u.menu?u.menu(p,e):p;return le.createElement(ct,null,le.createElement(de,ke({},s,{ref:r,className:t({menu:!0},o),sx:h}),i))};const Gl=Zl;var Yl=function(e){var n,o=e.className,t=e.cx,i=e.innerRef,s=e.children,r=e.maxHeight,l=e.isMulti,u=e.innerProps,p=e.selectProps,h=p.chakraStyles,y=p.size,c=p.variant,b=p.focusBorderColor,f=p.errorBorderColor,g=Ae("Menu"),v=ze(y),x=Ae("Input",{size:v,variant:c,focusBorderColor:b,errorBorderColor:f}),_=x.field,O=ke({},g.list,{minW:"100%",maxHeight:r+"px",overflowY:"auto","--input-border-radius":_==null?void 0:_["--input-border-radius"],borderRadius:(_==null?void 0:_.borderRadius)||((n=g.list)==null?void 0:n.borderRadius),position:"relative",WebkitOverflowScrolling:"touch"}),I=h!=null&&h.menuList?h.menuList(O,e):O;return le.createElement(de,ke({role:"listbox"},u,{className:t({"menu-list":!0,"menu-list--is-multi":l},o),sx:I,ref:i}),s)},Kl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,s=e.selectProps,r=s.chakraStyles,l=s.size,u=ze(l),p={sm:"6px",md:"8px",lg:"10px"},h={color:"chakra-subtle-text",textAlign:"center",paddingY:p[u],fontSize:u},y=r!=null&&r.loadingMessage?r.loadingMessage(h,e):h;return le.createElement(de,ke({},i,{className:t({"menu-notice":!0,"menu-notice--loading":!0},o),sx:y}),n)},Xl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,s=e.selectProps,r=s.chakraStyles,l=s.size,u=ze(l),p={sm:"6px",md:"8px",lg:"10px"},h={color:"chakra-subtle-text",textAlign:"center",paddingY:p[u],fontSize:u},y=r!=null&&r.noOptionsMessage?r.noOptionsMessage(h,e):h;return le.createElement(de,ke({},i,{className:t({"menu-notice":!0,"menu-notice--no-options":!0},o),sx:y}),n)},ql=function(e){var n=e.children,o=e.className,t=e.cx,i=e.theme,s=e.getStyles,r=e.Heading,l=e.headingProps,u=e.label,p=e.selectProps,h=e.innerProps,y=e.getClassNames,c=p.chakraStyles,b={},f=c!=null&&c.group?c.group(b,e):b;return le.createElement(de,ke({},h,{className:t({group:!0},o),sx:f}),le.createElement(r,ke({},l,{selectProps:p,cx:t,theme:i,getStyles:s,getClassNames:y}),u),le.createElement(de,null,n))},Jl=function(e){var n=e.cx,o=e.className,t=e.selectProps,i=t.chakraStyles,s=t.size,r=t.hasStickyGroupHeaders,l=Yr(e);l.data;var u=Hl(l,Ul),p=Ae("Menu"),h=ze(s),y={sm:"xs",md:"sm",lg:"md"},c={sm:"0.4rem 0.8rem",md:"0.5rem 1rem",lg:"0.6rem 1.2rem"},b=ke({},p.groupTitle,{fontSize:y[h],padding:c[h],margin:0,borderBottomWidth:r?"1px":0,position:r?"sticky":"static",top:-2,bg:p.list.bg,zIndex:1}),f=i!=null&&i.groupHeading?i.groupHeading(b,e):b;return le.createElement(de,ke({},u,{className:n({"group-heading":!0},o),sx:f}))},Ql=function(e){return le.createElement("svg",ke({viewBox:"0 0 14 14",width:"1em",height:"1em"},e),le.createElement("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"}))},eu=function(e){var n=e.className,o=e.cx,t=e.innerRef,i=e.innerProps,s=e.children,r=e.isFocused,l=e.isDisabled,u=e.isSelected,p=e.selectProps,h=p.chakraStyles,y=p.size,c=p.isMulti,b=p.hideSelectedOptions,f=p.selectedOptionStyle,g=p.selectedOptionColorScheme,v=Ae("Menu").item,x=ze(y),_={sm:"0.6rem",md:"0.8rem",lg:"1rem"},O={sm:"0.3rem",md:"0.4rem",lg:"0.5rem"},I=Pn(g+".500",g+".300"),P=Pn("white","black"),j=f==="check"&&(!c||b===!1),D=f==="color",E=ke({},v,{cursor:"pointer",display:"flex",alignItems:"center",width:"100%",textAlign:"start",fontSize:x,paddingX:_[x],paddingY:O[x]},D&&{_selected:{bg:I,color:P,_active:{bg:I}}}),N=h!=null&&h.option?h.option(E,e):E;return le.createElement(de,ke({role:"option"},i,{className:o({option:!0,"option--is-disabled":l,"option--is-focused":r,"option--is-selected":u},n),sx:N,ref:t,"data-focus":r?!0:void 0,"aria-disabled":l?!0:void 0,"aria-selected":u}),j&&le.createElement(ir,{fontSize:"0.8em",marginEnd:"0.75rem",opacity:u?1:0},le.createElement(Ql,null)),s)};function je(){return je=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},je.apply(this,arguments)}var tu=function(e){return typeof e=="object"&&e!==null&&"colorScheme"in e&&typeof e.colorScheme=="string"},nu=function(e){return typeof e=="object"&&e!==null&&"variant"in e&&typeof e.variant=="string"},Kr=function(e){return typeof e=="object"&&e!==null&&"isFixed"in e&&typeof e.isFixed=="boolean"},ru=function(e){var n=e.children,o=e.className,t=e.components,i=e.cx,s=e.data,r=e.innerProps,l=e.isDisabled,u=e.isFocused,p=e.removeProps,h=e.selectProps,y=e.cropWithEllipsis,c=t.Container,b=t.Label,f=t.Remove,g=h.chakraStyles,v=h.colorScheme,x=h.tagVariant,_=h.size,O=ze(_),I="",P="",j=!1;tu(s)&&(I=s.colorScheme),nu(s)&&(P=s.variant),Kr(s)&&(j=s.isFixed);var D=Ae("Tag",{size:O,colorScheme:I||v,variant:P||x||(j?"solid":"subtle")}),E=je({},D.container,{display:"flex",alignItems:"center",minWidth:0,margin:"0.125rem"}),N=g!=null&&g.multiValue?g.multiValue(E,e):E,X=je({},D.label,{overflow:"hidden",textOverflow:y||y===void 0?"ellipsis":void 0,whiteSpace:"nowrap"}),k=g!=null&&g.multiValueLabel?g.multiValueLabel(X,e):X,B=je({},D.closeButton,{display:"flex",alignItems:"center",justifyContent:"center"}),m=g!=null&&g.multiValueRemove?g.multiValueRemove(B,e):B;return le.createElement(c,{data:s,innerProps:je({className:i({"multi-value":!0,"multi-value--is-disabled":l},o)},r),sx:N,selectProps:h},le.createElement(b,{data:s,innerProps:{className:i({"multi-value__label":!0},o)},sx:k,selectProps:h},n),le.createElement(f,{data:s,innerProps:je({className:i({"multi-value__remove":!0},o),"aria-label":"Remove "+(n||"option")},p),sx:m,selectProps:h,isFocused:u}))},iu=function(e){var n=e.children,o=e.innerProps,t=e.sx;return le.createElement(Ce.span,je({},o,{sx:t}),n)},au=function(e){var n=e.children,o=e.innerProps,t=e.sx;return le.createElement(Ce.span,je({},o,{sx:t}),n)},ou=function(e){return le.createElement(Je,je({verticalAlign:"inherit",viewBox:"0 0 512 512"},e),le.createElement("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}))},su=function(e){var n=e.children,o=e.innerProps,t=e.isFocused,i=e.data,s=e.sx;return Kr(i)&&i.isFixed?null:le.createElement(de,je({},o,{role:"button",sx:s,"data-focus":t?!0:void 0,"data-focus-visible":t?!0:void 0}),n||le.createElement(ou,null))};const lu=ru;function rn(){return rn=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},rn.apply(this,arguments)}var uu=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,s=e.selectProps.chakraStyles,r={gridArea:"1 / 1 / 2 / 3",color:"chakra-placeholder-color",mx:"0.125rem",userSelect:"none"},l=s!=null&&s.placeholder?s.placeholder(r,e):r;return le.createElement(de,rn({},i,{className:t({placeholder:!0},o),sx:l}),n)};const cu=uu;function an(){return an=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},an.apply(this,arguments)}var du=function(e){var n=e.children,o=e.className,t=e.cx,i=e.isDisabled,s=e.innerProps,r=e.selectProps.chakraStyles,l={gridArea:"1 / 1 / 2 / 3",mx:"0.125rem",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},u=r!=null&&r.singleValue?r.singleValue(l,e):l;return le.createElement(de,an({className:t({"single-value":!0,"single-value--is-disabled":i},o),sx:u},s),n)};const hu=du;var fu={ClearIndicator:Fl,Control:Ll,DropdownIndicator:zl,Group:ql,GroupHeading:Jl,IndicatorSeparator:Dl,IndicatorsContainer:Pl,Input:$l,LoadingIndicator:Al,LoadingMessage:Kl,Menu:Gl,MenuList:Yl,MultiValue:lu,MultiValueContainer:iu,MultiValueLabel:au,MultiValueRemove:su,NoOptionsMessage:Xl,Option:eu,Placeholder:cu,SelectContainer:Ol,SingleValue:hu,ValueContainer:Il};const pu=fu;var mu=["components","theme","size","colorScheme","isDisabled","isInvalid","isReadOnly","required","isRequired","inputId","tagVariant","selectedOptionStyle","selectedOptionColorScheme","selectedOptionColor","variant","focusBorderColor","errorBorderColor","chakraStyles","onFocus","onBlur","menuIsOpen"];function zt(){return zt=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},zt.apply(this,arguments)}function vu(a,e){if(a==null)return{};var n={},o=Object.keys(a),t,i;for(i=0;i<o.length;i++)t=o[i],!(e.indexOf(t)>=0)&&(n[t]=a[t]);return n}var gu=function(e){var n,o=e.components,t=o===void 0?{}:o;e.theme;var i=e.size,s=e.colorScheme,r=s===void 0?"gray":s,l=e.isDisabled,u=e.isInvalid,p=e.isReadOnly,h=e.required,y=e.isRequired,c=e.inputId,b=e.tagVariant,f=e.selectedOptionStyle,g=f===void 0?"color":f,v=e.selectedOptionColorScheme,x=e.selectedOptionColor,_=e.variant,O=e.focusBorderColor,I=e.errorBorderColor,P=e.chakraStyles,j=P===void 0?{}:P,D=e.onFocus,E=e.onBlur,N=e.menuIsOpen,X=vu(e,mu),k=lt(),B=k.components.Input.defaultProps.variant,m=Di({id:c,isDisabled:l,isInvalid:u,isRequired:y,isReadOnly:p,onFocus:D,onBlur:E}),R=N??(m.readOnly?!1:void 0),K=g,$=["color","check"];$.includes(g)||(K="color");var J=v||x||"blue";typeof J!="string"&&(J="blue");var H=zt({components:zt({},pu,t),colorScheme:r,size:i,tagVariant:b,selectedOptionStyle:K,selectedOptionColorScheme:J,variant:_??B,chakraStyles:j,focusBorderColor:O,errorBorderColor:I,onFocus:m.onFocus,onBlur:m.onBlur,isDisabled:m.disabled,isInvalid:!!m["aria-invalid"],inputId:m.id,isReadOnly:m.readOnly,required:h??m.required,menuIsOpen:R},X,{"aria-invalid":(n=X["aria-invalid"])!=null?n:m["aria-invalid"]});return H};const bu=gu;function on(){return on=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},on.apply(this,arguments)}var yu=z.forwardRef(function(a,e){var n=bu(a);return le.createElement(wl,on({ref:e},n))});const xu=yu;function wu({workflow:a}){var h;const{onRefreshFilesList:e}=z.useContext(Ze),[n,o]=z.useState([]),[t,i]=z.useState(""),s=((h=a.tags)==null?void 0:h.map(y=>({value:y,label:y})))??[],[r,l]=z.useState(s);if(z.useEffect(()=>{(async()=>{var b;const c=await((b=He)==null?void 0:b.listAll());o(c??[])})()},[]),z.useEffect(()=>{var y;l(((y=a.tags)==null?void 0:y.map(c=>({value:c,label:c})))??[])},[a.tags]),He==null)return alert("Error: TagsTable is not loaded"),null;const u=n.map(y=>({value:y.name,label:y.name})),p=37*5;return w.jsxs(vn,{isLazy:!0,children:[w.jsx(mn,{children:w.jsx(be,{"aria-label":"Delete confirm",size:"sm",variant:"ghost",icon:w.jsx(br,{color:"#718096"})})}),w.jsxs(xn,{children:[w.jsx(gn,{}),w.jsx(yn,{}),w.jsx(hr,{children:w.jsx("b",{children:a.name})}),w.jsxs(bn,{children:[w.jsx(xu,{isMulti:!0,name:"tags",options:u,menuIsOpen:!0,value:r,onChange:async y=>{var c;l(y),await((c=Pe)==null?void 0:c.updateFlow(a.id,{tags:y.map(b=>b.value)})),await(e==null?void 0:e())},chakraStyles:{dropdownIndicator:y=>({...y,p:0,w:"30px"}),menuList:y=>({...y,shadow:"none",pt:0})},placeholder:"Select tags",closeMenuOnSelect:!1,maxMenuHeight:p}),w.jsxs(we,{gap:4,mt:Math.min(p,Math.max(n.length,3)*37),children:[w.jsx(ut,{placeholder:"New tag name",size:"sm",mt:6,mb:6,variant:"flushed",value:t,onChange:y=>{i(y.target.value)}}),w.jsx(Se,{iconSpacing:1,leftIcon:w.jsx(cn,{size:16}),colorScheme:"teal",variant:"solid",size:"xs",px:5,isDisabled:t.length===0,onClick:async()=>{var y,c;await((y=He)==null?void 0:y.upsert(t)),(c=He)==null||c.listAll().then(b=>o(b??[])),i("")},children:"New Tag"})]})]})]})]})}function Su({menuPosition:a,workflowID:e,onClose:n}){const{onDuplicateWorkflow:o}=z.useContext(or);return w.jsx(w.Fragment,{children:w.jsx(de,{position:"absolute",top:a.y,left:a.x,children:w.jsx(ct,{isOpen:!0,onClose:n,children:w.jsx(Tt,{children:w.jsx(Ve,{onClick:()=>o&&o(e),children:"Duplicate"})})})})})}function Xr(a){const{promptMessage:e="Are you sure you want to delete this?",variant:n="ghost",onDelete:o,isDisabled:t=!1,tooltipText:i}=a;return w.jsx(vn,{isLazy:!0,placement:"auto",children:({onClose:s})=>w.jsxs(w.Fragment,{children:[w.jsx(mn,{children:w.jsx(de,{children:w.jsx(De,{hasArrow:!0,label:i,placement:"bottom",children:w.jsx(be,{"aria-label":"Delete confirm",size:"sm",icon:w.jsx(fn,{color:"#F56565"}),isDisabled:t,variant:n})})})}),w.jsxs(xn,{children:[w.jsx(gn,{}),w.jsx(yn,{onClick:s}),w.jsxs(bn,{children:[w.jsx(_e,{mb:4,pr:4,fontWeight:600,children:e}),w.jsx(Se,{colorScheme:"red",size:"sm",onClick:()=>{o(),s()},children:"Yes, delete"})]})]})]})})}const qr=z.memo(function({workflow:e}){const{colorMode:n}=un(),[o,t]=z.useState(!1),[i,s]=z.useState({x:0,y:0}),[r,l]=z.useState(!1),{setDraggingFile:u,isMultiSelecting:p,onMultiSelectFlow:h,onDeleteFlow:y,multiSelectedFlowsID:c,onRefreshFilesList:b,draggingFile:f}=z.useContext(Ze),g=c&&c.length>0&&c.includes(e.id),{curFlowID:v,loadWorkflowID:x}=z.useContext(or),_=v===e.id,O=N=>{N.preventDefault(),s({x:N.clientX,y:N.clientY}),l(!0)},[I,P]=z.useState(!1),j=()=>{l(!1)},D=n==="light"?"gray.200":"#4A5568",E=w.jsxs(de,{flexShrink:1,flexGrow:1,onDragOver:N=>{N.preventDefault(),t(!0)},onDragLeave:()=>{t(!1)},onDrop:async()=>{var N;f&&!st(f)&&(await((N=Pe)==null?void 0:N.updateFlow(f.id,{parentFolderID:e.parentFolderID})),await(b==null?void 0:b())),t(!1)},backgroundColor:_?"teal.200":r?D:void 0,color:_&&!p?"#333":void 0,draggable:!p,onDragStart:N=>{u&&u(e)},borderRadius:6,px:1,py:1,onClick:()=>{!p&&x(e.id)},_hover:{bg:D},children:[w.jsxs(we,{children:[e.coverMediaPath!=null&&(Ri(e.coverMediaPath)?w.jsx(Ki,{borderRadius:3,boxSize:"60px",objectFit:"cover",src:`/workspace/view_media?filename=${e.coverMediaPath}`,alt:e.name??"workflow cover image"}):w.jsx("video",{width:60,height:60,src:`/workspace/view_media?filename=${e.coverMediaPath}`,muted:!0,children:w.jsx("track",{kind:"captions"})})),w.jsxs(We,{textAlign:"left",gap:0,children:[w.jsx(_e,{fontWeight:"500",children:e.name??"untitled"}),w.jsxs(_e,{color:"GrayText",ml:2,fontSize:"sm",children:["Updated: ",sr(e.updateTime)]})]})]}),o&&w.jsx(de,{width:"100%",mt:2,height:"2px",backgroundColor:"#4299E1"})]});return w.jsxs(we,{w:"100%",mb:1,justify:"space-between",onContextMenu:O,onMouseEnter:()=>{P(!0)},onMouseLeave:()=>{P(!1)},children:[p?w.jsx(Ft,{isChecked:g,spacing:4,onChange:N=>{h&&h(e.id,N.target.checked)},children:E}):w.jsxs(w.Fragment,{children:[E,w.jsxs(at,{width:"90px",justifyContent:"flex-end",children:[I&&w.jsx(wu,{workflow:e}),w.jsx(De,{label:"Open in new tab",children:w.jsx(be,{"aria-label":"Open in new tab",size:"sm",variant:"ghost",onClick:()=>zi(e.id),icon:w.jsx(Ti,{color:"#718096",size:23})})}),w.jsx(Xr,{promptMessage:"Are you sure you want to delete this workflow?",onDelete:()=>{y&&y(e.id)}})]})]}),r&&w.jsx(Su,{menuPosition:i,onClose:j,workflowID:e.id})]})});function xt(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Jr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(a,e){(function(n){a.exports=n()})(function(){return function n(o,t,i){function s(u,p){if(!t[u]){if(!o[u]){var h=typeof xt=="function"&&xt;if(!p&&h)return h(u,!0);if(r)return r(u,!0);var y=new Error("Cannot find module '"+u+"'");throw y.code="MODULE_NOT_FOUND",y}var c=t[u]={exports:{}};o[u][0].call(c.exports,function(b){var f=o[u][1][b];return s(f||b)},c,c.exports,n,o,t,i)}return t[u].exports}for(var r=typeof xt=="function"&&xt,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(n,o,t){var i=n("./utils"),s=n("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(l){for(var u,p,h,y,c,b,f,g=[],v=0,x=l.length,_=x,O=i.getTypeOf(l)!=="string";v<l.length;)_=x-v,h=O?(u=l[v++],p=v<x?l[v++]:0,v<x?l[v++]:0):(u=l.charCodeAt(v++),p=v<x?l.charCodeAt(v++):0,v<x?l.charCodeAt(v++):0),y=u>>2,c=(3&u)<<4|p>>4,b=1<_?(15&p)<<2|h>>6:64,f=2<_?63&h:64,g.push(r.charAt(y)+r.charAt(c)+r.charAt(b)+r.charAt(f));return g.join("")},t.decode=function(l){var u,p,h,y,c,b,f=0,g=0,v="data:";if(l.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var x,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===r.charAt(64)&&_--,l.charAt(l.length-2)===r.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=s.uint8array?new Uint8Array(0|_):new Array(0|_);f<l.length;)u=r.indexOf(l.charAt(f++))<<2|(y=r.indexOf(l.charAt(f++)))>>4,p=(15&y)<<4|(c=r.indexOf(l.charAt(f++)))>>2,h=(3&c)<<6|(b=r.indexOf(l.charAt(f++))),x[g++]=u,c!==64&&(x[g++]=p),b!==64&&(x[g++]=h);return x}},{"./support":30,"./utils":32}],2:[function(n,o,t){var i=n("./external"),s=n("./stream/DataWorker"),r=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(p,h,y,c,b){this.compressedSize=p,this.uncompressedSize=h,this.crc32=y,this.compression=c,this.compressedContent=b}u.prototype={getContentWorker:function(){var p=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return p.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(p,h,y){return p.pipe(new r).pipe(new l("uncompressedSize")).pipe(h.compressWorker(y)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},o.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,o,t){var i=n("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},t.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,o,t){var i=n("./utils"),s=function(){for(var r,l=[],u=0;u<256;u++){r=u;for(var p=0;p<8;p++)r=1&r?3988292384^r>>>1:r>>>1;l[u]=r}return l}();o.exports=function(r,l){return r!==void 0&&r.length?i.getTypeOf(r)!=="string"?function(u,p,h,y){var c=s,b=y+h;u^=-1;for(var f=y;f<b;f++)u=u>>>8^c[255&(u^p[f])];return-1^u}(0|l,r,r.length,0):function(u,p,h,y){var c=s,b=y+h;u^=-1;for(var f=y;f<b;f++)u=u>>>8^c[255&(u^p.charCodeAt(f))];return-1^u}(0|l,r,r.length,0):0}},{"./utils":32}],5:[function(n,o,t){t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(n,o,t){var i=null;i=typeof Promise<"u"?Promise:n("lie"),o.exports={Promise:i}},{lie:37}],7:[function(n,o,t){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),r=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function p(h,y){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=y,this.meta={}}t.magic="\b\0",r.inherits(p,l),p.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(u,h.data),!1)},p.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(y){h.push({data:y,meta:h.meta})}},t.compressWorker=function(h){return new p("Deflate",h)},t.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,o,t){function i(c,b){var f,g="";for(f=0;f<b;f++)g+=String.fromCharCode(255&c),c>>>=8;return g}function s(c,b,f,g,v,x){var _,O,I=c.file,P=c.compression,j=x!==u.utf8encode,D=r.transformTo("string",x(I.name)),E=r.transformTo("string",u.utf8encode(I.name)),N=I.comment,X=r.transformTo("string",x(N)),k=r.transformTo("string",u.utf8encode(N)),B=E.length!==I.name.length,m=k.length!==N.length,R="",K="",$="",J=I.dir,H=I.date,te={crc32:0,compressedSize:0,uncompressedSize:0};b&&!f||(te.crc32=c.crc32,te.compressedSize=c.compressedSize,te.uncompressedSize=c.uncompressedSize);var A=0;b&&(A|=8),j||!B&&!m||(A|=2048);var T=0,Q=0;J&&(T|=16),v==="UNIX"?(Q=798,T|=function(Z,ue){var he=Z;return Z||(he=ue?16893:33204),(65535&he)<<16}(I.unixPermissions,J)):(Q=20,T|=function(Z){return 63&(Z||0)}(I.dosPermissions)),_=H.getUTCHours(),_<<=6,_|=H.getUTCMinutes(),_<<=5,_|=H.getUTCSeconds()/2,O=H.getUTCFullYear()-1980,O<<=4,O|=H.getUTCMonth()+1,O<<=5,O|=H.getUTCDate(),B&&(K=i(1,1)+i(p(D),4)+E,R+="up"+i(K.length,2)+K),m&&($=i(1,1)+i(p(X),4)+k,R+="uc"+i($.length,2)+$);var q="";return q+=`
\0`,q+=i(A,2),q+=P.magic,q+=i(_,2),q+=i(O,2),q+=i(te.crc32,4),q+=i(te.compressedSize,4),q+=i(te.uncompressedSize,4),q+=i(D.length,2),q+=i(R.length,2),{fileRecord:h.LOCAL_FILE_HEADER+q+D+R,dirRecord:h.CENTRAL_FILE_HEADER+i(Q,2)+q+i(X.length,2)+"\0\0\0\0"+i(T,4)+i(g,4)+D+R+X}}var r=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),p=n("../crc32"),h=n("../signature");function y(c,b,f,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=f,this.encodeFileName=g,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(y,l),y.prototype.push=function(c){var b=c.meta.percent||0,f=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,l.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:f?(b+100*(f-g-1))/f:100}}))},y.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var b=this.streamFiles&&!c.file.dir;if(b){var f=s(c,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(c){this.accumulate=!1;var b=this.streamFiles&&!c.file.dir,f=s(c,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),b)this.push({data:function(g){return h.DATA_DESCRIPTOR+i(g.crc32,4)+i(g.compressedSize,4)+i(g.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var c=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var f=this.bytesWritten-c,g=function(v,x,_,O,I){var P=r.transformTo("string",I(O));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(v,2)+i(v,2)+i(x,4)+i(_,4)+i(P.length,2)+P}(this.dirRecords.length,f,c,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(c){this._sources.push(c);var b=this;return c.on("data",function(f){b.processChunk(f)}),c.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),c.on("error",function(f){b.error(f)}),this},y.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(c){var b=this._sources;if(!l.prototype.error.call(this,c))return!1;for(var f=0;f<b.length;f++)try{b[f].error(c)}catch{}return!0},y.prototype.lock=function(){l.prototype.lock.call(this);for(var c=this._sources,b=0;b<c.length;b++)c[b].lock()},o.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,o,t){var i=n("../compressions"),s=n("./ZipFileWorker");t.generateWorker=function(r,l,u){var p=new s(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{r.forEach(function(y,c){h++;var b=function(x,_){var O=x||_,I=i[O];if(!I)throw new Error(O+" is not a valid compression method !");return I}(c.options.compression,l.compression),f=c.options.compressionOptions||l.compressionOptions||{},g=c.dir,v=c.date;c._compressWorker(b,f).withStreamInfo("file",{name:y,dir:g,date:v,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(p)}),p.entriesCount=h}catch(y){p.error(y)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,o,t){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var r in this)typeof this[r]!="function"&&(s[r]=this[r]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,r){return new i().loadAsync(s,r)},i.external=n("./external"),o.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,o,t){var i=n("./utils"),s=n("./external"),r=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),p=n("./nodejsUtils");function h(y){return new s.Promise(function(c,b){var f=y.decompressed.getContentWorker().pipe(new u);f.on("error",function(g){b(g)}).on("end",function(){f.streamInfo.crc32!==y.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}o.exports=function(y,c){var b=this;return c=i.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),p.isNode&&p.isStream(y)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",y,!0,c.optimizedBinaryString,c.base64).then(function(f){var g=new l(c);return g.load(f),g}).then(function(f){var g=[s.Promise.resolve(f)],v=f.files;if(c.checkCRC32)for(var x=0;x<v.length;x++)g.push(h(v[x]));return s.Promise.all(g)}).then(function(f){for(var g=f.shift(),v=g.files,x=0;x<v.length;x++){var _=v[x],O=_.fileNameStr,I=i.resolve(_.fileNameStr);b.file(I,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:c.createFolders}),_.dir||(b.file(I).unsafeOriginalName=O)}return g.zipComment.length&&(b.comment=g.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,o,t){var i=n("../utils"),s=n("../stream/GenericWorker");function r(l,u){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(r,s),r.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(p){u.push({data:p,meta:{percent:0}})}).on("error",function(p){u.isPaused?this.generatedError=p:u.error(p)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},r.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,o,t){var i=n("readable-stream").Readable;function s(r,l,u){i.call(this,l),this._helper=r;var p=this;r.on("data",function(h,y){p.push(h)||p._helper.pause(),u&&u(y)}).on("error",function(h){p.emit("error",h)}).on("end",function(){p.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},o.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,o,t){o.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,s)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var s=new Buffer(i);return s.fill(0),s},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,o,t){function i(I,P,j){var D,E=r.getTypeOf(P),N=r.extend(j||{},p);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(I=v(I)),N.createFolders&&(D=g(I))&&x.call(this,D,!0);var X=E==="string"&&N.binary===!1&&N.base64===!1;j&&j.binary!==void 0||(N.binary=!X),(P instanceof h&&P.uncompressedSize===0||N.dir||!P||P.length===0)&&(N.base64=!1,N.binary=!0,P="",N.compression="STORE",E="string");var k=null;k=P instanceof h||P instanceof l?P:b.isNode&&b.isStream(P)?new f(I,P):r.prepareContent(I,P,N.binary,N.optimizedBinaryString,N.base64);var B=new y(I,k,N);this.files[I]=B}var s=n("./utf8"),r=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),p=n("./defaults"),h=n("./compressedObject"),y=n("./zipObject"),c=n("./generate"),b=n("./nodejsUtils"),f=n("./nodejs/NodejsStreamInputAdapter"),g=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var P=I.lastIndexOf("/");return 0<P?I.substring(0,P):""},v=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},x=function(I,P){return P=P!==void 0?P:p.createFolders,I=v(I),this.files[I]||i.call(this,I,null,{dir:!0,createFolders:P}),this.files[I]};function _(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var P,j,D;for(P in this.files)D=this.files[P],(j=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&I(j,D)},filter:function(I){var P=[];return this.forEach(function(j,D){I(j,D)&&P.push(D)}),P},file:function(I,P,j){if(arguments.length!==1)return I=this.root+I,i.call(this,I,P,j),this;if(_(I)){var D=I;return this.filter(function(N,X){return!X.dir&&D.test(N)})}var E=this.files[this.root+I];return E&&!E.dir?E:null},folder:function(I){if(!I)return this;if(_(I))return this.filter(function(E,N){return N.dir&&I.test(E)});var P=this.root+I,j=x.call(this,P),D=this.clone();return D.root=j.name,D},remove:function(I){I=this.root+I;var P=this.files[I];if(P||(I.slice(-1)!=="/"&&(I+="/"),P=this.files[I]),P&&!P.dir)delete this.files[I];else for(var j=this.filter(function(E,N){return N.name.slice(0,I.length)===I}),D=0;D<j.length;D++)delete this.files[j[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var P,j={};try{if((j=r.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");r.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var D=j.comment||this.comment||"";P=c.generateWorker(this,j,D)}catch(E){(P=new l("error")).error(E)}return new u(P,j.type||"string",j.mimeType)},generateAsync:function(I,P){return this.generateInternalStream(I).accumulate(P)},generateNodeStream:function(I,P){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(P)}};o.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,o,t){o.exports=n("stream")},{stream:void 0}],17:[function(n,o,t){var i=n("./DataReader");function s(r){i.call(this,r);for(var l=0;l<this.data.length;l++)r[l]=255&r[l]}n("../utils").inherits(s,i),s.prototype.byteAt=function(r){return this.data[this.zero+r]},s.prototype.lastIndexOfSignature=function(r){for(var l=r.charCodeAt(0),u=r.charCodeAt(1),p=r.charCodeAt(2),h=r.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===l&&this.data[y+1]===u&&this.data[y+2]===p&&this.data[y+3]===h)return y-this.zero;return-1},s.prototype.readAndCheckSignature=function(r){var l=r.charCodeAt(0),u=r.charCodeAt(1),p=r.charCodeAt(2),h=r.charCodeAt(3),y=this.readData(4);return l===y[0]&&u===y[1]&&p===y[2]&&h===y[3]},s.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},o.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,o,t){var i=n("../utils");function s(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var l,u=0;for(this.checkOffset(r),l=this.index+r-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=r,u},readString:function(r){return i.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},o.exports=s},{"../utils":32}],19:[function(n,o,t){var i=n("./Uint8ArrayReader");function s(r){i.call(this,r)}n("../utils").inherits(s,i),s.prototype.readData=function(r){this.checkOffset(r);var l=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},o.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,o,t){var i=n("./DataReader");function s(r){i.call(this,r)}n("../utils").inherits(s,i),s.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},s.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},s.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},s.prototype.readData=function(r){this.checkOffset(r);var l=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},o.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,o,t){var i=n("./ArrayReader");function s(r){i.call(this,r)}n("../utils").inherits(s,i),s.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,l},o.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,o,t){var i=n("../utils"),s=n("../support"),r=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),p=n("./Uint8ArrayReader");o.exports=function(h){var y=i.getTypeOf(h);return i.checkSupport(y),y!=="string"||s.uint8array?y==="nodebuffer"?new u(h):s.uint8array?new p(i.transformTo("uint8array",h)):new r(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,o,t){t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,o,t){var i=n("./GenericWorker"),s=n("../utils");function r(l){i.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(r,i),r.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},o.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(n,o,t){var i=n("./GenericWorker"),s=n("../crc32");function r(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(r,i),r.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},o.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,o,t){var i=n("../utils"),s=n("./GenericWorker");function r(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(r,s),r.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}s.prototype.processChunk.call(this,l)},o.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(n,o,t){var i=n("../utils"),s=n("./GenericWorker");function r(l){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(p){u.dataIsReady=!0,u.data=p,u.max=p&&p.length||0,u.type=i.getTypeOf(p),u.isPaused||u._tickAndRepeat()},function(p){u.error(p)})}i.inherits(r,s),r.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(n,o,t){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,r){return this._listeners[s].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,r){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,r)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var r=this;return s.on("data",function(l){r.processChunk(l)}),s.on("end",function(){r.end()}),s.on("error",function(l){r.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,r){return this.extraStreamInfo[s]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},o.exports=i},{}],29:[function(n,o,t){var i=n("../utils"),s=n("./ConvertWorker"),r=n("./GenericWorker"),l=n("../base64"),u=n("../support"),p=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(b,f){return new p.Promise(function(g,v){var x=[],_=b._internalType,O=b._outputType,I=b._mimeType;b.on("data",function(P,j){x.push(P),f&&f(j)}).on("error",function(P){x=[],v(P)}).on("end",function(){try{var P=function(j,D,E){switch(j){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),E);case"base64":return l.encode(D);default:return i.transformTo(j,D)}}(O,function(j,D){var E,N=0,X=null,k=0;for(E=0;E<D.length;E++)k+=D[E].length;switch(j){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(X=new Uint8Array(k),E=0;E<D.length;E++)X.set(D[E],N),N+=D[E].length;return X;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+j+"'")}}(_,x),I);g(P)}catch(j){v(j)}x=[]}).resume()})}function c(b,f,g){var v=f;switch(f){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=f,this._mimeType=g,i.checkSupport(v),this._worker=b.pipe(new s(v)),b.lock()}catch(x){this._worker=new r("error"),this._worker.error(x)}}c.prototype={accumulate:function(b){return y(this,b)},on:function(b,f){var g=this;return b==="data"?this._worker.on(b,function(v){f.call(g,v.data,v.meta)}):this._worker.on(b,function(){i.delay(f,arguments,g)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},b)}},o.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,o,t){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",t.nodebuffer=typeof Buffer<"u",t.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")t.blob=!1;else{var i=new ArrayBuffer(0);try{t.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),t.blob=s.getBlob("application/zip").size===0}catch{t.blob=!1}}}try{t.nodestream=!!n("readable-stream").Readable}catch{t.nodestream=!1}},{"readable-stream":16}],31:[function(n,o,t){for(var i=n("./utils"),s=n("./support"),r=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),p=0;p<256;p++)u[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function y(){l.call(this,"utf-8 encode")}t.utf8encode=function(c){return s.nodebuffer?r.newBufferFrom(c,"utf-8"):function(b){var f,g,v,x,_,O=b.length,I=0;for(x=0;x<O;x++)(64512&(g=b.charCodeAt(x)))==55296&&x+1<O&&(64512&(v=b.charCodeAt(x+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),x++),I+=g<128?1:g<2048?2:g<65536?3:4;for(f=s.uint8array?new Uint8Array(I):new Array(I),x=_=0;_<I;x++)(64512&(g=b.charCodeAt(x)))==55296&&x+1<O&&(64512&(v=b.charCodeAt(x+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),x++),g<128?f[_++]=g:(g<2048?f[_++]=192|g>>>6:(g<65536?f[_++]=224|g>>>12:(f[_++]=240|g>>>18,f[_++]=128|g>>>12&63),f[_++]=128|g>>>6&63),f[_++]=128|63&g);return f}(c)},t.utf8decode=function(c){return s.nodebuffer?i.transformTo("nodebuffer",c).toString("utf-8"):function(b){var f,g,v,x,_=b.length,O=new Array(2*_);for(f=g=0;f<_;)if((v=b[f++])<128)O[g++]=v;else if(4<(x=u[v]))O[g++]=65533,f+=x-1;else{for(v&=x===2?31:x===3?15:7;1<x&&f<_;)v=v<<6|63&b[f++],x--;1<x?O[g++]=65533:v<65536?O[g++]=v:(v-=65536,O[g++]=55296|v>>10&1023,O[g++]=56320|1023&v)}return O.length!==g&&(O.subarray?O=O.subarray(0,g):O.length=g),i.applyFromCharCode(O)}(c=i.transformTo(s.uint8array?"uint8array":"array",c))},i.inherits(h,l),h.prototype.processChunk=function(c){var b=i.transformTo(s.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var f=b;(b=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),b.set(f,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var g=function(x,_){var O;for((_=_||x.length)>x.length&&(_=x.length),O=_-1;0<=O&&(192&x[O])==128;)O--;return O<0||O===0?_:O+u[x[O]]>_?O:_}(b),v=b;g!==b.length&&(s.uint8array?(v=b.subarray(0,g),this.leftOver=b.subarray(g,b.length)):(v=b.slice(0,g),this.leftOver=b.slice(g,b.length))),this.push({data:t.utf8decode(v),meta:c.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=h,i.inherits(y,l),y.prototype.processChunk=function(c){this.push({data:t.utf8encode(c.data),meta:c.meta})},t.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,o,t){var i=n("./support"),s=n("./base64"),r=n("./nodejsUtils"),l=n("./external");function u(f){return f}function p(f,g){for(var v=0;v<f.length;++v)g[v]=255&f.charCodeAt(v);return g}n("setimmediate"),t.newBlob=function(f,g){t.checkSupport("blob");try{return new Blob([f],{type:g})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(f),v.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(f,g,v){var x=[],_=0,O=f.length;if(O<=v)return String.fromCharCode.apply(null,f);for(;_<O;)g==="array"||g==="nodebuffer"?x.push(String.fromCharCode.apply(null,f.slice(_,Math.min(_+v,O)))):x.push(String.fromCharCode.apply(null,f.subarray(_,Math.min(_+v,O)))),_+=v;return x.join("")},stringifyByChar:function(f){for(var g="",v=0;v<f.length;v++)g+=String.fromCharCode(f[v]);return g},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function y(f){var g=65536,v=t.getTypeOf(f),x=!0;if(v==="uint8array"?x=h.applyCanBeUsed.uint8array:v==="nodebuffer"&&(x=h.applyCanBeUsed.nodebuffer),x)for(;1<g;)try{return h.stringifyByChunk(f,v,g)}catch{g=Math.floor(g/2)}return h.stringifyByChar(f)}function c(f,g){for(var v=0;v<f.length;v++)g[v]=f[v];return g}t.applyFromCharCode=y;var b={};b.string={string:u,array:function(f){return p(f,new Array(f.length))},arraybuffer:function(f){return b.string.uint8array(f).buffer},uint8array:function(f){return p(f,new Uint8Array(f.length))},nodebuffer:function(f){return p(f,r.allocBuffer(f.length))}},b.array={string:y,array:u,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return r.newBufferFrom(f)}},b.arraybuffer={string:function(f){return y(new Uint8Array(f))},array:function(f){return c(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:u,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return r.newBufferFrom(new Uint8Array(f))}},b.uint8array={string:y,array:function(f){return c(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:u,nodebuffer:function(f){return r.newBufferFrom(f)}},b.nodebuffer={string:y,array:function(f){return c(f,new Array(f.length))},arraybuffer:function(f){return b.nodebuffer.uint8array(f).buffer},uint8array:function(f){return c(f,new Uint8Array(f.length))},nodebuffer:u},t.transformTo=function(f,g){if(g=g||"",!f)return g;t.checkSupport(f);var v=t.getTypeOf(g);return b[v][f](g)},t.resolve=function(f){for(var g=f.split("/"),v=[],x=0;x<g.length;x++){var _=g[x];_==="."||_===""&&x!==0&&x!==g.length-1||(_===".."?v.pop():v.push(_))}return v.join("/")},t.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":i.nodebuffer&&r.isBuffer(f)?"nodebuffer":i.uint8array&&f instanceof Uint8Array?"uint8array":i.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(f){if(!i[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(f){var g,v,x="";for(v=0;v<(f||"").length;v++)x+="\\x"+((g=f.charCodeAt(v))<16?"0":"")+g.toString(16).toUpperCase();return x},t.delay=function(f,g,v){setImmediate(function(){f.apply(v||null,g||[])})},t.inherits=function(f,g){function v(){}v.prototype=g.prototype,f.prototype=new v},t.extend=function(){var f,g,v={};for(f=0;f<arguments.length;f++)for(g in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],g)&&v[g]===void 0&&(v[g]=arguments[f][g]);return v},t.prepareContent=function(f,g,v,x,_){return l.Promise.resolve(g).then(function(O){return i.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new l.Promise(function(I,P){var j=new FileReader;j.onload=function(D){I(D.target.result)},j.onerror=function(D){P(D.target.error)},j.readAsArrayBuffer(O)}):O}).then(function(O){var I=t.getTypeOf(O);return I?(I==="arraybuffer"?O=t.transformTo("uint8array",O):I==="string"&&(_?O=s.decode(O):v&&x!==!0&&(O=function(P){return p(P,i.uint8array?new Uint8Array(P.length):new Array(P.length))}(O))),O):l.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,o,t){var i=n("./reader/readerFor"),s=n("./utils"),r=n("./signature"),l=n("./zipEntry"),u=n("./support");function p(h){this.files=[],this.loadOptions=h}p.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(y)+", expected "+s.pretty(h)+")")}},isSignature:function(h,y){var c=this.reader.index;this.reader.setIndex(h);var b=this.reader.readString(4)===y;return this.reader.setIndex(c),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),y=u.uint8array?"uint8array":"array",c=s.transformTo(y,h);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,y,c,b=this.zip64EndOfCentralSize-44;0<b;)h=this.reader.readInt(2),y=this.reader.readInt(4),c=this.reader.readData(y),this.zip64ExtensibleData[h]={id:h,length:y,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,y;for(h=0;h<this.files.length;h++)y=this.files[h],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var y=h;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var b=y-c;if(0<b)this.isSignature(y,r.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,o,t){var i=n("./reader/readerFor"),s=n("./utils"),r=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),p=n("./compressions"),h=n("./support");function y(c,b){this.options=c,this.loadOptions=b}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var b,f;if(c.skip(22),this.fileNameLength=c.readInt(2),f=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(g){for(var v in p)if(Object.prototype.hasOwnProperty.call(p,v)&&p[v].magic===g)return p[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,b,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var b=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(b),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var b,f,g,v=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<v;)b=c.readInt(2),f=c.readInt(2),g=c.readData(f),this.extraFields[b]={id:b,length:f,value:g};c.setIndex(v)},handleUTF8:function(){var c=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var f=s.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var v=s.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var b=i(c.value);return b.readInt(1)!==1||l(this.fileName)!==b.readInt(4)?null:u.utf8decode(b.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var b=i(c.value);return b.readInt(1)!==1||l(this.fileComment)!==b.readInt(4)?null:u.utf8decode(b.readData(c.length-5))}return null}},o.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,o,t){function i(b,f,g){this.name=b,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=f,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var s=n("./stream/StreamHelper"),r=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),p=n("./stream/GenericWorker");i.prototype={internalStream:function(b){var f=null,g="string";try{if(!b)throw new Error("No output type specified.");var v=(g=b.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),f=this._decompressWorker();var x=!this._dataBinary;x&&!v&&(f=f.pipe(new l.Utf8EncodeWorker)),!x&&v&&(f=f.pipe(new l.Utf8DecodeWorker))}catch(_){(f=new p("error")).error(_)}return new s(f,g,"")},async:function(b,f){return this.internalStream(b).accumulate(f)},nodeStream:function(b,f){return this.internalStream(b||"nodebuffer").toNodejsStream(f)},_compressWorker:function(b,f){if(this._data instanceof u&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(g,b,f)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof p?this._data:new r(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<h.length;c++)i.prototype[h[c]]=y;o.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,o,t){(function(i){var s,r,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,p=new l(b),h=i.document.createTextNode("");p.observe(h,{characterData:!0}),s=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var f=i.document.createElement("script");f.onreadystatechange=function(){b(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},i.document.documentElement.appendChild(f)}:function(){setTimeout(b,0)};else{var y=new i.MessageChannel;y.port1.onmessage=b,s=function(){y.port2.postMessage(0)}}var c=[];function b(){var f,g;r=!0;for(var v=c.length;v;){for(g=c,c=[],f=-1;++f<v;)g[f]();v=c.length}r=!1}o.exports=function(f){c.push(f)!==1||r||s()}}).call(this,typeof pt<"u"?pt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,o,t){var i=n("immediate");function s(){}var r={},l=["REJECTED"],u=["FULFILLED"],p=["PENDING"];function h(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,v!==s&&f(this,v)}function y(v,x,_){this.promise=v,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function c(v,x,_){i(function(){var O;try{O=x(_)}catch(I){return r.reject(v,I)}O===v?r.reject(v,new TypeError("Cannot resolve promise with itself")):r.resolve(v,O)})}function b(v){var x=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof x=="function")return function(){x.apply(v,arguments)}}function f(v,x){var _=!1;function O(j){_||(_=!0,r.reject(v,j))}function I(j){_||(_=!0,r.resolve(v,j))}var P=g(function(){x(I,O)});P.status==="error"&&O(P.value)}function g(v,x){var _={};try{_.value=v(x),_.status="success"}catch(O){_.status="error",_.value=O}return _}(o.exports=h).prototype.finally=function(v){if(typeof v!="function")return this;var x=this.constructor;return this.then(function(_){return x.resolve(v()).then(function(){return _})},function(_){return x.resolve(v()).then(function(){throw _})})},h.prototype.catch=function(v){return this.then(null,v)},h.prototype.then=function(v,x){if(typeof v!="function"&&this.state===u||typeof x!="function"&&this.state===l)return this;var _=new this.constructor(s);return this.state!==p?c(_,this.state===u?v:x,this.outcome):this.queue.push(new y(_,v,x)),_},y.prototype.callFulfilled=function(v){r.resolve(this.promise,v)},y.prototype.otherCallFulfilled=function(v){c(this.promise,this.onFulfilled,v)},y.prototype.callRejected=function(v){r.reject(this.promise,v)},y.prototype.otherCallRejected=function(v){c(this.promise,this.onRejected,v)},r.resolve=function(v,x){var _=g(b,x);if(_.status==="error")return r.reject(v,_.value);var O=_.value;if(O)f(v,O);else{v.state=u,v.outcome=x;for(var I=-1,P=v.queue.length;++I<P;)v.queue[I].callFulfilled(x)}return v},r.reject=function(v,x){v.state=l,v.outcome=x;for(var _=-1,O=v.queue.length;++_<O;)v.queue[_].callRejected(x);return v},h.resolve=function(v){return v instanceof this?v:r.resolve(new this(s),v)},h.reject=function(v){var x=new this(s);return r.reject(x,v)},h.all=function(v){var x=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=v.length,O=!1;if(!_)return this.resolve([]);for(var I=new Array(_),P=0,j=-1,D=new this(s);++j<_;)E(v[j],j);return D;function E(N,X){x.resolve(N).then(function(k){I[X]=k,++P!==_||O||(O=!0,r.resolve(D,I))},function(k){O||(O=!0,r.reject(D,k))})}},h.race=function(v){var x=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=v.length,O=!1;if(!_)return this.resolve([]);for(var I=-1,P=new this(s);++I<_;)j=v[I],x.resolve(j).then(function(D){O||(O=!0,r.resolve(P,D))},function(D){O||(O=!0,r.reject(P,D))});var j;return P}},{immediate:36}],38:[function(n,o,t){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),o.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,o,t){var i=n("./zlib/deflate"),s=n("./utils/common"),r=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),p=Object.prototype.toString,h=0,y=-1,c=0,b=8;function f(v){if(!(this instanceof f))return new f(v);this.options=s.assign({level:y,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},v||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var _=i.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(_!==h)throw new Error(l[_]);if(x.header&&i.deflateSetHeader(this.strm,x.header),x.dictionary){var O;if(O=typeof x.dictionary=="string"?r.string2buf(x.dictionary):p.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(_=i.deflateSetDictionary(this.strm,O))!==h)throw new Error(l[_]);this._dict_set=!0}}function g(v,x){var _=new f(x);if(_.push(v,!0),_.err)throw _.msg||l[_.err];return _.result}f.prototype.push=function(v,x){var _,O,I=this.strm,P=this.options.chunkSize;if(this.ended)return!1;O=x===~~x?x:x===!0?4:0,typeof v=="string"?I.input=r.string2buf(v):p.call(v)==="[object ArrayBuffer]"?I.input=new Uint8Array(v):I.input=v,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new s.Buf8(P),I.next_out=0,I.avail_out=P),(_=i.deflate(I,O))!==1&&_!==h)return this.onEnd(_),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(s.shrinkBuf(I.output,I.next_out))):this.onData(s.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&_!==1);return O===4?(_=i.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===h):O!==2||(this.onEnd(h),!(I.avail_out=0))},f.prototype.onData=function(v){this.chunks.push(v)},f.prototype.onEnd=function(v){v===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},t.Deflate=f,t.deflate=g,t.deflateRaw=function(v,x){return(x=x||{}).raw=!0,g(v,x)},t.gzip=function(v,x){return(x=x||{}).gzip=!0,g(v,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,o,t){var i=n("./zlib/inflate"),s=n("./utils/common"),r=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),p=n("./zlib/zstream"),h=n("./zlib/gzheader"),y=Object.prototype.toString;function c(f){if(!(this instanceof c))return new c(f);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},f||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||f&&f.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,g.windowBits);if(v!==l.Z_OK)throw new Error(u[v]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function b(f,g){var v=new c(g);if(v.push(f,!0),v.err)throw v.msg||u[v.err];return v.result}c.prototype.push=function(f,g){var v,x,_,O,I,P,j=this.strm,D=this.options.chunkSize,E=this.options.dictionary,N=!1;if(this.ended)return!1;x=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof f=="string"?j.input=r.binstring2buf(f):y.call(f)==="[object ArrayBuffer]"?j.input=new Uint8Array(f):j.input=f,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new s.Buf8(D),j.next_out=0,j.avail_out=D),(v=i.inflate(j,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&E&&(P=typeof E=="string"?r.string2buf(E):y.call(E)==="[object ArrayBuffer]"?new Uint8Array(E):E,v=i.inflateSetDictionary(this.strm,P)),v===l.Z_BUF_ERROR&&N===!0&&(v=l.Z_OK,N=!1),v!==l.Z_STREAM_END&&v!==l.Z_OK)return this.onEnd(v),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&v!==l.Z_STREAM_END&&(j.avail_in!==0||x!==l.Z_FINISH&&x!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=r.utf8border(j.output,j.next_out),O=j.next_out-_,I=r.buf2string(j.output,_),j.next_out=O,j.avail_out=D-O,O&&s.arraySet(j.output,j.output,_,O,0),this.onData(I)):this.onData(s.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(N=!0)}while((0<j.avail_in||j.avail_out===0)&&v!==l.Z_STREAM_END);return v===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(v=i.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===l.Z_OK):x!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(j.avail_out=0))},c.prototype.onData=function(f){this.chunks.push(f)},c.prototype.onEnd=function(f){f===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},t.Inflate=c,t.inflate=b,t.inflateRaw=function(f,g){return(g=g||{}).raw=!0,b(f,g)},t.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,o,t){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";t.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var p=u.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var h in p)p.hasOwnProperty(h)&&(l[h]=p[h])}}return l},t.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var s={arraySet:function(l,u,p,h,y){if(u.subarray&&l.subarray)l.set(u.subarray(p,p+h),y);else for(var c=0;c<h;c++)l[y+c]=u[p+c]},flattenChunks:function(l){var u,p,h,y,c,b;for(u=h=0,p=l.length;u<p;u++)h+=l[u].length;for(b=new Uint8Array(h),u=y=0,p=l.length;u<p;u++)c=l[u],b.set(c,y),y+=c.length;return b}},r={arraySet:function(l,u,p,h,y){for(var c=0;c<h;c++)l[y+c]=u[p+c]},flattenChunks:function(l){return[].concat.apply([],l)}};t.setTyped=function(l){l?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,s)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(i)},{}],42:[function(n,o,t){var i=n("./common"),s=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function p(h,y){if(y<65537&&(h.subarray&&r||!h.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(h,y));for(var c="",b=0;b<y;b++)c+=String.fromCharCode(h[b]);return c}l[254]=l[254]=1,t.string2buf=function(h){var y,c,b,f,g,v=h.length,x=0;for(f=0;f<v;f++)(64512&(c=h.charCodeAt(f)))==55296&&f+1<v&&(64512&(b=h.charCodeAt(f+1)))==56320&&(c=65536+(c-55296<<10)+(b-56320),f++),x+=c<128?1:c<2048?2:c<65536?3:4;for(y=new i.Buf8(x),f=g=0;g<x;f++)(64512&(c=h.charCodeAt(f)))==55296&&f+1<v&&(64512&(b=h.charCodeAt(f+1)))==56320&&(c=65536+(c-55296<<10)+(b-56320),f++),c<128?y[g++]=c:(c<2048?y[g++]=192|c>>>6:(c<65536?y[g++]=224|c>>>12:(y[g++]=240|c>>>18,y[g++]=128|c>>>12&63),y[g++]=128|c>>>6&63),y[g++]=128|63&c);return y},t.buf2binstring=function(h){return p(h,h.length)},t.binstring2buf=function(h){for(var y=new i.Buf8(h.length),c=0,b=y.length;c<b;c++)y[c]=h.charCodeAt(c);return y},t.buf2string=function(h,y){var c,b,f,g,v=y||h.length,x=new Array(2*v);for(c=b=0;c<v;)if((f=h[c++])<128)x[b++]=f;else if(4<(g=l[f]))x[b++]=65533,c+=g-1;else{for(f&=g===2?31:g===3?15:7;1<g&&c<v;)f=f<<6|63&h[c++],g--;1<g?x[b++]=65533:f<65536?x[b++]=f:(f-=65536,x[b++]=55296|f>>10&1023,x[b++]=56320|1023&f)}return p(x,b)},t.utf8border=function(h,y){var c;for((y=y||h.length)>h.length&&(y=h.length),c=y-1;0<=c&&(192&h[c])==128;)c--;return c<0||c===0?y:c+l[h[c]]>y?c:y}},{"./common":41}],43:[function(n,o,t){o.exports=function(i,s,r,l){for(var u=65535&i|0,p=i>>>16&65535|0,h=0;r!==0;){for(r-=h=2e3<r?2e3:r;p=p+(u=u+s[l++]|0)|0,--h;);u%=65521,p%=65521}return u|p<<16|0}},{}],44:[function(n,o,t){o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,o,t){var i=function(){for(var s,r=[],l=0;l<256;l++){s=l;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;r[l]=s}return r}();o.exports=function(s,r,l,u){var p=i,h=u+l;s^=-1;for(var y=u;y<h;y++)s=s>>>8^p[255&(s^r[y])];return-1^s}},{}],46:[function(n,o,t){var i,s=n("../utils/common"),r=n("./trees"),l=n("./adler32"),u=n("./crc32"),p=n("./messages"),h=0,y=4,c=0,b=-2,f=-1,g=4,v=2,x=8,_=9,O=286,I=30,P=19,j=2*O+1,D=15,E=3,N=258,X=N+E+1,k=42,B=113,m=1,R=2,K=3,$=4;function J(d,L){return d.msg=p[L],L}function H(d){return(d<<1)-(4<d?9:0)}function te(d){for(var L=d.length;0<=--L;)d[L]=0}function A(d){var L=d.state,V=L.pending;V>d.avail_out&&(V=d.avail_out),V!==0&&(s.arraySet(d.output,L.pending_buf,L.pending_out,V,d.next_out),d.next_out+=V,L.pending_out+=V,d.total_out+=V,d.avail_out-=V,L.pending-=V,L.pending===0&&(L.pending_out=0))}function T(d,L){r._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,L),d.block_start=d.strstart,A(d.strm)}function Q(d,L){d.pending_buf[d.pending++]=L}function q(d,L){d.pending_buf[d.pending++]=L>>>8&255,d.pending_buf[d.pending++]=255&L}function Z(d,L){var V,C,S=d.max_chain_length,M=d.strstart,U=d.prev_length,W=d.nice_match,F=d.strstart>d.w_size-X?d.strstart-(d.w_size-X):0,G=d.window,ee=d.w_mask,Y=d.prev,ne=d.strstart+N,pe=G[M+U-1],ce=G[M+U];d.prev_length>=d.good_match&&(S>>=2),W>d.lookahead&&(W=d.lookahead);do if(G[(V=L)+U]===ce&&G[V+U-1]===pe&&G[V]===G[M]&&G[++V]===G[M+1]){M+=2,V++;do;while(G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&M<ne);if(C=N-(ne-M),M=ne-N,U<C){if(d.match_start=L,W<=(U=C))break;pe=G[M+U-1],ce=G[M+U]}}while((L=Y[L&ee])>F&&--S!=0);return U<=d.lookahead?U:d.lookahead}function ue(d){var L,V,C,S,M,U,W,F,G,ee,Y=d.w_size;do{if(S=d.window_size-d.lookahead-d.strstart,d.strstart>=Y+(Y-X)){for(s.arraySet(d.window,d.window,Y,Y,0),d.match_start-=Y,d.strstart-=Y,d.block_start-=Y,L=V=d.hash_size;C=d.head[--L],d.head[L]=Y<=C?C-Y:0,--V;);for(L=V=Y;C=d.prev[--L],d.prev[L]=Y<=C?C-Y:0,--V;);S+=Y}if(d.strm.avail_in===0)break;if(U=d.strm,W=d.window,F=d.strstart+d.lookahead,G=S,ee=void 0,ee=U.avail_in,G<ee&&(ee=G),V=ee===0?0:(U.avail_in-=ee,s.arraySet(W,U.input,U.next_in,ee,F),U.state.wrap===1?U.adler=l(U.adler,W,ee,F):U.state.wrap===2&&(U.adler=u(U.adler,W,ee,F)),U.next_in+=ee,U.total_in+=ee,ee),d.lookahead+=V,d.lookahead+d.insert>=E)for(M=d.strstart-d.insert,d.ins_h=d.window[M],d.ins_h=(d.ins_h<<d.hash_shift^d.window[M+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[M+E-1])&d.hash_mask,d.prev[M&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=M,M++,d.insert--,!(d.lookahead+d.insert<E)););}while(d.lookahead<X&&d.strm.avail_in!==0)}function he(d,L){for(var V,C;;){if(d.lookahead<X){if(ue(d),d.lookahead<X&&L===h)return m;if(d.lookahead===0)break}if(V=0,d.lookahead>=E&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+E-1])&d.hash_mask,V=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),V!==0&&d.strstart-V<=d.w_size-X&&(d.match_length=Z(d,V)),d.match_length>=E)if(C=r._tr_tally(d,d.strstart-d.match_start,d.match_length-E),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=E){for(d.match_length--;d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+E-1])&d.hash_mask,V=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart,--d.match_length!=0;);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else C=r._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(C&&(T(d,!1),d.strm.avail_out===0))return m}return d.insert=d.strstart<E-1?d.strstart:E-1,L===y?(T(d,!0),d.strm.avail_out===0?K:$):d.last_lit&&(T(d,!1),d.strm.avail_out===0)?m:R}function se(d,L){for(var V,C,S;;){if(d.lookahead<X){if(ue(d),d.lookahead<X&&L===h)return m;if(d.lookahead===0)break}if(V=0,d.lookahead>=E&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+E-1])&d.hash_mask,V=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=E-1,V!==0&&d.prev_length<d.max_lazy_match&&d.strstart-V<=d.w_size-X&&(d.match_length=Z(d,V),d.match_length<=5&&(d.strategy===1||d.match_length===E&&4096<d.strstart-d.match_start)&&(d.match_length=E-1)),d.prev_length>=E&&d.match_length<=d.prev_length){for(S=d.strstart+d.lookahead-E,C=r._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-E),d.lookahead-=d.prev_length-1,d.prev_length-=2;++d.strstart<=S&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+E-1])&d.hash_mask,V=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),--d.prev_length!=0;);if(d.match_available=0,d.match_length=E-1,d.strstart++,C&&(T(d,!1),d.strm.avail_out===0))return m}else if(d.match_available){if((C=r._tr_tally(d,0,d.window[d.strstart-1]))&&T(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return m}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(C=r._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<E-1?d.strstart:E-1,L===y?(T(d,!0),d.strm.avail_out===0?K:$):d.last_lit&&(T(d,!1),d.strm.avail_out===0)?m:R}function oe(d,L,V,C,S){this.good_length=d,this.max_lazy=L,this.nice_length=V,this.max_chain=C,this.func=S}function me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*j),this.dyn_dtree=new s.Buf16(2*(2*I+1)),this.bl_tree=new s.Buf16(2*(2*P+1)),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(D+1),this.heap=new s.Buf16(2*O+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*O+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(d){var L;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=v,(L=d.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?k:B,d.adler=L.wrap===2?0:1,L.last_flush=h,r._tr_init(L),c):J(d,b)}function ye(d){var L=fe(d);return L===c&&function(V){V.window_size=2*V.w_size,te(V.head),V.max_lazy_match=i[V.level].max_lazy,V.good_match=i[V.level].good_length,V.nice_match=i[V.level].nice_length,V.max_chain_length=i[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=E-1,V.match_available=0,V.ins_h=0}(d.state),L}function xe(d,L,V,C,S,M){if(!d)return b;var U=1;if(L===f&&(L=6),C<0?(U=0,C=-C):15<C&&(U=2,C-=16),S<1||_<S||V!==x||C<8||15<C||L<0||9<L||M<0||g<M)return J(d,b);C===8&&(C=9);var W=new me;return(d.state=W).strm=d,W.wrap=U,W.gzhead=null,W.w_bits=C,W.w_size=1<<W.w_bits,W.w_mask=W.w_size-1,W.hash_bits=S+7,W.hash_size=1<<W.hash_bits,W.hash_mask=W.hash_size-1,W.hash_shift=~~((W.hash_bits+E-1)/E),W.window=new s.Buf8(2*W.w_size),W.head=new s.Buf16(W.hash_size),W.prev=new s.Buf16(W.w_size),W.lit_bufsize=1<<S+6,W.pending_buf_size=4*W.lit_bufsize,W.pending_buf=new s.Buf8(W.pending_buf_size),W.d_buf=1*W.lit_bufsize,W.l_buf=3*W.lit_bufsize,W.level=L,W.strategy=M,W.method=V,ye(d)}i=[new oe(0,0,0,0,function(d,L){var V=65535;for(V>d.pending_buf_size-5&&(V=d.pending_buf_size-5);;){if(d.lookahead<=1){if(ue(d),d.lookahead===0&&L===h)return m;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var C=d.block_start+V;if((d.strstart===0||d.strstart>=C)&&(d.lookahead=d.strstart-C,d.strstart=C,T(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-X&&(T(d,!1),d.strm.avail_out===0))return m}return d.insert=0,L===y?(T(d,!0),d.strm.avail_out===0?K:$):(d.strstart>d.block_start&&(T(d,!1),d.strm.avail_out),m)}),new oe(4,4,8,4,he),new oe(4,5,16,8,he),new oe(4,6,32,32,he),new oe(4,4,16,16,se),new oe(8,16,32,32,se),new oe(8,16,128,128,se),new oe(8,32,128,256,se),new oe(32,128,258,1024,se),new oe(32,258,258,4096,se)],t.deflateInit=function(d,L){return xe(d,L,x,15,8,0)},t.deflateInit2=xe,t.deflateReset=ye,t.deflateResetKeep=fe,t.deflateSetHeader=function(d,L){return d&&d.state?d.state.wrap!==2?b:(d.state.gzhead=L,c):b},t.deflate=function(d,L){var V,C,S,M;if(!d||!d.state||5<L||L<0)return d?J(d,b):b;if(C=d.state,!d.output||!d.input&&d.avail_in!==0||C.status===666&&L!==y)return J(d,d.avail_out===0?-5:b);if(C.strm=d,V=C.last_flush,C.last_flush=L,C.status===k)if(C.wrap===2)d.adler=0,Q(C,31),Q(C,139),Q(C,8),C.gzhead?(Q(C,(C.gzhead.text?1:0)+(C.gzhead.hcrc?2:0)+(C.gzhead.extra?4:0)+(C.gzhead.name?8:0)+(C.gzhead.comment?16:0)),Q(C,255&C.gzhead.time),Q(C,C.gzhead.time>>8&255),Q(C,C.gzhead.time>>16&255),Q(C,C.gzhead.time>>24&255),Q(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),Q(C,255&C.gzhead.os),C.gzhead.extra&&C.gzhead.extra.length&&(Q(C,255&C.gzhead.extra.length),Q(C,C.gzhead.extra.length>>8&255)),C.gzhead.hcrc&&(d.adler=u(d.adler,C.pending_buf,C.pending,0)),C.gzindex=0,C.status=69):(Q(C,0),Q(C,0),Q(C,0),Q(C,0),Q(C,0),Q(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),Q(C,3),C.status=B);else{var U=x+(C.w_bits-8<<4)<<8;U|=(2<=C.strategy||C.level<2?0:C.level<6?1:C.level===6?2:3)<<6,C.strstart!==0&&(U|=32),U+=31-U%31,C.status=B,q(C,U),C.strstart!==0&&(q(C,d.adler>>>16),q(C,65535&d.adler)),d.adler=1}if(C.status===69)if(C.gzhead.extra){for(S=C.pending;C.gzindex<(65535&C.gzhead.extra.length)&&(C.pending!==C.pending_buf_size||(C.gzhead.hcrc&&C.pending>S&&(d.adler=u(d.adler,C.pending_buf,C.pending-S,S)),A(d),S=C.pending,C.pending!==C.pending_buf_size));)Q(C,255&C.gzhead.extra[C.gzindex]),C.gzindex++;C.gzhead.hcrc&&C.pending>S&&(d.adler=u(d.adler,C.pending_buf,C.pending-S,S)),C.gzindex===C.gzhead.extra.length&&(C.gzindex=0,C.status=73)}else C.status=73;if(C.status===73)if(C.gzhead.name){S=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>S&&(d.adler=u(d.adler,C.pending_buf,C.pending-S,S)),A(d),S=C.pending,C.pending===C.pending_buf_size)){M=1;break}M=C.gzindex<C.gzhead.name.length?255&C.gzhead.name.charCodeAt(C.gzindex++):0,Q(C,M)}while(M!==0);C.gzhead.hcrc&&C.pending>S&&(d.adler=u(d.adler,C.pending_buf,C.pending-S,S)),M===0&&(C.gzindex=0,C.status=91)}else C.status=91;if(C.status===91)if(C.gzhead.comment){S=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>S&&(d.adler=u(d.adler,C.pending_buf,C.pending-S,S)),A(d),S=C.pending,C.pending===C.pending_buf_size)){M=1;break}M=C.gzindex<C.gzhead.comment.length?255&C.gzhead.comment.charCodeAt(C.gzindex++):0,Q(C,M)}while(M!==0);C.gzhead.hcrc&&C.pending>S&&(d.adler=u(d.adler,C.pending_buf,C.pending-S,S)),M===0&&(C.status=103)}else C.status=103;if(C.status===103&&(C.gzhead.hcrc?(C.pending+2>C.pending_buf_size&&A(d),C.pending+2<=C.pending_buf_size&&(Q(C,255&d.adler),Q(C,d.adler>>8&255),d.adler=0,C.status=B)):C.status=B),C.pending!==0){if(A(d),d.avail_out===0)return C.last_flush=-1,c}else if(d.avail_in===0&&H(L)<=H(V)&&L!==y)return J(d,-5);if(C.status===666&&d.avail_in!==0)return J(d,-5);if(d.avail_in!==0||C.lookahead!==0||L!==h&&C.status!==666){var W=C.strategy===2?function(F,G){for(var ee;;){if(F.lookahead===0&&(ue(F),F.lookahead===0)){if(G===h)return m;break}if(F.match_length=0,ee=r._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,ee&&(T(F,!1),F.strm.avail_out===0))return m}return F.insert=0,G===y?(T(F,!0),F.strm.avail_out===0?K:$):F.last_lit&&(T(F,!1),F.strm.avail_out===0)?m:R}(C,L):C.strategy===3?function(F,G){for(var ee,Y,ne,pe,ce=F.window;;){if(F.lookahead<=N){if(ue(F),F.lookahead<=N&&G===h)return m;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=E&&0<F.strstart&&(Y=ce[ne=F.strstart-1])===ce[++ne]&&Y===ce[++ne]&&Y===ce[++ne]){pe=F.strstart+N;do;while(Y===ce[++ne]&&Y===ce[++ne]&&Y===ce[++ne]&&Y===ce[++ne]&&Y===ce[++ne]&&Y===ce[++ne]&&Y===ce[++ne]&&Y===ce[++ne]&&ne<pe);F.match_length=N-(pe-ne),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=E?(ee=r._tr_tally(F,1,F.match_length-E),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(ee=r._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),ee&&(T(F,!1),F.strm.avail_out===0))return m}return F.insert=0,G===y?(T(F,!0),F.strm.avail_out===0?K:$):F.last_lit&&(T(F,!1),F.strm.avail_out===0)?m:R}(C,L):i[C.level].func(C,L);if(W!==K&&W!==$||(C.status=666),W===m||W===K)return d.avail_out===0&&(C.last_flush=-1),c;if(W===R&&(L===1?r._tr_align(C):L!==5&&(r._tr_stored_block(C,0,0,!1),L===3&&(te(C.head),C.lookahead===0&&(C.strstart=0,C.block_start=0,C.insert=0))),A(d),d.avail_out===0))return C.last_flush=-1,c}return L!==y?c:C.wrap<=0?1:(C.wrap===2?(Q(C,255&d.adler),Q(C,d.adler>>8&255),Q(C,d.adler>>16&255),Q(C,d.adler>>24&255),Q(C,255&d.total_in),Q(C,d.total_in>>8&255),Q(C,d.total_in>>16&255),Q(C,d.total_in>>24&255)):(q(C,d.adler>>>16),q(C,65535&d.adler)),A(d),0<C.wrap&&(C.wrap=-C.wrap),C.pending!==0?c:1)},t.deflateEnd=function(d){var L;return d&&d.state?(L=d.state.status)!==k&&L!==69&&L!==73&&L!==91&&L!==103&&L!==B&&L!==666?J(d,b):(d.state=null,L===B?J(d,-3):c):b},t.deflateSetDictionary=function(d,L){var V,C,S,M,U,W,F,G,ee=L.length;if(!d||!d.state||(M=(V=d.state).wrap)===2||M===1&&V.status!==k||V.lookahead)return b;for(M===1&&(d.adler=l(d.adler,L,ee,0)),V.wrap=0,ee>=V.w_size&&(M===0&&(te(V.head),V.strstart=0,V.block_start=0,V.insert=0),G=new s.Buf8(V.w_size),s.arraySet(G,L,ee-V.w_size,V.w_size,0),L=G,ee=V.w_size),U=d.avail_in,W=d.next_in,F=d.input,d.avail_in=ee,d.next_in=0,d.input=L,ue(V);V.lookahead>=E;){for(C=V.strstart,S=V.lookahead-(E-1);V.ins_h=(V.ins_h<<V.hash_shift^V.window[C+E-1])&V.hash_mask,V.prev[C&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=C,C++,--S;);V.strstart=C,V.lookahead=E-1,ue(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=E-1,V.match_available=0,d.next_in=W,d.input=F,d.avail_in=U,V.wrap=M,c},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,o,t){o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,o,t){o.exports=function(i,s){var r,l,u,p,h,y,c,b,f,g,v,x,_,O,I,P,j,D,E,N,X,k,B,m,R;r=i.state,l=i.next_in,m=i.input,u=l+(i.avail_in-5),p=i.next_out,R=i.output,h=p-(s-i.avail_out),y=p+(i.avail_out-257),c=r.dmax,b=r.wsize,f=r.whave,g=r.wnext,v=r.window,x=r.hold,_=r.bits,O=r.lencode,I=r.distcode,P=(1<<r.lenbits)-1,j=(1<<r.distbits)-1;e:do{_<15&&(x+=m[l++]<<_,_+=8,x+=m[l++]<<_,_+=8),D=O[x&P];t:for(;;){if(x>>>=E=D>>>24,_-=E,(E=D>>>16&255)===0)R[p++]=65535&D;else{if(!(16&E)){if(!(64&E)){D=O[(65535&D)+(x&(1<<E)-1)];continue t}if(32&E){r.mode=12;break e}i.msg="invalid literal/length code",r.mode=30;break e}N=65535&D,(E&=15)&&(_<E&&(x+=m[l++]<<_,_+=8),N+=x&(1<<E)-1,x>>>=E,_-=E),_<15&&(x+=m[l++]<<_,_+=8,x+=m[l++]<<_,_+=8),D=I[x&j];n:for(;;){if(x>>>=E=D>>>24,_-=E,!(16&(E=D>>>16&255))){if(!(64&E)){D=I[(65535&D)+(x&(1<<E)-1)];continue n}i.msg="invalid distance code",r.mode=30;break e}if(X=65535&D,_<(E&=15)&&(x+=m[l++]<<_,(_+=8)<E&&(x+=m[l++]<<_,_+=8)),c<(X+=x&(1<<E)-1)){i.msg="invalid distance too far back",r.mode=30;break e}if(x>>>=E,_-=E,(E=p-h)<X){if(f<(E=X-E)&&r.sane){i.msg="invalid distance too far back",r.mode=30;break e}if(B=v,(k=0)===g){if(k+=b-E,E<N){for(N-=E;R[p++]=v[k++],--E;);k=p-X,B=R}}else if(g<E){if(k+=b+g-E,(E-=g)<N){for(N-=E;R[p++]=v[k++],--E;);if(k=0,g<N){for(N-=E=g;R[p++]=v[k++],--E;);k=p-X,B=R}}}else if(k+=g-E,E<N){for(N-=E;R[p++]=v[k++],--E;);k=p-X,B=R}for(;2<N;)R[p++]=B[k++],R[p++]=B[k++],R[p++]=B[k++],N-=3;N&&(R[p++]=B[k++],1<N&&(R[p++]=B[k++]))}else{for(k=p-X;R[p++]=R[k++],R[p++]=R[k++],R[p++]=R[k++],2<(N-=3););N&&(R[p++]=R[k++],1<N&&(R[p++]=R[k++]))}break}}break}}while(l<u&&p<y);l-=N=_>>3,x&=(1<<(_-=N<<3))-1,i.next_in=l,i.next_out=p,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=p<y?y-p+257:257-(p-y),r.hold=x,r.bits=_}},{}],49:[function(n,o,t){var i=n("../utils/common"),s=n("./adler32"),r=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),p=1,h=2,y=0,c=-2,b=1,f=852,g=592;function v(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(k){var B;return k&&k.state?(B=k.state,k.total_in=k.total_out=B.total=0,k.msg="",B.wrap&&(k.adler=1&B.wrap),B.mode=b,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new i.Buf32(f),B.distcode=B.distdyn=new i.Buf32(g),B.sane=1,B.back=-1,y):c}function O(k){var B;return k&&k.state?((B=k.state).wsize=0,B.whave=0,B.wnext=0,_(k)):c}function I(k,B){var m,R;return k&&k.state?(R=k.state,B<0?(m=0,B=-B):(m=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?c:(R.window!==null&&R.wbits!==B&&(R.window=null),R.wrap=m,R.wbits=B,O(k))):c}function P(k,B){var m,R;return k?(R=new x,(k.state=R).window=null,(m=I(k,B))!==y&&(k.state=null),m):c}var j,D,E=!0;function N(k){if(E){var B;for(j=new i.Buf32(512),D=new i.Buf32(32),B=0;B<144;)k.lens[B++]=8;for(;B<256;)k.lens[B++]=9;for(;B<280;)k.lens[B++]=7;for(;B<288;)k.lens[B++]=8;for(u(p,k.lens,0,288,j,0,k.work,{bits:9}),B=0;B<32;)k.lens[B++]=5;u(h,k.lens,0,32,D,0,k.work,{bits:5}),E=!1}k.lencode=j,k.lenbits=9,k.distcode=D,k.distbits=5}function X(k,B,m,R){var K,$=k.state;return $.window===null&&($.wsize=1<<$.wbits,$.wnext=0,$.whave=0,$.window=new i.Buf8($.wsize)),R>=$.wsize?(i.arraySet($.window,B,m-$.wsize,$.wsize,0),$.wnext=0,$.whave=$.wsize):(R<(K=$.wsize-$.wnext)&&(K=R),i.arraySet($.window,B,m-R,K,$.wnext),(R-=K)?(i.arraySet($.window,B,m-R,R,0),$.wnext=R,$.whave=$.wsize):($.wnext+=K,$.wnext===$.wsize&&($.wnext=0),$.whave<$.wsize&&($.whave+=K))),0}t.inflateReset=O,t.inflateReset2=I,t.inflateResetKeep=_,t.inflateInit=function(k){return P(k,15)},t.inflateInit2=P,t.inflate=function(k,B){var m,R,K,$,J,H,te,A,T,Q,q,Z,ue,he,se,oe,me,fe,ye,xe,d,L,V,C,S=0,M=new i.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return c;(m=k.state).mode===12&&(m.mode=13),J=k.next_out,K=k.output,te=k.avail_out,$=k.next_in,R=k.input,H=k.avail_in,A=m.hold,T=m.bits,Q=H,q=te,L=y;e:for(;;)switch(m.mode){case b:if(m.wrap===0){m.mode=13;break}for(;T<16;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}if(2&m.wrap&&A===35615){M[m.check=0]=255&A,M[1]=A>>>8&255,m.check=r(m.check,M,2,0),T=A=0,m.mode=2;break}if(m.flags=0,m.head&&(m.head.done=!1),!(1&m.wrap)||(((255&A)<<8)+(A>>8))%31){k.msg="incorrect header check",m.mode=30;break}if((15&A)!=8){k.msg="unknown compression method",m.mode=30;break}if(T-=4,d=8+(15&(A>>>=4)),m.wbits===0)m.wbits=d;else if(d>m.wbits){k.msg="invalid window size",m.mode=30;break}m.dmax=1<<d,k.adler=m.check=1,m.mode=512&A?10:12,T=A=0;break;case 2:for(;T<16;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}if(m.flags=A,(255&m.flags)!=8){k.msg="unknown compression method",m.mode=30;break}if(57344&m.flags){k.msg="unknown header flags set",m.mode=30;break}m.head&&(m.head.text=A>>8&1),512&m.flags&&(M[0]=255&A,M[1]=A>>>8&255,m.check=r(m.check,M,2,0)),T=A=0,m.mode=3;case 3:for(;T<32;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}m.head&&(m.head.time=A),512&m.flags&&(M[0]=255&A,M[1]=A>>>8&255,M[2]=A>>>16&255,M[3]=A>>>24&255,m.check=r(m.check,M,4,0)),T=A=0,m.mode=4;case 4:for(;T<16;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}m.head&&(m.head.xflags=255&A,m.head.os=A>>8),512&m.flags&&(M[0]=255&A,M[1]=A>>>8&255,m.check=r(m.check,M,2,0)),T=A=0,m.mode=5;case 5:if(1024&m.flags){for(;T<16;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}m.length=A,m.head&&(m.head.extra_len=A),512&m.flags&&(M[0]=255&A,M[1]=A>>>8&255,m.check=r(m.check,M,2,0)),T=A=0}else m.head&&(m.head.extra=null);m.mode=6;case 6:if(1024&m.flags&&(H<(Z=m.length)&&(Z=H),Z&&(m.head&&(d=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),i.arraySet(m.head.extra,R,$,Z,d)),512&m.flags&&(m.check=r(m.check,R,Z,$)),H-=Z,$+=Z,m.length-=Z),m.length))break e;m.length=0,m.mode=7;case 7:if(2048&m.flags){if(H===0)break e;for(Z=0;d=R[$+Z++],m.head&&d&&m.length<65536&&(m.head.name+=String.fromCharCode(d)),d&&Z<H;);if(512&m.flags&&(m.check=r(m.check,R,Z,$)),H-=Z,$+=Z,d)break e}else m.head&&(m.head.name=null);m.length=0,m.mode=8;case 8:if(4096&m.flags){if(H===0)break e;for(Z=0;d=R[$+Z++],m.head&&d&&m.length<65536&&(m.head.comment+=String.fromCharCode(d)),d&&Z<H;);if(512&m.flags&&(m.check=r(m.check,R,Z,$)),H-=Z,$+=Z,d)break e}else m.head&&(m.head.comment=null);m.mode=9;case 9:if(512&m.flags){for(;T<16;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}if(A!==(65535&m.check)){k.msg="header crc mismatch",m.mode=30;break}T=A=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),k.adler=m.check=0,m.mode=12;break;case 10:for(;T<32;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}k.adler=m.check=v(A),T=A=0,m.mode=11;case 11:if(m.havedict===0)return k.next_out=J,k.avail_out=te,k.next_in=$,k.avail_in=H,m.hold=A,m.bits=T,2;k.adler=m.check=1,m.mode=12;case 12:if(B===5||B===6)break e;case 13:if(m.last){A>>>=7&T,T-=7&T,m.mode=27;break}for(;T<3;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}switch(m.last=1&A,T-=1,3&(A>>>=1)){case 0:m.mode=14;break;case 1:if(N(m),m.mode=20,B!==6)break;A>>>=2,T-=2;break e;case 2:m.mode=17;break;case 3:k.msg="invalid block type",m.mode=30}A>>>=2,T-=2;break;case 14:for(A>>>=7&T,T-=7&T;T<32;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}if((65535&A)!=(A>>>16^65535)){k.msg="invalid stored block lengths",m.mode=30;break}if(m.length=65535&A,T=A=0,m.mode=15,B===6)break e;case 15:m.mode=16;case 16:if(Z=m.length){if(H<Z&&(Z=H),te<Z&&(Z=te),Z===0)break e;i.arraySet(K,R,$,Z,J),H-=Z,$+=Z,te-=Z,J+=Z,m.length-=Z;break}m.mode=12;break;case 17:for(;T<14;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}if(m.nlen=257+(31&A),A>>>=5,T-=5,m.ndist=1+(31&A),A>>>=5,T-=5,m.ncode=4+(15&A),A>>>=4,T-=4,286<m.nlen||30<m.ndist){k.msg="too many length or distance symbols",m.mode=30;break}m.have=0,m.mode=18;case 18:for(;m.have<m.ncode;){for(;T<3;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}m.lens[U[m.have++]]=7&A,A>>>=3,T-=3}for(;m.have<19;)m.lens[U[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,V={bits:m.lenbits},L=u(0,m.lens,0,19,m.lencode,0,m.work,V),m.lenbits=V.bits,L){k.msg="invalid code lengths set",m.mode=30;break}m.have=0,m.mode=19;case 19:for(;m.have<m.nlen+m.ndist;){for(;oe=(S=m.lencode[A&(1<<m.lenbits)-1])>>>16&255,me=65535&S,!((se=S>>>24)<=T);){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}if(me<16)A>>>=se,T-=se,m.lens[m.have++]=me;else{if(me===16){for(C=se+2;T<C;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}if(A>>>=se,T-=se,m.have===0){k.msg="invalid bit length repeat",m.mode=30;break}d=m.lens[m.have-1],Z=3+(3&A),A>>>=2,T-=2}else if(me===17){for(C=se+3;T<C;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}T-=se,d=0,Z=3+(7&(A>>>=se)),A>>>=3,T-=3}else{for(C=se+7;T<C;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}T-=se,d=0,Z=11+(127&(A>>>=se)),A>>>=7,T-=7}if(m.have+Z>m.nlen+m.ndist){k.msg="invalid bit length repeat",m.mode=30;break}for(;Z--;)m.lens[m.have++]=d}}if(m.mode===30)break;if(m.lens[256]===0){k.msg="invalid code -- missing end-of-block",m.mode=30;break}if(m.lenbits=9,V={bits:m.lenbits},L=u(p,m.lens,0,m.nlen,m.lencode,0,m.work,V),m.lenbits=V.bits,L){k.msg="invalid literal/lengths set",m.mode=30;break}if(m.distbits=6,m.distcode=m.distdyn,V={bits:m.distbits},L=u(h,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,V),m.distbits=V.bits,L){k.msg="invalid distances set",m.mode=30;break}if(m.mode=20,B===6)break e;case 20:m.mode=21;case 21:if(6<=H&&258<=te){k.next_out=J,k.avail_out=te,k.next_in=$,k.avail_in=H,m.hold=A,m.bits=T,l(k,q),J=k.next_out,K=k.output,te=k.avail_out,$=k.next_in,R=k.input,H=k.avail_in,A=m.hold,T=m.bits,m.mode===12&&(m.back=-1);break}for(m.back=0;oe=(S=m.lencode[A&(1<<m.lenbits)-1])>>>16&255,me=65535&S,!((se=S>>>24)<=T);){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}if(oe&&!(240&oe)){for(fe=se,ye=oe,xe=me;oe=(S=m.lencode[xe+((A&(1<<fe+ye)-1)>>fe)])>>>16&255,me=65535&S,!(fe+(se=S>>>24)<=T);){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}A>>>=fe,T-=fe,m.back+=fe}if(A>>>=se,T-=se,m.back+=se,m.length=me,oe===0){m.mode=26;break}if(32&oe){m.back=-1,m.mode=12;break}if(64&oe){k.msg="invalid literal/length code",m.mode=30;break}m.extra=15&oe,m.mode=22;case 22:if(m.extra){for(C=m.extra;T<C;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}m.length+=A&(1<<m.extra)-1,A>>>=m.extra,T-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=23;case 23:for(;oe=(S=m.distcode[A&(1<<m.distbits)-1])>>>16&255,me=65535&S,!((se=S>>>24)<=T);){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}if(!(240&oe)){for(fe=se,ye=oe,xe=me;oe=(S=m.distcode[xe+((A&(1<<fe+ye)-1)>>fe)])>>>16&255,me=65535&S,!(fe+(se=S>>>24)<=T);){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}A>>>=fe,T-=fe,m.back+=fe}if(A>>>=se,T-=se,m.back+=se,64&oe){k.msg="invalid distance code",m.mode=30;break}m.offset=me,m.extra=15&oe,m.mode=24;case 24:if(m.extra){for(C=m.extra;T<C;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}m.offset+=A&(1<<m.extra)-1,A>>>=m.extra,T-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){k.msg="invalid distance too far back",m.mode=30;break}m.mode=25;case 25:if(te===0)break e;if(Z=q-te,m.offset>Z){if((Z=m.offset-Z)>m.whave&&m.sane){k.msg="invalid distance too far back",m.mode=30;break}ue=Z>m.wnext?(Z-=m.wnext,m.wsize-Z):m.wnext-Z,Z>m.length&&(Z=m.length),he=m.window}else he=K,ue=J-m.offset,Z=m.length;for(te<Z&&(Z=te),te-=Z,m.length-=Z;K[J++]=he[ue++],--Z;);m.length===0&&(m.mode=21);break;case 26:if(te===0)break e;K[J++]=m.length,te--,m.mode=21;break;case 27:if(m.wrap){for(;T<32;){if(H===0)break e;H--,A|=R[$++]<<T,T+=8}if(q-=te,k.total_out+=q,m.total+=q,q&&(k.adler=m.check=m.flags?r(m.check,K,q,J-q):s(m.check,K,q,J-q)),q=te,(m.flags?A:v(A))!==m.check){k.msg="incorrect data check",m.mode=30;break}T=A=0}m.mode=28;case 28:if(m.wrap&&m.flags){for(;T<32;){if(H===0)break e;H--,A+=R[$++]<<T,T+=8}if(A!==(4294967295&m.total)){k.msg="incorrect length check",m.mode=30;break}T=A=0}m.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;case 32:default:return c}return k.next_out=J,k.avail_out=te,k.next_in=$,k.avail_in=H,m.hold=A,m.bits=T,(m.wsize||q!==k.avail_out&&m.mode<30&&(m.mode<27||B!==4))&&X(k,k.output,k.next_out,q-k.avail_out)?(m.mode=31,-4):(Q-=k.avail_in,q-=k.avail_out,k.total_in+=Q,k.total_out+=q,m.total+=q,m.wrap&&q&&(k.adler=m.check=m.flags?r(m.check,K,q,k.next_out-q):s(m.check,K,q,k.next_out-q)),k.data_type=m.bits+(m.last?64:0)+(m.mode===12?128:0)+(m.mode===20||m.mode===15?256:0),(Q==0&&q===0||B===4)&&L===y&&(L=-5),L)},t.inflateEnd=function(k){if(!k||!k.state)return c;var B=k.state;return B.window&&(B.window=null),k.state=null,y},t.inflateGetHeader=function(k,B){var m;return k&&k.state&&2&(m=k.state).wrap?((m.head=B).done=!1,y):c},t.inflateSetDictionary=function(k,B){var m,R=B.length;return k&&k.state?(m=k.state).wrap!==0&&m.mode!==11?c:m.mode===11&&s(1,B,R,0)!==m.check?-3:X(k,B,R,R)?(m.mode=31,-4):(m.havedict=1,y):c},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,o,t){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(p,h,y,c,b,f,g,v){var x,_,O,I,P,j,D,E,N,X=v.bits,k=0,B=0,m=0,R=0,K=0,$=0,J=0,H=0,te=0,A=0,T=null,Q=0,q=new i.Buf16(16),Z=new i.Buf16(16),ue=null,he=0;for(k=0;k<=15;k++)q[k]=0;for(B=0;B<c;B++)q[h[y+B]]++;for(K=X,R=15;1<=R&&q[R]===0;R--);if(R<K&&(K=R),R===0)return b[f++]=20971520,b[f++]=20971520,v.bits=1,0;for(m=1;m<R&&q[m]===0;m++);for(K<m&&(K=m),k=H=1;k<=15;k++)if(H<<=1,(H-=q[k])<0)return-1;if(0<H&&(p===0||R!==1))return-1;for(Z[1]=0,k=1;k<15;k++)Z[k+1]=Z[k]+q[k];for(B=0;B<c;B++)h[y+B]!==0&&(g[Z[h[y+B]]++]=B);if(j=p===0?(T=ue=g,19):p===1?(T=s,Q-=257,ue=r,he-=257,256):(T=l,ue=u,-1),k=m,P=f,J=B=A=0,O=-1,I=(te=1<<($=K))-1,p===1&&852<te||p===2&&592<te)return 1;for(;;){for(D=k-J,N=g[B]<j?(E=0,g[B]):g[B]>j?(E=ue[he+g[B]],T[Q+g[B]]):(E=96,0),x=1<<k-J,m=_=1<<$;b[P+(A>>J)+(_-=x)]=D<<24|E<<16|N|0,_!==0;);for(x=1<<k-1;A&x;)x>>=1;if(x!==0?(A&=x-1,A+=x):A=0,B++,--q[k]==0){if(k===R)break;k=h[y+g[B]]}if(K<k&&(A&I)!==O){for(J===0&&(J=K),P+=m,H=1<<($=k-J);$+J<R&&!((H-=q[$+J])<=0);)$++,H<<=1;if(te+=1<<$,p===1&&852<te||p===2&&592<te)return 1;b[O=A&I]=K<<24|$<<16|P-f|0}}return A!==0&&(b[P+A]=k-J<<24|64<<16|0),v.bits=K,0}},{"../utils/common":41}],51:[function(n,o,t){o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,o,t){var i=n("../utils/common"),s=0,r=1;function l(S){for(var M=S.length;0<=--M;)S[M]=0}var u=0,p=29,h=256,y=h+1+p,c=30,b=19,f=2*y+1,g=15,v=16,x=7,_=256,O=16,I=17,P=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(y+2));l(X);var k=new Array(2*c);l(k);var B=new Array(512);l(B);var m=new Array(256);l(m);var R=new Array(p);l(R);var K,$,J,H=new Array(c);function te(S,M,U,W,F){this.static_tree=S,this.extra_bits=M,this.extra_base=U,this.elems=W,this.max_length=F,this.has_stree=S&&S.length}function A(S,M){this.dyn_tree=S,this.max_code=0,this.stat_desc=M}function T(S){return S<256?B[S]:B[256+(S>>>7)]}function Q(S,M){S.pending_buf[S.pending++]=255&M,S.pending_buf[S.pending++]=M>>>8&255}function q(S,M,U){S.bi_valid>v-U?(S.bi_buf|=M<<S.bi_valid&65535,Q(S,S.bi_buf),S.bi_buf=M>>v-S.bi_valid,S.bi_valid+=U-v):(S.bi_buf|=M<<S.bi_valid&65535,S.bi_valid+=U)}function Z(S,M,U){q(S,U[2*M],U[2*M+1])}function ue(S,M){for(var U=0;U|=1&S,S>>>=1,U<<=1,0<--M;);return U>>>1}function he(S,M,U){var W,F,G=new Array(g+1),ee=0;for(W=1;W<=g;W++)G[W]=ee=ee+U[W-1]<<1;for(F=0;F<=M;F++){var Y=S[2*F+1];Y!==0&&(S[2*F]=ue(G[Y]++,Y))}}function se(S){var M;for(M=0;M<y;M++)S.dyn_ltree[2*M]=0;for(M=0;M<c;M++)S.dyn_dtree[2*M]=0;for(M=0;M<b;M++)S.bl_tree[2*M]=0;S.dyn_ltree[2*_]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function oe(S){8<S.bi_valid?Q(S,S.bi_buf):0<S.bi_valid&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function me(S,M,U,W){var F=2*M,G=2*U;return S[F]<S[G]||S[F]===S[G]&&W[M]<=W[U]}function fe(S,M,U){for(var W=S.heap[U],F=U<<1;F<=S.heap_len&&(F<S.heap_len&&me(M,S.heap[F+1],S.heap[F],S.depth)&&F++,!me(M,W,S.heap[F],S.depth));)S.heap[U]=S.heap[F],U=F,F<<=1;S.heap[U]=W}function ye(S,M,U){var W,F,G,ee,Y=0;if(S.last_lit!==0)for(;W=S.pending_buf[S.d_buf+2*Y]<<8|S.pending_buf[S.d_buf+2*Y+1],F=S.pending_buf[S.l_buf+Y],Y++,W===0?Z(S,F,M):(Z(S,(G=m[F])+h+1,M),(ee=j[G])!==0&&q(S,F-=R[G],ee),Z(S,G=T(--W),U),(ee=D[G])!==0&&q(S,W-=H[G],ee)),Y<S.last_lit;);Z(S,_,M)}function xe(S,M){var U,W,F,G=M.dyn_tree,ee=M.stat_desc.static_tree,Y=M.stat_desc.has_stree,ne=M.stat_desc.elems,pe=-1;for(S.heap_len=0,S.heap_max=f,U=0;U<ne;U++)G[2*U]!==0?(S.heap[++S.heap_len]=pe=U,S.depth[U]=0):G[2*U+1]=0;for(;S.heap_len<2;)G[2*(F=S.heap[++S.heap_len]=pe<2?++pe:0)]=1,S.depth[F]=0,S.opt_len--,Y&&(S.static_len-=ee[2*F+1]);for(M.max_code=pe,U=S.heap_len>>1;1<=U;U--)fe(S,G,U);for(F=ne;U=S.heap[1],S.heap[1]=S.heap[S.heap_len--],fe(S,G,1),W=S.heap[1],S.heap[--S.heap_max]=U,S.heap[--S.heap_max]=W,G[2*F]=G[2*U]+G[2*W],S.depth[F]=(S.depth[U]>=S.depth[W]?S.depth[U]:S.depth[W])+1,G[2*U+1]=G[2*W+1]=F,S.heap[1]=F++,fe(S,G,1),2<=S.heap_len;);S.heap[--S.heap_max]=S.heap[1],function(ce,Ie){var Qe,Te,et,ge,ht,Lt,Le=Ie.dyn_tree,On=Ie.max_code,ei=Ie.stat_desc.static_tree,ti=Ie.stat_desc.has_stree,ni=Ie.stat_desc.extra_bits,In=Ie.stat_desc.extra_base,tt=Ie.stat_desc.max_length,ft=0;for(ge=0;ge<=g;ge++)ce.bl_count[ge]=0;for(Le[2*ce.heap[ce.heap_max]+1]=0,Qe=ce.heap_max+1;Qe<f;Qe++)tt<(ge=Le[2*Le[2*(Te=ce.heap[Qe])+1]+1]+1)&&(ge=tt,ft++),Le[2*Te+1]=ge,On<Te||(ce.bl_count[ge]++,ht=0,In<=Te&&(ht=ni[Te-In]),Lt=Le[2*Te],ce.opt_len+=Lt*(ge+ht),ti&&(ce.static_len+=Lt*(ei[2*Te+1]+ht)));if(ft!==0){do{for(ge=tt-1;ce.bl_count[ge]===0;)ge--;ce.bl_count[ge]--,ce.bl_count[ge+1]+=2,ce.bl_count[tt]--,ft-=2}while(0<ft);for(ge=tt;ge!==0;ge--)for(Te=ce.bl_count[ge];Te!==0;)On<(et=ce.heap[--Qe])||(Le[2*et+1]!==ge&&(ce.opt_len+=(ge-Le[2*et+1])*Le[2*et],Le[2*et+1]=ge),Te--)}}(S,M),he(G,pe,S.bl_count)}function d(S,M,U){var W,F,G=-1,ee=M[1],Y=0,ne=7,pe=4;for(ee===0&&(ne=138,pe=3),M[2*(U+1)+1]=65535,W=0;W<=U;W++)F=ee,ee=M[2*(W+1)+1],++Y<ne&&F===ee||(Y<pe?S.bl_tree[2*F]+=Y:F!==0?(F!==G&&S.bl_tree[2*F]++,S.bl_tree[2*O]++):Y<=10?S.bl_tree[2*I]++:S.bl_tree[2*P]++,G=F,pe=(Y=0)===ee?(ne=138,3):F===ee?(ne=6,3):(ne=7,4))}function L(S,M,U){var W,F,G=-1,ee=M[1],Y=0,ne=7,pe=4;for(ee===0&&(ne=138,pe=3),W=0;W<=U;W++)if(F=ee,ee=M[2*(W+1)+1],!(++Y<ne&&F===ee)){if(Y<pe)for(;Z(S,F,S.bl_tree),--Y!=0;);else F!==0?(F!==G&&(Z(S,F,S.bl_tree),Y--),Z(S,O,S.bl_tree),q(S,Y-3,2)):Y<=10?(Z(S,I,S.bl_tree),q(S,Y-3,3)):(Z(S,P,S.bl_tree),q(S,Y-11,7));G=F,pe=(Y=0)===ee?(ne=138,3):F===ee?(ne=6,3):(ne=7,4)}}l(H);var V=!1;function C(S,M,U,W){q(S,(u<<1)+(W?1:0),3),function(F,G,ee,Y){oe(F),Y&&(Q(F,ee),Q(F,~ee)),i.arraySet(F.pending_buf,F.window,G,ee,F.pending),F.pending+=ee}(S,M,U,!0)}t._tr_init=function(S){V||(function(){var M,U,W,F,G,ee=new Array(g+1);for(F=W=0;F<p-1;F++)for(R[F]=W,M=0;M<1<<j[F];M++)m[W++]=F;for(m[W-1]=F,F=G=0;F<16;F++)for(H[F]=G,M=0;M<1<<D[F];M++)B[G++]=F;for(G>>=7;F<c;F++)for(H[F]=G<<7,M=0;M<1<<D[F]-7;M++)B[256+G++]=F;for(U=0;U<=g;U++)ee[U]=0;for(M=0;M<=143;)X[2*M+1]=8,M++,ee[8]++;for(;M<=255;)X[2*M+1]=9,M++,ee[9]++;for(;M<=279;)X[2*M+1]=7,M++,ee[7]++;for(;M<=287;)X[2*M+1]=8,M++,ee[8]++;for(he(X,y+1,ee),M=0;M<c;M++)k[2*M+1]=5,k[2*M]=ue(M,5);K=new te(X,j,h+1,y,g),$=new te(k,D,0,c,g),J=new te(new Array(0),E,0,b,x)}(),V=!0),S.l_desc=new A(S.dyn_ltree,K),S.d_desc=new A(S.dyn_dtree,$),S.bl_desc=new A(S.bl_tree,J),S.bi_buf=0,S.bi_valid=0,se(S)},t._tr_stored_block=C,t._tr_flush_block=function(S,M,U,W){var F,G,ee=0;0<S.level?(S.strm.data_type===2&&(S.strm.data_type=function(Y){var ne,pe=4093624447;for(ne=0;ne<=31;ne++,pe>>>=1)if(1&pe&&Y.dyn_ltree[2*ne]!==0)return s;if(Y.dyn_ltree[18]!==0||Y.dyn_ltree[20]!==0||Y.dyn_ltree[26]!==0)return r;for(ne=32;ne<h;ne++)if(Y.dyn_ltree[2*ne]!==0)return r;return s}(S)),xe(S,S.l_desc),xe(S,S.d_desc),ee=function(Y){var ne;for(d(Y,Y.dyn_ltree,Y.l_desc.max_code),d(Y,Y.dyn_dtree,Y.d_desc.max_code),xe(Y,Y.bl_desc),ne=b-1;3<=ne&&Y.bl_tree[2*N[ne]+1]===0;ne--);return Y.opt_len+=3*(ne+1)+5+5+4,ne}(S),F=S.opt_len+3+7>>>3,(G=S.static_len+3+7>>>3)<=F&&(F=G)):F=G=U+5,U+4<=F&&M!==-1?C(S,M,U,W):S.strategy===4||G===F?(q(S,2+(W?1:0),3),ye(S,X,k)):(q(S,4+(W?1:0),3),function(Y,ne,pe,ce){var Ie;for(q(Y,ne-257,5),q(Y,pe-1,5),q(Y,ce-4,4),Ie=0;Ie<ce;Ie++)q(Y,Y.bl_tree[2*N[Ie]+1],3);L(Y,Y.dyn_ltree,ne-1),L(Y,Y.dyn_dtree,pe-1)}(S,S.l_desc.max_code+1,S.d_desc.max_code+1,ee+1),ye(S,S.dyn_ltree,S.dyn_dtree)),se(S),W&&oe(S)},t._tr_tally=function(S,M,U){return S.pending_buf[S.d_buf+2*S.last_lit]=M>>>8&255,S.pending_buf[S.d_buf+2*S.last_lit+1]=255&M,S.pending_buf[S.l_buf+S.last_lit]=255&U,S.last_lit++,M===0?S.dyn_ltree[2*U]++:(S.matches++,M--,S.dyn_ltree[2*(m[U]+h+1)]++,S.dyn_dtree[2*T(M)]++),S.last_lit===S.lit_bufsize-1},t._tr_align=function(S){q(S,2,3),Z(S,_,X),function(M){M.bi_valid===16?(Q(M,M.bi_buf),M.bi_buf=0,M.bi_valid=0):8<=M.bi_valid&&(M.pending_buf[M.pending++]=255&M.bi_buf,M.bi_buf>>=8,M.bi_valid-=8)}(S)}},{"../utils/common":41}],53:[function(n,o,t){o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,o,t){(function(i){(function(s,r){if(!s.setImmediate){var l,u,p,h,y=1,c={},b=!1,f=s.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(s);g=g&&g.setTimeout?g:s,l={}.toString.call(s.process)==="[object process]"?function(O){process.nextTick(function(){x(O)})}:function(){if(s.postMessage&&!s.importScripts){var O=!0,I=s.onmessage;return s.onmessage=function(){O=!1},s.postMessage("","*"),s.onmessage=I,O}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",_,!1):s.attachEvent("onmessage",_),function(O){s.postMessage(h+O,"*")}):s.MessageChannel?((p=new MessageChannel).port1.onmessage=function(O){x(O.data)},function(O){p.port2.postMessage(O)}):f&&"onreadystatechange"in f.createElement("script")?(u=f.documentElement,function(O){var I=f.createElement("script");I.onreadystatechange=function(){x(O),I.onreadystatechange=null,u.removeChild(I),I=null},u.appendChild(I)}):function(O){setTimeout(x,0,O)},g.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var I=new Array(arguments.length-1),P=0;P<I.length;P++)I[P]=arguments[P+1];var j={callback:O,args:I};return c[y]=j,l(y),y++},g.clearImmediate=v}function v(O){delete c[O]}function x(O){if(b)setTimeout(x,0,O);else{var I=c[O];if(I){b=!0;try{(function(P){var j=P.callback,D=P.args;switch(D.length){case 0:j();break;case 1:j(D[0]);break;case 2:j(D[0],D[1]);break;case 3:j(D[0],D[1],D[2]);break;default:j.apply(r,D)}})(I)}finally{v(O),b=!1}}}}function _(O){O.source===s&&typeof O.data=="string"&&O.data.indexOf(h)===0&&x(+O.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof pt<"u"?pt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Jr);var _u=Jr.exports;const Cu=pi(_u);function ku(a){const{multipleState:e,changeMultipleState:n,selectedKeys:o,isSelectedAll:t,batchOperationCallback:i}=a,s=async()=>{var y;const l=await((y=Pe)==null?void 0:y.batchQuery(o)),u=`ComfyUI workflow ${sr(Date.now())}`,p=new Cu,h=p.folder(u);l&&l.forEach(c=>{h&&h.file(`${c.name}.json`,c.json)}),p.generateAsync({type:"blob"}).then(function(c){const b=document.createElement("a");b.href=window.URL.createObjectURL(c),b.download=`${u}.zip`,document.body.appendChild(b),b.click(),document.body.removeChild(b)})},r=o.length===0;return w.jsx(we,{spacing:2,wrap:"wrap",mb:0,children:e?w.jsxs(w.Fragment,{children:[w.jsx(Ft,{isChecked:t,onChange:l=>{i("selectAll",l.target.checked)}}),w.jsx(De,{hasArrow:!0,label:"Download Zip",placement:"bottom",children:w.jsx(be,{isDisabled:r,"aria-label":"Batch export",size:"sm",icon:w.jsx(Fi,{size:21}),onClick:s})}),w.jsx(De,{hasArrow:!0,label:"Batch deletion",children:w.jsx(Xr,{isDisabled:r,variant:"solid",promptMessage:`Are you sure you want to delete these ${o.length} checked workflows?`,tooltipText:"Delete selected",onDelete:async()=>{var l;await((l=Pe)==null?void 0:l.batchDeleteFlow(o)),i("batchDelete")}})}),o.length>0&&w.jsx(_e,{fontWeight:600,children:`Selected ${o.length}`}),w.jsx(De,{hasArrow:!0,label:"Exit multi-select",children:w.jsx(be,{"aria-label":"Close multi-select operation",size:"sm",icon:w.jsx(dn,{}),onClick:()=>{n(!1)}})})]}):w.jsx(De,{hasArrow:!0,label:"Select multiple",placement:"bottom-start",children:w.jsx(be,{"aria-label":"Start multi-select operation",size:"sm",variant:"outline",icon:w.jsx(wa,{size:21}),onClick:()=>{n(!0)}})})})}function Ou(a,e){var O,I;const n=JSON.parse(a),o=n.nodes,t=n.links,i=LiteGraph.LLink;let s={},r=app.graph.last_node_id;for(let P=0;P<o.length;P++)r++,s[o[P].id]=r;let l={},u=app.graph.last_link_id;for(let P=0;P<n.links.length;P++)u++,l[n.links[P][0]]=u;if(t&&t.constructor===Array){for(var p=[],h=0;h<t.length;++h){const P=t[h];let j=[...P];j[0]=l[P[0]],j[1]=s[P[1]],j[3]=s[P[3]];var y=new i;y.configure(j),p[y.id]=y,app.graph.links[y.id]=y}app.graph.last_link_id=u}for(var c=!1,b=!1,h=0;h<n.nodes.length;++h)c?(c[0]>n.nodes[h].pos[0]&&(c[0]=n.nodes[h].pos[0],b[0]=h),c[1]>n.nodes[h].pos[1]&&(c[1]=n.nodes[h].pos[1],b[1]=h)):(c=[n.nodes[h].pos[0],n.nodes[h].pos[1]],b=[h,h]);for(var f=[],g={},h=0;h<o.length;++h){var v=o[h],x={...v};x.id=s[v.id],(O=x.inputs)==null||O.forEach(D=>{D.link=l[D.link]}),(I=x.outputs)==null||I.forEach(D=>{var E;D.links=(E=D.links)==null?void 0:E.map(N=>l[N])});let j=e?[e[0]-11,e[1]-11]:app.canvas.graph_mouse;x.pos[0]+=j[0]-c[0],x.pos[1]+=j[1]-c[1];var _=LiteGraph.createNode(x.type);_||(LiteGraph.debug&&console.log("Node not found or has errors: "+x.type),_=new LGraphNode,_.last_serialization=x,_.has_errors=!0),_.id=x.id,app.graph.add(_,!0),f.push(_),g[_.id]=x}f.forEach(P=>{P.configure(g[P.id])})}function Iu({folder:a,onclose:e}){const[n,o]=z.useState(a.name),[t,i]=z.useState(""),{onRefreshFilesList:s}=z.useContext(Ze),r=u=>{o(u.target.value),t&&i("")},l=async()=>{var h,y;const u=n.trim();if(o(u),u===a.name)return e();(await((h=Xe)==null?void 0:h.listAll().then(c=>c.map(b=>b.name)))??[]).includes(u)?i("The name is duplicated, please modify it and submit again."):(await((y=Xe)==null?void 0:y.update({id:a.id,name:u})),s&&s(),e())};return w.jsxs(wt,{isOpen:!0,onClose:e,children:[w.jsx(St,{}),w.jsxs(_t,{children:[w.jsx(Ct,{children:"Edit folder name"}),w.jsx(kt,{}),w.jsx(Ot,{children:w.jsxs(Ai,{isInvalid:!!t,children:[w.jsx(Li,{children:"Folder name"}),w.jsx(ut,{value:n,onChange:r,autoFocus:!0,onKeyUp:u=>{u.code==="Enter"&&!t&&l()}}),t&&w.jsx(Vi,{children:t})]})}),w.jsxs(mi,{children:[w.jsx(Se,{colorScheme:"teal",mr:3,onClick:l,isDisabled:!n||!!t,children:"Save"}),w.jsx(Se,{onClick:e,children:"Cancel"})]})]})]})}function Qr({parentFolderID:a,fileInputRef:e}){const{onRefreshFilesList:n}=z.useContext(Ze),o=async t=>{var r,l;const i=t.target.files;if(!i)return;const s=[];for(const u of i)if(u.type==="image/png"){const p=await Bi(u),h=p==null?void 0:p.workflow;h&&s.push({json:h,name:u.name.replace(".png","")})}else(u.type==="application/json"||(r=u.name)!=null&&r.endsWith(".json"))&&await new Promise((p,h)=>{const y=new FileReader;y.onload=c=>{var b;try{const f=(b=c.target)==null?void 0:b.result;typeof f=="string"?(s.push({json:f,name:u.name.replace(".json","")}),p("")):h(new Error("File content is not a string"))}catch(f){h(f)}},y.onerror=h,y.readAsText(u)});s.length&&(await((l=Pe)==null?void 0:l.batchCreateFlows(s,void 0,a)),n&&n())};return w.jsx("input",{style:{display:"none"},ref:e,type:"file",accept:".json,image/png",multiple:!0,onChange:o,onClick:t=>{t.stopPropagation()}})}function Pu({menuPosition:a,isopen:e,folder:n,onClose:o}){const[t,i]=z.useState(!1),{onRefreshFilesList:s}=z.useContext(Ze),{showDialog:r}=vi(),l=async c=>{var b;c.stopPropagation(),await((b=Xe)==null?void 0:b.create({name:"New Folder",parentFolderID:n.id})),s&&s()},u=async c=>{var b;c.stopPropagation(),await((b=Pe)==null?void 0:b.createFlow({json:JSON.stringify(Ni),parentFolderID:n.id})),s&&s()},p=z.useRef(null),h=async c=>{c.stopPropagation();const b=await $i(n.id);b>0?r(`Do you want to delete the ${b} files inside the folder too?`,[{label:"Keep and move to root directory",colorScheme:"teal",onClick:()=>{y(Bt.MOVE_TO_ROOT_FOLDER)}},{label:"Delete all files",colorScheme:"red",onClick:()=>{y(Bt.DELETE)}}]):y(Bt.DELETE)},y=async c=>{var b;await((b=Xe)==null?void 0:b.deleteFolder(n.id,c)),o(),s&&s()};return w.jsxs(w.Fragment,{children:[w.jsx(de,{position:"absolute",top:a.y,left:a.x,children:w.jsx(ct,{isOpen:e,onClose:o,isLazy:!0,children:w.jsxs(Tt,{children:[w.jsx(Ve,{icon:w.jsx(Ca,{size:19}),onClick:c=>{c.preventDefault(),c.stopPropagation(),i(!0)},children:"Rename"}),w.jsx(Ve,{icon:w.jsx(fn,{size:19}),onClick:h,children:"Delete"}),w.jsx(Ve,{onClick:l,icon:w.jsx(gr,{size:19}),children:"New folder"}),w.jsx(Ve,{onClick:u,icon:w.jsx(cn,{size:19}),children:"New file"}),w.jsx(Ve,{onClick:c=>{var b;c.stopPropagation(),(b=p.current)==null||b.click()},icon:w.jsx(vr,{size:19}),children:"Import workflows"})]})})}),w.jsx(Qr,{parentFolderID:n.id,fileInputRef:p}),t&&w.jsx(Iu,{folder:n,onclose:()=>i(!1)})]})}const Eu=z.memo(function a({folder:e}){const[n,o]=z.useState(!1),[t,i]=z.useState(e.isCollapse??!1),[s,r]=z.useState([]),[l,u]=z.useState({x:0,y:0}),[p,h]=z.useState(!1),{colorMode:y}=un(),{draggingFile:c,refreshFolderStamp:b,onRefreshFilesList:f}=z.useContext(Ze),g=y==="light"?{backgroundColor:"#E2E8F0"}:{backgroundColor:"#4A5568"};z.useEffect(()=>{var x;(x=Pe)==null||x.listFolderContent(e.id,window.localStorage.getItem(qt)).then(_=>{r(_)})},[e.id,b]);const v=x=>{x.preventDefault(),u({x:x.clientX,y:x.clientY}),h(!0)};return z.useEffect(()=>{var x;!!e.isCollapse!==t&&((x=Xe)==null||x.update({id:e.id,isCollapse:t}))},[t]),w.jsxs(We,{children:[w.jsxs(we,{w:"100%",as:"button",py:1,onClick:()=>{i(!t)},onContextMenu:v,onDragOver:x=>{x.preventDefault(),o(!0)},onDragLeave:()=>{o(!1)},onDrop:async()=>{var x;c&&!st(c)&&(await((x=Pe)==null?void 0:x.updateFlow(c.id,{parentFolderID:e.id})),await(f==null?void 0:f())),o(!1)},_hover:g,style:n||p?g:void 0,children:[w.jsxs(we,{gap:1,children:[t?w.jsx(Gi,{size:20}):w.jsx(hn,{size:20}),w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.2rem",height:"1.2rem"},children:w.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})})]}),w.jsx(_e,{children:e.name}),w.jsx(Pu,{isopen:p,menuPosition:l,onClose:()=>h(!1),folder:e})]}),!t&&w.jsx(We,{ml:4,gap:0,children:s.map(x=>st(x)?w.jsx(a,{folder:x},x.id):w.jsx(qr,{workflow:x},x.id))})]})}),Mu=(a,e)=>{const[n,o]=z.useState(a);return z.useEffect(()=>{const t=setTimeout(()=>{o(a)},e);return()=>{clearTimeout(t)}},[a,e]),n},ju={position:"absolute",marginLeft:"10px",width:"20px",height:"20px",top:"50%",color:"#A0AEC0",transform:"translateY(-50%)"};function Du(a){const{searchValue:e,onUpdateSearchValue:n}=a,o=e!=="";return w.jsxs(de,{style:{position:"relative"},mb:2,children:[w.jsx(ka,{style:ju}),o&&w.jsx(be,{size:"xs",position:"absolute",right:"5px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",background:"none",zIndex:"100",icon:w.jsx(dn,{width:15,height:15}),onClick:()=>n(""),"aria-label":"clear input button"}),w.jsx(ut,{placeholder:"Search",size:"sm",paddingLeft:"35px",paddingBlock:"5px",value:e,onChange:({target:t})=>n(t.value)})]})}function Ru({}){const a=z.useRef(null);return w.jsxs(Se,{leftIcon:w.jsx(vr,{size:18}),variant:"outline",iconSpacing:1,size:"sm",colorScheme:"teal",onClick:()=>{var e;(e=a.current)==null||e.click()},children:["Import",w.jsx(Qr,{fileInputRef:a})]})}const Qn=6;function zu({setSelectedTag:a,selectedTag:e}){const[n,o]=z.useState(!1),[t,i]=z.useState([]);return z.useEffect(()=>{var s;(s=He)==null||s.listAll().then(r=>{i(r)})},[]),w.jsxs(we,{spacing:2,wrap:"wrap",mb:0,children:[e!=null&&w.jsx(be,{"aria-label":"Close",size:"sm",icon:w.jsx(dn,{}),onClick:()=>{a(void 0)}}),t.slice(0,n?void 0:Qn).map(s=>w.jsx(Se,{variant:"solid",width:"auto",flexShrink:0,size:"sm",borderRadius:15,py:4,onClick:()=>{a(s.name)},isActive:e===s.name,children:s.name},s.name)),(t.length??0)>Qn&&w.jsx(be,{"aria-label":"Show-all-tags",size:"sm",icon:n?w.jsx(ya,{}):w.jsx(hn,{}),onClick:()=>o(!n)})]})}function $u({onClose:a,onClickNewFlow:e}){const[n,o]=z.useState([]),t=z.useRef([]),i=z.useRef([]),[s,r]=z.useState(),[l,u]=z.useState(!1),[p,h]=z.useState([]),[y,c]=z.useState(0),[b,f]=z.useState(""),g=Mu(b,400),v=z.useRef(null),[x,_]=z.useState(null),O=z.useRef(window.localStorage.getItem(qt)??Mn.RECENTLY_MODIFIED),I=async()=>{var K,$;const R=await((K=Pe)==null?void 0:K.listFolderContent())??[];t.current=R,await(($=Pe)==null?void 0:$.listAll().then(J=>{i.current=J})),j(),c(Date.now())},P=!!s||!!g,j=()=>{if(P){const R=i.current.filter(K=>{var H;let $=!0,J=!0;return s&&($=!!((H=K.tags)!=null&&H.includes(s))),g&&(J=!!K.name.toLocaleLowerCase().includes(g.toLocaleLowerCase())),$&&J});o(Nt(R,O.current))}else o(Nt(t.current,O.current))},D=R=>{o(Nt(n,R)),O.current=R,window.localStorage.setItem(qt,R),!P&&c(Date.now())};z.useEffect(()=>{j()},[g,s]);const E=z.useCallback(async R=>{var K;await((K=Pe)==null?void 0:K.deleteFlow(R)),await I()},[s,g]);z.useEffect(()=>{I();const R=async K=>{var $;if(v.current){const J=await(($=Pe)==null?void 0:$.get(v.current));J&&J.json&&Ou(J.json,[K.canvasX,K.canvasY])}};return mt.canvasEl.addEventListener("drop",R),mt.canvasEl.addEventListener("click",a),()=>{mt.canvasEl.removeEventListener("drop",R),mt.canvasEl.removeEventListener("click",a)}},[]);const N=z.useCallback((R,K)=>{h($=>{const J=[...$];return K?J.push(R):J.splice(J.indexOf(R),1),J})},[]),X=(R,K)=>{switch(R){case"batchDelete":I(),u(!1),h([]);return;case"selectAll":h(K?i.current.map($=>$.id):[]);return}},k=R=>{_(R),st(R)||(v.current=R.id)},B=R=>{f(R)},m=450;return w.jsx(Ze.Provider,{value:{onRefreshFilesList:I,draggingFile:x??void 0,setDraggingFile:k,isMultiSelecting:l,onMultiSelectFlow:N,multiSelectedFlowsID:p,onDeleteFlow:E,refreshFolderStamp:y,setRefreshFolderStamp:c},children:w.jsx(de,{style:{width:m},children:w.jsxs(Ui,{width:m,height:"100vh",pl:4,pr:5,pt:4,gap:4,position:"absolute",top:0,left:0,shadow:"xl",zIndex:1e3,children:[w.jsxs(at,{alignItems:"center",justifyContent:"space-between",children:[w.jsxs(we,{gap:4,children:[w.jsx(we,{gap:2,children:w.jsx(_e,{fontSize:19,fontWeight:600,children:"☕️Workspace"})}),w.jsx(Ru,{}),w.jsx(De,{label:"Open workspace save directory",children:w.jsx(be,{"aria-label":"Open workspace save directory",size:"sm",icon:w.jsx(Hi,{}),variant:"outline",colorScheme:"teal",onClick:()=>Wi()})}),w.jsx(De,{label:"New workflow",children:w.jsx(be,{"aria-label":"New workflow",size:"sm",icon:w.jsx(cn,{}),variant:"outline",colorScheme:"teal",onClick:e})})]}),w.jsx(we,{alignItems:"center",children:w.jsx(Ra,{})})]}),w.jsxs(at,{direction:"column",h:"calc(100% - 64px)",children:[w.jsx(zu,{selectedTag:s,setSelectedTag:r}),w.jsxs(we,{mb:2,mt:2,p:0,justifyContent:"space-between",children:[w.jsxs(we,{children:[i.current.length>0?w.jsx(ku,{multipleState:l,changeMultipleState:R=>{u(R),!R&&h([])},selectedKeys:p,isSelectedAll:p.length===i.current.length,batchOperationCallback:X}):w.jsx(de,{}),!l&&w.jsx(De,{hasArrow:!0,label:"New folder",placement:"bottom-start",children:w.jsx(be,{size:"sm",variant:"outline",icon:w.jsx(gr,{size:21}),onClick:async()=>{var R;await((R=Xe)==null?void 0:R.create({name:"New Folder"})),I()},"aria-label":"new folder button"})})]}),w.jsxs(ct,{closeOnSelect:!0,children:[w.jsx(ar,{as:Se,variant:"ghost",size:"xs",pr:0,rightIcon:w.jsx(hn,{size:"16"}),children:w.jsxs(we,{children:[w.jsx(_e,{children:"Sort by:"}),w.jsx(_e,{display:"inline-block",children:O.current})]})}),w.jsx(Tt,{children:w.jsx(dr,{value:O.current,type:"radio",onChange:R=>D(R),children:Object.values(Mn).map((R,K)=>w.jsx(pn,{value:R,children:R},K))})})]})]}),w.jsx(Du,{searchValue:b,onUpdateSearchValue:B}),w.jsx(at,{overflowY:"auto",overflowX:"hidden",direction:"column",children:n.map(R=>st(R)?w.jsx(Eu,{folder:R},R.id):w.jsx(qr,{workflow:R},R.id))})]})]})})})}export{$u as default};
