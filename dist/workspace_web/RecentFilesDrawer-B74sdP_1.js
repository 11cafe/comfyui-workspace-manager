import{f as Ye,l as Bn,o as $r,j as x,g as Ue,h as Ke,W as Ur,r as F,D as Mt,v as Nn,M as vt,L as gt,N as bt,O as yt,Q as wt,R as xt,X as ut,q as Wr,U as $n,B as Se,Y as qt,S as Hr,Z as tt,$ as Zr,a0 as Gr,a1 as Yr,a2 as Un,a3 as Kr,a4 as ie,a5 as ae,a6 as Xr,a7 as Wn,V as oe,i as $e,a8 as qr,I as Jt,a9 as dn}from"./input.js";import{b as Jr,a as Qr,u as Hn,c as ei,d as ti,e as ni,S as ri,M as Zn,f as ii,g as ai,h as Ie,H as we,T as Gn,I as xe,t as We,i as Yn,j as Le,k as Oe,l as it,m as ye,R as Be,n as Kn,o as oi,s as si,w as be,p as li,q as ui,B as de,F as nt,r as Fe,v as hn,x as ci,y as Xe,z as at,A as Re,C as di,D as Xn,E as Qt,G as en,J as hi,K as qn,L as Ve,N as fi,O as pi,P as mi,Q as tn,U as vi,V as gi,W as bi,X as He,Y as $t,Z as yi,_ as wi,$ as xi,a0 as Si,a1 as _i,a2 as Ci,a3 as ki,a4 as nn,a5 as Oi,a6 as Ii,a7 as fn,a8 as Ei,a9 as Pi,aa as Mi,ab as Ft,ac as ji}from"./App-GluzE5n7.js";import{C as ot}from"./chunk-JARCRF6W-IwBcFM3i.js";import{V as pn}from"./chunk-NTCQBYKE-ZsMy4OBB.js";import{S as Di,g as zi,I as Fi,M as Ri}from"./MediaPreview-EfKQfEU-.js";import{app as ct}from"/scripts/app.js";import"/scripts/api.js";import"./index-pz0vT7Or.js";var Jn=Ye(function(e,n){const{borderLeftWidth:o,borderBottomWidth:t,borderTopWidth:i,borderRightWidth:a,borderWidth:r,borderStyle:s,borderColor:c,...f}=Bn("Divider",e),{className:p,orientation:y="horizontal",__css:u,...g}=$r(e),d={vertical:{borderLeftWidth:o||a||r||"1px",height:"100%"},horizontal:{borderBottomWidth:t||i||r||"1px",width:"100%"}};return x.jsx(Ue.hr,{ref:n,"aria-orientation":y,...g,__css:{...f,border:"0",borderColor:c,borderStyle:s,...d[y],...u},className:Ke("chakra-divider",p)})});Jn.displayName="Divider";function Ai(l,e={}){const{ssr:n=!0,fallback:o}=e,{getWindow:t}=Ur(),i=Array.isArray(l)?l:[l];let a=Array.isArray(o)?o:[o];a=a.filter(c=>c!=null);const[r,s]=F.useState(()=>i.map((c,f)=>({media:c,matches:n?!!a[f]:t().matchMedia(c).matches})));return F.useEffect(()=>{const c=t();s(i.map(y=>({media:y,matches:c.matchMedia(y).matches})));const f=i.map(y=>c.matchMedia(y)),p=y=>{s(u=>u.slice().map(g=>g.media===y.media?{...g,matches:y.matches}:g))};return f.forEach(y=>{typeof y.addListener=="function"?y.addListener(p):y.addEventListener("change",p)}),()=>{f.forEach(y=>{typeof y.removeListener=="function"?y.removeListener(p):y.removeEventListener("change",p)})}},[t]),r.map(c=>c.matches)}function Ti(l,e,n=Jr){let o=Object.keys(l).indexOf(e);if(o!==-1)return l[e];let t=n.indexOf(e);for(;t>=0;){const i=n[t];if(l.hasOwnProperty(i)){o=t;break}t-=1}if(o!==-1){const i=n[o];return l[i]}}function Li(l){var e,n;const o=Nn(l)?l:{fallback:l??"base"},i=Mt().__breakpoints.details.map(({minMaxQuery:c,breakpoint:f})=>({breakpoint:f,query:c.replace("@media screen and ","")})),a=i.map(c=>c.breakpoint===o.fallback),s=Ai(i.map(c=>c.query),{fallback:a,ssr:o.ssr}).findIndex(c=>c==!0);return(n=(e=i[s])==null?void 0:e.breakpoint)!=null?n:o.fallback}function Vi(l,e){var n;const o=Nn(e)?e:{fallback:e??"base"},t=Li(o),i=Mt();if(!t)return;const a=Array.from(((n=i.__breakpoints)==null?void 0:n.keys)||[]),r=Array.isArray(l)?Object.fromEntries(Object.entries(Qr(l,a)).map(([s,c])=>[s,c])):l;return Ti(r,t,a)}var Qn=Ye((l,e)=>{const{title:n,children:o,className:t,...i}=l,a=Ke("chakra-menu__group__title",t),r=Hn();return x.jsxs("div",{ref:e,className:"chakra-menu__group",role:"group",children:[n&&x.jsx(Ue.p,{className:a,...i,__css:r.groupTitle,children:n}),o]})});Qn.displayName="MenuGroup";var er=l=>{const{className:e,title:n,...o}=l,t=ei(o);return x.jsx(Qn,{title:n,className:Ke("chakra-menu__option-group",e),...t})};er.displayName="MenuOptionGroup";var Bi=Ye((l,e)=>{const n=Hn();return x.jsx(Ue.button,{ref:e,...l,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...n.button}})}),jt=Ye((l,e)=>{const{children:n,as:o,...t}=l,i=ti(t,e),a=o||Bi;return x.jsx(a,{...i,className:Ke("chakra-menu__menu-button",l.className),children:x.jsx(Ue.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:l.children})})});jt.displayName="MenuButton";var Ni=l=>x.jsx("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",...l,children:x.jsx("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})}),rn=Ye((l,e)=>{const{icon:n,iconSpacing:o="0.75rem",...t}=l,i=ni(t,e);return x.jsxs(ri,{...i,className:Ke("chakra-menu__menuitem-option",t.className),children:[n!==null&&x.jsx(Zn,{fontSize:"0.8em",marginEnd:o,opacity:l.isChecked?1:0,children:n||x.jsx(Ni,{})}),x.jsx("span",{style:{flex:1},children:i.children})]})});rn.id="MenuItemOption";rn.displayName="MenuItemOption";var tr=Ye(function(e,n){const{getHeaderProps:o}=ii(),t=ai();return x.jsx(Ue.header,{...o(e,n),className:Ke("chakra-popover__header",e.className),__css:t.header})});tr.displayName="PopoverHeader";var $i=Ie("chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]),Ui=Ie("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),mn=Ie("file-import","IconFileImport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3",key:"svg-1"}]]),Wi=Ie("file","IconFile",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}]]),nr=Ie("folder-plus","IconFolderPlus",[["path",{d:"M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}]]),Hi=Ie("list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]),Zi=Ie("menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]),Gi=Ie("moon","IconMoon",[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]]),Yi=Ie("pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]),Ki=Ie("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),Xi=Ie("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),qi=Ie("sun","IconSun",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]]),rr=Ie("tag","IconTag",[["path",{d:"M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z",key:"svg-1"}]]);function Ji({onclose:l}){const[e,n]=F.useState([]),o=async()=>{var i;const t=await((i=We)==null?void 0:i.listAll());n(t??[])};return F.useEffect(()=>{o()},[]),x.jsxs(vt,{isOpen:!0,onClose:l,children:[x.jsx(gt,{}),x.jsxs(bt,{children:[x.jsx(yt,{children:"My Tags"}),x.jsx(wt,{}),x.jsx(xt,{children:e.map(t=>x.jsxs(we,{children:[x.jsx(Gn,{children:t.name}),x.jsx(xe,{onClick:async()=>{var i;await((i=We)==null?void 0:i.delete(t.name)),o()},"aria-label":"delete-tag",colorScheme:"red",variant:"ghost",icon:x.jsx(Yn,{})})]}))})]})]})}function Qi(){const[l,e]=F.useState(""),[n,o]=F.useState(!1),t=()=>o(!0),i=()=>o(!1),a=async s=>{var f;s.preventDefault();let c="";s.ctrlKey&&(c+="Control+"),s.shiftKey&&(c+="Shift+"),s.altKey&&(c+="Alt+"),c.length>0&&!["Control","Shift","Alt"].includes(s.key)&&(c+=s.key.toUpperCase(),await((f=ye)==null?void 0:f.upsert({shortcuts:{save:c}})),r())},r=()=>{var s;(s=ye)==null||s.getSetting("shortcuts").then(c=>{var f;e((c==null?void 0:c.save)??((f=ye)==null?void 0:f.defaultSettings.shortcuts))})};return F.useEffect(()=>{r()},[]),x.jsxs(Le,{children:[x.jsx(Oe,{children:"Keyboard Shortcut - Save current workflow"}),n&&x.jsx(Oe,{color:"gray.500",children:"Press shortcut key combinations to setup"}),x.jsx(it,{value:l,onKeyDown:a,onFocus:t,onBlur:i,placeholder:"Press a key combination",readOnly:!0})]})}function ea(){const{setRefreshFolderStamp:l}=F.useContext(Be),[e,n]=F.useState(!1),o=()=>{var i;(i=ye)==null||i.getSetting("foldersOnTop").then(a=>{n(!!a)})},t=i=>{var r;const a=i.target.checked;(r=ye)==null||r.upsert({foldersOnTop:a}).then(()=>{o(),l(Date.now())})};return F.useEffect(()=>{o()},[]),x.jsx(Le,{children:x.jsx(ot,{isChecked:e,onChange:t,children:"Folders always on top"})})}function dt(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ir={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(l,e){(function(n){l.exports=n()})(function(){return function n(o,t,i){function a(c,f){if(!t[c]){if(!o[c]){var p=typeof dt=="function"&&dt;if(!f&&p)return p(c,!0);if(r)return r(c,!0);var y=new Error("Cannot find module '"+c+"'");throw y.code="MODULE_NOT_FOUND",y}var u=t[c]={exports:{}};o[c][0].call(u.exports,function(g){var d=o[c][1][g];return a(d||g)},u,u.exports,n,o,t,i)}return t[c].exports}for(var r=typeof dt=="function"&&dt,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(n,o,t){var i=n("./utils"),a=n("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(s){for(var c,f,p,y,u,g,d,b=[],m=0,w=s.length,_=w,C=i.getTypeOf(s)!=="string";m<s.length;)_=w-m,p=C?(c=s[m++],f=m<w?s[m++]:0,m<w?s[m++]:0):(c=s.charCodeAt(m++),f=m<w?s.charCodeAt(m++):0,m<w?s.charCodeAt(m++):0),y=c>>2,u=(3&c)<<4|f>>4,g=1<_?(15&f)<<2|p>>6:64,d=2<_?63&p:64,b.push(r.charAt(y)+r.charAt(u)+r.charAt(g)+r.charAt(d));return b.join("")},t.decode=function(s){var c,f,p,y,u,g,d=0,b=0,m="data:";if(s.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var w,_=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===r.charAt(64)&&_--,s.charAt(s.length-2)===r.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=a.uint8array?new Uint8Array(0|_):new Array(0|_);d<s.length;)c=r.indexOf(s.charAt(d++))<<2|(y=r.indexOf(s.charAt(d++)))>>4,f=(15&y)<<4|(u=r.indexOf(s.charAt(d++)))>>2,p=(3&u)<<6|(g=r.indexOf(s.charAt(d++))),w[b++]=c,u!==64&&(w[b++]=f),g!==64&&(w[b++]=p);return w}},{"./support":30,"./utils":32}],2:[function(n,o,t){var i=n("./external"),a=n("./stream/DataWorker"),r=n("./stream/Crc32Probe"),s=n("./stream/DataLengthProbe");function c(f,p,y,u,g){this.compressedSize=f,this.uncompressedSize=p,this.crc32=y,this.compression=u,this.compressedContent=g}c.prototype={getContentWorker:function(){var f=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),p=this;return f.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,p,y){return f.pipe(new r).pipe(new s("uncompressedSize")).pipe(p.compressWorker(y)).pipe(new s("compressedSize")).withStreamInfo("compression",p)},o.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,o,t){var i=n("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},t.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,o,t){var i=n("./utils"),a=function(){for(var r,s=[],c=0;c<256;c++){r=c;for(var f=0;f<8;f++)r=1&r?3988292384^r>>>1:r>>>1;s[c]=r}return s}();o.exports=function(r,s){return r!==void 0&&r.length?i.getTypeOf(r)!=="string"?function(c,f,p,y){var u=a,g=y+p;c^=-1;for(var d=y;d<g;d++)c=c>>>8^u[255&(c^f[d])];return-1^c}(0|s,r,r.length,0):function(c,f,p,y){var u=a,g=y+p;c^=-1;for(var d=y;d<g;d++)c=c>>>8^u[255&(c^f.charCodeAt(d))];return-1^c}(0|s,r,r.length,0):0}},{"./utils":32}],5:[function(n,o,t){t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(n,o,t){var i=null;i=typeof Promise<"u"?Promise:n("lie"),o.exports={Promise:i}},{lie:37}],7:[function(n,o,t){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),r=n("./utils"),s=n("./stream/GenericWorker"),c=i?"uint8array":"array";function f(p,y){s.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=y,this.meta={}}t.magic="\b\0",r.inherits(f,s),f.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(c,p.data),!1)},f.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(y){p.push({data:y,meta:p.meta})}},t.compressWorker=function(p){return new f("Deflate",p)},t.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,o,t){function i(u,g){var d,b="";for(d=0;d<g;d++)b+=String.fromCharCode(255&u),u>>>=8;return b}function a(u,g,d,b,m,w){var _,C,I=u.file,P=u.compression,E=w!==c.utf8encode,D=r.transformTo("string",w(I.name)),j=r.transformTo("string",c.utf8encode(I.name)),U=I.comment,q=r.transformTo("string",w(U)),O=r.transformTo("string",c.utf8encode(U)),L=j.length!==I.name.length,v=O.length!==U.length,B="",te="",T="",J=I.dir,N=I.date,K={crc32:0,compressedSize:0,uncompressedSize:0};g&&!d||(K.crc32=u.crc32,K.compressedSize=u.compressedSize,K.uncompressedSize=u.uncompressedSize);var A=0;g&&(A|=8),E||!L&&!v||(A|=2048);var z=0,ee=0;J&&(z|=16),m==="UNIX"?(ee=798,z|=function(Z,ce){var he=Z;return Z||(he=ce?16893:33204),(65535&he)<<16}(I.unixPermissions,J)):(ee=20,z|=function(Z){return 63&(Z||0)}(I.dosPermissions)),_=N.getUTCHours(),_<<=6,_|=N.getUTCMinutes(),_<<=5,_|=N.getUTCSeconds()/2,C=N.getUTCFullYear()-1980,C<<=4,C|=N.getUTCMonth()+1,C<<=5,C|=N.getUTCDate(),L&&(te=i(1,1)+i(f(D),4)+j,B+="up"+i(te.length,2)+te),v&&(T=i(1,1)+i(f(q),4)+O,B+="uc"+i(T.length,2)+T);var X="";return X+=`
\0`,X+=i(A,2),X+=P.magic,X+=i(_,2),X+=i(C,2),X+=i(K.crc32,4),X+=i(K.compressedSize,4),X+=i(K.uncompressedSize,4),X+=i(D.length,2),X+=i(B.length,2),{fileRecord:p.LOCAL_FILE_HEADER+X+D+B,dirRecord:p.CENTRAL_FILE_HEADER+i(ee,2)+X+i(q.length,2)+"\0\0\0\0"+i(z,4)+i(b,4)+D+B+q}}var r=n("../utils"),s=n("../stream/GenericWorker"),c=n("../utf8"),f=n("../crc32"),p=n("../signature");function y(u,g,d,b){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=d,this.encodeFileName=b,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(y,s),y.prototype.push=function(u){var g=u.meta.percent||0,d=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,s.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:d?(g+100*(d-b-1))/d:100}}))},y.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var g=this.streamFiles&&!u.file.dir;if(g){var d=a(u,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(u){this.accumulate=!1;var g=this.streamFiles&&!u.file.dir,d=a(u,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),g)this.push({data:function(b){return p.DATA_DESCRIPTOR+i(b.crc32,4)+i(b.compressedSize,4)+i(b.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var u=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var d=this.bytesWritten-u,b=function(m,w,_,C,I){var P=r.transformTo("string",I(C));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(m,2)+i(m,2)+i(w,4)+i(_,4)+i(P.length,2)+P}(this.dirRecords.length,d,u,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(u){this._sources.push(u);var g=this;return u.on("data",function(d){g.processChunk(d)}),u.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),u.on("error",function(d){g.error(d)}),this},y.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(u){var g=this._sources;if(!s.prototype.error.call(this,u))return!1;for(var d=0;d<g.length;d++)try{g[d].error(u)}catch{}return!0},y.prototype.lock=function(){s.prototype.lock.call(this);for(var u=this._sources,g=0;g<u.length;g++)u[g].lock()},o.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,o,t){var i=n("../compressions"),a=n("./ZipFileWorker");t.generateWorker=function(r,s,c){var f=new a(s.streamFiles,c,s.platform,s.encodeFileName),p=0;try{r.forEach(function(y,u){p++;var g=function(w,_){var C=w||_,I=i[C];if(!I)throw new Error(C+" is not a valid compression method !");return I}(u.options.compression,s.compression),d=u.options.compressionOptions||s.compressionOptions||{},b=u.dir,m=u.date;u._compressWorker(g,d).withStreamInfo("file",{name:y,dir:b,date:m,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(f)}),f.entriesCount=p}catch(y){f.error(y)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,o,t){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var r in this)typeof this[r]!="function"&&(a[r]=this[r]);return a}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(a,r){return new i().loadAsync(a,r)},i.external=n("./external"),o.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,o,t){var i=n("./utils"),a=n("./external"),r=n("./utf8"),s=n("./zipEntries"),c=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function p(y){return new a.Promise(function(u,g){var d=y.decompressed.getContentWorker().pipe(new c);d.on("error",function(b){g(b)}).on("end",function(){d.streamInfo.crc32!==y.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}o.exports=function(y,u){var g=this;return u=i.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),f.isNode&&f.isStream(y)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",y,!0,u.optimizedBinaryString,u.base64).then(function(d){var b=new s(u);return b.load(d),b}).then(function(d){var b=[a.Promise.resolve(d)],m=d.files;if(u.checkCRC32)for(var w=0;w<m.length;w++)b.push(p(m[w]));return a.Promise.all(b)}).then(function(d){for(var b=d.shift(),m=b.files,w=0;w<m.length;w++){var _=m[w],C=_.fileNameStr,I=i.resolve(_.fileNameStr);g.file(I,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:u.createFolders}),_.dir||(g.file(I).unsafeOriginalName=C)}return b.zipComment.length&&(g.comment=b.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,o,t){var i=n("../utils"),a=n("../stream/GenericWorker");function r(s,c){a.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(r,a),r.prototype._bindStream=function(s){var c=this;(this._stream=s).pause(),s.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},r.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,o,t){var i=n("readable-stream").Readable;function a(r,s,c){i.call(this,s),this._helper=r;var f=this;r.on("data",function(p,y){f.push(p)||f._helper.pause(),c&&c(y)}).on("error",function(p){f.emit("error",p)}).on("end",function(){f.push(null)})}n("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},o.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,o,t){o.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,a);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,a)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var a=new Buffer(i);return a.fill(0),a},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,o,t){function i(I,P,E){var D,j=r.getTypeOf(P),U=r.extend(E||{},f);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(I=m(I)),U.createFolders&&(D=b(I))&&w.call(this,D,!0);var q=j==="string"&&U.binary===!1&&U.base64===!1;E&&E.binary!==void 0||(U.binary=!q),(P instanceof p&&P.uncompressedSize===0||U.dir||!P||P.length===0)&&(U.base64=!1,U.binary=!0,P="",U.compression="STORE",j="string");var O=null;O=P instanceof p||P instanceof s?P:g.isNode&&g.isStream(P)?new d(I,P):r.prepareContent(I,P,U.binary,U.optimizedBinaryString,U.base64);var L=new y(I,O,U);this.files[I]=L}var a=n("./utf8"),r=n("./utils"),s=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),f=n("./defaults"),p=n("./compressedObject"),y=n("./zipObject"),u=n("./generate"),g=n("./nodejsUtils"),d=n("./nodejs/NodejsStreamInputAdapter"),b=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var P=I.lastIndexOf("/");return 0<P?I.substring(0,P):""},m=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},w=function(I,P){return P=P!==void 0?P:f.createFolders,I=m(I),this.files[I]||i.call(this,I,null,{dir:!0,createFolders:P}),this.files[I]};function _(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var P,E,D;for(P in this.files)D=this.files[P],(E=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&I(E,D)},filter:function(I){var P=[];return this.forEach(function(E,D){I(E,D)&&P.push(D)}),P},file:function(I,P,E){if(arguments.length!==1)return I=this.root+I,i.call(this,I,P,E),this;if(_(I)){var D=I;return this.filter(function(U,q){return!q.dir&&D.test(U)})}var j=this.files[this.root+I];return j&&!j.dir?j:null},folder:function(I){if(!I)return this;if(_(I))return this.filter(function(j,U){return U.dir&&I.test(j)});var P=this.root+I,E=w.call(this,P),D=this.clone();return D.root=E.name,D},remove:function(I){I=this.root+I;var P=this.files[I];if(P||(I.slice(-1)!=="/"&&(I+="/"),P=this.files[I]),P&&!P.dir)delete this.files[I];else for(var E=this.filter(function(j,U){return U.name.slice(0,I.length)===I}),D=0;D<E.length;D++)delete this.files[E[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var P,E={};try{if((E=r.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");r.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var D=E.comment||this.comment||"";P=u.generateWorker(this,E,D)}catch(j){(P=new s("error")).error(j)}return new c(P,E.type||"string",E.mimeType)},generateAsync:function(I,P){return this.generateInternalStream(I).accumulate(P)},generateNodeStream:function(I,P){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(P)}};o.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,o,t){o.exports=n("stream")},{stream:void 0}],17:[function(n,o,t){var i=n("./DataReader");function a(r){i.call(this,r);for(var s=0;s<this.data.length;s++)r[s]=255&r[s]}n("../utils").inherits(a,i),a.prototype.byteAt=function(r){return this.data[this.zero+r]},a.prototype.lastIndexOfSignature=function(r){for(var s=r.charCodeAt(0),c=r.charCodeAt(1),f=r.charCodeAt(2),p=r.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===s&&this.data[y+1]===c&&this.data[y+2]===f&&this.data[y+3]===p)return y-this.zero;return-1},a.prototype.readAndCheckSignature=function(r){var s=r.charCodeAt(0),c=r.charCodeAt(1),f=r.charCodeAt(2),p=r.charCodeAt(3),y=this.readData(4);return s===y[0]&&c===y[1]&&f===y[2]&&p===y[3]},a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,s},o.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,o,t){var i=n("../utils");function a(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var s,c=0;for(this.checkOffset(r),s=this.index+r-1;s>=this.index;s--)c=(c<<8)+this.byteAt(s);return this.index+=r,c},readString:function(r){return i.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},o.exports=a},{"../utils":32}],19:[function(n,o,t){var i=n("./Uint8ArrayReader");function a(r){i.call(this,r)}n("../utils").inherits(a,i),a.prototype.readData=function(r){this.checkOffset(r);var s=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,s},o.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,o,t){var i=n("./DataReader");function a(r){i.call(this,r)}n("../utils").inherits(a,i),a.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},a.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},a.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},a.prototype.readData=function(r){this.checkOffset(r);var s=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,s},o.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,o,t){var i=n("./ArrayReader");function a(r){i.call(this,r)}n("../utils").inherits(a,i),a.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,s},o.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,o,t){var i=n("../utils"),a=n("../support"),r=n("./ArrayReader"),s=n("./StringReader"),c=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");o.exports=function(p){var y=i.getTypeOf(p);return i.checkSupport(y),y!=="string"||a.uint8array?y==="nodebuffer"?new c(p):a.uint8array?new f(i.transformTo("uint8array",p)):new r(i.transformTo("array",p)):new s(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,o,t){t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,o,t){var i=n("./GenericWorker"),a=n("../utils");function r(s){i.call(this,"ConvertWorker to "+s),this.destType=s}a.inherits(r,i),r.prototype.processChunk=function(s){this.push({data:a.transformTo(this.destType,s.data),meta:s.meta})},o.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(n,o,t){var i=n("./GenericWorker"),a=n("../crc32");function r(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(r,i),r.prototype.processChunk=function(s){this.streamInfo.crc32=a(s.data,this.streamInfo.crc32||0),this.push(s)},o.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,o,t){var i=n("../utils"),a=n("./GenericWorker");function r(s){a.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}i.inherits(r,a),r.prototype.processChunk=function(s){if(s){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+s.data.length}a.prototype.processChunk.call(this,s)},o.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(n,o,t){var i=n("../utils"),a=n("./GenericWorker");function r(s){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=i.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}i.inherits(r,a),r.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,c);break;case"uint8array":s=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":s=this.data.slice(this.index,c)}return this.index=c,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(n,o,t){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,r){return this._listeners[a].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,r){if(this._listeners[a])for(var s=0;s<this._listeners[a].length;s++)this._listeners[a][s].call(this,r)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var r=this;return a.on("data",function(s){r.processChunk(s)}),a.on("end",function(){r.end()}),a.on("error",function(s){r.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,r){return this.extraStreamInfo[a]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},o.exports=i},{}],29:[function(n,o,t){var i=n("../utils"),a=n("./ConvertWorker"),r=n("./GenericWorker"),s=n("../base64"),c=n("../support"),f=n("../external"),p=null;if(c.nodestream)try{p=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(g,d){return new f.Promise(function(b,m){var w=[],_=g._internalType,C=g._outputType,I=g._mimeType;g.on("data",function(P,E){w.push(P),d&&d(E)}).on("error",function(P){w=[],m(P)}).on("end",function(){try{var P=function(E,D,j){switch(E){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),j);case"base64":return s.encode(D);default:return i.transformTo(E,D)}}(C,function(E,D){var j,U=0,q=null,O=0;for(j=0;j<D.length;j++)O+=D[j].length;switch(E){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(q=new Uint8Array(O),j=0;j<D.length;j++)q.set(D[j],U),U+=D[j].length;return q;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+E+"'")}}(_,w),I);b(P)}catch(E){m(E)}w=[]}).resume()})}function u(g,d,b){var m=d;switch(d){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=d,this._mimeType=b,i.checkSupport(m),this._worker=g.pipe(new a(m)),g.lock()}catch(w){this._worker=new r("error"),this._worker.error(w)}}u.prototype={accumulate:function(g){return y(this,g)},on:function(g,d){var b=this;return g==="data"?this._worker.on(g,function(m){d.call(b,m.data,m.meta)}):this._worker.on(g,function(){i.delay(d,arguments,b)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},g)}},o.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,o,t){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",t.nodebuffer=typeof Buffer<"u",t.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")t.blob=!1;else{var i=new ArrayBuffer(0);try{t.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),t.blob=a.getBlob("application/zip").size===0}catch{t.blob=!1}}}try{t.nodestream=!!n("readable-stream").Readable}catch{t.nodestream=!1}},{"readable-stream":16}],31:[function(n,o,t){for(var i=n("./utils"),a=n("./support"),r=n("./nodejsUtils"),s=n("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;c[254]=c[254]=1;function p(){s.call(this,"utf-8 decode"),this.leftOver=null}function y(){s.call(this,"utf-8 encode")}t.utf8encode=function(u){return a.nodebuffer?r.newBufferFrom(u,"utf-8"):function(g){var d,b,m,w,_,C=g.length,I=0;for(w=0;w<C;w++)(64512&(b=g.charCodeAt(w)))==55296&&w+1<C&&(64512&(m=g.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),w++),I+=b<128?1:b<2048?2:b<65536?3:4;for(d=a.uint8array?new Uint8Array(I):new Array(I),w=_=0;_<I;w++)(64512&(b=g.charCodeAt(w)))==55296&&w+1<C&&(64512&(m=g.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),w++),b<128?d[_++]=b:(b<2048?d[_++]=192|b>>>6:(b<65536?d[_++]=224|b>>>12:(d[_++]=240|b>>>18,d[_++]=128|b>>>12&63),d[_++]=128|b>>>6&63),d[_++]=128|63&b);return d}(u)},t.utf8decode=function(u){return a.nodebuffer?i.transformTo("nodebuffer",u).toString("utf-8"):function(g){var d,b,m,w,_=g.length,C=new Array(2*_);for(d=b=0;d<_;)if((m=g[d++])<128)C[b++]=m;else if(4<(w=c[m]))C[b++]=65533,d+=w-1;else{for(m&=w===2?31:w===3?15:7;1<w&&d<_;)m=m<<6|63&g[d++],w--;1<w?C[b++]=65533:m<65536?C[b++]=m:(m-=65536,C[b++]=55296|m>>10&1023,C[b++]=56320|1023&m)}return C.length!==b&&(C.subarray?C=C.subarray(0,b):C.length=b),i.applyFromCharCode(C)}(u=i.transformTo(a.uint8array?"uint8array":"array",u))},i.inherits(p,s),p.prototype.processChunk=function(u){var g=i.transformTo(a.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var d=g;(g=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),g.set(d,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var b=function(w,_){var C;for((_=_||w.length)>w.length&&(_=w.length),C=_-1;0<=C&&(192&w[C])==128;)C--;return C<0||C===0?_:C+c[w[C]]>_?C:_}(g),m=g;b!==g.length&&(a.uint8array?(m=g.subarray(0,b),this.leftOver=g.subarray(b,g.length)):(m=g.slice(0,b),this.leftOver=g.slice(b,g.length))),this.push({data:t.utf8decode(m),meta:u.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=p,i.inherits(y,s),y.prototype.processChunk=function(u){this.push({data:t.utf8encode(u.data),meta:u.meta})},t.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,o,t){var i=n("./support"),a=n("./base64"),r=n("./nodejsUtils"),s=n("./external");function c(d){return d}function f(d,b){for(var m=0;m<d.length;++m)b[m]=255&d.charCodeAt(m);return b}n("setimmediate"),t.newBlob=function(d,b){t.checkSupport("blob");try{return new Blob([d],{type:b})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(d),m.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(d,b,m){var w=[],_=0,C=d.length;if(C<=m)return String.fromCharCode.apply(null,d);for(;_<C;)b==="array"||b==="nodebuffer"?w.push(String.fromCharCode.apply(null,d.slice(_,Math.min(_+m,C)))):w.push(String.fromCharCode.apply(null,d.subarray(_,Math.min(_+m,C)))),_+=m;return w.join("")},stringifyByChar:function(d){for(var b="",m=0;m<d.length;m++)b+=String.fromCharCode(d[m]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function y(d){var b=65536,m=t.getTypeOf(d),w=!0;if(m==="uint8array"?w=p.applyCanBeUsed.uint8array:m==="nodebuffer"&&(w=p.applyCanBeUsed.nodebuffer),w)for(;1<b;)try{return p.stringifyByChunk(d,m,b)}catch{b=Math.floor(b/2)}return p.stringifyByChar(d)}function u(d,b){for(var m=0;m<d.length;m++)b[m]=d[m];return b}t.applyFromCharCode=y;var g={};g.string={string:c,array:function(d){return f(d,new Array(d.length))},arraybuffer:function(d){return g.string.uint8array(d).buffer},uint8array:function(d){return f(d,new Uint8Array(d.length))},nodebuffer:function(d){return f(d,r.allocBuffer(d.length))}},g.array={string:y,array:c,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return r.newBufferFrom(d)}},g.arraybuffer={string:function(d){return y(new Uint8Array(d))},array:function(d){return u(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:c,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return r.newBufferFrom(new Uint8Array(d))}},g.uint8array={string:y,array:function(d){return u(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:c,nodebuffer:function(d){return r.newBufferFrom(d)}},g.nodebuffer={string:y,array:function(d){return u(d,new Array(d.length))},arraybuffer:function(d){return g.nodebuffer.uint8array(d).buffer},uint8array:function(d){return u(d,new Uint8Array(d.length))},nodebuffer:c},t.transformTo=function(d,b){if(b=b||"",!d)return b;t.checkSupport(d);var m=t.getTypeOf(b);return g[m][d](b)},t.resolve=function(d){for(var b=d.split("/"),m=[],w=0;w<b.length;w++){var _=b[w];_==="."||_===""&&w!==0&&w!==b.length-1||(_===".."?m.pop():m.push(_))}return m.join("/")},t.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":i.nodebuffer&&r.isBuffer(d)?"nodebuffer":i.uint8array&&d instanceof Uint8Array?"uint8array":i.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(d){if(!i[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(d){var b,m,w="";for(m=0;m<(d||"").length;m++)w+="\\x"+((b=d.charCodeAt(m))<16?"0":"")+b.toString(16).toUpperCase();return w},t.delay=function(d,b,m){setImmediate(function(){d.apply(m||null,b||[])})},t.inherits=function(d,b){function m(){}m.prototype=b.prototype,d.prototype=new m},t.extend=function(){var d,b,m={};for(d=0;d<arguments.length;d++)for(b in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],b)&&m[b]===void 0&&(m[b]=arguments[d][b]);return m},t.prepareContent=function(d,b,m,w,_){return s.Promise.resolve(b).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new s.Promise(function(I,P){var E=new FileReader;E.onload=function(D){I(D.target.result)},E.onerror=function(D){P(D.target.error)},E.readAsArrayBuffer(C)}):C}).then(function(C){var I=t.getTypeOf(C);return I?(I==="arraybuffer"?C=t.transformTo("uint8array",C):I==="string"&&(_?C=a.decode(C):m&&w!==!0&&(C=function(P){return f(P,i.uint8array?new Uint8Array(P.length):new Array(P.length))}(C))),C):s.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,o,t){var i=n("./reader/readerFor"),a=n("./utils"),r=n("./signature"),s=n("./zipEntry"),c=n("./support");function f(p){this.files=[],this.loadOptions=p}f.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(y)+", expected "+a.pretty(p)+")")}},isSignature:function(p,y){var u=this.reader.index;this.reader.setIndex(p);var g=this.reader.readString(4)===y;return this.reader.setIndex(u),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),y=c.uint8array?"uint8array":"array",u=a.transformTo(y,p);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,y,u,g=this.zip64EndOfCentralSize-44;0<g;)p=this.reader.readInt(2),y=this.reader.readInt(4),u=this.reader.readData(y),this.zip64ExtensibleData[p]={id:p,length:y,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,y;for(p=0;p<this.files.length;p++)y=this.files[p],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(p=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var y=p;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var g=y-u;if(0<g)this.isSignature(y,r.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(p){this.reader=i(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,o,t){var i=n("./reader/readerFor"),a=n("./utils"),r=n("./compressedObject"),s=n("./crc32"),c=n("./utf8"),f=n("./compressions"),p=n("./support");function y(u,g){this.options=u,this.loadOptions=g}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var g,d;if(u.skip(22),this.fileNameLength=u.readInt(2),d=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(b){for(var m in f)if(Object.prototype.hasOwnProperty.call(f,m)&&f[m].magic===b)return f[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,g,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var g=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(g),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var g,d,b,m=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<m;)g=u.readInt(2),d=u.readInt(2),b=u.readData(d),this.extraFields[g]={id:g,length:d,value:b};u.setIndex(m)},handleUTF8:function(){var u=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var d=a.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var m=a.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var g=i(u.value);return g.readInt(1)!==1||s(this.fileName)!==g.readInt(4)?null:c.utf8decode(g.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var g=i(u.value);return g.readInt(1)!==1||s(this.fileComment)!==g.readInt(4)?null:c.utf8decode(g.readData(u.length-5))}return null}},o.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,o,t){function i(g,d,b){this.name=g,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=d,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var a=n("./stream/StreamHelper"),r=n("./stream/DataWorker"),s=n("./utf8"),c=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(g){var d=null,b="string";try{if(!g)throw new Error("No output type specified.");var m=(b=g.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),d=this._decompressWorker();var w=!this._dataBinary;w&&!m&&(d=d.pipe(new s.Utf8EncodeWorker)),!w&&m&&(d=d.pipe(new s.Utf8DecodeWorker))}catch(_){(d=new f("error")).error(_)}return new a(d,b,"")},async:function(g,d){return this.internalStream(g).accumulate(d)},nodeStream:function(g,d){return this.internalStream(g||"nodebuffer").toNodejsStream(d)},_compressWorker:function(g,d){if(this._data instanceof c&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new s.Utf8EncodeWorker)),c.createWorkerFrom(b,g,d)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof f?this._data:new r(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<p.length;u++)i.prototype[p[u]]=y;o.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,o,t){(function(i){var a,r,s=i.MutationObserver||i.WebKitMutationObserver;if(s){var c=0,f=new s(g),p=i.document.createTextNode("");f.observe(p,{characterData:!0}),a=function(){p.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var d=i.document.createElement("script");d.onreadystatechange=function(){g(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},i.document.documentElement.appendChild(d)}:function(){setTimeout(g,0)};else{var y=new i.MessageChannel;y.port1.onmessage=g,a=function(){y.port2.postMessage(0)}}var u=[];function g(){var d,b;r=!0;for(var m=u.length;m;){for(b=u,u=[],d=-1;++d<m;)b[d]();m=u.length}r=!1}o.exports=function(d){u.push(d)!==1||r||a()}}).call(this,typeof ut<"u"?ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,o,t){var i=n("immediate");function a(){}var r={},s=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function p(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,m!==a&&d(this,m)}function y(m,w,_){this.promise=m,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function u(m,w,_){i(function(){var C;try{C=w(_)}catch(I){return r.reject(m,I)}C===m?r.reject(m,new TypeError("Cannot resolve promise with itself")):r.resolve(m,C)})}function g(m){var w=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof w=="function")return function(){w.apply(m,arguments)}}function d(m,w){var _=!1;function C(E){_||(_=!0,r.reject(m,E))}function I(E){_||(_=!0,r.resolve(m,E))}var P=b(function(){w(I,C)});P.status==="error"&&C(P.value)}function b(m,w){var _={};try{_.value=m(w),_.status="success"}catch(C){_.status="error",_.value=C}return _}(o.exports=p).prototype.finally=function(m){if(typeof m!="function")return this;var w=this.constructor;return this.then(function(_){return w.resolve(m()).then(function(){return _})},function(_){return w.resolve(m()).then(function(){throw _})})},p.prototype.catch=function(m){return this.then(null,m)},p.prototype.then=function(m,w){if(typeof m!="function"&&this.state===c||typeof w!="function"&&this.state===s)return this;var _=new this.constructor(a);return this.state!==f?u(_,this.state===c?m:w,this.outcome):this.queue.push(new y(_,m,w)),_},y.prototype.callFulfilled=function(m){r.resolve(this.promise,m)},y.prototype.otherCallFulfilled=function(m){u(this.promise,this.onFulfilled,m)},y.prototype.callRejected=function(m){r.reject(this.promise,m)},y.prototype.otherCallRejected=function(m){u(this.promise,this.onRejected,m)},r.resolve=function(m,w){var _=b(g,w);if(_.status==="error")return r.reject(m,_.value);var C=_.value;if(C)d(m,C);else{m.state=c,m.outcome=w;for(var I=-1,P=m.queue.length;++I<P;)m.queue[I].callFulfilled(w)}return m},r.reject=function(m,w){m.state=s,m.outcome=w;for(var _=-1,C=m.queue.length;++_<C;)m.queue[_].callRejected(w);return m},p.resolve=function(m){return m instanceof this?m:r.resolve(new this(a),m)},p.reject=function(m){var w=new this(a);return r.reject(w,m)},p.all=function(m){var w=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=m.length,C=!1;if(!_)return this.resolve([]);for(var I=new Array(_),P=0,E=-1,D=new this(a);++E<_;)j(m[E],E);return D;function j(U,q){w.resolve(U).then(function(O){I[q]=O,++P!==_||C||(C=!0,r.resolve(D,I))},function(O){C||(C=!0,r.reject(D,O))})}},p.race=function(m){var w=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=m.length,C=!1;if(!_)return this.resolve([]);for(var I=-1,P=new this(a);++I<_;)E=m[I],w.resolve(E).then(function(D){C||(C=!0,r.resolve(P,D))},function(D){C||(C=!0,r.reject(P,D))});var E;return P}},{immediate:36}],38:[function(n,o,t){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),o.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,o,t){var i=n("./zlib/deflate"),a=n("./utils/common"),r=n("./utils/strings"),s=n("./zlib/messages"),c=n("./zlib/zstream"),f=Object.prototype.toString,p=0,y=-1,u=0,g=8;function d(m){if(!(this instanceof d))return new d(m);this.options=a.assign({level:y,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},m||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var _=i.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(_!==p)throw new Error(s[_]);if(w.header&&i.deflateSetHeader(this.strm,w.header),w.dictionary){var C;if(C=typeof w.dictionary=="string"?r.string2buf(w.dictionary):f.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(_=i.deflateSetDictionary(this.strm,C))!==p)throw new Error(s[_]);this._dict_set=!0}}function b(m,w){var _=new d(w);if(_.push(m,!0),_.err)throw _.msg||s[_.err];return _.result}d.prototype.push=function(m,w){var _,C,I=this.strm,P=this.options.chunkSize;if(this.ended)return!1;C=w===~~w?w:w===!0?4:0,typeof m=="string"?I.input=r.string2buf(m):f.call(m)==="[object ArrayBuffer]"?I.input=new Uint8Array(m):I.input=m,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new a.Buf8(P),I.next_out=0,I.avail_out=P),(_=i.deflate(I,C))!==1&&_!==p)return this.onEnd(_),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(a.shrinkBuf(I.output,I.next_out))):this.onData(a.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&_!==1);return C===4?(_=i.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===p):C!==2||(this.onEnd(p),!(I.avail_out=0))},d.prototype.onData=function(m){this.chunks.push(m)},d.prototype.onEnd=function(m){m===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},t.Deflate=d,t.deflate=b,t.deflateRaw=function(m,w){return(w=w||{}).raw=!0,b(m,w)},t.gzip=function(m,w){return(w=w||{}).gzip=!0,b(m,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,o,t){var i=n("./zlib/inflate"),a=n("./utils/common"),r=n("./utils/strings"),s=n("./zlib/constants"),c=n("./zlib/messages"),f=n("./zlib/zstream"),p=n("./zlib/gzheader"),y=Object.prototype.toString;function u(d){if(!(this instanceof u))return new u(d);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},d||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||d&&d.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var m=i.inflateInit2(this.strm,b.windowBits);if(m!==s.Z_OK)throw new Error(c[m]);this.header=new p,i.inflateGetHeader(this.strm,this.header)}function g(d,b){var m=new u(b);if(m.push(d,!0),m.err)throw m.msg||c[m.err];return m.result}u.prototype.push=function(d,b){var m,w,_,C,I,P,E=this.strm,D=this.options.chunkSize,j=this.options.dictionary,U=!1;if(this.ended)return!1;w=b===~~b?b:b===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof d=="string"?E.input=r.binstring2buf(d):y.call(d)==="[object ArrayBuffer]"?E.input=new Uint8Array(d):E.input=d,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(D),E.next_out=0,E.avail_out=D),(m=i.inflate(E,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&j&&(P=typeof j=="string"?r.string2buf(j):y.call(j)==="[object ArrayBuffer]"?new Uint8Array(j):j,m=i.inflateSetDictionary(this.strm,P)),m===s.Z_BUF_ERROR&&U===!0&&(m=s.Z_OK,U=!1),m!==s.Z_STREAM_END&&m!==s.Z_OK)return this.onEnd(m),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&m!==s.Z_STREAM_END&&(E.avail_in!==0||w!==s.Z_FINISH&&w!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=r.utf8border(E.output,E.next_out),C=E.next_out-_,I=r.buf2string(E.output,_),E.next_out=C,E.avail_out=D-C,C&&a.arraySet(E.output,E.output,_,C,0),this.onData(I)):this.onData(a.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(U=!0)}while((0<E.avail_in||E.avail_out===0)&&m!==s.Z_STREAM_END);return m===s.Z_STREAM_END&&(w=s.Z_FINISH),w===s.Z_FINISH?(m=i.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===s.Z_OK):w!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(E.avail_out=0))},u.prototype.onData=function(d){this.chunks.push(d)},u.prototype.onEnd=function(d){d===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},t.Inflate=u,t.inflate=g,t.inflateRaw=function(d,b){return(b=b||{}).raw=!0,g(d,b)},t.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,o,t){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";t.assign=function(s){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var p in f)f.hasOwnProperty(p)&&(s[p]=f[p])}}return s},t.shrinkBuf=function(s,c){return s.length===c?s:s.subarray?s.subarray(0,c):(s.length=c,s)};var a={arraySet:function(s,c,f,p,y){if(c.subarray&&s.subarray)s.set(c.subarray(f,f+p),y);else for(var u=0;u<p;u++)s[y+u]=c[f+u]},flattenChunks:function(s){var c,f,p,y,u,g;for(c=p=0,f=s.length;c<f;c++)p+=s[c].length;for(g=new Uint8Array(p),c=y=0,f=s.length;c<f;c++)u=s[c],g.set(u,y),y+=u.length;return g}},r={arraySet:function(s,c,f,p,y){for(var u=0;u<p;u++)s[y+u]=c[f+u]},flattenChunks:function(s){return[].concat.apply([],s)}};t.setTyped=function(s){s?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(i)},{}],42:[function(n,o,t){var i=n("./common"),a=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var s=new i.Buf8(256),c=0;c<256;c++)s[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(p,y){if(y<65537&&(p.subarray&&r||!p.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(p,y));for(var u="",g=0;g<y;g++)u+=String.fromCharCode(p[g]);return u}s[254]=s[254]=1,t.string2buf=function(p){var y,u,g,d,b,m=p.length,w=0;for(d=0;d<m;d++)(64512&(u=p.charCodeAt(d)))==55296&&d+1<m&&(64512&(g=p.charCodeAt(d+1)))==56320&&(u=65536+(u-55296<<10)+(g-56320),d++),w+=u<128?1:u<2048?2:u<65536?3:4;for(y=new i.Buf8(w),d=b=0;b<w;d++)(64512&(u=p.charCodeAt(d)))==55296&&d+1<m&&(64512&(g=p.charCodeAt(d+1)))==56320&&(u=65536+(u-55296<<10)+(g-56320),d++),u<128?y[b++]=u:(u<2048?y[b++]=192|u>>>6:(u<65536?y[b++]=224|u>>>12:(y[b++]=240|u>>>18,y[b++]=128|u>>>12&63),y[b++]=128|u>>>6&63),y[b++]=128|63&u);return y},t.buf2binstring=function(p){return f(p,p.length)},t.binstring2buf=function(p){for(var y=new i.Buf8(p.length),u=0,g=y.length;u<g;u++)y[u]=p.charCodeAt(u);return y},t.buf2string=function(p,y){var u,g,d,b,m=y||p.length,w=new Array(2*m);for(u=g=0;u<m;)if((d=p[u++])<128)w[g++]=d;else if(4<(b=s[d]))w[g++]=65533,u+=b-1;else{for(d&=b===2?31:b===3?15:7;1<b&&u<m;)d=d<<6|63&p[u++],b--;1<b?w[g++]=65533:d<65536?w[g++]=d:(d-=65536,w[g++]=55296|d>>10&1023,w[g++]=56320|1023&d)}return f(w,g)},t.utf8border=function(p,y){var u;for((y=y||p.length)>p.length&&(y=p.length),u=y-1;0<=u&&(192&p[u])==128;)u--;return u<0||u===0?y:u+s[p[u]]>y?u:y}},{"./common":41}],43:[function(n,o,t){o.exports=function(i,a,r,s){for(var c=65535&i|0,f=i>>>16&65535|0,p=0;r!==0;){for(r-=p=2e3<r?2e3:r;f=f+(c=c+a[s++]|0)|0,--p;);c%=65521,f%=65521}return c|f<<16|0}},{}],44:[function(n,o,t){o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,o,t){var i=function(){for(var a,r=[],s=0;s<256;s++){a=s;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;r[s]=a}return r}();o.exports=function(a,r,s,c){var f=i,p=c+s;a^=-1;for(var y=c;y<p;y++)a=a>>>8^f[255&(a^r[y])];return-1^a}},{}],46:[function(n,o,t){var i,a=n("../utils/common"),r=n("./trees"),s=n("./adler32"),c=n("./crc32"),f=n("./messages"),p=0,y=4,u=0,g=-2,d=-1,b=4,m=2,w=8,_=9,C=286,I=30,P=19,E=2*C+1,D=15,j=3,U=258,q=U+j+1,O=42,L=113,v=1,B=2,te=3,T=4;function J(h,$){return h.msg=f[$],$}function N(h){return(h<<1)-(4<h?9:0)}function K(h){for(var $=h.length;0<=--$;)h[$]=0}function A(h){var $=h.state,V=$.pending;V>h.avail_out&&(V=h.avail_out),V!==0&&(a.arraySet(h.output,$.pending_buf,$.pending_out,V,h.next_out),h.next_out+=V,$.pending_out+=V,h.total_out+=V,h.avail_out-=V,$.pending-=V,$.pending===0&&($.pending_out=0))}function z(h,$){r._tr_flush_block(h,0<=h.block_start?h.block_start:-1,h.strstart-h.block_start,$),h.block_start=h.strstart,A(h.strm)}function ee(h,$){h.pending_buf[h.pending++]=$}function X(h,$){h.pending_buf[h.pending++]=$>>>8&255,h.pending_buf[h.pending++]=255&$}function Z(h,$){var V,k,S=h.max_chain_length,M=h.strstart,W=h.prev_length,H=h.nice_match,R=h.strstart>h.w_size-q?h.strstart-(h.w_size-q):0,G=h.window,Q=h.w_mask,Y=h.prev,ne=h.strstart+U,fe=G[M+W-1],ue=G[M+W];h.prev_length>=h.good_match&&(S>>=2),H>h.lookahead&&(H=h.lookahead);do if(G[(V=$)+W]===ue&&G[V+W-1]===fe&&G[V]===G[M]&&G[++V]===G[M+1]){M+=2,V++;do;while(G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&G[++M]===G[++V]&&M<ne);if(k=U-(ne-M),M=ne-U,W<k){if(h.match_start=$,H<=(W=k))break;fe=G[M+W-1],ue=G[M+W]}}while(($=Y[$&Q])>R&&--S!=0);return W<=h.lookahead?W:h.lookahead}function ce(h){var $,V,k,S,M,W,H,R,G,Q,Y=h.w_size;do{if(S=h.window_size-h.lookahead-h.strstart,h.strstart>=Y+(Y-q)){for(a.arraySet(h.window,h.window,Y,Y,0),h.match_start-=Y,h.strstart-=Y,h.block_start-=Y,$=V=h.hash_size;k=h.head[--$],h.head[$]=Y<=k?k-Y:0,--V;);for($=V=Y;k=h.prev[--$],h.prev[$]=Y<=k?k-Y:0,--V;);S+=Y}if(h.strm.avail_in===0)break;if(W=h.strm,H=h.window,R=h.strstart+h.lookahead,G=S,Q=void 0,Q=W.avail_in,G<Q&&(Q=G),V=Q===0?0:(W.avail_in-=Q,a.arraySet(H,W.input,W.next_in,Q,R),W.state.wrap===1?W.adler=s(W.adler,H,Q,R):W.state.wrap===2&&(W.adler=c(W.adler,H,Q,R)),W.next_in+=Q,W.total_in+=Q,Q),h.lookahead+=V,h.lookahead+h.insert>=j)for(M=h.strstart-h.insert,h.ins_h=h.window[M],h.ins_h=(h.ins_h<<h.hash_shift^h.window[M+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[M+j-1])&h.hash_mask,h.prev[M&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=M,M++,h.insert--,!(h.lookahead+h.insert<j)););}while(h.lookahead<q&&h.strm.avail_in!==0)}function he(h,$){for(var V,k;;){if(h.lookahead<q){if(ce(h),h.lookahead<q&&$===p)return v;if(h.lookahead===0)break}if(V=0,h.lookahead>=j&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+j-1])&h.hash_mask,V=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),V!==0&&h.strstart-V<=h.w_size-q&&(h.match_length=Z(h,V)),h.match_length>=j)if(k=r._tr_tally(h,h.strstart-h.match_start,h.match_length-j),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=j){for(h.match_length--;h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+j-1])&h.hash_mask,V=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart,--h.match_length!=0;);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else k=r._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(k&&(z(h,!1),h.strm.avail_out===0))return v}return h.insert=h.strstart<j-1?h.strstart:j-1,$===y?(z(h,!0),h.strm.avail_out===0?te:T):h.last_lit&&(z(h,!1),h.strm.avail_out===0)?v:B}function se(h,$){for(var V,k,S;;){if(h.lookahead<q){if(ce(h),h.lookahead<q&&$===p)return v;if(h.lookahead===0)break}if(V=0,h.lookahead>=j&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+j-1])&h.hash_mask,V=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=j-1,V!==0&&h.prev_length<h.max_lazy_match&&h.strstart-V<=h.w_size-q&&(h.match_length=Z(h,V),h.match_length<=5&&(h.strategy===1||h.match_length===j&&4096<h.strstart-h.match_start)&&(h.match_length=j-1)),h.prev_length>=j&&h.match_length<=h.prev_length){for(S=h.strstart+h.lookahead-j,k=r._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-j),h.lookahead-=h.prev_length-1,h.prev_length-=2;++h.strstart<=S&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+j-1])&h.hash_mask,V=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),--h.prev_length!=0;);if(h.match_available=0,h.match_length=j-1,h.strstart++,k&&(z(h,!1),h.strm.avail_out===0))return v}else if(h.match_available){if((k=r._tr_tally(h,0,h.window[h.strstart-1]))&&z(h,!1),h.strstart++,h.lookahead--,h.strm.avail_out===0)return v}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(k=r._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<j-1?h.strstart:j-1,$===y?(z(h,!0),h.strm.avail_out===0?te:T):h.last_lit&&(z(h,!1),h.strm.avail_out===0)?v:B}function le(h,$,V,k,S){this.good_length=h,this.max_lazy=$,this.nice_length=V,this.max_chain=k,this.func=S}function ge(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*E),this.dyn_dtree=new a.Buf16(2*(2*I+1)),this.bl_tree=new a.Buf16(2*(2*P+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(D+1),this.heap=new a.Buf16(2*C+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*C+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function pe(h){var $;return h&&h.state?(h.total_in=h.total_out=0,h.data_type=m,($=h.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?O:L,h.adler=$.wrap===2?0:1,$.last_flush=p,r._tr_init($),u):J(h,g)}function Ce(h){var $=pe(h);return $===u&&function(V){V.window_size=2*V.w_size,K(V.head),V.max_lazy_match=i[V.level].max_lazy,V.good_match=i[V.level].good_length,V.nice_match=i[V.level].nice_length,V.max_chain_length=i[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=j-1,V.match_available=0,V.ins_h=0}(h.state),$}function ke(h,$,V,k,S,M){if(!h)return g;var W=1;if($===d&&($=6),k<0?(W=0,k=-k):15<k&&(W=2,k-=16),S<1||_<S||V!==w||k<8||15<k||$<0||9<$||M<0||b<M)return J(h,g);k===8&&(k=9);var H=new ge;return(h.state=H).strm=h,H.wrap=W,H.gzhead=null,H.w_bits=k,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=S+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+j-1)/j),H.window=new a.Buf8(2*H.w_size),H.head=new a.Buf16(H.hash_size),H.prev=new a.Buf16(H.w_size),H.lit_bufsize=1<<S+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new a.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=$,H.strategy=M,H.method=V,Ce(h)}i=[new le(0,0,0,0,function(h,$){var V=65535;for(V>h.pending_buf_size-5&&(V=h.pending_buf_size-5);;){if(h.lookahead<=1){if(ce(h),h.lookahead===0&&$===p)return v;if(h.lookahead===0)break}h.strstart+=h.lookahead,h.lookahead=0;var k=h.block_start+V;if((h.strstart===0||h.strstart>=k)&&(h.lookahead=h.strstart-k,h.strstart=k,z(h,!1),h.strm.avail_out===0)||h.strstart-h.block_start>=h.w_size-q&&(z(h,!1),h.strm.avail_out===0))return v}return h.insert=0,$===y?(z(h,!0),h.strm.avail_out===0?te:T):(h.strstart>h.block_start&&(z(h,!1),h.strm.avail_out),v)}),new le(4,4,8,4,he),new le(4,5,16,8,he),new le(4,6,32,32,he),new le(4,4,16,16,se),new le(8,16,32,32,se),new le(8,16,128,128,se),new le(8,32,128,256,se),new le(32,128,258,1024,se),new le(32,258,258,4096,se)],t.deflateInit=function(h,$){return ke(h,$,w,15,8,0)},t.deflateInit2=ke,t.deflateReset=Ce,t.deflateResetKeep=pe,t.deflateSetHeader=function(h,$){return h&&h.state?h.state.wrap!==2?g:(h.state.gzhead=$,u):g},t.deflate=function(h,$){var V,k,S,M;if(!h||!h.state||5<$||$<0)return h?J(h,g):g;if(k=h.state,!h.output||!h.input&&h.avail_in!==0||k.status===666&&$!==y)return J(h,h.avail_out===0?-5:g);if(k.strm=h,V=k.last_flush,k.last_flush=$,k.status===O)if(k.wrap===2)h.adler=0,ee(k,31),ee(k,139),ee(k,8),k.gzhead?(ee(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),ee(k,255&k.gzhead.time),ee(k,k.gzhead.time>>8&255),ee(k,k.gzhead.time>>16&255),ee(k,k.gzhead.time>>24&255),ee(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),ee(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(ee(k,255&k.gzhead.extra.length),ee(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(h.adler=c(h.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(ee(k,0),ee(k,0),ee(k,0),ee(k,0),ee(k,0),ee(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),ee(k,3),k.status=L);else{var W=w+(k.w_bits-8<<4)<<8;W|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&(W|=32),W+=31-W%31,k.status=L,X(k,W),k.strstart!==0&&(X(k,h.adler>>>16),X(k,65535&h.adler)),h.adler=1}if(k.status===69)if(k.gzhead.extra){for(S=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>S&&(h.adler=c(h.adler,k.pending_buf,k.pending-S,S)),A(h),S=k.pending,k.pending!==k.pending_buf_size));)ee(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>S&&(h.adler=c(h.adler,k.pending_buf,k.pending-S,S)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){S=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>S&&(h.adler=c(h.adler,k.pending_buf,k.pending-S,S)),A(h),S=k.pending,k.pending===k.pending_buf_size)){M=1;break}M=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,ee(k,M)}while(M!==0);k.gzhead.hcrc&&k.pending>S&&(h.adler=c(h.adler,k.pending_buf,k.pending-S,S)),M===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){S=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>S&&(h.adler=c(h.adler,k.pending_buf,k.pending-S,S)),A(h),S=k.pending,k.pending===k.pending_buf_size)){M=1;break}M=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,ee(k,M)}while(M!==0);k.gzhead.hcrc&&k.pending>S&&(h.adler=c(h.adler,k.pending_buf,k.pending-S,S)),M===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&A(h),k.pending+2<=k.pending_buf_size&&(ee(k,255&h.adler),ee(k,h.adler>>8&255),h.adler=0,k.status=L)):k.status=L),k.pending!==0){if(A(h),h.avail_out===0)return k.last_flush=-1,u}else if(h.avail_in===0&&N($)<=N(V)&&$!==y)return J(h,-5);if(k.status===666&&h.avail_in!==0)return J(h,-5);if(h.avail_in!==0||k.lookahead!==0||$!==p&&k.status!==666){var H=k.strategy===2?function(R,G){for(var Q;;){if(R.lookahead===0&&(ce(R),R.lookahead===0)){if(G===p)return v;break}if(R.match_length=0,Q=r._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,Q&&(z(R,!1),R.strm.avail_out===0))return v}return R.insert=0,G===y?(z(R,!0),R.strm.avail_out===0?te:T):R.last_lit&&(z(R,!1),R.strm.avail_out===0)?v:B}(k,$):k.strategy===3?function(R,G){for(var Q,Y,ne,fe,ue=R.window;;){if(R.lookahead<=U){if(ce(R),R.lookahead<=U&&G===p)return v;if(R.lookahead===0)break}if(R.match_length=0,R.lookahead>=j&&0<R.strstart&&(Y=ue[ne=R.strstart-1])===ue[++ne]&&Y===ue[++ne]&&Y===ue[++ne]){fe=R.strstart+U;do;while(Y===ue[++ne]&&Y===ue[++ne]&&Y===ue[++ne]&&Y===ue[++ne]&&Y===ue[++ne]&&Y===ue[++ne]&&Y===ue[++ne]&&Y===ue[++ne]&&ne<fe);R.match_length=U-(fe-ne),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=j?(Q=r._tr_tally(R,1,R.match_length-j),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(Q=r._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),Q&&(z(R,!1),R.strm.avail_out===0))return v}return R.insert=0,G===y?(z(R,!0),R.strm.avail_out===0?te:T):R.last_lit&&(z(R,!1),R.strm.avail_out===0)?v:B}(k,$):i[k.level].func(k,$);if(H!==te&&H!==T||(k.status=666),H===v||H===te)return h.avail_out===0&&(k.last_flush=-1),u;if(H===B&&($===1?r._tr_align(k):$!==5&&(r._tr_stored_block(k,0,0,!1),$===3&&(K(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),A(h),h.avail_out===0))return k.last_flush=-1,u}return $!==y?u:k.wrap<=0?1:(k.wrap===2?(ee(k,255&h.adler),ee(k,h.adler>>8&255),ee(k,h.adler>>16&255),ee(k,h.adler>>24&255),ee(k,255&h.total_in),ee(k,h.total_in>>8&255),ee(k,h.total_in>>16&255),ee(k,h.total_in>>24&255)):(X(k,h.adler>>>16),X(k,65535&h.adler)),A(h),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?u:1)},t.deflateEnd=function(h){var $;return h&&h.state?($=h.state.status)!==O&&$!==69&&$!==73&&$!==91&&$!==103&&$!==L&&$!==666?J(h,g):(h.state=null,$===L?J(h,-3):u):g},t.deflateSetDictionary=function(h,$){var V,k,S,M,W,H,R,G,Q=$.length;if(!h||!h.state||(M=(V=h.state).wrap)===2||M===1&&V.status!==O||V.lookahead)return g;for(M===1&&(h.adler=s(h.adler,$,Q,0)),V.wrap=0,Q>=V.w_size&&(M===0&&(K(V.head),V.strstart=0,V.block_start=0,V.insert=0),G=new a.Buf8(V.w_size),a.arraySet(G,$,Q-V.w_size,V.w_size,0),$=G,Q=V.w_size),W=h.avail_in,H=h.next_in,R=h.input,h.avail_in=Q,h.next_in=0,h.input=$,ce(V);V.lookahead>=j;){for(k=V.strstart,S=V.lookahead-(j-1);V.ins_h=(V.ins_h<<V.hash_shift^V.window[k+j-1])&V.hash_mask,V.prev[k&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=k,k++,--S;);V.strstart=k,V.lookahead=j-1,ce(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=j-1,V.match_available=0,h.next_in=H,h.input=R,h.avail_in=W,V.wrap=M,u},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,o,t){o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,o,t){o.exports=function(i,a){var r,s,c,f,p,y,u,g,d,b,m,w,_,C,I,P,E,D,j,U,q,O,L,v,B;r=i.state,s=i.next_in,v=i.input,c=s+(i.avail_in-5),f=i.next_out,B=i.output,p=f-(a-i.avail_out),y=f+(i.avail_out-257),u=r.dmax,g=r.wsize,d=r.whave,b=r.wnext,m=r.window,w=r.hold,_=r.bits,C=r.lencode,I=r.distcode,P=(1<<r.lenbits)-1,E=(1<<r.distbits)-1;e:do{_<15&&(w+=v[s++]<<_,_+=8,w+=v[s++]<<_,_+=8),D=C[w&P];t:for(;;){if(w>>>=j=D>>>24,_-=j,(j=D>>>16&255)===0)B[f++]=65535&D;else{if(!(16&j)){if(!(64&j)){D=C[(65535&D)+(w&(1<<j)-1)];continue t}if(32&j){r.mode=12;break e}i.msg="invalid literal/length code",r.mode=30;break e}U=65535&D,(j&=15)&&(_<j&&(w+=v[s++]<<_,_+=8),U+=w&(1<<j)-1,w>>>=j,_-=j),_<15&&(w+=v[s++]<<_,_+=8,w+=v[s++]<<_,_+=8),D=I[w&E];n:for(;;){if(w>>>=j=D>>>24,_-=j,!(16&(j=D>>>16&255))){if(!(64&j)){D=I[(65535&D)+(w&(1<<j)-1)];continue n}i.msg="invalid distance code",r.mode=30;break e}if(q=65535&D,_<(j&=15)&&(w+=v[s++]<<_,(_+=8)<j&&(w+=v[s++]<<_,_+=8)),u<(q+=w&(1<<j)-1)){i.msg="invalid distance too far back",r.mode=30;break e}if(w>>>=j,_-=j,(j=f-p)<q){if(d<(j=q-j)&&r.sane){i.msg="invalid distance too far back",r.mode=30;break e}if(L=m,(O=0)===b){if(O+=g-j,j<U){for(U-=j;B[f++]=m[O++],--j;);O=f-q,L=B}}else if(b<j){if(O+=g+b-j,(j-=b)<U){for(U-=j;B[f++]=m[O++],--j;);if(O=0,b<U){for(U-=j=b;B[f++]=m[O++],--j;);O=f-q,L=B}}}else if(O+=b-j,j<U){for(U-=j;B[f++]=m[O++],--j;);O=f-q,L=B}for(;2<U;)B[f++]=L[O++],B[f++]=L[O++],B[f++]=L[O++],U-=3;U&&(B[f++]=L[O++],1<U&&(B[f++]=L[O++]))}else{for(O=f-q;B[f++]=B[O++],B[f++]=B[O++],B[f++]=B[O++],2<(U-=3););U&&(B[f++]=B[O++],1<U&&(B[f++]=B[O++]))}break}}break}}while(s<c&&f<y);s-=U=_>>3,w&=(1<<(_-=U<<3))-1,i.next_in=s,i.next_out=f,i.avail_in=s<c?c-s+5:5-(s-c),i.avail_out=f<y?y-f+257:257-(f-y),r.hold=w,r.bits=_}},{}],49:[function(n,o,t){var i=n("../utils/common"),a=n("./adler32"),r=n("./crc32"),s=n("./inffast"),c=n("./inftrees"),f=1,p=2,y=0,u=-2,g=1,d=852,b=592;function m(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(O){var L;return O&&O.state?(L=O.state,O.total_in=O.total_out=L.total=0,O.msg="",L.wrap&&(O.adler=1&L.wrap),L.mode=g,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new i.Buf32(d),L.distcode=L.distdyn=new i.Buf32(b),L.sane=1,L.back=-1,y):u}function C(O){var L;return O&&O.state?((L=O.state).wsize=0,L.whave=0,L.wnext=0,_(O)):u}function I(O,L){var v,B;return O&&O.state?(B=O.state,L<0?(v=0,L=-L):(v=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?u:(B.window!==null&&B.wbits!==L&&(B.window=null),B.wrap=v,B.wbits=L,C(O))):u}function P(O,L){var v,B;return O?(B=new w,(O.state=B).window=null,(v=I(O,L))!==y&&(O.state=null),v):u}var E,D,j=!0;function U(O){if(j){var L;for(E=new i.Buf32(512),D=new i.Buf32(32),L=0;L<144;)O.lens[L++]=8;for(;L<256;)O.lens[L++]=9;for(;L<280;)O.lens[L++]=7;for(;L<288;)O.lens[L++]=8;for(c(f,O.lens,0,288,E,0,O.work,{bits:9}),L=0;L<32;)O.lens[L++]=5;c(p,O.lens,0,32,D,0,O.work,{bits:5}),j=!1}O.lencode=E,O.lenbits=9,O.distcode=D,O.distbits=5}function q(O,L,v,B){var te,T=O.state;return T.window===null&&(T.wsize=1<<T.wbits,T.wnext=0,T.whave=0,T.window=new i.Buf8(T.wsize)),B>=T.wsize?(i.arraySet(T.window,L,v-T.wsize,T.wsize,0),T.wnext=0,T.whave=T.wsize):(B<(te=T.wsize-T.wnext)&&(te=B),i.arraySet(T.window,L,v-B,te,T.wnext),(B-=te)?(i.arraySet(T.window,L,v-B,B,0),T.wnext=B,T.whave=T.wsize):(T.wnext+=te,T.wnext===T.wsize&&(T.wnext=0),T.whave<T.wsize&&(T.whave+=te))),0}t.inflateReset=C,t.inflateReset2=I,t.inflateResetKeep=_,t.inflateInit=function(O){return P(O,15)},t.inflateInit2=P,t.inflate=function(O,L){var v,B,te,T,J,N,K,A,z,ee,X,Z,ce,he,se,le,ge,pe,Ce,ke,h,$,V,k,S=0,M=new i.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return u;(v=O.state).mode===12&&(v.mode=13),J=O.next_out,te=O.output,K=O.avail_out,T=O.next_in,B=O.input,N=O.avail_in,A=v.hold,z=v.bits,ee=N,X=K,$=y;e:for(;;)switch(v.mode){case g:if(v.wrap===0){v.mode=13;break}for(;z<16;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}if(2&v.wrap&&A===35615){M[v.check=0]=255&A,M[1]=A>>>8&255,v.check=r(v.check,M,2,0),z=A=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&A)<<8)+(A>>8))%31){O.msg="incorrect header check",v.mode=30;break}if((15&A)!=8){O.msg="unknown compression method",v.mode=30;break}if(z-=4,h=8+(15&(A>>>=4)),v.wbits===0)v.wbits=h;else if(h>v.wbits){O.msg="invalid window size",v.mode=30;break}v.dmax=1<<h,O.adler=v.check=1,v.mode=512&A?10:12,z=A=0;break;case 2:for(;z<16;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}if(v.flags=A,(255&v.flags)!=8){O.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){O.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=A>>8&1),512&v.flags&&(M[0]=255&A,M[1]=A>>>8&255,v.check=r(v.check,M,2,0)),z=A=0,v.mode=3;case 3:for(;z<32;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}v.head&&(v.head.time=A),512&v.flags&&(M[0]=255&A,M[1]=A>>>8&255,M[2]=A>>>16&255,M[3]=A>>>24&255,v.check=r(v.check,M,4,0)),z=A=0,v.mode=4;case 4:for(;z<16;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}v.head&&(v.head.xflags=255&A,v.head.os=A>>8),512&v.flags&&(M[0]=255&A,M[1]=A>>>8&255,v.check=r(v.check,M,2,0)),z=A=0,v.mode=5;case 5:if(1024&v.flags){for(;z<16;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}v.length=A,v.head&&(v.head.extra_len=A),512&v.flags&&(M[0]=255&A,M[1]=A>>>8&255,v.check=r(v.check,M,2,0)),z=A=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(N<(Z=v.length)&&(Z=N),Z&&(v.head&&(h=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),i.arraySet(v.head.extra,B,T,Z,h)),512&v.flags&&(v.check=r(v.check,B,Z,T)),N-=Z,T+=Z,v.length-=Z),v.length))break e;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(N===0)break e;for(Z=0;h=B[T+Z++],v.head&&h&&v.length<65536&&(v.head.name+=String.fromCharCode(h)),h&&Z<N;);if(512&v.flags&&(v.check=r(v.check,B,Z,T)),N-=Z,T+=Z,h)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(N===0)break e;for(Z=0;h=B[T+Z++],v.head&&h&&v.length<65536&&(v.head.comment+=String.fromCharCode(h)),h&&Z<N;);if(512&v.flags&&(v.check=r(v.check,B,Z,T)),N-=Z,T+=Z,h)break e}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;z<16;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}if(A!==(65535&v.check)){O.msg="header crc mismatch",v.mode=30;break}z=A=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),O.adler=v.check=0,v.mode=12;break;case 10:for(;z<32;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}O.adler=v.check=m(A),z=A=0,v.mode=11;case 11:if(v.havedict===0)return O.next_out=J,O.avail_out=K,O.next_in=T,O.avail_in=N,v.hold=A,v.bits=z,2;O.adler=v.check=1,v.mode=12;case 12:if(L===5||L===6)break e;case 13:if(v.last){A>>>=7&z,z-=7&z,v.mode=27;break}for(;z<3;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}switch(v.last=1&A,z-=1,3&(A>>>=1)){case 0:v.mode=14;break;case 1:if(U(v),v.mode=20,L!==6)break;A>>>=2,z-=2;break e;case 2:v.mode=17;break;case 3:O.msg="invalid block type",v.mode=30}A>>>=2,z-=2;break;case 14:for(A>>>=7&z,z-=7&z;z<32;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}if((65535&A)!=(A>>>16^65535)){O.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&A,z=A=0,v.mode=15,L===6)break e;case 15:v.mode=16;case 16:if(Z=v.length){if(N<Z&&(Z=N),K<Z&&(Z=K),Z===0)break e;i.arraySet(te,B,T,Z,J),N-=Z,T+=Z,K-=Z,J+=Z,v.length-=Z;break}v.mode=12;break;case 17:for(;z<14;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}if(v.nlen=257+(31&A),A>>>=5,z-=5,v.ndist=1+(31&A),A>>>=5,z-=5,v.ncode=4+(15&A),A>>>=4,z-=4,286<v.nlen||30<v.ndist){O.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;z<3;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}v.lens[W[v.have++]]=7&A,A>>>=3,z-=3}for(;v.have<19;)v.lens[W[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,V={bits:v.lenbits},$=c(0,v.lens,0,19,v.lencode,0,v.work,V),v.lenbits=V.bits,$){O.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;le=(S=v.lencode[A&(1<<v.lenbits)-1])>>>16&255,ge=65535&S,!((se=S>>>24)<=z);){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}if(ge<16)A>>>=se,z-=se,v.lens[v.have++]=ge;else{if(ge===16){for(k=se+2;z<k;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}if(A>>>=se,z-=se,v.have===0){O.msg="invalid bit length repeat",v.mode=30;break}h=v.lens[v.have-1],Z=3+(3&A),A>>>=2,z-=2}else if(ge===17){for(k=se+3;z<k;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}z-=se,h=0,Z=3+(7&(A>>>=se)),A>>>=3,z-=3}else{for(k=se+7;z<k;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}z-=se,h=0,Z=11+(127&(A>>>=se)),A>>>=7,z-=7}if(v.have+Z>v.nlen+v.ndist){O.msg="invalid bit length repeat",v.mode=30;break}for(;Z--;)v.lens[v.have++]=h}}if(v.mode===30)break;if(v.lens[256]===0){O.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,V={bits:v.lenbits},$=c(f,v.lens,0,v.nlen,v.lencode,0,v.work,V),v.lenbits=V.bits,$){O.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,V={bits:v.distbits},$=c(p,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,V),v.distbits=V.bits,$){O.msg="invalid distances set",v.mode=30;break}if(v.mode=20,L===6)break e;case 20:v.mode=21;case 21:if(6<=N&&258<=K){O.next_out=J,O.avail_out=K,O.next_in=T,O.avail_in=N,v.hold=A,v.bits=z,s(O,X),J=O.next_out,te=O.output,K=O.avail_out,T=O.next_in,B=O.input,N=O.avail_in,A=v.hold,z=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;le=(S=v.lencode[A&(1<<v.lenbits)-1])>>>16&255,ge=65535&S,!((se=S>>>24)<=z);){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}if(le&&!(240&le)){for(pe=se,Ce=le,ke=ge;le=(S=v.lencode[ke+((A&(1<<pe+Ce)-1)>>pe)])>>>16&255,ge=65535&S,!(pe+(se=S>>>24)<=z);){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}A>>>=pe,z-=pe,v.back+=pe}if(A>>>=se,z-=se,v.back+=se,v.length=ge,le===0){v.mode=26;break}if(32&le){v.back=-1,v.mode=12;break}if(64&le){O.msg="invalid literal/length code",v.mode=30;break}v.extra=15&le,v.mode=22;case 22:if(v.extra){for(k=v.extra;z<k;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}v.length+=A&(1<<v.extra)-1,A>>>=v.extra,z-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;le=(S=v.distcode[A&(1<<v.distbits)-1])>>>16&255,ge=65535&S,!((se=S>>>24)<=z);){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}if(!(240&le)){for(pe=se,Ce=le,ke=ge;le=(S=v.distcode[ke+((A&(1<<pe+Ce)-1)>>pe)])>>>16&255,ge=65535&S,!(pe+(se=S>>>24)<=z);){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}A>>>=pe,z-=pe,v.back+=pe}if(A>>>=se,z-=se,v.back+=se,64&le){O.msg="invalid distance code",v.mode=30;break}v.offset=ge,v.extra=15&le,v.mode=24;case 24:if(v.extra){for(k=v.extra;z<k;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}v.offset+=A&(1<<v.extra)-1,A>>>=v.extra,z-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){O.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(K===0)break e;if(Z=X-K,v.offset>Z){if((Z=v.offset-Z)>v.whave&&v.sane){O.msg="invalid distance too far back",v.mode=30;break}ce=Z>v.wnext?(Z-=v.wnext,v.wsize-Z):v.wnext-Z,Z>v.length&&(Z=v.length),he=v.window}else he=te,ce=J-v.offset,Z=v.length;for(K<Z&&(Z=K),K-=Z,v.length-=Z;te[J++]=he[ce++],--Z;);v.length===0&&(v.mode=21);break;case 26:if(K===0)break e;te[J++]=v.length,K--,v.mode=21;break;case 27:if(v.wrap){for(;z<32;){if(N===0)break e;N--,A|=B[T++]<<z,z+=8}if(X-=K,O.total_out+=X,v.total+=X,X&&(O.adler=v.check=v.flags?r(v.check,te,X,J-X):a(v.check,te,X,J-X)),X=K,(v.flags?A:m(A))!==v.check){O.msg="incorrect data check",v.mode=30;break}z=A=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;z<32;){if(N===0)break e;N--,A+=B[T++]<<z,z+=8}if(A!==(4294967295&v.total)){O.msg="incorrect length check",v.mode=30;break}z=A=0}v.mode=29;case 29:$=1;break e;case 30:$=-3;break e;case 31:return-4;case 32:default:return u}return O.next_out=J,O.avail_out=K,O.next_in=T,O.avail_in=N,v.hold=A,v.bits=z,(v.wsize||X!==O.avail_out&&v.mode<30&&(v.mode<27||L!==4))&&q(O,O.output,O.next_out,X-O.avail_out)?(v.mode=31,-4):(ee-=O.avail_in,X-=O.avail_out,O.total_in+=ee,O.total_out+=X,v.total+=X,v.wrap&&X&&(O.adler=v.check=v.flags?r(v.check,te,X,O.next_out-X):a(v.check,te,X,O.next_out-X)),O.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(ee==0&&X===0||L===4)&&$===y&&($=-5),$)},t.inflateEnd=function(O){if(!O||!O.state)return u;var L=O.state;return L.window&&(L.window=null),O.state=null,y},t.inflateGetHeader=function(O,L){var v;return O&&O.state&&2&(v=O.state).wrap?((v.head=L).done=!1,y):u},t.inflateSetDictionary=function(O,L){var v,B=L.length;return O&&O.state?(v=O.state).wrap!==0&&v.mode!==11?u:v.mode===11&&a(1,L,B,0)!==v.check?-3:q(O,L,B,B)?(v.mode=31,-4):(v.havedict=1,y):u},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,o,t){var i=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(f,p,y,u,g,d,b,m){var w,_,C,I,P,E,D,j,U,q=m.bits,O=0,L=0,v=0,B=0,te=0,T=0,J=0,N=0,K=0,A=0,z=null,ee=0,X=new i.Buf16(16),Z=new i.Buf16(16),ce=null,he=0;for(O=0;O<=15;O++)X[O]=0;for(L=0;L<u;L++)X[p[y+L]]++;for(te=q,B=15;1<=B&&X[B]===0;B--);if(B<te&&(te=B),B===0)return g[d++]=20971520,g[d++]=20971520,m.bits=1,0;for(v=1;v<B&&X[v]===0;v++);for(te<v&&(te=v),O=N=1;O<=15;O++)if(N<<=1,(N-=X[O])<0)return-1;if(0<N&&(f===0||B!==1))return-1;for(Z[1]=0,O=1;O<15;O++)Z[O+1]=Z[O]+X[O];for(L=0;L<u;L++)p[y+L]!==0&&(b[Z[p[y+L]]++]=L);if(E=f===0?(z=ce=b,19):f===1?(z=a,ee-=257,ce=r,he-=257,256):(z=s,ce=c,-1),O=v,P=d,J=L=A=0,C=-1,I=(K=1<<(T=te))-1,f===1&&852<K||f===2&&592<K)return 1;for(;;){for(D=O-J,U=b[L]<E?(j=0,b[L]):b[L]>E?(j=ce[he+b[L]],z[ee+b[L]]):(j=96,0),w=1<<O-J,v=_=1<<T;g[P+(A>>J)+(_-=w)]=D<<24|j<<16|U|0,_!==0;);for(w=1<<O-1;A&w;)w>>=1;if(w!==0?(A&=w-1,A+=w):A=0,L++,--X[O]==0){if(O===B)break;O=p[y+b[L]]}if(te<O&&(A&I)!==C){for(J===0&&(J=te),P+=v,N=1<<(T=O-J);T+J<B&&!((N-=X[T+J])<=0);)T++,N<<=1;if(K+=1<<T,f===1&&852<K||f===2&&592<K)return 1;g[C=A&I]=te<<24|T<<16|P-d|0}}return A!==0&&(g[P+A]=O-J<<24|64<<16|0),m.bits=te,0}},{"../utils/common":41}],51:[function(n,o,t){o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,o,t){var i=n("../utils/common"),a=0,r=1;function s(S){for(var M=S.length;0<=--M;)S[M]=0}var c=0,f=29,p=256,y=p+1+f,u=30,g=19,d=2*y+1,b=15,m=16,w=7,_=256,C=16,I=17,P=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(y+2));s(q);var O=new Array(2*u);s(O);var L=new Array(512);s(L);var v=new Array(256);s(v);var B=new Array(f);s(B);var te,T,J,N=new Array(u);function K(S,M,W,H,R){this.static_tree=S,this.extra_bits=M,this.extra_base=W,this.elems=H,this.max_length=R,this.has_stree=S&&S.length}function A(S,M){this.dyn_tree=S,this.max_code=0,this.stat_desc=M}function z(S){return S<256?L[S]:L[256+(S>>>7)]}function ee(S,M){S.pending_buf[S.pending++]=255&M,S.pending_buf[S.pending++]=M>>>8&255}function X(S,M,W){S.bi_valid>m-W?(S.bi_buf|=M<<S.bi_valid&65535,ee(S,S.bi_buf),S.bi_buf=M>>m-S.bi_valid,S.bi_valid+=W-m):(S.bi_buf|=M<<S.bi_valid&65535,S.bi_valid+=W)}function Z(S,M,W){X(S,W[2*M],W[2*M+1])}function ce(S,M){for(var W=0;W|=1&S,S>>>=1,W<<=1,0<--M;);return W>>>1}function he(S,M,W){var H,R,G=new Array(b+1),Q=0;for(H=1;H<=b;H++)G[H]=Q=Q+W[H-1]<<1;for(R=0;R<=M;R++){var Y=S[2*R+1];Y!==0&&(S[2*R]=ce(G[Y]++,Y))}}function se(S){var M;for(M=0;M<y;M++)S.dyn_ltree[2*M]=0;for(M=0;M<u;M++)S.dyn_dtree[2*M]=0;for(M=0;M<g;M++)S.bl_tree[2*M]=0;S.dyn_ltree[2*_]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function le(S){8<S.bi_valid?ee(S,S.bi_buf):0<S.bi_valid&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function ge(S,M,W,H){var R=2*M,G=2*W;return S[R]<S[G]||S[R]===S[G]&&H[M]<=H[W]}function pe(S,M,W){for(var H=S.heap[W],R=W<<1;R<=S.heap_len&&(R<S.heap_len&&ge(M,S.heap[R+1],S.heap[R],S.depth)&&R++,!ge(M,H,S.heap[R],S.depth));)S.heap[W]=S.heap[R],W=R,R<<=1;S.heap[W]=H}function Ce(S,M,W){var H,R,G,Q,Y=0;if(S.last_lit!==0)for(;H=S.pending_buf[S.d_buf+2*Y]<<8|S.pending_buf[S.d_buf+2*Y+1],R=S.pending_buf[S.l_buf+Y],Y++,H===0?Z(S,R,M):(Z(S,(G=v[R])+p+1,M),(Q=E[G])!==0&&X(S,R-=B[G],Q),Z(S,G=z(--H),W),(Q=D[G])!==0&&X(S,H-=N[G],Q)),Y<S.last_lit;);Z(S,_,M)}function ke(S,M){var W,H,R,G=M.dyn_tree,Q=M.stat_desc.static_tree,Y=M.stat_desc.has_stree,ne=M.stat_desc.elems,fe=-1;for(S.heap_len=0,S.heap_max=d,W=0;W<ne;W++)G[2*W]!==0?(S.heap[++S.heap_len]=fe=W,S.depth[W]=0):G[2*W+1]=0;for(;S.heap_len<2;)G[2*(R=S.heap[++S.heap_len]=fe<2?++fe:0)]=1,S.depth[R]=0,S.opt_len--,Y&&(S.static_len-=Q[2*R+1]);for(M.max_code=fe,W=S.heap_len>>1;1<=W;W--)pe(S,G,W);for(R=ne;W=S.heap[1],S.heap[1]=S.heap[S.heap_len--],pe(S,G,1),H=S.heap[1],S.heap[--S.heap_max]=W,S.heap[--S.heap_max]=H,G[2*R]=G[2*W]+G[2*H],S.depth[R]=(S.depth[W]>=S.depth[H]?S.depth[W]:S.depth[H])+1,G[2*W+1]=G[2*H+1]=R,S.heap[1]=R++,pe(S,G,1),2<=S.heap_len;);S.heap[--S.heap_max]=S.heap[1],function(ue,Ee){var qe,ze,Je,ve,st,zt,Ae=Ee.dyn_tree,un=Ee.max_code,Vr=Ee.stat_desc.static_tree,Br=Ee.stat_desc.has_stree,Nr=Ee.stat_desc.extra_bits,cn=Ee.stat_desc.extra_base,Qe=Ee.stat_desc.max_length,lt=0;for(ve=0;ve<=b;ve++)ue.bl_count[ve]=0;for(Ae[2*ue.heap[ue.heap_max]+1]=0,qe=ue.heap_max+1;qe<d;qe++)Qe<(ve=Ae[2*Ae[2*(ze=ue.heap[qe])+1]+1]+1)&&(ve=Qe,lt++),Ae[2*ze+1]=ve,un<ze||(ue.bl_count[ve]++,st=0,cn<=ze&&(st=Nr[ze-cn]),zt=Ae[2*ze],ue.opt_len+=zt*(ve+st),Br&&(ue.static_len+=zt*(Vr[2*ze+1]+st)));if(lt!==0){do{for(ve=Qe-1;ue.bl_count[ve]===0;)ve--;ue.bl_count[ve]--,ue.bl_count[ve+1]+=2,ue.bl_count[Qe]--,lt-=2}while(0<lt);for(ve=Qe;ve!==0;ve--)for(ze=ue.bl_count[ve];ze!==0;)un<(Je=ue.heap[--qe])||(Ae[2*Je+1]!==ve&&(ue.opt_len+=(ve-Ae[2*Je+1])*Ae[2*Je],Ae[2*Je+1]=ve),ze--)}}(S,M),he(G,fe,S.bl_count)}function h(S,M,W){var H,R,G=-1,Q=M[1],Y=0,ne=7,fe=4;for(Q===0&&(ne=138,fe=3),M[2*(W+1)+1]=65535,H=0;H<=W;H++)R=Q,Q=M[2*(H+1)+1],++Y<ne&&R===Q||(Y<fe?S.bl_tree[2*R]+=Y:R!==0?(R!==G&&S.bl_tree[2*R]++,S.bl_tree[2*C]++):Y<=10?S.bl_tree[2*I]++:S.bl_tree[2*P]++,G=R,fe=(Y=0)===Q?(ne=138,3):R===Q?(ne=6,3):(ne=7,4))}function $(S,M,W){var H,R,G=-1,Q=M[1],Y=0,ne=7,fe=4;for(Q===0&&(ne=138,fe=3),H=0;H<=W;H++)if(R=Q,Q=M[2*(H+1)+1],!(++Y<ne&&R===Q)){if(Y<fe)for(;Z(S,R,S.bl_tree),--Y!=0;);else R!==0?(R!==G&&(Z(S,R,S.bl_tree),Y--),Z(S,C,S.bl_tree),X(S,Y-3,2)):Y<=10?(Z(S,I,S.bl_tree),X(S,Y-3,3)):(Z(S,P,S.bl_tree),X(S,Y-11,7));G=R,fe=(Y=0)===Q?(ne=138,3):R===Q?(ne=6,3):(ne=7,4)}}s(N);var V=!1;function k(S,M,W,H){X(S,(c<<1)+(H?1:0),3),function(R,G,Q,Y){le(R),Y&&(ee(R,Q),ee(R,~Q)),i.arraySet(R.pending_buf,R.window,G,Q,R.pending),R.pending+=Q}(S,M,W,!0)}t._tr_init=function(S){V||(function(){var M,W,H,R,G,Q=new Array(b+1);for(R=H=0;R<f-1;R++)for(B[R]=H,M=0;M<1<<E[R];M++)v[H++]=R;for(v[H-1]=R,R=G=0;R<16;R++)for(N[R]=G,M=0;M<1<<D[R];M++)L[G++]=R;for(G>>=7;R<u;R++)for(N[R]=G<<7,M=0;M<1<<D[R]-7;M++)L[256+G++]=R;for(W=0;W<=b;W++)Q[W]=0;for(M=0;M<=143;)q[2*M+1]=8,M++,Q[8]++;for(;M<=255;)q[2*M+1]=9,M++,Q[9]++;for(;M<=279;)q[2*M+1]=7,M++,Q[7]++;for(;M<=287;)q[2*M+1]=8,M++,Q[8]++;for(he(q,y+1,Q),M=0;M<u;M++)O[2*M+1]=5,O[2*M]=ce(M,5);te=new K(q,E,p+1,y,b),T=new K(O,D,0,u,b),J=new K(new Array(0),j,0,g,w)}(),V=!0),S.l_desc=new A(S.dyn_ltree,te),S.d_desc=new A(S.dyn_dtree,T),S.bl_desc=new A(S.bl_tree,J),S.bi_buf=0,S.bi_valid=0,se(S)},t._tr_stored_block=k,t._tr_flush_block=function(S,M,W,H){var R,G,Q=0;0<S.level?(S.strm.data_type===2&&(S.strm.data_type=function(Y){var ne,fe=4093624447;for(ne=0;ne<=31;ne++,fe>>>=1)if(1&fe&&Y.dyn_ltree[2*ne]!==0)return a;if(Y.dyn_ltree[18]!==0||Y.dyn_ltree[20]!==0||Y.dyn_ltree[26]!==0)return r;for(ne=32;ne<p;ne++)if(Y.dyn_ltree[2*ne]!==0)return r;return a}(S)),ke(S,S.l_desc),ke(S,S.d_desc),Q=function(Y){var ne;for(h(Y,Y.dyn_ltree,Y.l_desc.max_code),h(Y,Y.dyn_dtree,Y.d_desc.max_code),ke(Y,Y.bl_desc),ne=g-1;3<=ne&&Y.bl_tree[2*U[ne]+1]===0;ne--);return Y.opt_len+=3*(ne+1)+5+5+4,ne}(S),R=S.opt_len+3+7>>>3,(G=S.static_len+3+7>>>3)<=R&&(R=G)):R=G=W+5,W+4<=R&&M!==-1?k(S,M,W,H):S.strategy===4||G===R?(X(S,2+(H?1:0),3),Ce(S,q,O)):(X(S,4+(H?1:0),3),function(Y,ne,fe,ue){var Ee;for(X(Y,ne-257,5),X(Y,fe-1,5),X(Y,ue-4,4),Ee=0;Ee<ue;Ee++)X(Y,Y.bl_tree[2*U[Ee]+1],3);$(Y,Y.dyn_ltree,ne-1),$(Y,Y.dyn_dtree,fe-1)}(S,S.l_desc.max_code+1,S.d_desc.max_code+1,Q+1),Ce(S,S.dyn_ltree,S.dyn_dtree)),se(S),H&&le(S)},t._tr_tally=function(S,M,W){return S.pending_buf[S.d_buf+2*S.last_lit]=M>>>8&255,S.pending_buf[S.d_buf+2*S.last_lit+1]=255&M,S.pending_buf[S.l_buf+S.last_lit]=255&W,S.last_lit++,M===0?S.dyn_ltree[2*W]++:(S.matches++,M--,S.dyn_ltree[2*(v[W]+p+1)]++,S.dyn_dtree[2*z(M)]++),S.last_lit===S.lit_bufsize-1},t._tr_align=function(S){X(S,2,3),Z(S,_,q),function(M){M.bi_valid===16?(ee(M,M.bi_buf),M.bi_buf=0,M.bi_valid=0):8<=M.bi_valid&&(M.pending_buf[M.pending++]=255&M.bi_buf,M.bi_buf>>=8,M.bi_valid-=8)}(S)}},{"../utils/common":41}],53:[function(n,o,t){o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,o,t){(function(i){(function(a,r){if(!a.setImmediate){var s,c,f,p,y=1,u={},g=!1,d=a.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(a);b=b&&b.setTimeout?b:a,s={}.toString.call(a.process)==="[object process]"?function(C){process.nextTick(function(){w(C)})}:function(){if(a.postMessage&&!a.importScripts){var C=!0,I=a.onmessage;return a.onmessage=function(){C=!1},a.postMessage("","*"),a.onmessage=I,C}}()?(p="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",_,!1):a.attachEvent("onmessage",_),function(C){a.postMessage(p+C,"*")}):a.MessageChannel?((f=new MessageChannel).port1.onmessage=function(C){w(C.data)},function(C){f.port2.postMessage(C)}):d&&"onreadystatechange"in d.createElement("script")?(c=d.documentElement,function(C){var I=d.createElement("script");I.onreadystatechange=function(){w(C),I.onreadystatechange=null,c.removeChild(I),I=null},c.appendChild(I)}):function(C){setTimeout(w,0,C)},b.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var I=new Array(arguments.length-1),P=0;P<I.length;P++)I[P]=arguments[P+1];var E={callback:C,args:I};return u[y]=E,s(y),y++},b.clearImmediate=m}function m(C){delete u[C]}function w(C){if(g)setTimeout(w,0,C);else{var I=u[C];if(I){g=!0;try{(function(P){var E=P.callback,D=P.args;switch(D.length){case 0:E();break;case 1:E(D[0]);break;case 2:E(D[0],D[1]);break;case 3:E(D[0],D[1],D[2]);break;default:E.apply(r,D)}})(I)}finally{m(C),g=!1}}}}function _(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(p)===0&&w(+C.data.slice(p.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ut<"u"?ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ir);var ta=ir.exports;const na=Wr(ta),ar=async l=>{var t;const e=`ComfyUI workspace workflows ${Kn(Date.now())}`,n=new na,o=await((t=ye)==null?void 0:t.getSetting("twoWaySync"));for(const i of l){let a;o?a=i.parentFolderID??"":a=await oi(i.parentFolderID??null).then(async s=>si(s??""));const r=n.folder(a);r==null||r.file(`${i.name}.json`,i.json)}n.generateAsync({type:"blob"}).then(function(i){const a=document.createElement("a");a.href=window.URL.createObjectURL(i),a.download=`${e}.zip`,document.body.appendChild(a),a.click(),document.body.removeChild(a)})};function ra(){const[l,e]=F.useState(!1),[n,o]=F.useState(""),{showDialog:t}=$n(),i=()=>{var r;(r=ye)==null||r.getSettings().then(s=>{o((s==null?void 0:s.myWorkflowsDir)??"undefined"),e(!!(s!=null&&s.twoWaySync))})};F.useEffect(()=>{i()},[]);const a=async r=>{var c,f;if(!r.target.checked){await((c=ye)==null?void 0:c.upsert({twoWaySync:r.target.checked})),i();return}const s=await((f=ye)==null?void 0:f.getSetting("myWorkflowsDir"));t(x.jsx(ia,{myWorkflowsDir:s??"undefined"}),[{label:"I have downloaded all my workflows and ready to enable",onClick:async()=>{var p;await((p=ye)==null?void 0:p.upsert({twoWaySync:!0})),i()}}])};return x.jsxs(Le,{children:[x.jsxs(Oe,{children:["If enabled, your workflows will be synced to and from ",x.jsx("b",{children:n}),x.jsx("br",{}),"You can manually move files into this folder using File Explorer or Finder to import them into your workspace."]}),x.jsx(ot,{isChecked:l,onChange:a,children:"Enable two way sync (beta)"})]})}function ia({myWorkflowsDir:l}){return x.jsxs(Le,{gap:3,children:[x.jsx("p",{children:"Your workflows will be synced to and from path:"}),x.jsx("p",{children:x.jsx("b",{children:l})}),x.jsxs("p",{children:["Please make sure this path is valid. You can change this path anytime in Settings ",">"," Workspace Save Direcotry"]}),x.jsxs("p",{children:[x.jsx("b",{children:"Please download all your workflows before enabling two way sync!"})," ","So you can manually import some workflows into your my_workflows/ directory on your disk in case something unexpected happens."]}),x.jsx(Se,{colorScheme:"teal",variant:"outline",width:"fit-content",size:"sm",onClick:async()=>{var n;const e=await((n=be)==null?void 0:n.listAll());ar(e??[])},children:"Download All My Workflows"})]})}function vn({settingKey:l,text:e,defaultChecked:n=!1}){const[o,t]=F.useState(n),i=()=>{var a;(a=ye)==null||a.getSetting(l).then(r=>{t(!!r)})};return F.useEffect(()=>{i()},[]),x.jsx(Le,{children:x.jsx(ot,{isChecked:o,onChange:async a=>{var r;await((r=ye)==null?void 0:r.upsert({[l]:a.target.checked})),i()},children:e})})}function aa({onClose:l}){const[e,n]=F.useState(!1),[o,t]=F.useState(!1),[i,a]=F.useState(""),[r,s]=F.useState([]),[c,f]=F.useState([]),[p,y]=F.useState(!1),u=F.useRef(null),g=li();F.useEffect(()=>{var E;(E=ye)==null||E.getSetting("myWorkflowsDir").then(D=>{a(D)})},[]);const d=async E=>{const{dir_path:D="",dir_contents:j=[],error:U=""}=await hn(E??"");return U.includes("Operation not permitted")?(y(!0),m(),{isError:!0}):{dirList:j,dirPath:D}},b=async()=>{const{isError:E=!1,dirList:D=[]}=await d(i);E||(f(D),t(!0),s(i&&i.split("/").filter(j=>!!j)||[]))},m=()=>{t(!1),n(!1),s([])},w=async E=>{var q,O,L;if(E){const{error:v=""}=await hn(E);if(v.includes("Not a directory")){g({title:"The directory address you entered is invalid, please re-enter it.",status:"warning",duration:5e3,position:"top",isClosable:!0});return}}const D=E??`/${r.join("/")}`;await((q=ye)==null?void 0:q.upsert({myWorkflowsDir:D}));const j=await((O=ye)==null?void 0:O.getSetting("myWorkflowsDir"))??"";a(j),E&&y(!1),m(),await((L=ye)==null?void 0:L.getSetting("twoWaySync"))||ci()},_=async()=>{const{dirPath:E,dirList:D}=await d("");s(E.split("/").filter(j=>!!j)),f(D)},C=async(E,D)=>{var O;let j="";E===-1&&D?j=`/${r.concat([D]).join("/")}`:j=`/${r.slice(0,E+1).join("/")}`;const{isError:U=!1,dirList:q=[]}=await d(j);U||(f(q),s((O=j.slice(1))==null?void 0:O.split("/")))},I=()=>{t(!0),n(!0)},P=x.jsxs(de,{textAlign:"end",mb:4,children:[x.jsx(it,{placeholder:"Please enter the absolute path directory address",ref:u,mt:2,mb:2}),x.jsx(Se,{colorScheme:"teal",mr:3,size:"sm",onClick:()=>{var E,D;(E=u==null?void 0:u.current)!=null&&E.value&&w((D=u==null?void 0:u.current)==null?void 0:D.value)},children:"Save"})]});return x.jsxs(x.Fragment,{children:[x.jsxs(vt,{isOpen:!0,onClose:l,size:"xl",children:[x.jsx(gt,{}),x.jsxs(bt,{children:[x.jsx(yt,{children:"Settings"}),x.jsx(wt,{}),x.jsx(xt,{pb:14,children:x.jsx(we,{children:x.jsxs(pn,{divider:x.jsx(ui,{borderColor:"gray.500"}),spacing:4,align:"stretch",w:"100%",children:[x.jsxs(de,{mb:4,children:[x.jsx(Oe,{mb:2,fontWeight:500,children:"Workspace Save Directory"}),o?e?P:x.jsxs(pn,{spacing:2,alignItems:"start",children:[x.jsx(Le,{spacing:"2px",direction:"row",wrap:"wrap",children:r.map((E,D)=>x.jsxs(x.Fragment,{children:["/",x.jsx(Se,{colorScheme:"teal",variant:"link",minW:1,onClick:()=>{C(D)},children:E},`${E}-${D}`)]}))}),x.jsx(Di,{columns:2,spacing:3,maxHeight:500,width:"100%",overflowY:"auto",children:c.map((E,D)=>x.jsx(Se,{size:"sm",leftIcon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.2rem",height:"1.2rem"},children:x.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})}),justifyContent:"start",onClick:()=>{C(-1,E)},children:E},`${E}-${D}`))}),x.jsxs(de,{w:"100%",textAlign:"end",children:[x.jsx(Se,{colorScheme:"teal",size:"sm",onClick:()=>{w()},children:"Save"}),x.jsx(Se,{size:"sm",onClick:_,mr:2,ml:2,children:"Reset"}),x.jsx(Se,{size:"sm",onClick:m,children:"Cancel"})]})]}):x.jsxs(nt,{children:[x.jsx(Gn,{overflowWrap:"anywhere",children:i}),x.jsx(Fe,{label:"Choose folder",children:x.jsx(xe,{"aria-label":"Select folder",size:"sm",ml:2,icon:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.4rem",height:"1.4srem"},children:x.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})}),onClick:b})}),x.jsx(Fe,{label:"Input absolute path",children:x.jsx(xe,{"aria-label":"Enter folder address",size:"sm",ml:2,icon:x.jsx(Ui,{size:19}),onClick:I,variant:"ghost"})})]})]}),x.jsx(Qi,{}),x.jsx(vn,{settingKey:"autoSave",text:"Enable auto save workflow"}),x.jsx(ra,{}),x.jsx(ea,{}),x.jsx(vn,{settingKey:"overwriteCurWorkflowWhenDroppingFileToCanvas",text:"Overwrite current workflow when drag and drop workflow file to canvas"})]})})})]})]}),x.jsxs(vt,{isOpen:p,onClose:()=>y(!1),size:"xl",children:[x.jsx(gt,{}),x.jsxs(bt,{children:[x.jsx(yt,{children:"Kind tips"}),x.jsx(wt,{}),x.jsx(xt,{children:x.jsxs(de,{children:[navigator.userAgent.indexOf("Mac OS X")!==-1?x.jsxs(Oe,{fontWeight:500,children:["There is no permission to access the folder. You need to grant full disk access permission to the terminal that starts the ComfyUI program. For details, refer to the",x.jsx(Se,{colorScheme:"teal",variant:"link",as:"a",ml:2,target:"_block",href:`https://stackoverflow.com/questions/58479686/permissionerror-errno-1-operation-not-permitted-after-macos
                -catalina-update`,children:"Document"}),", or you can manually enter the absolute path of the folder in the input box below to save."]}):x.jsx(Oe,{fontWeight:500,children:"You do not have permission to access the folder. It is recommended that you manually enter the absolute path address of the required folder."}),P]})})]})]})]})}const Rt=16;function oa({}){const[l,e]=F.useState(!1),[n,o]=F.useState(!1),{colorMode:t,toggleColorMode:i}=qt();return x.jsxs(x.Fragment,{children:[x.jsxs(Xe,{isLazy:!0,children:[x.jsx(jt,{as:xe,"aria-label":"Options",icon:x.jsx(Zi,{}),size:"sm",variant:"outline"}),x.jsxs(at,{children:[x.jsx(Re,{onClick:()=>o(!0),icon:x.jsx(Xi,{size:16}),fontSize:16,children:"Settings"}),x.jsx(Re,{onClick:()=>e(!0),icon:x.jsx(rr,{size:Rt}),fontSize:16,children:"Manage Tags"}),x.jsxs(Re,{onClick:i,icon:t==="light"?x.jsx(Gi,{size:Rt}):x.jsx(qi,{size:Rt}),fontSize:16,children:[t==="light"?"Dark":"Light"," Mode"]})]})]}),l&&x.jsx(Ji,{onclose:()=>e(!1)}),n&&x.jsx(aa,{onClose:()=>o(!1)})]})}function sa(l){const{multipleState:e,changeMultipleState:n,selectedKeys:o,isSelectedAll:t,batchOperationCallback:i}=l,a=async()=>{var c;const s=await((c=be)==null?void 0:c.batchQuery(o))??[];ar(s)},r=o.length===0;return x.jsx(we,{spacing:2,wrap:"wrap",mb:0,children:e?x.jsxs(x.Fragment,{children:[x.jsx(ot,{isChecked:t,onChange:s=>{i("selectAll",s.target.checked)}}),x.jsx(Fe,{hasArrow:!0,label:"Download Zip",placement:"bottom",children:x.jsx(xe,{isDisabled:r,"aria-label":"Batch export",size:"sm",icon:x.jsx(di,{size:21}),onClick:a})}),x.jsx(Fe,{hasArrow:!0,label:"Batch deletion",children:x.jsx(Xn,{isDisabled:r,variant:"solid",promptMessage:`Are you sure you want to delete these ${o.length} checked workflows?`,tooltipText:"Delete selected",onDelete:async()=>{var s;await((s=be)==null?void 0:s.batchDeleteFlow(o)),i("batchDelete")}})}),o.length>0&&x.jsx(Oe,{fontWeight:600,children:`Selected ${o.length}`}),x.jsx(Fe,{hasArrow:!0,label:"Exit multi-select",children:x.jsx(xe,{"aria-label":"Close multi-select operation",size:"sm",icon:x.jsx(Qt,{}),onClick:()=>{n(!1)}})})]}):x.jsx(Fe,{hasArrow:!0,label:"Select multiple",placement:"bottom-start",children:x.jsx(xe,{"aria-label":"Start multi-select operation",size:"sm",variant:"outline",icon:x.jsx(Hi,{size:21}),onClick:()=>{n(!0)}})})})}const la=(l,e)=>{const[n,o]=F.useState(l);return F.useEffect(()=>{const t=setTimeout(()=>{o(l)},e);return()=>{clearTimeout(t)}},[l,e]),n},ua={position:"absolute",marginLeft:"10px",width:"20px",height:"20px",top:"50%",color:"#A0AEC0",transform:"translateY(-50%)"};function ca(l){const{searchValue:e,onUpdateSearchValue:n}=l,o=e!=="";return x.jsxs(de,{style:{position:"relative"},mb:2,children:[x.jsx(Ki,{style:ua}),o&&x.jsx(xe,{size:"xs",position:"absolute",right:"5px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",background:"none",zIndex:"100",icon:x.jsx(Qt,{width:15,height:15}),onClick:()=>n(""),"aria-label":"clear input button"}),x.jsx(it,{placeholder:"Search",size:"sm",paddingLeft:"35px",paddingBlock:"5px",value:e,onChange:({target:t})=>n(t.value)})]})}const gn=6;function da({setSelectedTag:l,selectedTag:e}){const[n,o]=F.useState(!1),[t,i]=F.useState([]);return F.useEffect(()=>{var a;(a=We)==null||a.listAll().then(r=>{i(r)})},[]),x.jsxs(we,{spacing:2,wrap:"wrap",mb:0,children:[e!=null&&x.jsx(xe,{"aria-label":"Close",size:"sm",icon:x.jsx(Qt,{}),onClick:()=>{l(void 0)}}),t.slice(0,n?void 0:gn).map(a=>x.jsx(Se,{variant:"solid",width:"auto",flexShrink:0,size:"sm",borderRadius:15,py:4,onClick:()=>{l(a.name)},isActive:e===a.name,children:a.name},a.name)),(t.length??0)>gn&&x.jsx(xe,{"aria-label":"Show-all-tags",size:"sm",icon:n?x.jsx($i,{}):x.jsx(en,{}),onClick:()=>o(!n)})]})}function or({parentFolderID:l,onlyImportFile:e=!1}){const{onRefreshFilesList:n}=F.useContext(Be),[o,t]=F.useState("file"),i=F.useRef(null),a=f=>{var p;t(f),f==="folder"?i.current.setAttribute("webkitdirectory",""):i.current.removeAttribute("webkitdirectory"),(p=i.current)==null||p.click()},r=async f=>{var p;if(f.type==="image/png"){const y=await zi(f),u=y==null?void 0:y.workflow;if(u)return{json:u,name:f.name.replace(".png","")}}else if(f.type==="application/json"||(p=f.name)!=null&&p.endsWith(".json"))return await new Promise((y,u)=>{const g=new FileReader;g.onload=d=>{var b;try{const m=(b=d.target)==null?void 0:b.result;typeof m=="string"?y({json:m,name:f.name.replace(".json","")}):u(new Error("File content is not a string"))}catch(m){u(m)}},g.onerror=u,g.readAsText(f)});return null},s=async f=>{var y,u;const p=[f];for(;p.length>0;){const g=p.shift();if(g&&!g.isFile){const d=await((y=Ve)==null?void 0:y.create({name:g.name,parentFolderID:g.parentFolderID}));if(g.children&&g.children.length){const b=[];g.children.forEach(m=>{m.isFile&&m.file?b.push(m.file):(m.parentFolderID=d==null?void 0:d.id,p.push(m))}),b.length&&await((u=be)==null?void 0:u.batchCreateFlows(b,void 0,d==null?void 0:d.id))}}}n==null||n()},c=async f=>{var y;const p=f.target.files;if(p)if(o==="folder"){const u={name:p[0].webkitRelativePath.split("/")[0],isFile:!1,children:[]};for(const g of p)if(g.name!==".DS_Store"){const d=g.webkitRelativePath.split("/");let b=u.children??[];for(let m=1;m<d.length;m++){const w=d[m];let _=b.find(C=>C.name===w);if(!_){if(_={name:w,isFile:m===d.length-1,children:m===d.length-1?void 0:[]},_.isFile){const C=await r(g);C&&(_.file=C)}b.push(_)}_&&!_.isFile&&(b=_.children)}}s(u)}else{const u=[];for(const g of p){const d=await r(g);d&&u.push(d)}u.length&&(await((y=be)==null?void 0:y.batchCreateFlows(u,void 0,l)),n&&n())}};return x.jsxs(x.Fragment,{children:[e?x.jsx(Re,{onClick:f=>{f.stopPropagation(),a("file")},icon:x.jsx(mn,{size:19}),children:"Import workflows"}):x.jsxs(Xe,{closeOnSelect:!0,children:[x.jsx(jt,{as:Se,leftIcon:x.jsx(mn,{size:18}),variant:"outline",iconSpacing:1,size:"sm",colorScheme:"teal",children:"Import"}),x.jsx(at,{children:hi.map((f,p)=>x.jsx(Re,{onClick:()=>{a(f.type)},iconSpacing:2,icon:f.type==="folder"?x.jsx(qn,{size:18}):x.jsx(Wi,{size:18}),children:f.title},p))})]}),x.jsx("input",{style:{display:"none"},ref:i,type:"file",accept:".json,image/png",multiple:!0,onChange:c,onClick:f=>{f.stopPropagation()}})]})}function ha({folder:l,onclose:e}){const[n,o]=F.useState(l.name),[t,i]=F.useState(""),{onRefreshFilesList:a}=F.useContext(Be),r=c=>{o(c.target.value),t&&i("")},s=async()=>{var p,y;const c=n.trim();if(o(c),c===l.name)return e();await((p=Ve)==null?void 0:p.generateUniqueName(c,l.parentFolderID??""))!==c?i("The name is duplicated, please modify it and submit again."):(await((y=Ve)==null?void 0:y.update(l.id,{name:c})),a&&a(),e())};return x.jsxs(vt,{isOpen:!0,onClose:e,children:[x.jsx(gt,{}),x.jsxs(bt,{children:[x.jsx(yt,{children:"Edit folder name"}),x.jsx(wt,{}),x.jsx(xt,{children:x.jsxs(fi,{isInvalid:!!t,children:[x.jsx(pi,{children:"Folder name"}),x.jsx(it,{value:n,onChange:r,autoFocus:!0,onKeyUp:c=>{c.code==="Enter"&&!t&&n&&s()}}),t&&x.jsx(mi,{children:t})]})}),x.jsxs(Hr,{children:[x.jsx(Se,{colorScheme:"teal",mr:3,onClick:s,isDisabled:!n||!!t,children:"Save"}),x.jsx(Se,{onClick:e,children:"Cancel"})]})]})]})}function fa({menuPosition:l,isopen:e,folder:n,onClose:o}){const[t,i]=F.useState(!1),{onRefreshFilesList:a}=F.useContext(Be),{showDialog:r}=$n(),s=async y=>{var u;y.stopPropagation(),await((u=Ve)==null?void 0:u.create({name:"New Folder",parentFolderID:n.id})),a&&a()},c=async y=>{var u;y.stopPropagation(),await((u=be)==null?void 0:u.createFlow({json:JSON.stringify(vi),parentFolderID:n.id})),a&&a()},f=async y=>{y.stopPropagation();const u=await gi(n.id);r(`Do you want to delete the ${u} files inside the folder too?`,[{label:"Delete all files",colorScheme:"red",onClick:()=>{p(bi.DELETE)}}])},p=async y=>{var u;await((u=Ve)==null?void 0:u.deleteFolder(n.id,y)),o(),a&&a()};return x.jsxs(x.Fragment,{children:[x.jsx(de,{position:"absolute",top:l.y,left:l.x,children:x.jsx(Xe,{isOpen:e,onClose:o,isLazy:!0,lazyBehavior:"keepMounted",children:x.jsxs(at,{children:[x.jsx(Re,{icon:x.jsx(Yi,{size:19}),onClick:y=>{y.preventDefault(),y.stopPropagation(),i(!0)},children:"Rename"}),x.jsx(Re,{icon:x.jsx(Yn,{size:19}),onClick:f,children:"Delete"}),x.jsx(Re,{onClick:s,icon:x.jsx(nr,{size:19}),children:"New folder"}),x.jsx(Re,{onClick:c,icon:x.jsx(tn,{size:19}),children:"New file"}),x.jsx(or,{parentFolderID:n.id,onlyImportFile:!0})]})})}),t&&x.jsx(ha,{folder:n,onclose:()=>i(!1)})]})}const bn=F.memo(function({folder:e}){const[n,o]=F.useState(!1),[t,i]=F.useState(e.isCollapse??!0),[a,r]=F.useState([]),[s,c]=F.useState({x:0,y:0}),[f,p]=F.useState(!1),{colorMode:y}=qt(),{draggingFile:u,setDraggingFile:g,refreshFolderStamp:d,onRefreshFilesList:b}=F.useContext(Be),m=y==="light"?{backgroundColor:"#E2E8F0"}:{backgroundColor:"#4A5568"};F.useEffect(()=>{var C;t||(C=be)==null||C.listFolderContent(e.id,window.localStorage.getItem($t)).then(I=>{r(I)})},[e.id,d,t]);const w=C=>{C.preventDefault(),c({x:C.clientX,y:C.clientY}),p(!0)},_=async C=>{var I,P;if(C.preventDefault(),C.stopPropagation(),!u)return o(!1);if(He(u)){if(u.id===e.id)return o(!1);await((I=Ve)==null?void 0:I.update(u.id,{parentFolderID:e.id}))}else He(u)||await((P=be)==null?void 0:P.updateFolder(u.id,{parentFolderID:e.id}));await(b==null?void 0:b()),o(!1)};return F.useEffect(()=>{var C;!!e.isCollapse!==t&&((C=Ve)==null||C.update(e.id,{isCollapse:t}))},[t]),F.useEffect(()=>{var D;const C=(D=be)==null?void 0:D.curWorkflow,I=(C==null?void 0:C.parentFolderID)+"/",P=e.id+"/";I.startsWith(P)&&i(!1)},[]),x.jsxs(Le,{children:[x.jsxs(we,{w:"100%",as:"button",py:1,onClick:()=>{i(!t)},onContextMenu:w,draggable:"true",onDragOver:C=>{C.preventDefault(),C.stopPropagation(),o(!0)},onDragLeave:C=>{C.preventDefault(),C.stopPropagation(),o(!1)},onDragStart:()=>g==null?void 0:g(e),onDrop:_,_hover:m,style:n||f?m:void 0,className:"droppable",children:[x.jsxs(we,{gap:1,children:[t?x.jsx(Fi,{size:20}):x.jsx(en,{size:20}),x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#EFC54D",style:{width:"1.2rem",height:"1.2rem"},children:x.jsx("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})})]}),x.jsx(Oe,{children:e.name})]}),x.jsx(fa,{isopen:f,menuPosition:s,onClose:()=>p(!1),folder:e}),!t&&x.jsx(Le,{ml:4,gap:0,children:x.jsx(Lr,{items:a})})]})});function yn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);e&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(l,t).enumerable})),n.push.apply(n,o)}return n}function re(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yn(Object(n),!0).forEach(function(o){tt(l,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach(function(o){Object.defineProperty(l,o,Object.getOwnPropertyDescriptor(n,o))})}return l}function pa(l){if(Array.isArray(l))return l}function ma(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var o,t,i,a,r=[],s=!0,c=!1;try{if(i=(n=n.call(l)).next,e===0){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=i.call(n)).done)&&(r.push(o.value),r.length!==e);s=!0);}catch(f){c=!0,t=f}finally{try{if(!s&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw t}}return r}}function Ut(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=l[n];return o}function sr(l,e){if(l){if(typeof l=="string")return Ut(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ut(l,e)}}function va(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Te(l,e){return pa(l)||ma(l,e)||sr(l,e)||va()}function Ne(l,e){if(l==null)return{};var n=Zr(l,e),o,t;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(l);for(t=0;t<i.length;t++)o=i[t],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(l,o)&&(n[o]=l[o])}return n}var ga=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function ba(l){var e=l.defaultInputValue,n=e===void 0?"":e,o=l.defaultMenuIsOpen,t=o===void 0?!1:o,i=l.defaultValue,a=i===void 0?null:i,r=l.inputValue,s=l.menuIsOpen,c=l.onChange,f=l.onInputChange,p=l.onMenuClose,y=l.onMenuOpen,u=l.value,g=Ne(l,ga),d=F.useState(r!==void 0?r:n),b=Te(d,2),m=b[0],w=b[1],_=F.useState(s!==void 0?s:t),C=Te(_,2),I=C[0],P=C[1],E=F.useState(u!==void 0?u:a),D=Te(E,2),j=D[0],U=D[1],q=F.useCallback(function(J,N){typeof c=="function"&&c(J,N),U(J)},[c]),O=F.useCallback(function(J,N){var K;typeof f=="function"&&(K=f(J,N)),w(K!==void 0?K:J)},[f]),L=F.useCallback(function(){typeof y=="function"&&y(),P(!0)},[y]),v=F.useCallback(function(){typeof p=="function"&&p(),P(!1)},[p]),B=r!==void 0?r:m,te=s!==void 0?s:I,T=u!==void 0?u:j;return re(re({},g),{},{inputValue:B,menuIsOpen:te,onChange:q,onInputChange:O,onMenuClose:v,onMenuOpen:L,value:T})}function ya(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function wn(l,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,Gr(o.key),o)}}function wa(l,e,n){return e&&wn(l.prototype,e),n&&wn(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function xa(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Yr(l,e)}function St(l){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},St(l)}function Sa(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _a(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function Ca(l,e){if(e&&(Un(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _a(l)}function ka(l){var e=Sa();return function(){var o=St(l),t;if(e){var i=St(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return Ca(this,t)}}function Oa(l){if(Array.isArray(l))return Ut(l)}function Ia(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function Ea(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lr(l){return Oa(l)||Ia(l)||sr(l)||Ea()}function Pa(l,e){return e||(e=l.slice(0)),Object.freeze(Object.defineProperties(l,{raw:{value:Object.freeze(e)}}))}const Ma=Math.min,ja=Math.max,_t=Math.round,ht=Math.floor,Ct=l=>({x:l,y:l});function Da(l){return{...l,top:l.y,left:l.x,right:l.x+l.width,bottom:l.y+l.height}}function ur(l){return dr(l)?(l.nodeName||"").toLowerCase():"#document"}function je(l){var e;return(l==null||(e=l.ownerDocument)==null?void 0:e.defaultView)||window}function cr(l){var e;return(e=(dr(l)?l.ownerDocument:l.document)||window.document)==null?void 0:e.documentElement}function dr(l){return l instanceof Node||l instanceof je(l).Node}function Wt(l){return l instanceof Element||l instanceof je(l).Element}function an(l){return l instanceof HTMLElement||l instanceof je(l).HTMLElement}function xn(l){return typeof ShadowRoot>"u"?!1:l instanceof ShadowRoot||l instanceof je(l).ShadowRoot}function hr(l){const{overflow:e,overflowX:n,overflowY:o,display:t}=on(l);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(t)}function za(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fa(l){return["html","body","#document"].includes(ur(l))}function on(l){return je(l).getComputedStyle(l)}function Ra(l){if(ur(l)==="html")return l;const e=l.assignedSlot||l.parentNode||xn(l)&&l.host||cr(l);return xn(e)?e.host:e}function fr(l){const e=Ra(l);return Fa(e)?l.ownerDocument?l.ownerDocument.body:l.body:an(e)&&hr(e)?e:fr(e)}function kt(l,e,n){var o;e===void 0&&(e=[]),n===void 0&&(n=!0);const t=fr(l),i=t===((o=l.ownerDocument)==null?void 0:o.body),a=je(t);return i?e.concat(a,a.visualViewport||[],hr(t)?t:[],a.frameElement&&n?kt(a.frameElement):[]):e.concat(t,kt(t,[],n))}function Aa(l){const e=on(l);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const t=an(l),i=t?l.offsetWidth:n,a=t?l.offsetHeight:o,r=_t(n)!==i||_t(o)!==a;return r&&(n=i,o=a),{width:n,height:o,$:r}}function sn(l){return Wt(l)?l:l.contextElement}function At(l){const e=sn(l);if(!an(e))return Ct(1);const n=e.getBoundingClientRect(),{width:o,height:t,$:i}=Aa(e);let a=(i?_t(n.width):n.width)/o,r=(i?_t(n.height):n.height)/t;return(!a||!Number.isFinite(a))&&(a=1),(!r||!Number.isFinite(r))&&(r=1),{x:a,y:r}}const Ta=Ct(0);function La(l){const e=je(l);return!za()||!e.visualViewport?Ta:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Va(l,e,n){return e===void 0&&(e=!1),!n||e&&n!==je(l)?!1:e}function Sn(l,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const t=l.getBoundingClientRect(),i=sn(l);let a=Ct(1);e&&(o?Wt(o)&&(a=At(o)):a=At(l));const r=Va(i,n,o)?La(i):Ct(0);let s=(t.left+r.x)/a.x,c=(t.top+r.y)/a.y,f=t.width/a.x,p=t.height/a.y;if(i){const y=je(i),u=o&&Wt(o)?je(o):o;let g=y.frameElement;for(;g&&o&&u!==y;){const d=At(g),b=g.getBoundingClientRect(),m=on(g),w=b.left+(g.clientLeft+parseFloat(m.paddingLeft))*d.x,_=b.top+(g.clientTop+parseFloat(m.paddingTop))*d.y;s*=d.x,c*=d.y,f*=d.x,p*=d.y,s+=w,c+=_,g=je(g).frameElement}}return Da({width:f,height:p,x:s,y:c})}function Ba(l,e){let n=null,o;const t=cr(l);function i(){clearTimeout(o),n&&n.disconnect(),n=null}function a(r,s){r===void 0&&(r=!1),s===void 0&&(s=1),i();const{left:c,top:f,width:p,height:y}=l.getBoundingClientRect();if(r||e(),!p||!y)return;const u=ht(f),g=ht(t.clientWidth-(c+p)),d=ht(t.clientHeight-(f+y)),b=ht(c),w={rootMargin:-u+"px "+-g+"px "+-d+"px "+-b+"px",threshold:ja(0,Ma(1,s))||1};let _=!0;function C(I){const P=I[0].intersectionRatio;if(P!==s){if(!_)return a();P?a(!1,P):o=setTimeout(()=>{a(!1,1e-7)},100)}_=!1}try{n=new IntersectionObserver(C,{...w,root:t.ownerDocument})}catch{n=new IntersectionObserver(C,w)}n.observe(l)}return a(!0),i}function Na(l,e,n,o){o===void 0&&(o={});const{ancestorScroll:t=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:r=typeof IntersectionObserver=="function",animationFrame:s=!1}=o,c=sn(l),f=t||i?[...c?kt(c):[],...kt(e)]:[];f.forEach(m=>{t&&m.addEventListener("scroll",n,{passive:!0}),i&&m.addEventListener("resize",n)});const p=c&&r?Ba(c,n):null;let y=-1,u=null;a&&(u=new ResizeObserver(m=>{let[w]=m;w&&w.target===c&&u&&(u.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{u&&u.observe(e)})),n()}),c&&!s&&u.observe(c),u.observe(e));let g,d=s?Sn(l):null;s&&b();function b(){const m=Sn(l);d&&(m.x!==d.x||m.y!==d.y||m.width!==d.width||m.height!==d.height)&&n(),d=m,g=requestAnimationFrame(b)}return n(),()=>{f.forEach(m=>{t&&m.removeEventListener("scroll",n),i&&m.removeEventListener("resize",n)}),p&&p(),u&&u.disconnect(),u=null,s&&cancelAnimationFrame(g)}}var Ht=F.useLayoutEffect,$a=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Ot=function(){};function Ua(l,e){return e?e[0]==="-"?l+e:l+"__"+e:l}function Wa(l,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),t=2;t<n;t++)o[t-2]=arguments[t];var i=[].concat(o);if(e&&l)for(var a in e)e.hasOwnProperty(a)&&e[a]&&i.push("".concat(Ua(l,a)));return i.filter(function(r){return r}).map(function(r){return String(r).trim()}).join(" ")}var _n=function(e){return Qa(e)?e.filter(Boolean):Un(e)==="object"&&e!==null?[e]:[]},pr=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Ne(e,$a);return re({},n)},me=function(e,n,o){var t=e.cx,i=e.getStyles,a=e.getClassNames,r=e.className;return{css:i(n,e),className:t(o??{},a(n,e),r)}};function Dt(l){return[document.documentElement,document.body,window].indexOf(l)>-1}function Ha(l){return Dt(l)?window.innerHeight:l.clientHeight}function mr(l){return Dt(l)?window.pageYOffset:l.scrollTop}function It(l,e){if(Dt(l)){window.scrollTo(0,e);return}l.scrollTop=e}function Za(l){var e=getComputedStyle(l),n=e.position==="absolute",o=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var t=l;t=t.parentElement;)if(e=getComputedStyle(t),!(n&&e.position==="static")&&o.test(e.overflow+e.overflowY+e.overflowX))return t;return document.documentElement}function Ga(l,e,n,o){return n*((l=l/o-1)*l*l+1)+e}function ft(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ot,t=mr(l),i=e-t,a=10,r=0;function s(){r+=a;var c=Ga(r,t,i,n);It(l,c),r<n?window.requestAnimationFrame(s):o(l)}s()}function Cn(l,e){var n=l.getBoundingClientRect(),o=e.getBoundingClientRect(),t=e.offsetHeight/3;o.bottom+t>n.bottom?It(l,Math.min(e.offsetTop+e.clientHeight-l.offsetHeight+t,l.scrollHeight)):o.top-t<n.top&&It(l,Math.max(e.offsetTop-t,0))}function Ya(l){var e=l.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function kn(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Ka(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var vr=!1,Xa={get passive(){return vr=!0}},pt=typeof window<"u"?window:{};pt.addEventListener&&pt.removeEventListener&&(pt.addEventListener("p",Ot,Xa),pt.removeEventListener("p",Ot,!1));var qa=vr;function Ja(l){return l!=null}function Qa(l){return Array.isArray(l)}function mt(l,e,n){return l?e:n}var eo=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),t=1;t<n;t++)o[t-1]=arguments[t];var i=Object.entries(e).filter(function(a){var r=Te(a,1),s=r[0];return!o.includes(s)});return i.reduce(function(a,r){var s=Te(r,2),c=s[0],f=s[1];return a[c]=f,a},{})},to=["children","innerProps"],no=["children","innerProps"];function ro(l){var e=l.maxHeight,n=l.menuEl,o=l.minHeight,t=l.placement,i=l.shouldScroll,a=l.isFixedPosition,r=l.controlHeight,s=Za(n),c={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return c;var f=s.getBoundingClientRect(),p=f.height,y=n.getBoundingClientRect(),u=y.bottom,g=y.height,d=y.top,b=n.offsetParent.getBoundingClientRect(),m=b.top,w=a?window.innerHeight:Ha(s),_=mr(s),C=parseInt(getComputedStyle(n).marginBottom,10),I=parseInt(getComputedStyle(n).marginTop,10),P=m-I,E=w-d,D=P+_,j=p-_-d,U=u-w+_+C,q=_+d-I,O=160;switch(t){case"auto":case"bottom":if(E>=g)return{placement:"bottom",maxHeight:e};if(j>=g&&!a)return i&&ft(s,U,O),{placement:"bottom",maxHeight:e};if(!a&&j>=o||a&&E>=o){i&&ft(s,U,O);var L=a?E-C:j-C;return{placement:"bottom",maxHeight:L}}if(t==="auto"||a){var v=e,B=a?P:D;return B>=o&&(v=Math.min(B-C-r,e)),{placement:"top",maxHeight:v}}if(t==="bottom")return i&&It(s,U),{placement:"bottom",maxHeight:e};break;case"top":if(P>=g)return{placement:"top",maxHeight:e};if(D>=g&&!a)return i&&ft(s,q,O),{placement:"top",maxHeight:e};if(!a&&D>=o||a&&P>=o){var te=e;return(!a&&D>=o||a&&P>=o)&&(te=a?P-I:D-I),i&&ft(s,q,O),{placement:"top",maxHeight:te}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(t,'".'))}return c}function io(l){var e={bottom:"top",top:"bottom"};return l?e[l]:"bottom"}var gr=function(e){return e==="auto"?"bottom":e},ao=function(e,n){var o,t=e.placement,i=e.theme,a=i.borderRadius,r=i.spacing,s=i.colors;return re((o={label:"menu"},tt(o,io(t),"100%"),tt(o,"position","absolute"),tt(o,"width","100%"),tt(o,"zIndex",1),o),n?{}:{backgroundColor:s.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:r.menuGutter,marginTop:r.menuGutter})},br=F.createContext(null),oo=function(e){var n=e.children,o=e.minMenuHeight,t=e.maxMenuHeight,i=e.menuPlacement,a=e.menuPosition,r=e.menuShouldScrollIntoView,s=e.theme,c=F.useContext(br)||{},f=c.setPortalPlacement,p=F.useRef(null),y=F.useState(t),u=Te(y,2),g=u[0],d=u[1],b=F.useState(null),m=Te(b,2),w=m[0],_=m[1],C=s.spacing.controlHeight;return Ht(function(){var I=p.current;if(I){var P=a==="fixed",E=r&&!P,D=ro({maxHeight:t,menuEl:I,minHeight:o,placement:i,shouldScroll:E,isFixedPosition:P,controlHeight:C});d(D.maxHeight),_(D.placement),f==null||f(D.placement)}},[t,i,a,r,o,f,C]),n({ref:p,placerProps:re(re({},e),{},{placement:w||gr(i),maxHeight:g})})},so=function(e){var n=e.children,o=e.innerRef,t=e.innerProps;return ie("div",ae({},me(e,"menu",{menu:!0}),{ref:o},t),n)},lo=so,uo=function(e,n){var o=e.maxHeight,t=e.theme.spacing.baseUnit;return re({maxHeight:o,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:t,paddingTop:t})},co=function(e){var n=e.children,o=e.innerProps,t=e.innerRef,i=e.isMulti;return ie("div",ae({},me(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:t},o),n)},yr=function(e,n){var o=e.theme,t=o.spacing.baseUnit,i=o.colors;return re({textAlign:"center"},n?{}:{color:i.neutral40,padding:"".concat(t*2,"px ").concat(t*3,"px")})},ho=yr,fo=yr,po=function(e){var n=e.children,o=n===void 0?"No options":n,t=e.innerProps,i=Ne(e,to);return ie("div",ae({},me(re(re({},i),{},{children:o,innerProps:t}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),t),o)},mo=function(e){var n=e.children,o=n===void 0?"Loading...":n,t=e.innerProps,i=Ne(e,no);return ie("div",ae({},me(re(re({},i),{},{children:o,innerProps:t}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),t),o)},vo=function(e){var n=e.rect,o=e.offset,t=e.position;return{left:n.left,position:t,top:o,width:n.width,zIndex:1}},go=function(e){var n=e.appendTo,o=e.children,t=e.controlElement,i=e.innerProps,a=e.menuPlacement,r=e.menuPosition,s=F.useRef(null),c=F.useRef(null),f=F.useState(gr(a)),p=Te(f,2),y=p[0],u=p[1],g=F.useMemo(function(){return{setPortalPlacement:u}},[]),d=F.useState(null),b=Te(d,2),m=b[0],w=b[1],_=F.useCallback(function(){if(t){var E=Ya(t),D=r==="fixed"?0:window.pageYOffset,j=E[y]+D;(j!==(m==null?void 0:m.offset)||E.left!==(m==null?void 0:m.rect.left)||E.width!==(m==null?void 0:m.rect.width))&&w({offset:j,rect:E})}},[t,r,y,m==null?void 0:m.offset,m==null?void 0:m.rect.left,m==null?void 0:m.rect.width]);Ht(function(){_()},[_]);var C=F.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),t&&s.current&&(c.current=Na(t,s.current,_,{elementResize:"ResizeObserver"in window}))},[t,_]);Ht(function(){C()},[C]);var I=F.useCallback(function(E){s.current=E,C()},[C]);if(!n&&r!=="fixed"||!m)return null;var P=ie("div",ae({ref:I},me(re(re({},e),{},{offset:m.offset,position:r,rect:m.rect}),"menuPortal",{"menu-portal":!0}),i),o);return ie(br.Provider,{value:g},n?Xr.createPortal(P,n):P)},bo=function(e){var n=e.isDisabled,o=e.isRtl;return{label:"container",direction:o?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},yo=function(e){var n=e.children,o=e.innerProps,t=e.isDisabled,i=e.isRtl;return ie("div",ae({},me(e,"container",{"--is-disabled":t,"--is-rtl":i}),o),n)},wo=function(e,n){var o=e.theme.spacing,t=e.isMulti,i=e.hasValue,a=e.selectProps.controlShouldRenderValue;return re({alignItems:"center",display:t&&i&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(o.baseUnit/2,"px ").concat(o.baseUnit*2,"px")})},xo=function(e){var n=e.children,o=e.innerProps,t=e.isMulti,i=e.hasValue;return ie("div",ae({},me(e,"valueContainer",{"value-container":!0,"value-container--is-multi":t,"value-container--has-value":i}),o),n)},So=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},_o=function(e){var n=e.children,o=e.innerProps;return ie("div",ae({},me(e,"indicatorsContainer",{indicators:!0}),o),n)},On,Co=["size"],ko=["innerProps","isRtl","size"],Oo={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},wr=function(e){var n=e.size,o=Ne(e,Co);return ie("svg",ae({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Oo},o))},ln=function(e){return ie(wr,ae({size:20},e),ie("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},xr=function(e){return ie(wr,ae({size:20},e),ie("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Sr=function(e,n){var o=e.isFocused,t=e.theme,i=t.spacing.baseUnit,a=t.colors;return re({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:o?a.neutral60:a.neutral20,padding:i*2,":hover":{color:o?a.neutral80:a.neutral40}})},Io=Sr,Eo=function(e){var n=e.children,o=e.innerProps;return ie("div",ae({},me(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),o),n||ie(xr,null))},Po=Sr,Mo=function(e){var n=e.children,o=e.innerProps;return ie("div",ae({},me(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),o),n||ie(ln,null))},jo=function(e,n){var o=e.isDisabled,t=e.theme,i=t.spacing.baseUnit,a=t.colors;return re({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:o?a.neutral10:a.neutral20,marginBottom:i*2,marginTop:i*2})},Do=function(e){var n=e.innerProps;return ie("span",ae({},n,me(e,"indicatorSeparator",{"indicator-separator":!0})))},zo=Kr(On||(On=Pa([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Fo=function(e,n){var o=e.isFocused,t=e.size,i=e.theme,a=i.colors,r=i.spacing.baseUnit;return re({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:t,lineHeight:1,marginRight:t,textAlign:"center",verticalAlign:"middle"},n?{}:{color:o?a.neutral60:a.neutral20,padding:r*2})},Tt=function(e){var n=e.delay,o=e.offset;return ie("span",{css:Wn({animation:"".concat(zo," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:o?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Ro=function(e){var n=e.innerProps,o=e.isRtl,t=e.size,i=t===void 0?4:t,a=Ne(e,ko);return ie("div",ae({},me(re(re({},a),{},{innerProps:n,isRtl:o,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),ie(Tt,{delay:0,offset:o}),ie(Tt,{delay:160,offset:!0}),ie(Tt,{delay:320,offset:!o}))},Ao=function(e,n){var o=e.isDisabled,t=e.isFocused,i=e.theme,a=i.colors,r=i.borderRadius,s=i.spacing;return re({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:s.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:o?a.neutral5:a.neutral0,borderColor:o?a.neutral10:t?a.primary:a.neutral20,borderRadius:r,borderStyle:"solid",borderWidth:1,boxShadow:t?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:t?a.primary:a.neutral30}})},To=function(e){var n=e.children,o=e.isDisabled,t=e.isFocused,i=e.innerRef,a=e.innerProps,r=e.menuIsOpen;return ie("div",ae({ref:i},me(e,"control",{control:!0,"control--is-disabled":o,"control--is-focused":t,"control--menu-is-open":r}),a,{"aria-disabled":o||void 0}),n)},Lo=To,Vo=["data"],Bo=function(e,n){var o=e.theme.spacing;return n?{}:{paddingBottom:o.baseUnit*2,paddingTop:o.baseUnit*2}},No=function(e){var n=e.children,o=e.cx,t=e.getStyles,i=e.getClassNames,a=e.Heading,r=e.headingProps,s=e.innerProps,c=e.label,f=e.theme,p=e.selectProps;return ie("div",ae({},me(e,"group",{group:!0}),s),ie(a,ae({},r,{selectProps:p,theme:f,getStyles:t,getClassNames:i,cx:o}),c),ie("div",null,n))},$o=function(e,n){var o=e.theme,t=o.colors,i=o.spacing;return re({label:"group",cursor:"default",display:"block"},n?{}:{color:t.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},Uo=function(e){var n=pr(e);n.data;var o=Ne(n,Vo);return ie("div",ae({},me(e,"groupHeading",{"group-heading":!0}),o))},Wo=No,Ho=["innerRef","isDisabled","isHidden","inputClassName"],Zo=function(e,n){var o=e.isDisabled,t=e.value,i=e.theme,a=i.spacing,r=i.colors;return re(re({visibility:o?"hidden":"visible",transform:t?"translateZ(0)":""},Go),n?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:r.neutral80})},_r={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Go={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":re({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},_r)},Yo=function(e){return re({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},_r)},Ko=function(e){var n=e.cx,o=e.value,t=pr(e),i=t.innerRef,a=t.isDisabled,r=t.isHidden,s=t.inputClassName,c=Ne(t,Ho);return ie("div",ae({},me(e,"input",{"input-container":!0}),{"data-value":o||""}),ie("input",ae({className:n({input:!0},s),ref:i,style:Yo(r),disabled:a},c)))},Xo=Ko,qo=function(e,n){var o=e.theme,t=o.spacing,i=o.borderRadius,a=o.colors;return re({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:a.neutral10,borderRadius:i/2,margin:t.baseUnit/2})},Jo=function(e,n){var o=e.theme,t=o.borderRadius,i=o.colors,a=e.cropWithEllipsis;return re({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:t/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Qo=function(e,n){var o=e.theme,t=o.spacing,i=o.borderRadius,a=o.colors,r=e.isFocused;return re({alignItems:"center",display:"flex"},n?{}:{borderRadius:i/2,backgroundColor:r?a.dangerLight:void 0,paddingLeft:t.baseUnit,paddingRight:t.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},Cr=function(e){var n=e.children,o=e.innerProps;return ie("div",o,n)},es=Cr,ts=Cr;function ns(l){var e=l.children,n=l.innerProps;return ie("div",ae({role:"button"},n),e||ie(ln,{size:14}))}var rs=function(e){var n=e.children,o=e.components,t=e.data,i=e.innerProps,a=e.isDisabled,r=e.removeProps,s=e.selectProps,c=o.Container,f=o.Label,p=o.Remove;return ie(c,{data:t,innerProps:re(re({},me(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),i),selectProps:s},ie(f,{data:t,innerProps:re({},me(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:s},n),ie(p,{data:t,innerProps:re(re({},me(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},r),selectProps:s}))},is=rs,as=function(e,n){var o=e.isDisabled,t=e.isFocused,i=e.isSelected,a=e.theme,r=a.spacing,s=a.colors;return re({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:i?s.primary:t?s.primary25:"transparent",color:o?s.neutral20:i?s.neutral0:"inherit",padding:"".concat(r.baseUnit*2,"px ").concat(r.baseUnit*3,"px"),":active":{backgroundColor:o?void 0:i?s.primary:s.primary50}})},os=function(e){var n=e.children,o=e.isDisabled,t=e.isFocused,i=e.isSelected,a=e.innerRef,r=e.innerProps;return ie("div",ae({},me(e,"option",{option:!0,"option--is-disabled":o,"option--is-focused":t,"option--is-selected":i}),{ref:a,"aria-disabled":o},r),n)},ss=os,ls=function(e,n){var o=e.theme,t=o.spacing,i=o.colors;return re({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:i.neutral50,marginLeft:t.baseUnit/2,marginRight:t.baseUnit/2})},us=function(e){var n=e.children,o=e.innerProps;return ie("div",ae({},me(e,"placeholder",{placeholder:!0}),o),n)},cs=us,ds=function(e,n){var o=e.isDisabled,t=e.theme,i=t.spacing,a=t.colors;return re({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:o?a.neutral40:a.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},hs=function(e){var n=e.children,o=e.isDisabled,t=e.innerProps;return ie("div",ae({},me(e,"singleValue",{"single-value":!0,"single-value--is-disabled":o}),t),n)},fs=hs,ps={ClearIndicator:Mo,Control:Lo,DropdownIndicator:Eo,DownChevron:xr,CrossIcon:ln,Group:Wo,GroupHeading:Uo,IndicatorsContainer:_o,IndicatorSeparator:Do,Input:Xo,LoadingIndicator:Ro,Menu:lo,MenuList:co,MenuPortal:go,LoadingMessage:mo,NoOptionsMessage:po,MultiValue:is,MultiValueContainer:es,MultiValueLabel:ts,MultiValueRemove:ns,Option:ss,Placeholder:cs,SelectContainer:yo,SingleValue:fs,ValueContainer:xo},ms=function(e){return re(re({},ps),e.components)},In=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function vs(l,e){return!!(l===e||In(l)&&In(e))}function gs(l,e){if(l.length!==e.length)return!1;for(var n=0;n<l.length;n++)if(!vs(l[n],e[n]))return!1;return!0}function bs(l,e){e===void 0&&(e=gs);var n=null;function o(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(n&&n.lastThis===this&&e(t,n.lastArgs))return n.lastResult;var a=l.apply(this,t);return n={lastResult:a,lastArgs:t,lastThis:this},a}return o.clear=function(){n=null},o}var ys={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ws=function(e){return ie("span",ae({css:ys},e))},En=ws,xs={guidance:function(e){var n=e.isSearchable,o=e.isMulti,t=e.isDisabled,i=e.tabSelectsValue,a=e.context;switch(a){case"menu":return"Use Up and Down to choose options".concat(t?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(o?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,o=e.label,t=o===void 0?"":o,i=e.labels,a=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(t,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return a?"option ".concat(t," is disabled. Select another option."):"option ".concat(t,", selected.");default:return""}},onFocus:function(e){var n=e.context,o=e.focused,t=e.options,i=e.label,a=i===void 0?"":i,r=e.selectValue,s=e.isDisabled,c=e.isSelected,f=function(g,d){return g&&g.length?"".concat(g.indexOf(d)+1," of ").concat(g.length):""};if(n==="value"&&r)return"value ".concat(a," focused, ").concat(f(r,o),".");if(n==="menu"){var p=s?" disabled":"",y="".concat(c?"selected":"focused").concat(p);return"option ".concat(a," ").concat(y,", ").concat(f(t,o),".")}return""},onFilter:function(e){var n=e.inputValue,o=e.resultsMessage;return"".concat(o).concat(n?" for search term "+n:"",".")}},Ss=function(e){var n=e.ariaSelection,o=e.focusedOption,t=e.focusedValue,i=e.focusableOptions,a=e.isFocused,r=e.selectValue,s=e.selectProps,c=e.id,f=s.ariaLiveMessages,p=s.getOptionLabel,y=s.inputValue,u=s.isMulti,g=s.isOptionDisabled,d=s.isSearchable,b=s.menuIsOpen,m=s.options,w=s.screenReaderStatus,_=s.tabSelectsValue,C=s["aria-label"],I=s["aria-live"],P=F.useMemo(function(){return re(re({},xs),f||{})},[f]),E=F.useMemo(function(){var v="";if(n&&P.onChange){var B=n.option,te=n.options,T=n.removedValue,J=n.removedValues,N=n.value,K=function(he){return Array.isArray(he)?null:he},A=T||B||K(N),z=A?p(A):"",ee=te||J||void 0,X=ee?ee.map(p):[],Z=re({isDisabled:A&&g(A,r),label:z,labels:X},n);v=P.onChange(Z)}return v},[n,P,g,r,p]),D=F.useMemo(function(){var v="",B=o||t,te=!!(o&&r&&r.includes(o));if(B&&P.onFocus){var T={focused:B,label:p(B),isDisabled:g(B,r),isSelected:te,options:i,context:B===o?"menu":"value",selectValue:r};v=P.onFocus(T)}return v},[o,t,p,g,P,i,r]),j=F.useMemo(function(){var v="";if(b&&m.length&&P.onFilter){var B=w({count:i.length});v=P.onFilter({inputValue:y,resultsMessage:B})}return v},[i,y,b,P,m,w]),U=F.useMemo(function(){var v="";if(P.guidance){var B=t?"value":b?"menu":"input";v=P.guidance({"aria-label":C,context:B,isDisabled:o&&g(o,r),isMulti:u,isSearchable:d,tabSelectsValue:_})}return v},[C,o,t,u,g,d,b,P,r,_]),q="".concat(D," ").concat(j," ").concat(U),O=ie(F.Fragment,null,ie("span",{id:"aria-selection"},E),ie("span",{id:"aria-context"},q)),L=(n==null?void 0:n.action)==="initial-input-focus";return ie(F.Fragment,null,ie(En,{id:c},L&&O),ie(En,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text"},a&&!L&&O))},_s=Ss,Zt=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Cs=new RegExp("["+Zt.map(function(l){return l.letters}).join("")+"]","g"),kr={};for(var Lt=0;Lt<Zt.length;Lt++)for(var Vt=Zt[Lt],Bt=0;Bt<Vt.letters.length;Bt++)kr[Vt.letters[Bt]]=Vt.base;var Or=function(e){return e.replace(Cs,function(n){return kr[n]})},ks=bs(Or),Pn=function(e){return e.replace(/^\s+|\s+$/g,"")},Os=function(e){return"".concat(e.label," ").concat(e.value)},Is=function(e){return function(n,o){if(n.data.__isNew__)return!0;var t=re({ignoreCase:!0,ignoreAccents:!0,stringify:Os,trim:!0,matchFrom:"any"},e),i=t.ignoreCase,a=t.ignoreAccents,r=t.stringify,s=t.trim,c=t.matchFrom,f=s?Pn(o):o,p=s?Pn(r(n)):r(n);return i&&(f=f.toLowerCase(),p=p.toLowerCase()),a&&(f=ks(f),p=Or(p)),c==="start"?p.substr(0,f.length)===f:p.indexOf(f)>-1}},Es=["innerRef"];function Ps(l){var e=l.innerRef,n=Ne(l,Es),o=eo(n,"onExited","in","enter","exit","appear");return ie("input",ae({ref:e},o,{css:Wn({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Ms=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function js(l){var e=l.isEnabled,n=l.onBottomArrive,o=l.onBottomLeave,t=l.onTopArrive,i=l.onTopLeave,a=F.useRef(!1),r=F.useRef(!1),s=F.useRef(0),c=F.useRef(null),f=F.useCallback(function(b,m){if(c.current!==null){var w=c.current,_=w.scrollTop,C=w.scrollHeight,I=w.clientHeight,P=c.current,E=m>0,D=C-I-_,j=!1;D>m&&a.current&&(o&&o(b),a.current=!1),E&&r.current&&(i&&i(b),r.current=!1),E&&m>D?(n&&!a.current&&n(b),P.scrollTop=C,j=!0,a.current=!0):!E&&-m>_&&(t&&!r.current&&t(b),P.scrollTop=0,j=!0,r.current=!0),j&&Ms(b)}},[n,o,t,i]),p=F.useCallback(function(b){f(b,b.deltaY)},[f]),y=F.useCallback(function(b){s.current=b.changedTouches[0].clientY},[]),u=F.useCallback(function(b){var m=s.current-b.changedTouches[0].clientY;f(b,m)},[f]),g=F.useCallback(function(b){if(b){var m=qa?{passive:!1}:!1;b.addEventListener("wheel",p,m),b.addEventListener("touchstart",y,m),b.addEventListener("touchmove",u,m)}},[u,y,p]),d=F.useCallback(function(b){b&&(b.removeEventListener("wheel",p,!1),b.removeEventListener("touchstart",y,!1),b.removeEventListener("touchmove",u,!1))},[u,y,p]);return F.useEffect(function(){if(e){var b=c.current;return g(b),function(){d(b)}}},[e,g,d]),function(b){c.current=b}}var Mn=["boxSizing","height","overflow","paddingRight","position"],jn={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Dn(l){l.preventDefault()}function zn(l){l.stopPropagation()}function Fn(){var l=this.scrollTop,e=this.scrollHeight,n=l+this.offsetHeight;l===0?this.scrollTop=1:n===e&&(this.scrollTop=l-1)}function Rn(){return"ontouchstart"in window||navigator.maxTouchPoints}var An=!!(typeof window<"u"&&window.document&&window.document.createElement),et=0,Ze={capture:!1,passive:!1};function Ds(l){var e=l.isEnabled,n=l.accountForScrollbars,o=n===void 0?!0:n,t=F.useRef({}),i=F.useRef(null),a=F.useCallback(function(s){if(An){var c=document.body,f=c&&c.style;if(o&&Mn.forEach(function(g){var d=f&&f[g];t.current[g]=d}),o&&et<1){var p=parseInt(t.current.paddingRight,10)||0,y=document.body?document.body.clientWidth:0,u=window.innerWidth-y+p||0;Object.keys(jn).forEach(function(g){var d=jn[g];f&&(f[g]=d)}),f&&(f.paddingRight="".concat(u,"px"))}c&&Rn()&&(c.addEventListener("touchmove",Dn,Ze),s&&(s.addEventListener("touchstart",Fn,Ze),s.addEventListener("touchmove",zn,Ze))),et+=1}},[o]),r=F.useCallback(function(s){if(An){var c=document.body,f=c&&c.style;et=Math.max(et-1,0),o&&et<1&&Mn.forEach(function(p){var y=t.current[p];f&&(f[p]=y)}),c&&Rn()&&(c.removeEventListener("touchmove",Dn,Ze),s&&(s.removeEventListener("touchstart",Fn,Ze),s.removeEventListener("touchmove",zn,Ze)))}},[o]);return F.useEffect(function(){if(e){var s=i.current;return a(s),function(){r(s)}}},[e,a,r]),function(s){i.current=s}}var zs=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},Fs={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Rs(l){var e=l.children,n=l.lockEnabled,o=l.captureEnabled,t=o===void 0?!0:o,i=l.onBottomArrive,a=l.onBottomLeave,r=l.onTopArrive,s=l.onTopLeave,c=js({isEnabled:t,onBottomArrive:i,onBottomLeave:a,onTopArrive:r,onTopLeave:s}),f=Ds({isEnabled:n}),p=function(u){c(u),f(u)};return ie(F.Fragment,null,n&&ie("div",{onClick:zs,css:Fs}),e(p))}var As={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Ts=function(e){var n=e.name,o=e.onFocus;return ie("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:o,css:As,value:"",onChange:function(){}})},Ls=Ts,Vs=function(e){return e.label},Bs=function(e){return e.label},Ns=function(e){return e.value},$s=function(e){return!!e.isDisabled},Us={clearIndicator:Po,container:bo,control:Ao,dropdownIndicator:Io,group:Bo,groupHeading:$o,indicatorsContainer:So,indicatorSeparator:jo,input:Zo,loadingIndicator:Fo,loadingMessage:fo,menu:ao,menuList:uo,menuPortal:vo,multiValue:qo,multiValueLabel:Jo,multiValueRemove:Qo,noOptionsMessage:ho,option:as,placeholder:ls,singleValue:ds,valueContainer:wo},Ws={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Hs=4,Ir=4,Zs=38,Gs=Ir*2,Ys={baseUnit:Ir,controlHeight:Zs,menuGutter:Gs},Nt={borderRadius:Hs,colors:Ws,spacing:Ys},Ks={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:kn(),captureMenuScroll:!kn(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Is(),formatGroupLabel:Vs,getOptionLabel:Bs,getOptionValue:Ns,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:$s,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Ka(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Tn(l,e,n,o){var t=jr(l,e,n),i=Dr(l,e,n),a=Mr(l,e),r=Et(l,e);return{type:"option",data:e,isDisabled:t,isSelected:i,label:a,value:r,index:o}}function Er(l,e){return l.options.map(function(n,o){if("options"in n){var t=n.options.map(function(a,r){return Tn(l,a,e,r)}).filter(function(a){return Ln(l,a)});return t.length>0?{type:"group",data:n,options:t,index:o}:void 0}var i=Tn(l,n,e,o);return Ln(l,i)?i:void 0}).filter(Ja)}function Pr(l){return l.reduce(function(e,n){return n.type==="group"?e.push.apply(e,lr(n.options.map(function(o){return o.data}))):e.push(n.data),e},[])}function Xs(l,e){return Pr(Er(l,e))}function Ln(l,e){var n=l.inputValue,o=n===void 0?"":n,t=e.data,i=e.isSelected,a=e.label,r=e.value;return(!Fr(l)||!i)&&zr(l,{label:a,value:r,data:t},o)}function qs(l,e){var n=l.focusedValue,o=l.selectValue,t=o.indexOf(n);if(t>-1){var i=e.indexOf(n);if(i>-1)return n;if(t<e.length)return e[t]}return null}function Js(l,e){var n=l.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var Mr=function(e,n){return e.getOptionLabel(n)},Et=function(e,n){return e.getOptionValue(n)};function jr(l,e,n){return typeof l.isOptionDisabled=="function"?l.isOptionDisabled(e,n):!1}function Dr(l,e,n){if(n.indexOf(e)>-1)return!0;if(typeof l.isOptionSelected=="function")return l.isOptionSelected(e,n);var o=Et(l,e);return n.some(function(t){return Et(l,t)===o})}function zr(l,e,n){return l.filterOption?l.filterOption(e,n):!0}var Fr=function(e){var n=e.hideSelectedOptions,o=e.isMulti;return n===void 0?o:n},Qs=1,Rr=function(l){xa(n,l);var e=ka(n);function n(o){var t;if(ya(this,n),t=e.call(this,o),t.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.instancePrefix="",t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.controlRef=null,t.getControlRef=function(r){t.controlRef=r},t.focusedOptionRef=null,t.getFocusedOptionRef=function(r){t.focusedOptionRef=r},t.menuListRef=null,t.getMenuListRef=function(r){t.menuListRef=r},t.inputRef=null,t.getInputRef=function(r){t.inputRef=r},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(r,s){var c=t.props,f=c.onChange,p=c.name;s.name=p,t.ariaOnChange(r,s),f(r,s)},t.setValue=function(r,s,c){var f=t.props,p=f.closeMenuOnSelect,y=f.isMulti,u=f.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:u}),p&&(t.setState({inputIsHiddenAfterUpdate:!y}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(r,{action:s,option:c})},t.selectOption=function(r){var s=t.props,c=s.blurInputOnSelect,f=s.isMulti,p=s.name,y=t.state.selectValue,u=f&&t.isOptionSelected(r,y),g=t.isOptionDisabled(r,y);if(u){var d=t.getOptionValue(r);t.setValue(y.filter(function(b){return t.getOptionValue(b)!==d}),"deselect-option",r)}else if(!g)f?t.setValue([].concat(lr(y),[r]),"select-option",r):t.setValue(r,"select-option");else{t.ariaOnChange(r,{action:"select-option",option:r,name:p});return}c&&t.blurInput()},t.removeValue=function(r){var s=t.props.isMulti,c=t.state.selectValue,f=t.getOptionValue(r),p=c.filter(function(u){return t.getOptionValue(u)!==f}),y=mt(s,p,p[0]||null);t.onChange(y,{action:"remove-value",removedValue:r}),t.focusInput()},t.clearValue=function(){var r=t.state.selectValue;t.onChange(mt(t.props.isMulti,[],null),{action:"clear",removedValues:r})},t.popValue=function(){var r=t.props.isMulti,s=t.state.selectValue,c=s[s.length-1],f=s.slice(0,s.length-1),p=mt(r,f,f[0]||null);t.onChange(p,{action:"pop-value",removedValue:c})},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return Wa.apply(void 0,[t.props.classNamePrefix].concat(s))},t.getOptionLabel=function(r){return Mr(t.props,r)},t.getOptionValue=function(r){return Et(t.props,r)},t.getStyles=function(r,s){var c=t.props.unstyled,f=Us[r](s,c);f.boxSizing="border-box";var p=t.props.styles[r];return p?p(f,s):f},t.getClassNames=function(r,s){var c,f;return(c=(f=t.props.classNames)[r])===null||c===void 0?void 0:c.call(f,s)},t.getElementId=function(r){return"".concat(t.instancePrefix,"-").concat(r)},t.getComponents=function(){return ms(t.props)},t.buildCategorizedOptions=function(){return Er(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return Pr(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(r,s){t.setState({ariaSelection:re({value:r},s)})},t.onMenuMouseDown=function(r){r.button===0&&(r.stopPropagation(),r.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(r){t.blockOptionHover=!1},t.onControlMouseDown=function(r){if(!r.defaultPrevented){var s=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?r.target.tagName!=="INPUT"&&r.target.tagName!=="TEXTAREA"&&t.onMenuClose():s&&t.openMenu("first"):(s&&(t.openAfterFocus=!0),t.focusInput()),r.target.tagName!=="INPUT"&&r.target.tagName!=="TEXTAREA"&&r.preventDefault()}},t.onDropdownIndicatorMouseDown=function(r){if(!(r&&r.type==="mousedown"&&r.button!==0)&&!t.props.isDisabled){var s=t.props,c=s.isMulti,f=s.menuIsOpen;t.focusInput(),f?(t.setState({inputIsHiddenAfterUpdate:!c}),t.onMenuClose()):t.openMenu("first"),r.preventDefault()}},t.onClearIndicatorMouseDown=function(r){r&&r.type==="mousedown"&&r.button!==0||(t.clearValue(),r.preventDefault(),t.openAfterFocus=!1,r.type==="touchend"?t.focusInput():setTimeout(function(){return t.focusInput()}))},t.onScroll=function(r){typeof t.props.closeMenuOnScroll=="boolean"?r.target instanceof HTMLElement&&Dt(r.target)&&t.props.onMenuClose():typeof t.props.closeMenuOnScroll=="function"&&t.props.closeMenuOnScroll(r)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(r){var s=r.touches,c=s&&s.item(0);c&&(t.initialTouchX=c.clientX,t.initialTouchY=c.clientY,t.userIsDragging=!1)},t.onTouchMove=function(r){var s=r.touches,c=s&&s.item(0);if(c){var f=Math.abs(c.clientX-t.initialTouchX),p=Math.abs(c.clientY-t.initialTouchY),y=5;t.userIsDragging=f>y||p>y}},t.onTouchEnd=function(r){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(r.target)&&t.menuListRef&&!t.menuListRef.contains(r.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(r){t.userIsDragging||t.onControlMouseDown(r)},t.onClearIndicatorTouchEnd=function(r){t.userIsDragging||t.onClearIndicatorMouseDown(r)},t.onDropdownIndicatorTouchEnd=function(r){t.userIsDragging||t.onDropdownIndicatorMouseDown(r)},t.handleInputChange=function(r){var s=t.props.inputValue,c=r.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(c,{action:"input-change",prevInputValue:s}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(r){t.props.onFocus&&t.props.onFocus(r),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(r){var s=t.props.inputValue;if(t.menuListRef&&t.menuListRef.contains(document.activeElement)){t.inputRef.focus();return}t.props.onBlur&&t.props.onBlur(r),t.onInputChange("",{action:"input-blur",prevInputValue:s}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1})},t.onOptionHover=function(r){t.blockOptionHover||t.state.focusedOption===r||t.setState({focusedOption:r})},t.shouldHideSelectedOptions=function(){return Fr(t.props)},t.onValueInputFocus=function(r){r.preventDefault(),r.stopPropagation(),t.focus()},t.onKeyDown=function(r){var s=t.props,c=s.isMulti,f=s.backspaceRemovesValue,p=s.escapeClearsValue,y=s.inputValue,u=s.isClearable,g=s.isDisabled,d=s.menuIsOpen,b=s.onKeyDown,m=s.tabSelectsValue,w=s.openMenuOnFocus,_=t.state,C=_.focusedOption,I=_.focusedValue,P=_.selectValue;if(!g&&!(typeof b=="function"&&(b(r),r.defaultPrevented))){switch(t.blockOptionHover=!0,r.key){case"ArrowLeft":if(!c||y)return;t.focusValue("previous");break;case"ArrowRight":if(!c||y)return;t.focusValue("next");break;case"Delete":case"Backspace":if(y)return;if(I)t.removeValue(I);else{if(!f)return;c?t.popValue():u&&t.clearValue()}break;case"Tab":if(t.isComposing||r.shiftKey||!d||!m||!C||w&&t.isOptionSelected(C,P))return;t.selectOption(C);break;case"Enter":if(r.keyCode===229)break;if(d){if(!C||t.isComposing)return;t.selectOption(C);break}return;case"Escape":d?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:y}),t.onMenuClose()):u&&p&&t.clearValue();break;case" ":if(y)return;if(!d){t.openMenu("first");break}if(!C)return;t.selectOption(C);break;case"ArrowUp":d?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":d?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!d)return;t.focusOption("pageup");break;case"PageDown":if(!d)return;t.focusOption("pagedown");break;case"Home":if(!d)return;t.focusOption("first");break;case"End":if(!d)return;t.focusOption("last");break;default:return}r.preventDefault()}},t.instancePrefix="react-select-"+(t.props.instanceId||++Qs),t.state.selectValue=_n(o.value),o.menuIsOpen&&t.state.selectValue.length){var i=t.buildFocusableOptions(),a=i.indexOf(t.state.selectValue[0]);t.state.focusedOption=i[a]}return t}return wa(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Cn(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(t){var i=this.props,a=i.isDisabled,r=i.menuIsOpen,s=this.state.isFocused;(s&&!a&&t.isDisabled||s&&r&&!t.menuIsOpen)&&this.focusInput(),s&&a&&!t.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!s&&!a&&t.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Cn(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(t,i){this.props.onInputChange(t,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(t){var i=this,a=this.state,r=a.selectValue,s=a.isFocused,c=this.buildFocusableOptions(),f=t==="first"?0:c.length-1;if(!this.props.isMulti){var p=c.indexOf(r[0]);p>-1&&(f=p)}this.scrollToFocusedOptionOnUpdate=!(s&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[f]},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(t){var i=this.state,a=i.selectValue,r=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var s=a.indexOf(r);r||(s=-1);var c=a.length-1,f=-1;if(a.length){switch(t){case"previous":s===0?f=0:s===-1?f=c:f=s-1;break;case"next":s>-1&&s<c&&(f=s+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:a[f]})}}}},{key:"focusOption",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,a=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var s=0,c=r.indexOf(a);a||(c=-1),t==="up"?s=c>0?c-1:r.length-1:t==="down"?s=(c+1)%r.length:t==="pageup"?(s=c-i,s<0&&(s=0)):t==="pagedown"?(s=c+i,s>r.length-1&&(s=r.length-1)):t==="last"&&(s=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[s],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Nt):re(re({},Nt),this.props.theme):Nt}},{key:"getCommonProps",value:function(){var t=this.clearValue,i=this.cx,a=this.getStyles,r=this.getClassNames,s=this.getValue,c=this.selectOption,f=this.setValue,p=this.props,y=p.isMulti,u=p.isRtl,g=p.options,d=this.hasValue();return{clearValue:t,cx:i,getStyles:a,getClassNames:r,getValue:s,hasValue:d,isMulti:y,isRtl:u,options:g,selectOption:c,selectProps:p,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var t=this.state.selectValue;return t.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var t=this.props,i=t.isClearable,a=t.isMulti;return i===void 0?a:i}},{key:"isOptionDisabled",value:function(t,i){return jr(this.props,t,i)}},{key:"isOptionSelected",value:function(t,i){return Dr(this.props,t,i)}},{key:"filterOption",value:function(t,i){return zr(this.props,t,i)}},{key:"formatOptionLabel",value:function(t,i){if(typeof this.props.formatOptionLabel=="function"){var a=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(t,{context:i,inputValue:a,selectValue:r})}else return this.getOptionLabel(t)}},{key:"formatGroupLabel",value:function(t){return this.props.formatGroupLabel(t)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var t=this.props,i=t.isDisabled,a=t.isSearchable,r=t.inputId,s=t.inputValue,c=t.tabIndex,f=t.form,p=t.menuIsOpen,y=t.required,u=this.getComponents(),g=u.Input,d=this.state,b=d.inputIsHidden,m=d.ariaSelection,w=this.commonProps,_=r||this.getElementId("input"),C=re(re(re({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":y,role:"combobox"},p&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!a&&{"aria-readonly":!0}),this.hasValue()?(m==null?void 0:m.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return a?F.createElement(g,ae({},w,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:_,innerRef:this.getInputRef,isDisabled:i,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:f,type:"text",value:s},C)):F.createElement(Ps,ae({id:_,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Ot,onFocus:this.onInputFocus,disabled:i,tabIndex:c,inputMode:"none",form:f,value:""},C))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,i=this.getComponents(),a=i.MultiValue,r=i.MultiValueContainer,s=i.MultiValueLabel,c=i.MultiValueRemove,f=i.SingleValue,p=i.Placeholder,y=this.commonProps,u=this.props,g=u.controlShouldRenderValue,d=u.isDisabled,b=u.isMulti,m=u.inputValue,w=u.placeholder,_=this.state,C=_.selectValue,I=_.focusedValue,P=_.isFocused;if(!this.hasValue()||!g)return m?null:F.createElement(p,ae({},y,{key:"placeholder",isDisabled:d,isFocused:P,innerProps:{id:this.getElementId("placeholder")}}),w);if(b)return C.map(function(D,j){var U=D===I,q="".concat(t.getOptionLabel(D),"-").concat(t.getOptionValue(D));return F.createElement(a,ae({},y,{components:{Container:r,Label:s,Remove:c},isFocused:U,isDisabled:d,key:q,index:j,removeProps:{onClick:function(){return t.removeValue(D)},onTouchEnd:function(){return t.removeValue(D)},onMouseDown:function(L){L.preventDefault()}},data:D}),t.formatOptionLabel(D,"value"))});if(m)return null;var E=C[0];return F.createElement(f,ae({},y,{data:E,isDisabled:d}),this.formatOptionLabel(E,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.getComponents(),i=t.ClearIndicator,a=this.commonProps,r=this.props,s=r.isDisabled,c=r.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||s||!this.hasValue()||c)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return F.createElement(i,ae({},a,{innerProps:p,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var t=this.getComponents(),i=t.LoadingIndicator,a=this.commonProps,r=this.props,s=r.isDisabled,c=r.isLoading,f=this.state.isFocused;if(!i||!c)return null;var p={"aria-hidden":"true"};return F.createElement(i,ae({},a,{innerProps:p,isDisabled:s,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var t=this.getComponents(),i=t.DropdownIndicator,a=t.IndicatorSeparator;if(!i||!a)return null;var r=this.commonProps,s=this.props.isDisabled,c=this.state.isFocused;return F.createElement(a,ae({},r,{isDisabled:s,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var t=this.getComponents(),i=t.DropdownIndicator;if(!i)return null;var a=this.commonProps,r=this.props.isDisabled,s=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return F.createElement(i,ae({},a,{innerProps:c,isDisabled:r,isFocused:s}))}},{key:"renderMenu",value:function(){var t=this,i=this.getComponents(),a=i.Group,r=i.GroupHeading,s=i.Menu,c=i.MenuList,f=i.MenuPortal,p=i.LoadingMessage,y=i.NoOptionsMessage,u=i.Option,g=this.commonProps,d=this.state.focusedOption,b=this.props,m=b.captureMenuScroll,w=b.inputValue,_=b.isLoading,C=b.loadingMessage,I=b.minMenuHeight,P=b.maxMenuHeight,E=b.menuIsOpen,D=b.menuPlacement,j=b.menuPosition,U=b.menuPortalTarget,q=b.menuShouldBlockScroll,O=b.menuShouldScrollIntoView,L=b.noOptionsMessage,v=b.onMenuScrollToTop,B=b.onMenuScrollToBottom;if(!E)return null;var te=function(ee,X){var Z=ee.type,ce=ee.data,he=ee.isDisabled,se=ee.isSelected,le=ee.label,ge=ee.value,pe=d===ce,Ce=he?void 0:function(){return t.onOptionHover(ce)},ke=he?void 0:function(){return t.selectOption(ce)},h="".concat(t.getElementId("option"),"-").concat(X),$={id:h,onClick:ke,onMouseMove:Ce,onMouseOver:Ce,tabIndex:-1};return F.createElement(u,ae({},g,{innerProps:$,data:ce,isDisabled:he,isSelected:se,key:h,label:le,type:Z,value:ge,isFocused:pe,innerRef:pe?t.getFocusedOptionRef:void 0}),t.formatOptionLabel(ee.data,"menu"))},T;if(this.hasOptions())T=this.getCategorizedOptions().map(function(z){if(z.type==="group"){var ee=z.data,X=z.options,Z=z.index,ce="".concat(t.getElementId("group"),"-").concat(Z),he="".concat(ce,"-heading");return F.createElement(a,ae({},g,{key:ce,data:ee,options:X,Heading:r,headingProps:{id:he,data:z.data},label:t.formatGroupLabel(z.data)}),z.options.map(function(se){return te(se,"".concat(Z,"-").concat(se.index))}))}else if(z.type==="option")return te(z,"".concat(z.index))});else if(_){var J=C({inputValue:w});if(J===null)return null;T=F.createElement(p,g,J)}else{var N=L({inputValue:w});if(N===null)return null;T=F.createElement(y,g,N)}var K={minMenuHeight:I,maxMenuHeight:P,menuPlacement:D,menuPosition:j,menuShouldScrollIntoView:O},A=F.createElement(oo,ae({},g,K),function(z){var ee=z.ref,X=z.placerProps,Z=X.placement,ce=X.maxHeight;return F.createElement(s,ae({},g,K,{innerRef:ee,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove,id:t.getElementId("listbox")},isLoading:_,placement:Z}),F.createElement(Rs,{captureEnabled:m,onTopArrive:v,onBottomArrive:B,lockEnabled:q},function(he){return F.createElement(c,ae({},g,{innerRef:function(le){t.getMenuListRef(le),he(le)},isLoading:_,maxHeight:ce,focusedOption:d}),T)}))});return U||j==="fixed"?F.createElement(f,ae({},g,{appendTo:U,controlElement:this.controlRef,menuPlacement:D,menuPosition:j}),A):A}},{key:"renderFormField",value:function(){var t=this,i=this.props,a=i.delimiter,r=i.isDisabled,s=i.isMulti,c=i.name,f=i.required,p=this.state.selectValue;if(f&&!this.hasValue()&&!r)return F.createElement(Ls,{name:c,onFocus:this.onValueInputFocus});if(!(!c||r))if(s)if(a){var y=p.map(function(d){return t.getOptionValue(d)}).join(a);return F.createElement("input",{name:c,type:"hidden",value:y})}else{var u=p.length>0?p.map(function(d,b){return F.createElement("input",{key:"i-".concat(b),name:c,type:"hidden",value:t.getOptionValue(d)})}):F.createElement("input",{name:c,type:"hidden",value:""});return F.createElement("div",null,u)}else{var g=p[0]?this.getOptionValue(p[0]):"";return F.createElement("input",{name:c,type:"hidden",value:g})}}},{key:"renderLiveRegion",value:function(){var t=this.commonProps,i=this.state,a=i.ariaSelection,r=i.focusedOption,s=i.focusedValue,c=i.isFocused,f=i.selectValue,p=this.getFocusableOptions();return F.createElement(_s,ae({},t,{id:this.getElementId("live-region"),ariaSelection:a,focusedOption:r,focusedValue:s,isFocused:c,selectValue:f,focusableOptions:p}))}},{key:"render",value:function(){var t=this.getComponents(),i=t.Control,a=t.IndicatorsContainer,r=t.SelectContainer,s=t.ValueContainer,c=this.props,f=c.className,p=c.id,y=c.isDisabled,u=c.menuIsOpen,g=this.state.isFocused,d=this.commonProps=this.getCommonProps();return F.createElement(r,ae({},d,{className:f,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:y,isFocused:g}),this.renderLiveRegion(),F.createElement(i,ae({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:y,isFocused:g,menuIsOpen:u}),F.createElement(s,ae({},d,{isDisabled:y}),this.renderPlaceholderOrValue(),this.renderInput()),F.createElement(a,ae({},d,{isDisabled:y}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(t,i){var a=i.prevProps,r=i.clearFocusValueOnUpdate,s=i.inputIsHiddenAfterUpdate,c=i.ariaSelection,f=i.isFocused,p=i.prevWasFocused,y=t.options,u=t.value,g=t.menuIsOpen,d=t.inputValue,b=t.isMulti,m=_n(u),w={};if(a&&(u!==a.value||y!==a.options||g!==a.menuIsOpen||d!==a.inputValue)){var _=g?Xs(t,m):[],C=r?qs(i,m):null,I=Js(i,_);w={selectValue:m,focusedOption:I,focusedValue:C,clearFocusValueOnUpdate:!1}}var P=s!=null&&t!==a?{inputIsHidden:s,inputIsHiddenAfterUpdate:void 0}:{},E=c,D=f&&p;return f&&!D&&(E={value:mt(b,m,m[0]||null),options:m,action:"initial-input-focus"},D=!p),(c==null?void 0:c.action)==="initial-input-focus"&&(E=null),re(re(re({},w),P),{},{prevProps:t,ariaSelection:E,prevWasFocused:D})}}]),n}(F.Component);Rr.defaultProps=Ks;var el=F.forwardRef(function(l,e){var n=ba(l);return F.createElement(Rr,ae({ref:e},n))}),tl=el,nl=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"];function Gt(){return Gt=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o])}return l},Gt.apply(this,arguments)}function rl(l,e){if(l==null)return{};var n={},o=Object.keys(l),t,i;for(i=0;i<o.length;i++)t=o[i],!(e.indexOf(t)>=0)&&(n[t]=l[t]);return n}var Ar=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=rl(e,nl);return Gt({},n)},il=function(e){var n=typeof e=="string";return n&&["sm","md","lg"].includes(e)},al=function(e){return il(e)?e:e==="xs"?"sm":e==="xl"?"lg":"md"},De=function(e){var n=Mt(),o=al(n.components.Input.defaultProps.size),t=e??o,i=Vi(typeof t=="string"?[t]:t,{fallback:"md"})||o;return i};function Ge(){return Ge=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o])}return l},Ge.apply(this,arguments)}var ol=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,a=e.isDisabled,r=e.isRtl,s=e.hasValue,c=e.selectProps.chakraStyles,f=Ge({position:"relative",direction:r?"rtl":void 0},a?{cursor:"not-allowed"}:{}),p=c!=null&&c.container?c.container(f,e):f;return oe.createElement(de,Ge({},i,{className:t({"--is-disabled":a,"--is-rtl":r,"--has-value":s},o),sx:p}),n)},sl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.isMulti,a=e.hasValue,r=e.innerProps,s=e.selectProps,c=s.chakraStyles,f=s.size,p=s.variant,y=s.focusBorderColor,u=s.errorBorderColor,g=s.controlShouldRenderValue,d=De(f),b=$e("Input",{size:d,variant:p,focusBorderColor:y,errorBorderColor:u}),m={display:i&&a&&g?"flex":"grid",alignItems:"center",flex:1,paddingY:"2px",paddingX:b.field.px,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},w=c!=null&&c.valueContainer?c.valueContainer(m,e):m;return oe.createElement(de,Ge({},r,{className:t({"value-container":!0,"value-container--is-multi":i,"value-container--has-value":a},o),sx:w}),n)},ll=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,a=e.selectProps.chakraStyles,r={display:"flex",alignItems:"center",alignSelf:"stretch",flexShrink:0},s=a!=null&&a.indicatorsContainer?a.indicatorsContainer(r,e):r;return oe.createElement(de,Ge({},i,{className:t({indicators:!0},o),sx:s}),n)},ul=["height","h"];function Pe(){return Pe=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o])}return l},Pe.apply(this,arguments)}function cl(l,e){if(l==null)return{};var n={},o=Object.keys(l),t,i;for(i=0;i<o.length;i++)t=o[i],!(e.indexOf(t)>=0)&&(n[t]=l[t]);return n}var dl=function(e){var n=e.className,o=e.cx,t=e.children,i=e.innerRef,a=e.innerProps,r=e.isDisabled,s=e.isFocused,c=e.menuIsOpen,f=e.selectProps,p=f.chakraStyles,y=f.size,u=f.variant,g=f.focusBorderColor,d=f.errorBorderColor,b=f.isInvalid,m=f.isReadOnly,w=De(y),_=$e("Input",{size:w,variant:u,focusBorderColor:g,errorBorderColor:d}),C=_.field,I=C.height,P=C.h,E=cl(C,ul),D=I||P,j=Pe({},E,{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",padding:0,overflow:"hidden",height:"auto",minH:D},r?{pointerEvents:"none"}:{}),U=p!=null&&p.control?p.control(j,e):j;return oe.createElement(de,Pe({ref:i,className:o({control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":c},n),sx:U},a,{"data-focus":s?!0:void 0,"data-focus-visible":s?!0:void 0,"data-invalid":b?!0:void 0,"data-disabled":r?!0:void 0,"data-readonly":m?!0:void 0}),t)},hl=function(e){var n=e.className,o=e.cx,t=e.selectProps,i=t.chakraStyles,a=t.useBasicStyles,r=t.variant,s=Pe({opacity:1},a||r!=="outline"?{display:"none"}:{}),c=i!=null&&i.indicatorSeparator?i.indicatorSeparator(s,e):s;return oe.createElement(Jn,{className:o({"indicator-separator":!0},n),sx:c,orientation:"vertical"})},fl=function(e){return oe.createElement(Jt,Pe({role:"presentation",focusable:"false","aria-hidden":"true"},e),oe.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))},pl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,a=e.selectProps,r=a.chakraStyles,s=a.useBasicStyles,c=a.size,f=a.focusBorderColor,p=a.errorBorderColor,y=a.variant,u=De(c),g=$e("Input",{size:u,variant:y,focusBorderColor:f,errorBorderColor:p}),d={sm:"16px",md:"20px",lg:"24px"},b=d[u],m=Pe({},g.addon,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",borderRadius:0,borderWidth:0,fontSize:b},s&&{background:"transparent",padding:0,width:6,marginRight:2,marginLeft:1,cursor:"inherit"}),w=r!=null&&r.dropdownIndicator?r.dropdownIndicator(m,e):m,_={height:"1em",width:"1em"},C=r!=null&&r.downChevron?r.downChevron(_,e):_;return oe.createElement(de,Pe({},i,{className:t({indicator:!0,"dropdown-indicator":!0},o),sx:w}),n||oe.createElement(fl,{sx:C}))},ml=function(e){return oe.createElement(Jt,Pe({focusable:"false","aria-hidden":!0},e),oe.createElement("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}))},vl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,a=e.selectProps,r=a.chakraStyles,s=a.size,c=De(s),f=Bn("CloseButton",{size:c}),p=Pe({},f,{marginX:1,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer"}),y=r!=null&&r.clearIndicator?r.clearIndicator(p,e):p,u={width:"1em",height:"1em"},g=r!=null&&r.crossIcon?r.crossIcon(u,e):u;return oe.createElement(de,Pe({role:"button",className:t({indicator:!0,"clear-indicator":!0},o),sx:y,"aria-label":"Clear selected options"},i),n||oe.createElement(ml,{sx:g}))},gl=function(e){var n=e.className,o=e.cx,t=e.innerProps,i=e.selectProps,a=i.chakraStyles,r=i.size,s=e.color,c=e.emptyColor,f=e.speed,p=e.thickness,y=e.spinnerSize,u=De(r),g={sm:"xs",md:"sm",lg:"md"},d=g[u],b={marginRight:3},m=a!=null&&a.loadingIndicator?a.loadingIndicator(b,e):b;return oe.createElement(qr,Pe({className:o({indicator:!0,"loading-indicator":!0},n),sx:m},t,{size:y||d,color:s,emptyColor:c,speed:f,thickness:p}))};const bl=dl;var yl=["innerRef","isDisabled","isHidden","inputClassName"];function rt(){return rt=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o])}return l},rt.apply(this,arguments)}function wl(l,e){if(l==null)return{};var n={},o=Object.keys(l),t,i;for(i=0;i<o.length;i++)t=o[i],!(e.indexOf(t)>=0)&&(n[t]=l[t]);return n}var xl=function(e){var n=e.className,o=e.cx,t=e.value,i=e.selectProps,a=i.chakraStyles,r=i.isReadOnly,s=Ar(e),c=s.innerRef,f=s.isDisabled,p=s.isHidden,y=s.inputClassName,u=wl(s,yl),g={gridArea:"1 / 2",minW:"2px",border:0,margin:0,outline:0,padding:0},d={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content",color:"inherit",marginX:"0.125rem",paddingY:"0.125rem",visibility:f?"hidden":"visible",transform:t?"translateZ(0)":"",_after:rt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre",padding:0},g)},b=a!=null&&a.inputContainer?a.inputContainer(d,e):d,m=rt({background:0,opacity:p?0:1,width:"100%"},g),w=a!=null&&a.input?a.input(m,e):m;return oe.createElement(de,{className:o({"input-container":!0},n),"data-value":t||"",sx:b},oe.createElement(Ue.input,rt({className:o({input:!0},y),ref:c,sx:w,disabled:f,readOnly:r?!0:void 0},u)))};const Sl=xl;var _l=["data"];function Cl(l,e){if(l==null)return{};var n={},o=Object.keys(l),t,i;for(i=0;i<o.length;i++)t=o[i],!(e.indexOf(t)>=0)&&(n[t]=l[t]);return n}function _e(){return _e=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o])}return l},_e.apply(this,arguments)}var kl=function(e){var n={bottom:"top",top:"bottom"};return e?n[e]:"top"},Ol=function(e){var n,o=e.className,t=e.cx,i=e.children,a=e.innerProps,r=e.innerRef,s=e.placement,c=e.selectProps.chakraStyles,f=(n={position:"absolute"},n[kl(s)]="100%",n.marginY="8px",n.width="100%",n.zIndex=1,n),p=c!=null&&c.menu?c.menu(f,e):f;return oe.createElement(Xe,null,oe.createElement(de,_e({},a,{ref:r,className:t({menu:!0},o),sx:p}),i))};const Il=Ol;var El=function(e){var n,o=e.className,t=e.cx,i=e.innerRef,a=e.children,r=e.maxHeight,s=e.isMulti,c=e.innerProps,f=e.selectProps,p=f.chakraStyles,y=f.size,u=f.variant,g=f.focusBorderColor,d=f.errorBorderColor,b=$e("Menu"),m=De(y),w=$e("Input",{size:m,variant:u,focusBorderColor:g,errorBorderColor:d}),_=w.field,C=_e({},b.list,{minW:"100%",maxHeight:r+"px",overflowY:"auto","--input-border-radius":_==null?void 0:_["--input-border-radius"],borderRadius:(_==null?void 0:_.borderRadius)||((n=b.list)==null?void 0:n.borderRadius),position:"relative",WebkitOverflowScrolling:"touch"}),I=p!=null&&p.menuList?p.menuList(C,e):C;return oe.createElement(de,_e({role:"listbox"},c,{className:t({"menu-list":!0,"menu-list--is-multi":s},o),sx:I,ref:i}),a)},Pl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,a=e.selectProps,r=a.chakraStyles,s=a.size,c=De(s),f={sm:"6px",md:"8px",lg:"10px"},p={color:"chakra-subtle-text",textAlign:"center",paddingY:f[c],fontSize:c},y=r!=null&&r.loadingMessage?r.loadingMessage(p,e):p;return oe.createElement(de,_e({},i,{className:t({"menu-notice":!0,"menu-notice--loading":!0},o),sx:y}),n)},Ml=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,a=e.selectProps,r=a.chakraStyles,s=a.size,c=De(s),f={sm:"6px",md:"8px",lg:"10px"},p={color:"chakra-subtle-text",textAlign:"center",paddingY:f[c],fontSize:c},y=r!=null&&r.noOptionsMessage?r.noOptionsMessage(p,e):p;return oe.createElement(de,_e({},i,{className:t({"menu-notice":!0,"menu-notice--no-options":!0},o),sx:y}),n)},jl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.theme,a=e.getStyles,r=e.Heading,s=e.headingProps,c=e.label,f=e.selectProps,p=e.innerProps,y=e.getClassNames,u=f.chakraStyles,g={},d=u!=null&&u.group?u.group(g,e):g;return oe.createElement(de,_e({},p,{className:t({group:!0},o),sx:d}),oe.createElement(r,_e({},s,{selectProps:f,cx:t,theme:i,getStyles:a,getClassNames:y}),c),oe.createElement(de,null,n))},Dl=function(e){var n=e.cx,o=e.className,t=e.selectProps,i=t.chakraStyles,a=t.size,r=t.hasStickyGroupHeaders,s=Ar(e);s.data;var c=Cl(s,_l),f=$e("Menu"),p=De(a),y={sm:"xs",md:"sm",lg:"md"},u={sm:"0.4rem 0.8rem",md:"0.5rem 1rem",lg:"0.6rem 1.2rem"},g=_e({},f.groupTitle,{fontSize:y[p],padding:u[p],margin:0,borderBottomWidth:r?"1px":0,position:r?"sticky":"static",top:-2,bg:f.list.bg,zIndex:1}),d=i!=null&&i.groupHeading?i.groupHeading(g,e):g;return oe.createElement(de,_e({},c,{className:n({"group-heading":!0},o),sx:d}))},zl=function(e){return oe.createElement("svg",_e({viewBox:"0 0 14 14",width:"1em",height:"1em"},e),oe.createElement("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"}))},Fl=function(e){var n=e.className,o=e.cx,t=e.innerRef,i=e.innerProps,a=e.children,r=e.isFocused,s=e.isDisabled,c=e.isSelected,f=e.selectProps,p=f.chakraStyles,y=f.size,u=f.isMulti,g=f.hideSelectedOptions,d=f.selectedOptionStyle,b=f.selectedOptionColorScheme,m=$e("Menu").item,w=De(y),_={sm:"0.6rem",md:"0.8rem",lg:"1rem"},C={sm:"0.3rem",md:"0.4rem",lg:"0.5rem"},I=dn(b+".500",b+".300"),P=dn("white","black"),E=d==="check"&&(!u||g===!1),D=d==="color",j=_e({},m,{cursor:"pointer",display:"flex",alignItems:"center",width:"100%",textAlign:"start",fontSize:w,paddingX:_[w],paddingY:C[w]},D&&{_selected:{bg:I,color:P,_active:{bg:I}}}),U=p!=null&&p.option?p.option(j,e):j;return oe.createElement(de,_e({role:"option"},i,{className:o({option:!0,"option--is-disabled":s,"option--is-focused":r,"option--is-selected":c},n),sx:U,ref:t,"data-focus":r?!0:void 0,"aria-disabled":s?!0:void 0,"aria-selected":c}),E&&oe.createElement(Zn,{fontSize:"0.8em",marginEnd:"0.75rem",opacity:c?1:0},oe.createElement(zl,null)),a)};function Me(){return Me=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o])}return l},Me.apply(this,arguments)}var Rl=function(e){return typeof e=="object"&&e!==null&&"colorScheme"in e&&typeof e.colorScheme=="string"},Al=function(e){return typeof e=="object"&&e!==null&&"variant"in e&&typeof e.variant=="string"},Tr=function(e){return typeof e=="object"&&e!==null&&"isFixed"in e&&typeof e.isFixed=="boolean"},Tl=function(e){var n=e.children,o=e.className,t=e.components,i=e.cx,a=e.data,r=e.innerProps,s=e.isDisabled,c=e.isFocused,f=e.removeProps,p=e.selectProps,y=e.cropWithEllipsis,u=t.Container,g=t.Label,d=t.Remove,b=p.chakraStyles,m=p.colorScheme,w=p.tagVariant,_=p.size,C=De(_),I="",P="",E=!1;Rl(a)&&(I=a.colorScheme),Al(a)&&(P=a.variant),Tr(a)&&(E=a.isFixed);var D=$e("Tag",{size:C,colorScheme:I||m,variant:P||w||(E?"solid":"subtle")}),j=Me({},D.container,{display:"flex",alignItems:"center",minWidth:0,margin:"0.125rem"}),U=b!=null&&b.multiValue?b.multiValue(j,e):j,q=Me({},D.label,{overflow:"hidden",textOverflow:y||y===void 0?"ellipsis":void 0,whiteSpace:"nowrap"}),O=b!=null&&b.multiValueLabel?b.multiValueLabel(q,e):q,L=Me({},D.closeButton,{display:"flex",alignItems:"center",justifyContent:"center"}),v=b!=null&&b.multiValueRemove?b.multiValueRemove(L,e):L;return oe.createElement(u,{data:a,innerProps:Me({className:i({"multi-value":!0,"multi-value--is-disabled":s},o)},r),sx:U,selectProps:p},oe.createElement(g,{data:a,innerProps:{className:i({"multi-value__label":!0},o)},sx:O,selectProps:p},n),oe.createElement(d,{data:a,innerProps:Me({className:i({"multi-value__remove":!0},o),"aria-label":"Remove "+(n||"option")},f),sx:v,selectProps:p,isFocused:c}))},Ll=function(e){var n=e.children,o=e.innerProps,t=e.sx;return oe.createElement(Ue.span,Me({},o,{sx:t}),n)},Vl=function(e){var n=e.children,o=e.innerProps,t=e.sx;return oe.createElement(Ue.span,Me({},o,{sx:t}),n)},Bl=function(e){return oe.createElement(Jt,Me({verticalAlign:"inherit",viewBox:"0 0 512 512"},e),oe.createElement("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}))},Nl=function(e){var n=e.children,o=e.innerProps,t=e.isFocused,i=e.data,a=e.sx;return Tr(i)&&i.isFixed?null:oe.createElement(de,Me({},o,{role:"button",sx:a,"data-focus":t?!0:void 0,"data-focus-visible":t?!0:void 0}),n||oe.createElement(Bl,null))};const $l=Tl;function Yt(){return Yt=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o])}return l},Yt.apply(this,arguments)}var Ul=function(e){var n=e.children,o=e.className,t=e.cx,i=e.innerProps,a=e.selectProps.chakraStyles,r={gridArea:"1 / 1 / 2 / 3",color:"chakra-placeholder-color",mx:"0.125rem",userSelect:"none"},s=a!=null&&a.placeholder?a.placeholder(r,e):r;return oe.createElement(de,Yt({},i,{className:t({placeholder:!0},o),sx:s}),n)};const Wl=Ul;function Kt(){return Kt=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o])}return l},Kt.apply(this,arguments)}var Hl=function(e){var n=e.children,o=e.className,t=e.cx,i=e.isDisabled,a=e.innerProps,r=e.selectProps.chakraStyles,s={gridArea:"1 / 1 / 2 / 3",mx:"0.125rem",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},c=r!=null&&r.singleValue?r.singleValue(s,e):s;return oe.createElement(de,Kt({className:t({"single-value":!0,"single-value--is-disabled":i},o),sx:c},a),n)};const Zl=Hl;var Gl={ClearIndicator:vl,Control:bl,DropdownIndicator:pl,Group:jl,GroupHeading:Dl,IndicatorSeparator:hl,IndicatorsContainer:ll,Input:Sl,LoadingIndicator:gl,LoadingMessage:Pl,Menu:Il,MenuList:El,MultiValue:$l,MultiValueContainer:Ll,MultiValueLabel:Vl,MultiValueRemove:Nl,NoOptionsMessage:Ml,Option:Fl,Placeholder:Wl,SelectContainer:ol,SingleValue:Zl,ValueContainer:sl};const Yl=Gl;var Kl=["components","theme","size","colorScheme","isDisabled","isInvalid","isReadOnly","required","isRequired","inputId","tagVariant","selectedOptionStyle","selectedOptionColorScheme","selectedOptionColor","variant","focusBorderColor","errorBorderColor","chakraStyles","onFocus","onBlur","menuIsOpen"];function Pt(){return Pt=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o])}return l},Pt.apply(this,arguments)}function Xl(l,e){if(l==null)return{};var n={},o=Object.keys(l),t,i;for(i=0;i<o.length;i++)t=o[i],!(e.indexOf(t)>=0)&&(n[t]=l[t]);return n}var ql=function(e){var n,o=e.components,t=o===void 0?{}:o;e.theme;var i=e.size,a=e.colorScheme,r=a===void 0?"gray":a,s=e.isDisabled,c=e.isInvalid,f=e.isReadOnly,p=e.required,y=e.isRequired,u=e.inputId,g=e.tagVariant,d=e.selectedOptionStyle,b=d===void 0?"color":d,m=e.selectedOptionColorScheme,w=e.selectedOptionColor,_=e.variant,C=e.focusBorderColor,I=e.errorBorderColor,P=e.chakraStyles,E=P===void 0?{}:P,D=e.onFocus,j=e.onBlur,U=e.menuIsOpen,q=Xl(e,Kl),O=Mt(),L=O.components.Input.defaultProps.variant,v=yi({id:u,isDisabled:s,isInvalid:c,isRequired:y,isReadOnly:f,onFocus:D,onBlur:j}),B=U??(v.readOnly?!1:void 0),te=b,T=["color","check"];T.includes(b)||(te="color");var J=m||w||"blue";typeof J!="string"&&(J="blue");var N=Pt({components:Pt({},Yl,t),colorScheme:r,size:i,tagVariant:g,selectedOptionStyle:te,selectedOptionColorScheme:J,variant:_??L,chakraStyles:E,focusBorderColor:C,errorBorderColor:I,onFocus:v.onFocus,onBlur:v.onBlur,isDisabled:v.disabled,isInvalid:!!v["aria-invalid"],inputId:v.id,isReadOnly:v.readOnly,required:p??v.required,menuIsOpen:B},q,{"aria-invalid":(n=q["aria-invalid"])!=null?n:v["aria-invalid"]});return N};const Jl=ql;function Xt(){return Xt=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o])}return l},Xt.apply(this,arguments)}var Ql=F.forwardRef(function(l,e){var n=Jl(l);return oe.createElement(tl,Xt({ref:e},n))});const eu=Ql;function tu({workflow:l}){var u;const{onRefreshFilesList:e}=F.useContext(Be),[n,o]=F.useState([]),[t,i]=F.useState(""),a=((u=l.tags)==null?void 0:u.map(g=>({value:g,label:g})))??[],[r,s]=F.useState(a),c=async()=>{var g,d;await((g=We)==null?void 0:g.put({name:t,workflowIDs:[],updateTime:Date.now()})),await((d=We)==null?void 0:d.listAll().then(b=>o(b??[]))),i("")},f=async()=>{var d;const g=await((d=We)==null?void 0:d.listAll());o(g??[])};if(We==null)return alert("Error: TagsTable is not loaded"),null;const p=n.map(g=>({value:g.name,label:g.name})),y=37*5;return x.jsxs(wi,{isLazy:!0,onOpen:f,children:[x.jsx(xi,{children:x.jsx(xe,{"aria-label":"Delete confirm",size:"sm",variant:"ghost",icon:x.jsx(rr,{color:"#718096"})})}),x.jsxs(Si,{children:[x.jsx(_i,{}),x.jsx(Ci,{}),x.jsx(tr,{children:x.jsx("b",{children:l.name})}),x.jsxs(ki,{children:[x.jsx(eu,{isMulti:!0,name:"tags",options:p,menuIsOpen:!0,value:r,onChange:async g=>{var d;s(g),await((d=be)==null?void 0:d.updateMetaInfo(l.id,{tags:g.map(b=>b.value)})),await(e==null?void 0:e())},chakraStyles:{dropdownIndicator:g=>({...g,p:0,w:"30px"}),menuList:g=>({...g,shadow:"none",pt:0})},placeholder:"Select tags",closeMenuOnSelect:!1,maxMenuHeight:y}),x.jsxs(we,{gap:4,mt:Math.min(y,Math.max(n.length,3)*37),children:[x.jsx(it,{placeholder:"New tag name",size:"sm",mt:6,mb:6,variant:"flushed",value:t,onChange:g=>{i(g.target.value.trim())}}),x.jsx(Se,{iconSpacing:1,leftIcon:x.jsx(tn,{size:16}),colorScheme:"teal",variant:"solid",size:"xs",px:5,isDisabled:t.length===0,onClick:c,children:"New Tag"})]})]})]})]})}function nu({menuPosition:l,workflowID:e,onClose:n}){const{onDuplicateWorkflow:o}=F.useContext(nn);return x.jsx(x.Fragment,{children:x.jsx(de,{position:"absolute",top:l.y,left:l.x,children:x.jsx(Xe,{isOpen:!0,onClose:n,children:x.jsx(at,{children:x.jsx(Re,{onClick:()=>o&&o(e),children:"Duplicate"})})})})})}const Vn=F.memo(function({workflow:e}){const{colorMode:n}=qt(),[o,t]=F.useState({x:0,y:0}),[i,a]=F.useState(!1),{setDraggingFile:r,isMultiSelecting:s,onMultiSelectFlow:c,onDeleteFlow:f,multiSelectedFlowsID:p}=F.useContext(Be),y=p&&p.length>0&&p.includes(e.id),{curFlowID:u,loadWorkflowID:g}=F.useContext(nn),d=u===e.id,b=P=>{P.preventDefault(),t({x:P.clientX,y:P.clientY}),a(!0)},[m,w]=F.useState(!1),_=()=>{a(!1)},C=n==="light"?"gray.200":"#4A5568",I=x.jsx(de,{flexShrink:1,flexGrow:1,backgroundColor:d?"teal.200":i?C:void 0,color:d&&!s?"#333":void 0,draggable:!s,onDragStart:()=>r==null?void 0:r(e),borderRadius:6,px:1,py:1,onClick:()=>{!s&&g(e.id)},_hover:{bg:C},children:x.jsxs(we,{children:[e.coverMediaPath!=null&&x.jsx(Ri,{mediaLocalPath:e.coverMediaPath,size:60,hideBrokenImage:!0,isPreview:!0}),x.jsxs(Le,{textAlign:"left",gap:0,children:[x.jsx(Oe,{fontWeight:"500",children:e.name??"untitled"}),x.jsxs(Oe,{color:"GrayText",ml:2,fontSize:"sm",children:["Updated: ",Kn(e.updateTime)]})]})]})});return x.jsxs(we,{w:"100%",mb:1,justify:"space-between",onContextMenu:b,onMouseEnter:()=>{w(!0)},onMouseLeave:()=>{w(!1)},children:[s?x.jsx(ot,{isChecked:y,spacing:4,onChange:P=>{c&&c(e.id,P.target.checked)},children:I}):x.jsxs(x.Fragment,{children:[I,x.jsxs(nt,{width:"90px",justifyContent:"flex-end",children:[m&&x.jsx(tu,{workflow:e}),x.jsx(Fe,{label:"Open in new tab",children:x.jsx(xe,{"aria-label":"Open in new tab",size:"sm",variant:"ghost",onClick:()=>Oi(e.id),icon:x.jsx(Ii,{color:"#718096",size:23})})}),x.jsx(Xn,{promptMessage:"Are you sure you want to delete this workflow?",onDelete:()=>{f&&f(e.id)}})]})]}),i&&x.jsx(nu,{menuPosition:o,onClose:_,workflowID:e.id})]})});function Lr({items:l}){var y;const[e,n]=F.useState(!1),o=l.filter(He),t=l.filter(u=>!He(u)),i=(y=t[0])==null?void 0:y.parentFolderID,[a,r]=F.useState(!1),{onRefreshFilesList:s,draggingFile:c,refreshFolderStamp:f}=F.useContext(Be),p=async u=>{var g,d;if(u.preventDefault(),u.stopPropagation(),!c)return r(!1);if(He(c)){if(c.id===i)return r(!1);await((g=Ve)==null?void 0:g.update(c.id,{parentFolderID:i}))}else await((d=be)==null?void 0:d.updateFolder(c.id,{parentFolderID:i}));await(s==null?void 0:s()),r(!1)};return F.useEffect(()=>{var u;(u=ye)==null||u.getSetting("foldersOnTop").then(g=>{n(g??!1)})},[f]),x.jsxs(x.Fragment,{children:[e&&o.map(u=>x.jsx(bn,{folder:u},u.id)),x.jsx(de,{border:a?"2px dashed #718096":"2px dashed transparent",onDragOver:u=>{u.preventDefault(),u.stopPropagation(),r(!0)},onDragLeave:u=>{u.preventDefault(),u.stopPropagation(),r(!1)},onDrop:p,className:"droppable",children:e?t.map(u=>x.jsx(Vn,{workflow:u},u.id)):l.map(u=>He(u)?x.jsx(bn,{folder:u},u.id):x.jsx(Vn,{workflow:u},u.id))})]})}function du({onClose:l,onClickNewFlow:e}){const[n,o]=F.useState([]),t=F.useRef([]),i=F.useRef([]),{loadWorkflowID:a,curFlowID:r}=F.useContext(nn),[s,c]=F.useState(),[f,p]=F.useState(!1),[y,u]=F.useState([]),[g,d]=F.useState(0),[b,m]=F.useState(""),w=la(b,400),_=F.useRef(null),[C,I]=F.useState(null),P=F.useRef(window.localStorage.getItem($t)??fn.RECENTLY_MODIFIED),E=async()=>{var J,N;const T=await((J=be)==null?void 0:J.listFolderContent())??[];t.current=T,await((N=be)==null?void 0:N.listAll().then(K=>{i.current=K})),j(),d(Date.now())},D=!!s||!!w,j=()=>{if(D){const T=i.current.filter(J=>{var A;let N=!0,K=!0;return s&&(N=!!((A=J.tags)!=null&&A.includes(s))),w&&(K=!!J.name.toLocaleLowerCase().includes(w.toLocaleLowerCase())),N&&K});o(Ft(T,P.current))}else o(Ft(t.current,P.current))},U=T=>{o(Ft(n,T)),P.current=T,window.localStorage.setItem($t,T),!D&&d(Date.now())};F.useEffect(()=>{j()},[w,s]);const q=F.useCallback(async T=>{var J,N,K;await((J=be)==null?void 0:J.deleteFlow(T)),((K=(N=be)==null?void 0:N.curWorkflow)==null?void 0:K.id)===T&&await(a==null?void 0:a(null)),await E()},[s,w]);F.useEffect(()=>{E();const T=async J=>{var N;if(_.current){const K=await((N=be)==null?void 0:N.get(_.current));K&&K.json&&ji(K.json,[J.canvasX,J.canvasY])}};return ct.canvasEl.addEventListener("drop",T),ct.canvasEl.addEventListener("click",l),()=>{ct.canvasEl.removeEventListener("drop",T),ct.canvasEl.removeEventListener("click",l)}},[]);const O=F.useCallback((T,J)=>{u(N=>{const K=[...N];return J?K.push(T):K.splice(K.indexOf(T),1),K})},[]),L=(T,J)=>{var N;switch(T){case"batchDelete":r&&((N=be)==null||N.get(r).then(K=>{K||a==null||a(null)})),E(),p(!1),u([]);return;case"selectAll":u(J?i.current.map(K=>K.id):[]);return}},v=T=>{I(T),He(T)||(_.current=T.id)},B=T=>{m(T)},te=450;return x.jsx(Be.Provider,{value:{onRefreshFilesList:E,draggingFile:C??void 0,setDraggingFile:v,isMultiSelecting:f,onMultiSelectFlow:O,multiSelectedFlowsID:y,onDeleteFlow:q,refreshFolderStamp:g,setRefreshFolderStamp:d},children:x.jsx(de,{style:{width:te},children:x.jsxs(Ei,{width:te,height:"100vh",pl:4,pr:5,pt:4,gap:4,position:"absolute",top:0,left:0,shadow:"xl",zIndex:Pi,children:[x.jsxs(nt,{alignItems:"center",justifyContent:"space-between",children:[x.jsxs(we,{gap:4,children:[x.jsx(we,{gap:2,children:x.jsx(Oe,{fontSize:19,fontWeight:600,children:"Workspace"})}),x.jsx(or,{}),x.jsx(Fe,{label:"Open workspace save directory",children:x.jsx(xe,{"aria-label":"Open workspace save directory",size:"sm",icon:x.jsx(qn,{}),variant:"outline",colorScheme:"teal",onClick:()=>Mi()})}),x.jsx(Fe,{label:"New workflow",children:x.jsx(xe,{"aria-label":"New workflow",size:"sm",icon:x.jsx(tn,{}),variant:"outline",colorScheme:"teal",onClick:e})})]}),x.jsx(we,{alignItems:"center",children:x.jsx(oa,{})})]}),x.jsxs(nt,{direction:"column",h:"calc(100% - 64px)",children:[x.jsx(da,{selectedTag:s,setSelectedTag:c}),x.jsxs(we,{mb:2,mt:2,p:0,justifyContent:"space-between",children:[x.jsxs(we,{children:[i.current.length>0?x.jsx(sa,{multipleState:f,changeMultipleState:T=>{p(T),!T&&u([])},selectedKeys:y,isSelectedAll:y.length===i.current.length,batchOperationCallback:L}):x.jsx(de,{}),!f&&x.jsx(Fe,{hasArrow:!0,label:"New folder",placement:"bottom-start",children:x.jsx(xe,{size:"sm",variant:"outline",icon:x.jsx(nr,{size:21}),onClick:async()=>{var T;await((T=Ve)==null?void 0:T.create({name:"New Folder"})),E()},"aria-label":"new folder button"})})]}),x.jsxs(Xe,{closeOnSelect:!0,children:[x.jsx(jt,{as:Se,variant:"ghost",size:"xs",pr:0,rightIcon:x.jsx(en,{size:"16"}),children:x.jsxs(we,{children:[x.jsx(Oe,{children:"Sort by:"}),x.jsx(Oe,{display:"inline-block",children:P.current})]})}),x.jsx(at,{children:x.jsx(er,{value:P.current,type:"radio",onChange:T=>U(T),children:Object.values(fn).map((T,J)=>x.jsx(rn,{value:T,children:T},J))})})]})]}),x.jsx(ca,{searchValue:b,onUpdateSearchValue:B}),x.jsx(nt,{overflowY:"auto",overflowX:"hidden",direction:"column",children:x.jsx(Lr,{items:n})})]})]})})})}export{du as default};
