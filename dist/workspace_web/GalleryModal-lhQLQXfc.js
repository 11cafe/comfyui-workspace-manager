import{b as he,f as T,j as o,g as F,e as Q,r as c,m as me,q as z,ab as De,I as vt,L as Mt,G as Tt,ac as Pt,ad as Be,k as xt,o as He,d as W,x as Dt,y as gn,p as rt,E as yn,n as bn,V as pn,h as Sn,M as wn,N as Pn,O as In,Q as kn,R as Cn,S as Nn}from"./input.js";import{ag as jn,ah as Rt,ai as _n,aj as An,_ as En,h as We,F as j,ak as Mn,I as Z,n as Tn,B as Dn,l as Me,m as pe,z as Ot,a7 as Ft,a5 as Bt,k as Rn,H as Ke,i as On,al as zt,A as ut,am as Fn,C as Bn}from"./App-PEx1CV7x.js";import{I as zn,i as Vn,a as Kn,b as $n,g as Ln,S as Un,M as Gn}from"./MediaPreview-Y6b1bLN0.js";import{I as Hn,C as gt,G as Wn}from"./chunk-JARCRF6W-jACX-GXt.js";import{S as Yn}from"./chunk-3RSXBRAN-FDf0ncKM.js";import{L as dt}from"./chunk-K7XRJ7NL-DRLDc1uk.js";import"/scripts/app.js";import"/scripts/api.js";import"./index-pz0vT7Or.js";const Vt=1/60*1e3,qn=typeof performance<"u"?()=>performance.now():()=>Date.now(),Kt=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>setTimeout(()=>e(qn()),Vt);function Xn(e){let t=[],n=[],a=0,r=!1,s=!1;const i=new WeakSet,d={schedule:(l,u=!1,h=!1)=>{const m=h&&r,g=m?t:n;return u&&i.add(l),g.indexOf(l)===-1&&(g.push(l),m&&r&&(a=t.length)),l},cancel:l=>{const u=n.indexOf(l);u!==-1&&n.splice(u,1),i.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[t,n]=[n,t],n.length=0,a=t.length,a)for(let u=0;u<a;u++){const h=t[u];h(l),i.has(h)&&(d.schedule(h),e())}r=!1,s&&(s=!1,d.process(l))}};return d}const Jn=40;let mt=!0,Te=!1,ht=!1;const Se={delta:0,timestamp:0},Re=["read","update","preRender","render","postRender"],Ye=Re.reduce((e,t)=>(e[t]=Xn(()=>Te=!0),e),{}),Zn=Re.reduce((e,t)=>{const n=Ye[t];return e[t]=(a,r=!1,s=!1)=>(Te||ta(),n.schedule(a,r,s)),e},{}),Qn=Re.reduce((e,t)=>(e[t]=Ye[t].cancel,e),{});Re.reduce((e,t)=>(e[t]=()=>Ye[t].process(Se),e),{});const ea=e=>Ye[e].process(Se),$t=e=>{Te=!1,Se.delta=mt?Vt:Math.max(Math.min(e-Se.timestamp,Jn),1),Se.timestamp=e,ht=!0,Re.forEach(ea),ht=!1,Te&&(mt=!1,Kt($t))},ta=()=>{Te=!0,mt=!0,ht||Kt($t)},It=()=>Se;var[na,qe]=he({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[aa,yt]=he({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[ra,zr,oa,sa]=jn(),Lt=T(function(t,n){const{getButtonProps:a}=yt(),r=a(t,n),i={display:"flex",alignItems:"center",width:"100%",outline:0,...qe().button};return o.jsx(F.button,{...r,className:Q("chakra-accordion__button",t.className),__css:i})});Lt.displayName="AccordionButton";function la(e){const{onChange:t,defaultIndex:n,index:a,allowMultiple:r,allowToggle:s,...i}=e;ua(e),da(e);const d=oa(),[l,u]=c.useState(-1);c.useEffect(()=>()=>{u(-1)},[]);const[h,m]=Rt({value:a,defaultValue(){return r?n??[]:n??-1},onChange:t});return{index:h,setIndex:m,htmlProps:i,getAccordionItemProps:x=>{let C=!1;return x!==null&&(C=Array.isArray(h)?h.includes(x):h===x),{isOpen:C,onChange:P=>{if(x!==null)if(r&&Array.isArray(h)){const I=P?h.concat(x):h.filter(N=>N!==x);m(I)}else P?m(x):s&&m(-1)}}},focusedIndex:l,setFocusedIndex:u,descendants:d}}var[ia,bt]=he({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function ca(e){const{isDisabled:t,isFocusable:n,id:a,...r}=e,{getAccordionItemProps:s,setFocusedIndex:i}=bt(),d=c.useRef(null),l=c.useId(),u=a??l,h=`accordion-button-${u}`,m=`accordion-panel-${u}`;ma(e);const{register:g,index:x,descendants:C}=sa({disabled:t&&!n}),{isOpen:w,onChange:P}=s(x===-1?null:x);ha({isOpen:w,isDisabled:t});const I=()=>{P==null||P(!0)},N=()=>{P==null||P(!1)},G=c.useCallback(()=>{P==null||P(!w),i(x)},[x,i,w,P]),H=c.useCallback(D=>{const b={ArrowDown:()=>{const p=C.nextEnabled(x);p==null||p.node.focus()},ArrowUp:()=>{const p=C.prevEnabled(x);p==null||p.node.focus()},Home:()=>{const p=C.firstEnabled();p==null||p.node.focus()},End:()=>{const p=C.lastEnabled();p==null||p.node.focus()}}[D.key];b&&(D.preventDefault(),b(D))},[C,x]),ee=c.useCallback(()=>{i(x)},[i,x]),K=c.useCallback(function(R={},b=null){return{...R,type:"button",ref:me(g,d,b),id:h,disabled:!!t,"aria-expanded":!!w,"aria-controls":m,onClick:z(R.onClick,G),onFocus:z(R.onFocus,ee),onKeyDown:z(R.onKeyDown,H)}},[h,t,w,G,ee,H,m,g]),re=c.useCallback(function(R={},b=null){return{...R,ref:b,role:"region",id:m,"aria-labelledby":h,hidden:!w}},[h,w,m]);return{isOpen:w,isDisabled:t,isFocusable:n,onOpen:I,onClose:N,getButtonProps:K,getPanelProps:re,htmlProps:r}}function ua(e){const t=e.index||e.defaultIndex,n=t!=null&&!Array.isArray(t)&&e.allowMultiple;De({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof t},`})}function da(e){De({condition:!!(e.allowMultiple&&e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function ma(e){De({condition:!!(e.isFocusable&&!e.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function ha(e){De({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}function Ut(e){const{isOpen:t,isDisabled:n}=yt(),{reduceMotion:a}=bt(),r=Q("chakra-accordion__icon",e.className),s=qe(),i={opacity:n?.4:1,transform:t?"rotate(-180deg)":void 0,transition:a?void 0:"transform 0.2s",transformOrigin:"center",...s.icon};return o.jsx(vt,{viewBox:"0 0 24 24","aria-hidden":!0,className:r,__css:i,...e,children:o.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}Ut.displayName="AccordionIcon";var Gt=T(function(t,n){const{children:a,className:r}=t,{htmlProps:s,...i}=ca(t),l={...qe().container,overflowAnchor:"none"},u=c.useMemo(()=>i,[i]);return o.jsx(aa,{value:u,children:o.jsx(F.div,{ref:n,...s,className:Q("chakra-accordion__item",r),__css:l,children:typeof a=="function"?a({isExpanded:!!i.isOpen,isDisabled:!!i.isDisabled}):a})})});Gt.displayName="AccordionItem";var fa=e=>e!=null&&parseInt(e.toString(),10)>0,kt={exit:{height:{duration:.2,ease:Be.ease},opacity:{duration:.3,ease:Be.ease}},enter:{height:{duration:.3,ease:Be.ease},opacity:{duration:.4,ease:Be.ease}}},va={exit:({animateOpacity:e,startingHeight:t,transition:n,transitionEnd:a,delay:r})=>{var s;return{...e&&{opacity:fa(t)?1:0},height:t,transitionEnd:a==null?void 0:a.exit,transition:(s=n==null?void 0:n.exit)!=null?s:Pt.exit(kt.exit,r)}},enter:({animateOpacity:e,endingHeight:t,transition:n,transitionEnd:a,delay:r})=>{var s;return{...e&&{opacity:1},height:t,transitionEnd:a==null?void 0:a.enter,transition:(s=n==null?void 0:n.enter)!=null?s:Pt.enter(kt.enter,r)}}},Ht=c.forwardRef((e,t)=>{const{in:n,unmountOnExit:a,animateOpacity:r=!0,startingHeight:s=0,endingHeight:i="auto",style:d,className:l,transition:u,transitionEnd:h,...m}=e,[g,x]=c.useState(!1);c.useEffect(()=>{const N=setTimeout(()=>{x(!0)});return()=>clearTimeout(N)},[]),De({condition:Number(s)>0&&!!a,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const C=parseFloat(s.toString())>0,w={startingHeight:s,endingHeight:i,animateOpacity:r,transition:g?u:{enter:{duration:0}},transitionEnd:{enter:h==null?void 0:h.enter,exit:a?h==null?void 0:h.exit:{...h==null?void 0:h.exit,display:C?"block":"none"}}},P=a?n:!0,I=n||a?"enter":"exit";return o.jsx(Mt,{initial:!1,custom:w,children:P&&o.jsx(Tt.div,{ref:t,...m,className:Q("chakra-collapse",l),style:{overflow:"hidden",display:"block",...d},custom:w,variants:va,initial:a?"exit":!1,animate:I,exit:"exit"})})});Ht.displayName="Collapse";var Wt=T(function(t,n){const{className:a,motionProps:r,...s}=t,{reduceMotion:i}=bt(),{getPanelProps:d,isOpen:l}=yt(),u=d(s,n),h=Q("chakra-accordion__panel",a),m=qe();i||delete u.hidden;const g=o.jsx(F.div,{...u,__css:m.panel,className:h});return i?g:o.jsx(Ht,{in:l,...r,children:g})});Wt.displayName="AccordionPanel";var Yt=T(function({children:t,reduceMotion:n,...a},r){const s=xt("Accordion",a),i=He(a),{htmlProps:d,descendants:l,...u}=la(i),h=c.useMemo(()=>({...u,reduceMotion:!!n}),[u,n]);return o.jsx(ra,{value:l,children:o.jsx(ia,{value:h,children:o.jsx(na,{value:s,children:o.jsx(F.div,{ref:r,...d,className:Q("chakra-accordion",a.className),__css:s.root,children:t})})})})});Yt.displayName="Accordion";function xa(e){const t=parseFloat(e);return typeof t!="number"||Number.isNaN(t)?0:t}function pt(e,t){let n=xa(e);const a=10**(t??10);return n=Math.round(n*a)/a,t?n.toFixed(t):n.toString()}function ft(e){if(!Number.isFinite(e))return 0;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n+=1;return n}function Ct(e,t,n){return(e-t)*100/(n-t)}function ga(e,t,n){return(n-t)*e+t}function Nt(e,t,n){const a=Math.round((e-t)/n)*n+t,r=ft(n);return pt(a,r)}function $e(e,t,n){return e==null?e:(n<t&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(e,t),n))}function ya(e={}){const{onChange:t,precision:n,defaultValue:a,value:r,step:s=1,min:i=Number.MIN_SAFE_INTEGER,max:d=Number.MAX_SAFE_INTEGER,keepWithinRange:l=!0}=e,u=W(t),[h,m]=c.useState(()=>{var b;return a==null?"":(b=ot(a,s,n))!=null?b:""}),g=typeof r<"u",x=g?r:h,C=qt(ae(x),s),w=n??C,P=c.useCallback(b=>{b!==x&&(g||m(b.toString()),u==null||u(b.toString(),ae(b)))},[u,g,x]),I=c.useCallback(b=>{let p=b;return l&&(p=$e(p,i,d)),pt(p,w)},[w,l,d,i]),N=c.useCallback((b=s)=>{let p;x===""?p=ae(b):p=ae(x)+b,p=I(p),P(p)},[I,s,P,x]),G=c.useCallback((b=s)=>{let p;x===""?p=ae(-b):p=ae(x)-b,p=I(p),P(p)},[I,s,P,x]),H=c.useCallback(()=>{var b;let p;a==null?p="":p=(b=ot(a,s,n))!=null?b:i,P(p)},[a,n,s,P,i]),ee=c.useCallback(b=>{var p;const oe=(p=ot(b,s,w))!=null?p:i;P(oe)},[w,s,P,i]),K=ae(x);return{isOutOfRange:K>d||K<i,isAtMax:K===d,isAtMin:K===i,precision:w,value:x,valueAsNumber:K,update:P,reset:H,increment:N,decrement:G,clamp:I,cast:ee,setValue:m}}function ae(e){return parseFloat(e.toString().replace(/[^\w.-]+/g,""))}function qt(e,t){return Math.max(ft(t),ft(e))}function ot(e,t,n){const a=ae(e);if(Number.isNaN(a))return;const r=qt(a,t);return pt(a,n??r)}var ba=e=>o.jsx(vt,{viewBox:"0 0 24 24",...e,children:o.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})}),pa=e=>o.jsx(vt,{viewBox:"0 0 24 24",...e,children:o.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})});function jt(e,t,n,a){c.useEffect(()=>{var r;if(!e.current||!a)return;const s=(r=e.current.ownerDocument.defaultView)!=null?r:window,i=Array.isArray(t)?t:[t],d=new s.MutationObserver(l=>{for(const u of l)u.type==="attributes"&&u.attributeName&&i.includes(u.attributeName)&&n(u)});return d.observe(e.current,{attributes:!0,attributeFilter:i}),()=>d.disconnect()})}function Sa(e,t){const n=W(e);c.useEffect(()=>{let a=null;const r=()=>n();return t!==null&&(a=window.setInterval(r,t)),()=>{a&&window.clearInterval(a)}},[t,n])}var wa=50,_t=300;function Pa(e,t){const[n,a]=c.useState(!1),[r,s]=c.useState(null),[i,d]=c.useState(!0),l=c.useRef(null),u=()=>clearTimeout(l.current);Sa(()=>{r==="increment"&&e(),r==="decrement"&&t()},n?wa:null);const h=c.useCallback(()=>{i&&e(),l.current=setTimeout(()=>{d(!1),a(!0),s("increment")},_t)},[e,i]),m=c.useCallback(()=>{i&&t(),l.current=setTimeout(()=>{d(!1),a(!0),s("decrement")},_t)},[t,i]),g=c.useCallback(()=>{d(!0),a(!1),u()},[]);return c.useEffect(()=>()=>u(),[]),{up:h,down:m,stop:g,isSpinning:n}}var Ia=/^[Ee0-9+\-.]$/;function ka(e){return Ia.test(e)}function Ca(e,t){if(e.key==null)return!0;const n=e.ctrlKey||e.altKey||e.metaKey;return!(e.key.length===1)||n?!0:t(e.key)}function Na(e={}){const{focusInputOnChange:t=!0,clampValueOnBlur:n=!0,keepWithinRange:a=!0,min:r=Number.MIN_SAFE_INTEGER,max:s=Number.MAX_SAFE_INTEGER,step:i=1,isReadOnly:d,isDisabled:l,isRequired:u,isInvalid:h,pattern:m="[0-9]*(.[0-9]+)?",inputMode:g="decimal",allowMouseWheel:x,id:C,onChange:w,precision:P,name:I,"aria-describedby":N,"aria-label":G,"aria-labelledby":H,onFocus:ee,onBlur:K,onInvalid:re,getAriaValueText:D,isValidCharacter:R,format:b,parse:p,...oe}=e,se=W(ee),we=W(K),Y=W(re),le=W(R??ka),ie=W(D),S=ya(e),{update:$,increment:M,decrement:Fe}=S,[wt,fe]=c.useState(!1),q=!(d||l),_=c.useRef(null),te=c.useRef(null),ve=c.useRef(null),Pe=c.useRef(null),xe=c.useCallback(f=>f.split("").filter(le).join(""),[le]),ce=c.useCallback(f=>{var k;return(k=p==null?void 0:p(f))!=null?k:f},[p]),X=c.useCallback(f=>{var k;return((k=b==null?void 0:b(f))!=null?k:f).toString()},[b]);Dt(()=>{(S.valueAsNumber>s||S.valueAsNumber<r)&&(Y==null||Y("rangeOverflow",X(S.value),S.valueAsNumber))},[S.valueAsNumber,S.value,X,Y]),gn(()=>{if(!_.current)return;if(_.current.value!=S.value){const k=ce(_.current.value);S.setValue(xe(k))}},[ce,xe]);const ue=c.useCallback((f=i)=>{q&&M(f)},[M,q,i]),ge=c.useCallback((f=i)=>{q&&Fe(f)},[Fe,q,i]),A=Pa(ue,ge);jt(ve,"disabled",A.stop,A.isSpinning),jt(Pe,"disabled",A.stop,A.isSpinning);const L=c.useCallback(f=>{if(f.nativeEvent.isComposing)return;const E=ce(f.currentTarget.value);$(xe(E)),te.current={start:f.currentTarget.selectionStart,end:f.currentTarget.selectionEnd}},[$,xe,ce]),Ie=c.useCallback(f=>{var k,E,O;se==null||se(f),te.current&&(f.target.selectionStart=(E=te.current.start)!=null?E:(k=f.currentTarget.value)==null?void 0:k.length,f.currentTarget.selectionEnd=(O=te.current.end)!=null?O:f.currentTarget.selectionStart)},[se]),ke=c.useCallback(f=>{if(f.nativeEvent.isComposing)return;Ca(f,le)||f.preventDefault();const k=ye(f)*i,E=f.key,v={ArrowUp:()=>ue(k),ArrowDown:()=>ge(k),Home:()=>$(r),End:()=>$(s)}[E];v&&(f.preventDefault(),v(f))},[le,i,ue,ge,$,r,s]),ye=f=>{let k=1;return(f.metaKey||f.ctrlKey)&&(k=.1),f.shiftKey&&(k=10),k},Ce=c.useMemo(()=>{const f=ie==null?void 0:ie(S.value);if(f!=null)return f;const k=S.value.toString();return k||void 0},[S.value,ie]),Ne=c.useCallback(()=>{let f=S.value;if(S.value==="")return;/^[eE]/.test(S.value.toString())?S.setValue(""):(S.valueAsNumber<r&&(f=r),S.valueAsNumber>s&&(f=s),S.cast(f))},[S,s,r]),je=c.useCallback(()=>{fe(!1),n&&Ne()},[n,fe,Ne]),de=c.useCallback(()=>{t&&requestAnimationFrame(()=>{var f;(f=_.current)==null||f.focus()})},[t]),_e=c.useCallback(f=>{f.preventDefault(),A.up(),de()},[de,A]),Ae=c.useCallback(f=>{f.preventDefault(),A.down(),de()},[de,A]);_n(()=>_.current,"wheel",f=>{var k,E;const v=((E=(k=_.current)==null?void 0:k.ownerDocument)!=null?E:document).activeElement===_.current;if(!x||!v)return;f.preventDefault();const y=ye(f)*i,ne=Math.sign(f.deltaY);ne===-1?ue(y):ne===1&&ge(y)},{passive:!1});const Qe=c.useCallback((f={},k=null)=>{const E=l||a&&S.isAtMax;return{...f,ref:me(k,ve),role:"button",tabIndex:-1,onPointerDown:z(f.onPointerDown,O=>{O.button!==0||E||_e(O)}),onPointerLeave:z(f.onPointerLeave,A.stop),onPointerUp:z(f.onPointerUp,A.stop),disabled:E,"aria-disabled":rt(E)}},[S.isAtMax,a,_e,A.stop,l]),et=c.useCallback((f={},k=null)=>{const E=l||a&&S.isAtMin;return{...f,ref:me(k,Pe),role:"button",tabIndex:-1,onPointerDown:z(f.onPointerDown,O=>{O.button!==0||E||Ae(O)}),onPointerLeave:z(f.onPointerLeave,A.stop),onPointerUp:z(f.onPointerUp,A.stop),disabled:E,"aria-disabled":rt(E)}},[S.isAtMin,a,Ae,A.stop,l]),tt=c.useCallback((f={},k=null)=>{var E,O,v,y;return{name:I,inputMode:g,type:"text",pattern:m,"aria-labelledby":H,"aria-label":G,"aria-describedby":N,id:C,disabled:l,...f,readOnly:(E=f.readOnly)!=null?E:d,"aria-readonly":(O=f.readOnly)!=null?O:d,"aria-required":(v=f.required)!=null?v:u,required:(y=f.required)!=null?y:u,ref:me(_,k),value:X(S.value),role:"spinbutton","aria-valuemin":r,"aria-valuemax":s,"aria-valuenow":Number.isNaN(S.valueAsNumber)?void 0:S.valueAsNumber,"aria-invalid":rt(h??S.isOutOfRange),"aria-valuetext":Ce,autoComplete:"off",autoCorrect:"off",onChange:z(f.onChange,L),onKeyDown:z(f.onKeyDown,ke),onFocus:z(f.onFocus,Ie,()=>fe(!0)),onBlur:z(f.onBlur,we,je)}},[I,g,m,H,G,X,N,C,l,u,d,h,S.value,S.valueAsNumber,S.isOutOfRange,r,s,Ce,L,ke,Ie,we,je]);return{value:X(S.value),valueAsNumber:S.valueAsNumber,isFocused:wt,isDisabled:l,isReadOnly:d,getIncrementButtonProps:Qe,getDecrementButtonProps:et,getInputProps:tt,htmlProps:oe}}var[ja,Xe]=he({name:"NumberInputStylesContext",errorMessage:`useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in "<NumberInput />" `}),[_a,St]=he({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),Xt=T(function(t,n){const a=xt("NumberInput",t),r=He(t),s=An(r),{htmlProps:i,...d}=Na(s),l=c.useMemo(()=>d,[d]);return o.jsx(_a,{value:l,children:o.jsx(ja,{value:a,children:o.jsx(F.div,{...i,ref:n,className:Q("chakra-numberinput",t.className),__css:{position:"relative",zIndex:0,...a.root}})})})});Xt.displayName="NumberInput";var Jt=T(function(t,n){const a=Xe();return o.jsx(F.div,{"aria-hidden":!0,ref:n,...t,__css:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1,...a.stepperGroup}})});Jt.displayName="NumberInputStepper";var Zt=T(function(t,n){const{getInputProps:a}=St(),r=a(t,n),s=Xe();return o.jsx(F.input,{...r,className:Q("chakra-numberinput__field",t.className),__css:{width:"100%",...s.field}})});Zt.displayName="NumberInputField";var Qt=F("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),en=T(function(t,n){var a;const r=Xe(),{getDecrementButtonProps:s}=St(),i=s(t,n);return o.jsx(Qt,{...i,__css:r.stepper,children:(a=t.children)!=null?a:o.jsx(ba,{})})});en.displayName="NumberDecrementStepper";var tn=T(function(t,n){var a;const{getIncrementButtonProps:r}=St(),s=r(t,n),i=Xe();return o.jsx(Qt,{...s,__css:i.stepper,children:(a=t.children)!=null?a:o.jsx(pa,{})})});tn.displayName="NumberIncrementStepper";var be=e=>e?"":void 0,st=e=>e?!0:void 0,Oe=(...e)=>e.filter(Boolean).join(" ");function lt(...e){return function(n){e.some(a=>(a==null||a(n),n==null?void 0:n.defaultPrevented))}}function ze(e){const{orientation:t,vertical:n,horizontal:a}=e;return t==="vertical"?n:a}var Le={width:0,height:0},Ve=e=>e||Le;function Aa(e){const{orientation:t,thumbPercents:n,thumbRects:a,isReversed:r}=e,s=w=>{var P;const I=(P=a[w])!=null?P:Le;return{position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...ze({orientation:t,vertical:{bottom:`calc(${n[w]}% - ${I.height/2}px)`},horizontal:{left:`calc(${n[w]}% - ${I.width/2}px)`}})}},i=t==="vertical"?a.reduce((w,P)=>Ve(w).height>Ve(P).height?w:P,Le):a.reduce((w,P)=>Ve(w).width>Ve(P).width?w:P,Le),d={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0,...ze({orientation:t,vertical:i?{paddingLeft:i.width/2,paddingRight:i.width/2}:{},horizontal:i?{paddingTop:i.height/2,paddingBottom:i.height/2}:{}})},l={position:"absolute",...ze({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},u=n.length===1,h=[0,r?100-n[0]:n[0]],m=u?h:n;let g=m[0];!u&&r&&(g=100-g);const x=Math.abs(m[m.length-1]-m[0]),C={...l,...ze({orientation:t,vertical:r?{height:`${x}%`,top:`${g}%`}:{height:`${x}%`,bottom:`${g}%`},horizontal:r?{width:`${x}%`,right:`${g}%`}:{width:`${x}%`,left:`${g}%`}})};return{trackStyle:l,innerTrackStyle:C,rootStyle:d,getThumbStyle:s}}function Ea(e){const{isReversed:t,direction:n,orientation:a}=e;return n==="ltr"||a==="vertical"?t:!t}function Ma(e,t,n,a){return e.addEventListener(t,n,a),()=>{e.removeEventListener(t,n,a)}}function Ta(e){const t=Ra(e);return typeof t.PointerEvent<"u"&&e instanceof t.PointerEvent?e.pointerType==="mouse":e instanceof t.MouseEvent}function nn(e){return!!e.touches}function Da(e){return nn(e)&&e.touches.length>1}function Ra(e){var t;return(t=e.view)!=null?t:window}function Oa(e,t="page"){const n=e.touches[0]||e.changedTouches[0];return{x:n[`${t}X`],y:n[`${t}Y`]}}function Fa(e,t="page"){return{x:e[`${t}X`],y:e[`${t}Y`]}}function an(e,t="page"){return nn(e)?Oa(e,t):Fa(e,t)}function Ba(e){return t=>{const n=Ta(t);(!n||n&&t.button===0)&&e(t)}}function za(e,t=!1){function n(r){e(r,{point:an(r)})}return t?Ba(n):n}function Ue(e,t,n,a){return Ma(e,t,za(n,t==="pointerdown"),a)}var Va=Object.defineProperty,Ka=(e,t,n)=>t in e?Va(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U=(e,t,n)=>(Ka(e,typeof t!="symbol"?t+"":t,n),n),$a=class{constructor(e,t,n){U(this,"history",[]),U(this,"startEvent",null),U(this,"lastEvent",null),U(this,"lastEventInfo",null),U(this,"handlers",{}),U(this,"removeListeners",()=>{}),U(this,"threshold",3),U(this,"win"),U(this,"updatePoint",()=>{if(!(this.lastEvent&&this.lastEventInfo))return;const d=it(this.lastEventInfo,this.history),l=this.startEvent!==null,u=Ha(d.offset,{x:0,y:0})>=this.threshold;if(!l&&!u)return;const{timestamp:h}=It();this.history.push({...d.point,timestamp:h});const{onStart:m,onMove:g}=this.handlers;l||(m==null||m(this.lastEvent,d),this.startEvent=this.lastEvent),g==null||g(this.lastEvent,d)}),U(this,"onPointerMove",(d,l)=>{this.lastEvent=d,this.lastEventInfo=l,Zn.update(this.updatePoint,!0)}),U(this,"onPointerUp",(d,l)=>{const u=it(l,this.history),{onEnd:h,onSessionEnd:m}=this.handlers;m==null||m(d,u),this.end(),!(!h||!this.startEvent)&&(h==null||h(d,u))});var a;if(this.win=(a=e.view)!=null?a:window,Da(e))return;this.handlers=t,n&&(this.threshold=n),e.stopPropagation(),e.preventDefault();const r={point:an(e)},{timestamp:s}=It();this.history=[{...r.point,timestamp:s}];const{onSessionStart:i}=t;i==null||i(e,it(r,this.history)),this.removeListeners=Ga(Ue(this.win,"pointermove",this.onPointerMove),Ue(this.win,"pointerup",this.onPointerUp),Ue(this.win,"pointercancel",this.onPointerUp))}updateHandlers(e){this.handlers=e}end(){var e;(e=this.removeListeners)==null||e.call(this),Qn.update(this.updatePoint)}};function At(e,t){return{x:e.x-t.x,y:e.y-t.y}}function it(e,t){return{point:e.point,delta:At(e.point,t[t.length-1]),offset:At(e.point,t[0]),velocity:Ua(t,.1)}}var La=e=>e*1e3;function Ua(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,a=null;const r=e[e.length-1];for(;n>=0&&(a=e[n],!(r.timestamp-a.timestamp>La(t)));)n--;if(!a)return{x:0,y:0};const s=(r.timestamp-a.timestamp)/1e3;if(s===0)return{x:0,y:0};const i={x:(r.x-a.x)/s,y:(r.y-a.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Ga(...e){return t=>e.reduce((n,a)=>a(n),t)}function ct(e,t){return Math.abs(e-t)}function Et(e){return"x"in e&&"y"in e}function Ha(e,t){if(typeof e=="number"&&typeof t=="number")return ct(e,t);if(Et(e)&&Et(t)){const n=ct(e.x,t.x),a=ct(e.y,t.y);return Math.sqrt(n**2+a**2)}return 0}function rn(e){const t=c.useRef(null);return t.current=e,t}function Wa(e,t){const{onPan:n,onPanStart:a,onPanEnd:r,onPanSessionStart:s,onPanSessionEnd:i,threshold:d}=t,l=!!(n||a||r||s||i),u=c.useRef(null),h=rn({onSessionStart:s,onSessionEnd:i,onStart:a,onMove:n,onEnd(m,g){u.current=null,r==null||r(m,g)}});c.useEffect(()=>{var m;(m=u.current)==null||m.updateHandlers(h.current)}),c.useEffect(()=>{const m=e.current;if(!m||!l)return;function g(x){u.current=new $a(x,h.current,d)}return Ue(m,"pointerdown",g)},[e,l,h,d]),c.useEffect(()=>()=>{var m;(m=u.current)==null||m.end(),u.current=null},[])}function Ya(e,t){if(!e){t(void 0);return}t({width:e.offsetWidth,height:e.offsetHeight});const n=e.ownerDocument.defaultView??window,a=new n.ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const[s]=r;let i,d;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;i=u.inlineSize,d=u.blockSize}else i=e.offsetWidth,d=e.offsetHeight;t({width:i,height:d})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}var qa=globalThis!=null&&globalThis.document?c.useLayoutEffect:c.useEffect;function Xa(e,t){var n,a;if(!e||!e.parentElement)return;const r=(a=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?a:window,s=new r.MutationObserver(()=>{t()});return s.observe(e.parentElement,{childList:!0}),()=>{s.disconnect()}}function Ja({getNodes:e,observeMutation:t=!0}){const[n,a]=c.useState([]),[r,s]=c.useState(0);return qa(()=>{const i=e(),d=i.map((l,u)=>Ya(l,h=>{a(m=>[...m.slice(0,u),h,...m.slice(u+1)])}));if(t){const l=i[0];d.push(Xa(l,()=>{s(u=>u+1)}))}return()=>{d.forEach(l=>{l==null||l()})}},[r]),n}function Za(e){return typeof e=="object"&&e!==null&&"current"in e}function Qa(e){const[t]=Ja({observeMutation:!1,getNodes(){return[Za(e)?e.current:e]}});return t}function er(e){var t;const{min:n=0,max:a=100,onChange:r,value:s,defaultValue:i,isReversed:d,direction:l="ltr",orientation:u="horizontal",id:h,isDisabled:m,isReadOnly:g,onChangeStart:x,onChangeEnd:C,step:w=1,getAriaValueText:P,"aria-valuetext":I,"aria-label":N,"aria-labelledby":G,name:H,focusThumbOnChange:ee=!0,...K}=e,re=W(x),D=W(C),R=W(P),b=Ea({isReversed:d,direction:l,orientation:u}),[p,oe]=Rt({value:s,defaultValue:i??nr(n,a),onChange:r}),[se,we]=c.useState(!1),[Y,le]=c.useState(!1),ie=!(m||g),S=(a-n)/10,$=w||(a-n)/100,M=$e(p,n,a),Fe=a-M+n,fe=Ct(b?Fe:M,n,a),q=u==="vertical",_=rn({min:n,max:a,step:w,isDisabled:m,value:M,isInteractive:ie,isReversed:b,isVertical:q,eventSource:null,focusThumbOnChange:ee,orientation:u}),te=c.useRef(null),ve=c.useRef(null),Pe=c.useRef(null),xe=c.useId(),ce=h??xe,[X,ue]=[`slider-thumb-${ce}`,`slider-track-${ce}`],ge=c.useCallback(v=>{var y,ne;if(!te.current)return;const B=_.current;B.eventSource="pointer";const J=te.current.getBoundingClientRect(),{clientX:nt,clientY:fn}=(ne=(y=v.touches)==null?void 0:y[0])!=null?ne:v,vn=q?J.bottom-fn:nt-J.left,xn=q?J.height:J.width;let at=vn/xn;b&&(at=1-at);let Ee=ga(at,B.min,B.max);return B.step&&(Ee=parseFloat(Nt(Ee,B.min,B.step))),Ee=$e(Ee,B.min,B.max),Ee},[q,b,_]),A=c.useCallback(v=>{const y=_.current;y.isInteractive&&(v=parseFloat(Nt(v,y.min,$)),v=$e(v,y.min,y.max),oe(v))},[$,oe,_]),L=c.useMemo(()=>({stepUp(v=$){const y=b?M-v:M+v;A(y)},stepDown(v=$){const y=b?M+v:M-v;A(y)},reset(){A(i||0)},stepTo(v){A(v)}}),[A,b,M,$,i]),Ie=c.useCallback(v=>{const y=_.current,B={ArrowRight:()=>L.stepUp(),ArrowUp:()=>L.stepUp(),ArrowLeft:()=>L.stepDown(),ArrowDown:()=>L.stepDown(),PageUp:()=>L.stepUp(S),PageDown:()=>L.stepDown(S),Home:()=>A(y.min),End:()=>A(y.max)}[v.key];B&&(v.preventDefault(),v.stopPropagation(),B(v),y.eventSource="keyboard")},[L,A,S,_]),ke=(t=R==null?void 0:R(M))!=null?t:I,ye=Qa(ve),{getThumbStyle:Ce,rootStyle:Ne,trackStyle:je,innerTrackStyle:de}=c.useMemo(()=>{const v=_.current,y=ye??{width:0,height:0};return Aa({isReversed:b,orientation:v.orientation,thumbRects:[y],thumbPercents:[fe]})},[b,ye,fe,_]),_e=c.useCallback(()=>{_.current.focusThumbOnChange&&setTimeout(()=>{var y;return(y=ve.current)==null?void 0:y.focus()})},[_]);Dt(()=>{const v=_.current;_e(),v.eventSource==="keyboard"&&(D==null||D(v.value))},[M,D]);function Ae(v){const y=ge(v);y!=null&&y!==_.current.value&&oe(y)}Wa(Pe,{onPanSessionStart(v){const y=_.current;y.isInteractive&&(we(!0),_e(),Ae(v),re==null||re(y.value))},onPanSessionEnd(){const v=_.current;v.isInteractive&&(we(!1),D==null||D(v.value))},onPan(v){_.current.isInteractive&&Ae(v)}});const Qe=c.useCallback((v={},y=null)=>({...v,...K,ref:me(y,Pe),tabIndex:-1,"aria-disabled":st(m),"data-focused":be(Y),style:{...v.style,...Ne}}),[K,m,Y,Ne]),et=c.useCallback((v={},y=null)=>({...v,ref:me(y,te),id:ue,"data-disabled":be(m),style:{...v.style,...je}}),[m,ue,je]),tt=c.useCallback((v={},y=null)=>({...v,ref:y,style:{...v.style,...de}}),[de]),f=c.useCallback((v={},y=null)=>({...v,ref:me(y,ve),role:"slider",tabIndex:ie?0:void 0,id:X,"data-active":be(se),"aria-valuetext":ke,"aria-valuemin":n,"aria-valuemax":a,"aria-valuenow":M,"aria-orientation":u,"aria-disabled":st(m),"aria-readonly":st(g),"aria-label":N,"aria-labelledby":N?void 0:G,style:{...v.style,...Ce(0)},onKeyDown:lt(v.onKeyDown,Ie),onFocus:lt(v.onFocus,()=>le(!0)),onBlur:lt(v.onBlur,()=>le(!1))}),[ie,X,se,ke,n,a,M,u,m,g,N,G,Ce,Ie]),k=c.useCallback((v,y=null)=>{const ne=!(v.value<n||v.value>a),B=M>=v.value,J=Ct(v.value,n,a),nt={position:"absolute",pointerEvents:"none",...tr({orientation:u,vertical:{bottom:b?`${100-J}%`:`${J}%`},horizontal:{left:b?`${100-J}%`:`${J}%`}})};return{...v,ref:y,role:"presentation","aria-hidden":!0,"data-disabled":be(m),"data-invalid":be(!ne),"data-highlighted":be(B),style:{...v.style,...nt}}},[m,b,a,n,u,M]),E=c.useCallback((v={},y=null)=>({...v,ref:y,type:"hidden",value:M,name:H}),[H,M]);return{state:{value:M,isFocused:Y,isDragging:se},actions:L,getRootProps:Qe,getTrackProps:et,getInnerTrackProps:tt,getThumbProps:f,getMarkerProps:k,getInputProps:E}}function tr(e){const{orientation:t,vertical:n,horizontal:a}=e;return t==="vertical"?n:a}function nr(e,t){return t<e?e:e+(t-e)/2}var[ar,Je]=he({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[rr,Ze]=he({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),on=T((e,t)=>{var n;const a={...e,orientation:(n=e==null?void 0:e.orientation)!=null?n:"horizontal"},r=xt("Slider",a),s=He(a),{direction:i}=yn();s.direction=i;const{getInputProps:d,getRootProps:l,...u}=er(s),h=l(),m=d({},t);return o.jsx(ar,{value:u,children:o.jsx(rr,{value:r,children:o.jsxs(F.div,{...h,className:Oe("chakra-slider",a.className),__css:r.container,children:[a.children,o.jsx("input",{...m})]})})})});on.displayName="Slider";var sn=T((e,t)=>{const{getThumbProps:n}=Je(),a=Ze(),r=n(e,t);return o.jsx(F.div,{...r,className:Oe("chakra-slider__thumb",e.className),__css:a.thumb})});sn.displayName="SliderThumb";var ln=T((e,t)=>{const{getTrackProps:n}=Je(),a=Ze(),r=n(e,t);return o.jsx(F.div,{...r,className:Oe("chakra-slider__track",e.className),__css:a.track})});ln.displayName="SliderTrack";var cn=T((e,t)=>{const{getInnerTrackProps:n}=Je(),a=Ze(),r=n(e,t);return o.jsx(F.div,{...r,className:Oe("chakra-slider__filled-track",e.className),__css:a.filledTrack})});cn.displayName="SliderFilledTrack";var or=T((e,t)=>{const{getMarkerProps:n}=Je(),a=Ze(),r=n(e,t);return o.jsx(F.div,{...r,className:Oe("chakra-slider__marker",e.className),__css:a.mark})});or.displayName="SliderMark";function sr(e,t=[]){const n=Object.assign({},e);for(const a of t)a in n&&delete n[a];return n}var lr=["h","minH","height","minHeight"],un=T((e,t)=>{const n=bn("Textarea",e),{className:a,rows:r,...s}=He(e),i=En(s),d=r?sr(n,lr):n;return o.jsx(F.textarea,{ref:t,rows:r,...i,className:Q("chakra-textarea",a),__css:d})});un.displayName="Textarea";var ir=We("arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]),cr=We("chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]),dn=We("pin-filled","IconPinFilled",[["path",{d:"M15.113 3.21l.094 .083l5.5 5.5a1 1 0 0 1 -1.175 1.59l-3.172 3.171l-1.424 3.797a1 1 0 0 1 -.158 .277l-.07 .08l-1.5 1.5a1 1 0 0 1 -1.32 .082l-.095 -.083l-2.793 -2.792l-3.793 3.792a1 1 0 0 1 -1.497 -1.32l.083 -.094l3.792 -3.793l-2.792 -2.793a1 1 0 0 1 -.083 -1.32l.083 -.094l1.5 -1.5a1 1 0 0 1 .258 -.187l.098 -.042l3.796 -1.425l3.171 -3.17a1 1 0 0 1 1.497 -1.26z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]),mn=We("pin","IconPin",[["path",{d:"M15 4.5l-4 4l-4 1.5l-1.5 1.5l7 7l1.5 -1.5l1.5 -4l4 -4",key:"svg-0"}],["path",{d:"M9 15l-4.5 4.5",key:"svg-1"}],["path",{d:"M14.5 4l5.5 5.5",key:"svg-2"}]]);const ur=({setMediaAct:e,media:t,currentNum:n})=>{const[a,r]=c.useState(0);c.useEffect(()=>{n!==void 0&&r(n)},[n]);const s=l=>{const u=(a+l+t.length)%t.length;r(u),e&&e(t[u])},i={width:"100%",height:"100%"},d={enter:l=>({x:l>0?500:-500,opacity:1}),center:{x:0,opacity:1},exit:l=>({x:l<0?500:-500,opacity:1})};return o.jsxs(j,{justifyContent:"center",alignItems:"center",position:"relative",width:i.width,height:i.height,overflow:"hidden",children:[o.jsx(Mt,{custom:a,children:t.map((l,u)=>o.jsx(Tt.div,{custom:u-a,variants:d,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},style:{position:"absolute",cursor:"pointer",width:"100%",height:"100%",display:u===a?"block":"none"},onClick:()=>{window.open(l.imageUrl)},children:Mn(l.imageUrl)?o.jsx(Hn,{src:l.imageUrl,alt:`image-${l.id}`,width:"100%",height:"100%",objectFit:"contain"}):o.jsx("video",{style:{objectFit:"contain"},width:"100%",height:"100%",src:l.imageUrl,loop:!0,autoPlay:!0,muted:!0,children:o.jsx("track",{kind:"captions"})})},l.id))}),o.jsx(Z,{size:"sm",color:"white",bgColor:"whiteAlpha.400","aria-label":"Previous image",icon:o.jsx(cr,{}),onClick:()=>s(-1),position:"absolute",left:"0",zIndex:"2"}),o.jsx(Z,{size:"sm",color:"white",bgColor:"whiteAlpha.400","aria-label":"Next image",icon:o.jsx(zn,{}),onClick:()=>s(1),position:"absolute",right:"0",zIndex:"2"})]})};function dr(e){const t=e.split(".").pop();return fetch(e).then(n=>{if(!n.ok)throw new Error("Network response was not ok");return n.blob()}).then(async n=>{const a=e.split("/").pop()??"",r=new File([n],a);if(Vn(e))return Kn(r);if(t==="webp")return $n(r);const s=await Ln(r),i=JSON.parse(s==null?void 0:s.prompt),d=JSON.parse(s==null?void 0:s.workflow);return{prompt:i,workflow:d}})}function mr(){return LiteGraph.registered_node_types}const hr=e=>o.jsxs(j,{gap:2,children:[o.jsx(j,{gap:1,alignItems:"center",flexBasis:"200px",children:e.label??e.name}),o.jsx(Tn,{value:e.value,onChange:t=>{var n;return(n=e==null?void 0:e.updateMetaData)==null?void 0:n.call(e,{promptKey:e.promptKey,name:e.name,value:t.target.value})}})]}),fr=e=>o.jsxs(j,{gap:1,direction:"column",children:[o.jsxs(j,{gap:2,children:[o.jsx(j,{gap:1,alignItems:"center",flexBasis:"200px",children:e.label??e.name}),o.jsxs(Xt,{width:"100%",step:e==null?void 0:e.step,value:e.value,min:e==null?void 0:e.min,max:e==null?void 0:e.max,onChange:t=>{var n;return(n=e==null?void 0:e.updateMetaData)==null?void 0:n.call(e,{promptKey:e.promptKey,name:e.name,value:t})},children:[o.jsx(Zt,{}),o.jsxs(Jt,{children:[o.jsx(tn,{}),o.jsx(en,{})]})]})]}),o.jsx(j,{children:o.jsxs(on,{step:e==null?void 0:e.step,value:Number(e.value),min:(e==null?void 0:e.min)??0,max:(e==null?void 0:e.max)??100,onChange:t=>{var n;return(n=e==null?void 0:e.updateMetaData)==null?void 0:n.call(e,{promptKey:e.promptKey,name:e.name,value:t})},children:[o.jsx(ln,{children:o.jsx(cn,{})}),o.jsx(sn,{})]})})]}),vr=e=>{var t;return o.jsxs(j,{gap:2,children:[o.jsx(j,{gap:1,alignItems:"center",flexBasis:"200px",children:e.label??e.name}),o.jsx(Yn,{value:e.value,onChange:n=>{var a;return(a=e==null?void 0:e.updateMetaData)==null?void 0:a.call(e,{promptKey:e.promptKey,name:e.name,value:n.target.value})},children:(t=e==null?void 0:e.options)==null?void 0:t.map((n,a)=>o.jsx("option",{value:n,children:n},`select${e.promptKey}${e.classType}${e.name}${a}`))})]})},xr=e=>o.jsxs(j,{gap:1,direction:"column",children:[o.jsx(j,{children:e.label??e.name}),o.jsx(un,{value:e.value,onChange:t=>{var n;return(n=e==null?void 0:e.updateMetaData)==null?void 0:n.call(e,{promptKey:e.promptKey,name:e.name,value:t.target.value})},rows:5})]});var V=(e=>(e.Input="Input",e.InputSlider="InputSlider",e.Select="Select",e.Textarea="Textarea",e.Checkbox="Checkbox",e.NoSupport="NoSupport",e))(V||{});const gr=e=>o.jsxs(j,{gap:2,children:[o.jsx(j,{gap:1,alignItems:"center",flexBasis:"200px",children:e.label??e.name}),o.jsx(j,{children:"No Support"})]}),yr=e=>o.jsxs(j,{gap:2,children:[o.jsx(j,{gap:1,alignItems:"center",flexBasis:"200px",children:e.label??e.name}),o.jsx(gt,{isChecked:!!e.value,onChange:t=>{var n;(n=e==null?void 0:e.updateMetaData)==null||n.call(e,{promptKey:e.promptKey,name:e.name,value:t.target.checked})}})]}),br={[V.Input]:hr,[V.InputSlider]:fr,[V.Select]:vr,[V.Textarea]:xr,[V.Checkbox]:yr,NoSupport:gr},pr=mr();function Sr(e){var a,r,s,i,d;const t=(a=pr[e.classType])==null?void 0:a.nodeData,n={...((r=t==null?void 0:t.input)==null?void 0:r.required)??{},...((s=t==null?void 0:t.input)==null?void 0:s.optional)??{}}[e.name];return(n==null?void 0:n[0])==="STRING"?(i=n==null?void 0:n[1])!=null&&i.multiline?{type:V.Textarea}:{type:V.Input}:(n==null?void 0:n[0])==="BOOLEAN"?{type:V.Checkbox}:(n==null?void 0:n[0])==="FLOAT"?{...(n==null?void 0:n[1])??{},type:V.InputSlider}:(n==null?void 0:n[0])==="INT"?{...(n==null?void 0:n[1])??{},type:V.InputSlider}:Array.isArray(n==null?void 0:n[0])&&((d=n==null?void 0:n[0])!=null&&d.every(l=>typeof l=="string"))?{options:n==null?void 0:n[0],type:V.Select}:{type:V.NoSupport}}const hn=e=>{const t=Sr(e),n=br[t.type??"Input"];return o.jsxs(Wn,{templateColumns:"max-content 1fr",gap:1,children:[o.jsx(j,{children:o.jsx(Z,{onClick:()=>{var a;return(a=e==null?void 0:e.updateTopField)==null?void 0:a.call(e,{name:e.name,promptKey:e.promptKey,class_type:e.classType})},variant:"text",icon:Ge(e.topFields,{name:e.name,promptKey:e.promptKey,classType:e.classType})?o.jsx(dn,{}):o.jsx(mn,{}),"aria-label":"pin"})}),o.jsx(n,{...e,...t})]})};function wr({metaData:e,updateMetaData:t,topFields:n,updateTopField:a}){const r=e.prompt;return o.jsx(o.Fragment,{children:(n==null?void 0:n.length)>0&&o.jsx(j,{px:2,gap:2,direction:"column",children:n==null?void 0:n.map((s,i)=>{var l,u,h,m;if(!((l=r==null?void 0:r[s.promptKey])!=null&&l.inputs))return null;const d=(h=(u=r==null?void 0:r[s.promptKey])==null?void 0:u.inputs)==null?void 0:h[s.name];return o.jsx(hn,{promptKey:s.promptKey,classType:(m=r==null?void 0:r[s.promptKey])==null?void 0:m.class_type,name:s.name,value:d,updateMetaData:t,updateTopField:a,topFields:n},`formTop${s.name}${i}`)})})})}function Pr({metaData:e,updateMetaData:t,topFields:n,updateTopField:a}){const r=e.prompt,[s,i]=c.useState([]);return c.useEffect(()=>{i(Object.keys(r).map((d,l)=>l))},[r]),o.jsx(Yt,{index:s,onChange:d=>i(d),allowMultiple:!0,children:Object.keys(r).map(d=>{const l=r[d],u=l.inputs,h=Object.keys(u).filter(m=>!Array.isArray(u[m])&&!Ge(n,{name:m,promptKey:d,classType:l.class_type}));return h.length===0?null:o.jsxs(Gt,{borderWidth:1,borderRadius:8,my:2,children:[o.jsxs(Lt,{children:[o.jsx(Dn,{as:"span",flex:"1",textAlign:"left",children:l.class_type}),o.jsx(Ut,{})]}),o.jsx(Wt,{children:o.jsx(j,{px:2,gap:1,direction:"column",children:h==null?void 0:h.map(m=>{const g=u[m];return Ge(n,{name:m,promptKey:d,classType:l.class_type})?null:o.jsx(hn,{promptKey:d,classType:l==null?void 0:l.class_type,value:g,name:m,updateMetaData:t,updateTopField:a,topFields:n,metaData:e},`form${m}`)})})})]},`AccordionItem${d}`)})})}const Ir=[{promptKey:"4",name:"ckpt_name",class_type:"CheckpointLoaderSimple"},{promptKey:"6",name:"text",class_type:"CLIPTextEncode"},{promptKey:"7",name:"text",class_type:"CLIPTextEncode"},{promptKey:"5",name:"width",class_type:"EmptyLatentImage"},{promptKey:"5",name:"height",class_type:"EmptyLatentImage"},{promptKey:"3",name:"steps",class_type:"KSampler"},{promptKey:"3",name:"sampler_name",class_type:"KSampler"},{promptKey:"3",name:"cfg",class_type:"KSampler"}],Ge=(e,t)=>e==null?void 0:e.some(n=>n.promptKey===(t==null?void 0:t.promptKey)&&n.name===(t==null?void 0:t.name)&&n.class_type===t.classType);function kr({metaData:e}){const t=JSON.parse(JSON.stringify(e)),[n,a]=c.useState(Ir),[r,s]=c.useState(t),i=({promptKey:l,name:u,value:h})=>{s(m=>{var g,x,C;return{...m??{},prompt:{...(m==null?void 0:m.prompt)??{},[l]:{...((g=m==null?void 0:m.prompt)==null?void 0:g[l])??{},inputs:{...((C=(x=m.prompt)==null?void 0:x[l])==null?void 0:C.inputs)??{},[u]:h}}}}})},d=l=>{Ge(n,{name:l.name,promptKey:l==null?void 0:l.promptKey,classType:(l==null?void 0:l.class_type)??""})?a(u=>u.filter(h=>h.name!==l.name||h.promptKey!==l.promptKey)):a(u=>[...u,l])};return o.jsxs(j,{direction:"column",align:"stretch",children:[o.jsx(wr,{topFields:n,metaData:r,updateMetaData:i,updateTopField:d}),o.jsx(Pr,{topFields:n,metaData:r,updateMetaData:i,updateTopField:d})]})}const Cr=({media:e})=>{const[t,n]=c.useState(),a=async r=>{try{const s=await dr(`/workspace/view_media?filename=${r.localPath}`);n(s)}catch(s){console.error(s)}};return c.useEffect(()=>{e&&a(e)},[e]),o.jsxs(j,{overflowY:"auto",mb:4,direction:"column",gap:2,flex:1,children:[o.jsxs(Un,{alignItems:"center",columns:2,spacing:2,children:[o.jsxs(j,{alignItems:"center",gap:1,children:[o.jsx(Me,{children:e==null?void 0:e.localPath}),o.jsx(pe,{label:"Donwload image from gallery",children:o.jsx(dt,{href:`/workspace/view_media?filename=${e==null?void 0:e.localPath}`,download:e==null?void 0:e.localPath,children:o.jsx(Z,{size:"sm",icon:o.jsx(Ot,{size:19}),"aria-label":"donwload image from gallery"})})})]}),o.jsxs(j,{gap:1,alignItems:"center",children:[o.jsx(Me,{children:"Create Time:"}),o.jsx(Me,{children:Ft((e==null?void 0:e.createTime)??0,!0)})]})]}),e&&t&&o.jsx(kr,{metaData:t,media:e})]})},Nr=({mediaList:e,media:t})=>{const[n,a]=c.useState();return c.useEffect(()=>{t&&a(t)},[t]),o.jsxs(j,{gap:3,h:"100%",children:[o.jsx(j,{flex:1,children:o.jsx(ur,{media:e.map(r=>({id:r.id,imageUrl:`/workspace/view_media?filename=${r.localPath}`})),currentNum:e==null?void 0:e.findIndex(r=>r.id===(n==null?void 0:n.id)),setMediaAct:r=>a(e==null?void 0:e.find(s=>s.id===r.id))})}),o.jsx(Cr,{media:n})]})},jr=({media:e,isSelecting:t,selectedID:n,onClickMedia:a,onRefreshImagesList:r,coverPath:s,setCoverPath:i})=>{const{curFlowID:l,loadFilePath:u}=c.useContext(Bt),{showDialog:h}=pn();if(e.localPath==null)return null;const m=s!=null&&s===e.localPath;if(l==null)return null;const g=o.jsxs(dt,{isExternal:!0,onClick:()=>a(e),position:"relative",children:[t&&o.jsx(gt,{isChecked:n.includes(e.id),position:"absolute",top:2,left:2}),o.jsx(Gn,{mediaLocalPath:e.localPath,size:180,onBrokenLink:()=>{},autoPlay:!0,isPreview:!0})]});return o.jsxs(Rn,{width:180,mb:2,children:[o.jsx(pe,{label:Ft(e.createTime,!0),children:g}),o.jsx(pe,{label:e.localPath,children:o.jsx(Me,{color:"GrayText",noOfLines:1,children:e.localPath})}),o.jsxs(Ke,{hidden:t,gap:0,children:[o.jsx(pe,{label:"Set as cover",children:o.jsx(Z,{size:"sm",variant:"ghost",icon:m?o.jsx(dn,{size:19}):o.jsx(mn,{size:19}),"aria-label":"set as cover",onClick:()=>{var x;(x=ut)==null||x.updateMetaInfo(l,{coverMediaPath:e.localPath}),i(e.localPath)}})}),o.jsx(Sn,{flexGrow:1,onClick:()=>h("How do you want to load this workflow?",[{label:"Load in new workflow",onClick:()=>{u(e.localPath)},colorScheme:"teal"},{label:"Overwrite current workflow",onClick:()=>u(e.localPath,!0),colorScheme:"red"}]),size:"sm",children:"Load"}),o.jsx(pe,{label:"Donwload image from gallery",children:o.jsx(dt,{href:`/workspace/view_media?filename=${e.localPath}`,download:e.localPath,children:o.jsx(Z,{size:"sm",variant:"ghost",icon:o.jsx(Ot,{size:19}),"aria-label":"donwload image from gallery"})})}),o.jsx(pe,{label:"Remove image from gallery",children:o.jsx(Z,{size:"sm",variant:"ghost",icon:o.jsx(On,{size:19}),"aria-label":"remove image from gallery",colorScheme:"red",onClick:async()=>{var C,w;confirm("Are you sure to remove this image from gallery? (won't delete image on your disk)")&&(await((C=zt)==null?void 0:C.delete(e.id)),m&&(await((w=ut)==null?void 0:w.updateMetaInfo(l,{coverMediaPath:void 0})),i("")),r())}})})]})]})},_r=jr;function Vr({onclose:e}){const{curFlowID:t}=c.useContext(Bt),[n,a]=c.useState(""),[r,s]=c.useState([]),[i,d]=c.useState(!1),[l,u]=c.useState(""),[h,m]=c.useState([]),[g,x]=c.useState(),C=async()=>{var N;if(t==null)return;const I=await((N=zt)==null?void 0:N.listByWorkflowID(t));m(I??[])};if(c.useEffect(()=>{var I;C(),t&&((I=ut)==null||I.get(t).then(N=>{N&&(a(N.name),N!=null&&N.coverMediaPath&&u(N==null?void 0:N.coverMediaPath))}))},[]),t==null)return null;const w=I=>{if(i){r.includes(I.id)?s(r.filter(N=>N!==I.id)):s([...r,I.id]);return}x(I)},P=h.length>0&&r.length===h.length;return o.jsxs(wn,{isOpen:!0,onClose:e,blockScrollOnMount:!0,children:[o.jsx(Pn,{}),o.jsxs(In,{width:"90%",maxWidth:"90vw",height:"90vh",children:[o.jsxs(kn,{children:[o.jsx(Ke,{gap:2,mb:2,children:o.jsxs(Fn,{size:"md",mr:2,children:[!!g&&o.jsx(Z,{onClick:()=>x(void 0),variant:"ghost",mr:1,"aria-label":"back",icon:o.jsx(ir,{})}),"Gallery - ",n]})}),i&&o.jsxs(Ke,{gap:3,children:[o.jsx(gt,{isChecked:P,onChange:()=>{s(P?[]:h.map(I=>I.id))},children:"All"}),o.jsxs(Me,{fontSize:16,children:[r.length," Selected"]}),o.jsx(Z,{size:"sm",icon:o.jsx(Bn,{size:19}),onClick:()=>d(!1),"aria-label":"cancel"})]})]}),o.jsx(Cn,{}),o.jsx(Nn,{overflowY:"auto",children:g?o.jsx(Nr,{mediaList:h,media:g}):o.jsx(Ke,{wrap:"wrap",children:h.map(I=>o.jsx(_r,{selectedID:r,media:I,isSelecting:i,onClickMedia:w,onRefreshImagesList:C,coverPath:l,setCoverPath:u},I.id))})})]})]})}export{Vr as default};
