import{c as we,r as h,j as g,b as _,u as q,t as J,s as Ce,g as d,k as w,m as ie,Z as Q,f as de,e as xe,o as Se,D as Ee,d as Ie,z as Pe,a5 as Me}from"./input.js";import{a1 as De,a2 as fe,f as he,_ as Ue}from"./App-MJrK7SYH.js";import{G as _e,I as Ae}from"./chunk-JARCRF6W-po8hqWTL.js";var[ft,je]=we({name:"CheckboxGroupContext",strict:!1});function Fe(e){const[n,t]=h.useState(e),[a,c]=h.useState(!1);return e!==n&&(c(!0),t(e)),a}function Re(e){return g.jsx(_.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...e,children:g.jsx("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}function Le(e){return g.jsx(_.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...e,children:g.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function Ve(e){const{isIndeterminate:n,isChecked:t,...a}=e,c=n?Le:Re;return t||n?g.jsx(_.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:g.jsx(c,{...a})}):null}var Be={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Ne=()=>typeof document<"u",ce=!1,N=null,P=!1,Y=!1,Z=new Set;function ee(e,n){Z.forEach(t=>t(e,n))}var Oe=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function Te(e){return!(e.metaKey||!Oe&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function le(e){P=!0,Te(e)&&(N="keyboard",ee("keyboard",e))}function U(e){if(N="pointer",e.type==="mousedown"||e.type==="pointerdown"){P=!0;const n=e.composedPath?e.composedPath()[0]:e.target;let t=!1;try{t=n.matches(":focus-visible")}catch{}if(t)return;ee("pointer",e)}}function Ge(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function Ke(e){Ge(e)&&(P=!0,N="virtual")}function We(e){e.target===window||e.target===document||(!P&&!Y&&(N="virtual",ee("virtual",e)),P=!1,Y=!1)}function $e(){P=!1,Y=!0}function ue(){return N!=="pointer"}function ze(){if(!Ne()||ce)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...t){P=!0,e.apply(this,t)},document.addEventListener("keydown",le,!0),document.addEventListener("keyup",le,!0),document.addEventListener("click",Ke,!0),window.addEventListener("focus",We,!0),window.addEventListener("blur",$e,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",U,!0),document.addEventListener("pointermove",U,!0),document.addEventListener("pointerup",U,!0)):(document.addEventListener("mousedown",U,!0),document.addEventListener("mousemove",U,!0),document.addEventListener("mouseup",U,!0)),ce=!0}function He(e){ze(),e(ue());const n=()=>e(ue());return Z.add(n),()=>{Z.delete(n)}}function Xe(e,n=[]){const t=Object.assign({},e);for(const a of n)a in t&&delete t[a];return t}function qe(e={}){const n=De(e),{isDisabled:t,isReadOnly:a,isRequired:c,isInvalid:o,id:s,onBlur:r,onFocus:f,"aria-describedby":l}=n,{defaultChecked:u,isChecked:p,isFocusable:b,onChange:y,isIndeterminate:m,name:C,value:O,tabIndex:T=void 0,"aria-label":A,"aria-labelledby":j,"aria-invalid":E,...z}=e,F=Xe(z,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),R=q(y),G=q(r),L=q(f),[M,H]=h.useState(!1),[I,K]=h.useState(!1),[V,te]=h.useState(!1),[B,D]=h.useState(!1);h.useEffect(()=>He(H),[]);const x=h.useRef(null),[ne,me]=h.useState(!0),[pe,W]=h.useState(!!u),X=p!==void 0,v=X?p:pe,oe=h.useCallback(i=>{if(a||t){i.preventDefault();return}X||W(v?i.target.checked:m?!0:i.target.checked),R==null||R(i)},[a,t,v,X,m,R]);J(()=>{x.current&&(x.current.indeterminate=!!m)},[m]),Ce(()=>{t&&K(!1)},[t,K]),J(()=>{const i=x.current;if(!(i!=null&&i.form))return;const k=()=>{W(!!u)};return i.form.addEventListener("reset",k),()=>{var S;return(S=i.form)==null?void 0:S.removeEventListener("reset",k)}},[]);const ae=t&&!b,re=h.useCallback(i=>{i.key===" "&&D(!0)},[D]),se=h.useCallback(i=>{i.key===" "&&D(!1)},[D]);J(()=>{if(!x.current)return;x.current.checked!==v&&W(x.current.checked)},[x.current]);const ge=h.useCallback((i={},k=null)=>{const S=$=>{I&&$.preventDefault(),D(!0)};return{...i,ref:k,"data-active":d(B),"data-hover":d(V),"data-checked":d(v),"data-focus":d(I),"data-focus-visible":d(I&&M),"data-indeterminate":d(m),"data-disabled":d(t),"data-invalid":d(o),"data-readonly":d(a),"aria-hidden":!0,onMouseDown:w(i.onMouseDown,S),onMouseUp:w(i.onMouseUp,()=>D(!1)),onMouseEnter:w(i.onMouseEnter,()=>te(!0)),onMouseLeave:w(i.onMouseLeave,()=>te(!1))}},[B,v,t,I,M,V,m,o,a]),ve=h.useCallback((i={},k=null)=>({...i,ref:k,"data-active":d(B),"data-hover":d(V),"data-checked":d(v),"data-focus":d(I),"data-focus-visible":d(I&&M),"data-indeterminate":d(m),"data-disabled":d(t),"data-invalid":d(o),"data-readonly":d(a)}),[B,v,t,I,M,V,m,o,a]),ye=h.useCallback((i={},k=null)=>({...F,...i,ref:ie(k,S=>{S&&me(S.tagName==="LABEL")}),onClick:w(i.onClick,()=>{var S;ne||((S=x.current)==null||S.click(),requestAnimationFrame(()=>{var $;($=x.current)==null||$.focus({preventScroll:!0})}))}),"data-disabled":d(t),"data-checked":d(v),"data-invalid":d(o)}),[F,t,v,o,ne]),ke=h.useCallback((i={},k=null)=>({...i,ref:ie(x,k),type:"checkbox",name:C,value:O,id:s,tabIndex:T,onChange:w(i.onChange,oe),onBlur:w(i.onBlur,G,()=>K(!1)),onFocus:w(i.onFocus,L,()=>K(!0)),onKeyDown:w(i.onKeyDown,re),onKeyUp:w(i.onKeyUp,se),required:c,checked:v,disabled:ae,readOnly:a,"aria-label":A,"aria-labelledby":j,"aria-invalid":E?!!E:o,"aria-describedby":l,"aria-disabled":t,style:Be}),[C,O,s,oe,G,L,re,se,c,v,ae,a,A,j,E,o,l,t,T]),be=h.useCallback((i={},k=null)=>({...i,ref:k,onMouseDown:w(i.onMouseDown,Je),"data-disabled":d(t),"data-checked":d(v),"data-invalid":d(o)}),[v,t,o]);return{state:{isInvalid:o,isFocused:I,isChecked:v,isActive:B,isHovered:V,isIndeterminate:m,isDisabled:t,isReadOnly:a,isRequired:c},getRootProps:ye,getCheckboxProps:ge,getIndicatorProps:ve,getInputProps:ke,getLabelProps:be,htmlProps:F}}function Je(e){e.preventDefault(),e.stopPropagation()}var Ye={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},Ze={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},Qe=Q({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),et=Q({from:{opacity:0},to:{opacity:1}}),tt=Q({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),nt=de(function(n,t){const a=je(),c={...a,...n},o=xe("Checkbox",c),s=Se(n),{spacing:r="0.5rem",className:f,children:l,iconColor:u,iconSize:p,icon:b=g.jsx(Ve,{}),isChecked:y,isDisabled:m=a==null?void 0:a.isDisabled,onChange:C,inputProps:O,...T}=s;let A=y;a!=null&&a.value&&s.value&&(A=a.value.includes(s.value));let j=C;a!=null&&a.onChange&&s.value&&(j=Ee(a.onChange,C));const{state:E,getInputProps:z,getCheckboxProps:F,getLabelProps:R,getRootProps:G}=qe({...T,isDisabled:m,isChecked:A,onChange:j}),L=Fe(E.isChecked),M=h.useMemo(()=>({animation:L?E.isIndeterminate?`${et} 20ms linear, ${tt} 200ms linear`:`${Qe} 200ms linear`:void 0,fontSize:p,color:u,...o.icon}),[u,p,L,E.isIndeterminate,o.icon]),H=h.cloneElement(b,{__css:M,isIndeterminate:E.isIndeterminate,isChecked:E.isChecked});return g.jsxs(_.label,{__css:{...Ze,...o.container},className:Ie("chakra-checkbox",f),...G(),children:[g.jsx("input",{className:"chakra-checkbox__input",...z(O,t)}),g.jsx(_.span,{__css:{...Ye,...o.control},className:"chakra-checkbox__control",...F(),children:H}),l&&g.jsx(_.span,{className:"chakra-checkbox__label",...R(),__css:{marginStart:r,...o.label},children:l})]})});nt.displayName="Checkbox";var ot=de(function(n,t){const{columns:a,spacingX:c,spacingY:o,spacing:s,minChildWidth:r,...f}=n,l=Pe(),u=r?rt(r,l):st(a);return g.jsx(_e,{ref:t,gap:s,columnGap:c,rowGap:o,templateColumns:u,...f})});ot.displayName="SimpleGrid";function at(e){return typeof e=="number"?`${e}px`:e}function rt(e,n){return fe(e,t=>{const a=Me("sizes",t,at(t))(n);return t===null?null:`repeat(auto-fit, minmax(${a}, 1fr))`})}function st(e){return fe(e,n=>n===null?null:`repeat(${n}, minmax(0, 1fr))`)}var ht=he("chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]),mt=he("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);function pt(e){return new Promise((n,t)=>{const a=new FileReader;a.onload=c=>{const o=new Uint8Array(c.target.result),s=new DataView(o.buffer);s.getUint32(0)!==2303741511&&(console.error("Not a valid PNG file"),t());let r=8;const f={};for(;r<o.length;){const l=s.getUint32(r),u=String.fromCharCode(...o.slice(r+4,r+8));if(u==="tEXt"||u=="comf"){let p=r+8;for(;o[p]!==0;)p++;const b=String.fromCharCode(...o.slice(r+8,p)),y=o.slice(p+1,r+8+l),m=Array.from(y).map(C=>String.fromCharCode(C)).join("");f[b]=m}r+=12+l}n(f)},a.readAsArrayBuffer(e)})}function it(e){const n=new Uint16Array(e.slice(0,2))[0]===18761;function t(s,r,f){const l=e.slice(s,s+f);if(f===2)return new DataView(l.buffer,l.byteOffset,l.byteLength).getUint16(0,r);if(f===4)return new DataView(l.buffer,l.byteOffset,l.byteLength).getUint32(0,r)}const a=t(4,n,4);function c(s){const r=t(s,n,2),f={};for(let l=0;l<r;l++){const u=s+2+l*12,p=t(u,n,2),b=t(u+2,n,2),y=t(u+4,n,4),m=t(u+8,n,4);let C;b===2&&(C=String.fromCharCode(...e.slice(m,m+y-1))),f[p]=C}return f}return c(a)}function gt(e){return new Promise(n=>{const t=new FileReader;t.onload=a=>{var f;const c=new Uint8Array((f=a==null?void 0:a.target)==null?void 0:f.result),o=new DataView(c.buffer);if(o.getUint32(0)!==1380533830||o.getUint32(8)!==1464156752){console.error("Not a valid WEBP file"),n();return}let s=12;const r={};for(;s<c.length;){const l=o.getUint32(s+4,!0);if(String.fromCharCode(...c.slice(s,s+4))==="EXIF"){String.fromCharCode(...c.slice(s+8,s+8+6))=="Exif\0\0"&&(s+=6);const p=it(c.slice(s+8,s+8+l));for(const b in p){const y=p[b],m=y.indexOf(":");r[y.slice(0,m)]=y.slice(m+1)}}s+=8+l}n(r)},t.readAsArrayBuffer(e)})}function vt(e){return!!(e!=null&&e.endsWith(".webm")||e!=null&&e.endsWith(".mp4"))}function yt(e){return new Promise(n=>{const t=new FileReader;t.onload=a=>{const c=new Uint8Array(a.target.result),o=new DataView(c.buffer),s=new TextDecoder;if(o.getUint32(0)==440786851){let r=12;for(;r<c.length-16;){if(o.getUint16(r)==17543&&String.fromCharCode(...c.slice(r-7,r))==="COMMENT"){const l=o.getUint32(r+2),u=Math.clz32(l)+1;if(u<4){const p=l>>8*(4-u)&~(1<<7*u),b=s.decode(c.slice(r+2+u,r+2+u+p)),y=JSON.parse(b);n(y);return}}r+=1}}else if(o.getUint32(4)==1718909296&&o.getUint32(8)==1769172845){let r=c.length-4;for(;r>16;){if(o.getUint32(r)==1684108385&&o.getUint32(r-8)==2841865588){o.getUint32(r+4),o.getUint32(r+8);const f=o.getUint32(r-4)-4*4,l=s.decode(c.slice(r+12,r+12+f)),u=JSON.parse(l);n(u);return}r-=1}}else{console.error("Unknown magic: "+o.getUint32(0)),n();return}},t.readAsArrayBuffer(e)})}function kt({mediaLocalPath:e,size:n,autoPlay:t,hideBrokenImage:a,onBrokenLink:c}){const[o,s]=h.useState(!0);return h.useEffect(()=>{a&&(async()=>{try{if(!(await fetch(`/workspace/view_media?filename=${e}`)).ok)throw new Error("Media not found");s(!0)}catch{s(!1),c==null||c()}})()},[]),o?Ue(e)?g.jsx(Ae,{borderRadius:3,boxSize:`${n}px`,objectFit:"cover",src:`/workspace/view_media?filename=${e}`,alt:"workflow image renamed or moved from output folder"}):g.jsx("video",{width:n,height:n,src:`/workspace/view_media?filename=${e}`,loop:!0,autoPlay:t??!1,muted:!0,children:g.jsx("track",{kind:"captions"})}):null}export{nt as C,mt as I,kt as M,ot as S,ht as a,yt as b,gt as c,pt as g,vt as i};
